import{r as m,a as o,g as c_,b as Nn,j as vn}from"./jsx-runtime-DDP7-w6c.js";import{r as mt,i as Ls,s as xb,x as se,u as Ib,d as T,v as Be,y as _a,a as ne,T as G,z as vr,C as Nb,I as de,B as rt,A as Is,D as $b,F as _d,G as Cd,H as le,J as wd,K as da,U as _r,N as Wt,e as rr,O as u_,Q as yr,R as it,V as Us,c as $n,W as nt,X as Tn,Y as Pd,Z as ts,_ as Er,b as ye,$ as Lo,a0 as Gt,a1 as Gs,a2 as nn,a3 as nr,a4 as rn,a5 as d_,w as Ob,a6 as Lb,E as Nt,a7 as Fu,p as Mb,a8 as h_,a9 as f_,aa as p_,ab as Mo,ac as m_,ad as Js,ae as Fb,af as Xs,ag as Ys,ah as Bt,ai as g_,aj as b_,ak as y_,al as v_,am as E_,an as S_,ao as Zs,ap as Fo,aq as Ga,ar as rs,as as Du,at as __,au as C_,av as io,aw as w_,ax as P_,ay as A_,az as Nf,aA as T_,aB as Db,aC as Hb,S as R_,k as k_,l as x_,m as I_,o as N_,L as $_,M as O_,j as L_,aD as Bb,aE as M_,aF as F_,aG as D_,aH as H_,aI as B_,aJ as W_,aK as U_,aL as j_,aM as q_,aN as V_,P as K_,aO as z_,aP as G_,aQ as J_,aR as X_}from"./Page-C1Otci6Z.js";import{S as Ad,a as Y_,F as Qs,b as Td,I as Z_,c as Q_,m as eC,P as Wb,d as tC,E as rC,A as nC,p as aC}from"./styles-CBAcYucQ.js";import{B as sC,T as Ub,a as jb,L as iC,b as oC}from"./List-BG17b_l7.js";import{a as wi}from"./index-C2nxS5mh.js";import{q as lC,D as cC,s as uC,t as dC,V as hC,v as fC,w as pC,x as mC,y as gC,A as bC,I as yC,z as vC,B as EC,C as Rd,n as SC,R as qb,E as _C,F as CC,G as Hu,L as wC,H as PC,M as AC,N as TC,J as RC,K as kC,O as Vb,P as xC,Q as IC,T as NC,S as $C,U as $f,W as OC,X as LC,i as MC,Y as FC,m as DC,Z as HC,$ as BC,a0 as WC,a1 as UC,a2 as jC,a as qC,a3 as VC,a4 as KC,a5 as zC,a6 as GC,a7 as JC,a8 as XC,a9 as YC,aa as ZC,ab as QC,ac as ew,c as Kb,e as tw,ad as rw,ae as nw,af as aw,u as sw,ag as iw,ah as ow,ai as lw,aj as cw,ak as uw,al as dw,j as zb,am as hw,an as fw,ao as pw,b as mw}from"./components-BgFg3hp0.js";import{c as gw,s as bw,a as yw,R as vw}from"./browser-D9NYnRAA.js";import{S as Ew}from"./scroll-restoration-C8L2_2AT.js";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Sw=ww,_w=Pw,Cw=Object.prototype.toString,Pi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function ww(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var r={},n=t||{},a=n.decode||Aw,s=0;s<e.length;){var i=e.indexOf("=",s);if(i===-1)break;var l=e.indexOf(";",s);if(l===-1)l=e.length;else if(l<i){s=e.lastIndexOf(";",i-1)+1;continue}var c=e.slice(s,i).trim();if(r[c]===void 0){var u=e.slice(i+1,l).trim();u.charCodeAt(0)===34&&(u=u.slice(1,-1)),r[c]=kw(u,a)}s=l+1}return r}function Pw(e,t,r){var n=r||{},a=n.encode||Tw;if(typeof a!="function")throw new TypeError("option encode is invalid");if(!Pi.test(e))throw new TypeError("argument name is invalid");var s=a(t);if(s&&!Pi.test(s))throw new TypeError("argument val is invalid");var i=e+"="+s;if(n.maxAge!=null){var l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(l)}if(n.domain){if(!Pi.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!Pi.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){var c=n.expires;if(!Rw(c)||isNaN(c.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+c.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.partitioned&&(i+="; Partitioned"),n.priority){var u=typeof n.priority=="string"?n.priority.toLowerCase():n.priority;switch(u){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(n.sameSite){var d=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(d){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i}function Aw(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function Tw(e){return encodeURIComponent(e)}function Rw(e){return Cw.call(e)==="[object Date]"||e instanceof Date}function kw(e,t){try{return t(e)}catch{return e}}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Of={};function Gb(e,t){!e&&!Of[t]&&(Of[t]=!0,console.warn(t))}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const xw=({sign:e,unsign:t})=>(r,n={})=>{let{secrets:a=[],...s}={path:"/",sameSite:"lax",...n};return Mw(r,s.expires),{get name(){return r},get isSigned(){return a.length>0},get expires(){return typeof s.maxAge<"u"?new Date(Date.now()+s.maxAge*1e3):s.expires},async parse(i,l){if(!i)return null;let c=Sw(i,{...s,...l});return r in c?c[r]===""?"":await Nw(t,c[r],a):null},async serialize(i,l){return _w(r,i===""?"":await Iw(e,i,a),{...s,...l})}}},kd=e=>e!=null&&typeof e.name=="string"&&typeof e.isSigned=="boolean"&&typeof e.parse=="function"&&typeof e.serialize=="function";async function Iw(e,t,r){let n=$w(t);return r.length>0&&(n=await e(n,r[0])),n}async function Nw(e,t,r){if(r.length>0){for(let n of r){let a=await e(t,n);if(a!==!1)return Lf(a)}return null}return Lf(t)}function $w(e){return btoa(Lw(encodeURIComponent(JSON.stringify(e))))}function Lf(e){try{return JSON.parse(decodeURIComponent(Ow(atob(e))))}catch{return{}}}function Ow(e){let t=e.toString(),r="",n=0,a,s;for(;n<t.length;)a=t.charAt(n++),/[\w*+\-./@]/.exec(a)?r+=a:(s=a.charCodeAt(0),s<256?r+="%"+Mf(s,2):r+="%u"+Mf(s,4).toUpperCase());return r}function Mf(e,t){let r=e.toString(16);for(;r.length<t;)r="0"+r;return r}function Lw(e){let t=e.toString(),r="",n=0,a,s;for(;n<t.length;){if(a=t.charAt(n++),a==="%"){if(t.charAt(n)==="u"){if(s=t.slice(n+1,n+5),/^[\da-f]{4}$/i.exec(s)){r+=String.fromCharCode(parseInt(s,16)),n+=5;continue}}else if(s=t.slice(n,n+2),/^[\da-f]{2}$/i.exec(s)){r+=String.fromCharCode(parseInt(s,16)),n+=2;continue}}r+=a}return r}function Mw(e,t){Gb(!t,`The "${e}" cookie has an "expires" property set. This will cause the expires value to not be updated when the session is committed. Instead, you should set the expires value when serializing the cookie. You can use \`commitSession(session, { expires })\` if using a session storage object, or \`cookie.serialize("value", { expires })\` if you're using the cookie directly.`)}function Do(e){const t=unescape(encodeURIComponent(e));return Uint8Array.from(t,(r,n)=>t.charCodeAt(n))}function Fw(e){const t=String.fromCharCode.apply(null,e);return decodeURIComponent(escape(t))}function oo(...e){const t=new Uint8Array(e.reduce((n,a)=>n+a.length,0));let r=0;for(const n of e)t.set(n,r),r+=n.length;return t}function Dw(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ff(e){return e instanceof Uint8Array?t=>e[t]:e}function Ec(e,t,r,n,a){const s=Ff(e),i=Ff(r);for(let l=0;l<a;++l)if(s(t+l)!==i(n+l))return!1;return!0}function Hw(e){const t=new Array(256).fill(e.length);if(e.length>1)for(let r=0;r<e.length-1;r++)t[e[r]]=e.length-1-r;return t}const Qr=Symbol("Match");class xd{constructor(t){this._lookbehind=new Uint8Array,typeof t=="string"?this._needle=t=Do(t):this._needle=t,this._lastChar=t[t.length-1],this._occ=Hw(t)}feed(t){let r=0,n;const a=[];for(;r!==t.length;)[r,...n]=this._feed(t,r),a.push(...n);return a}end(){const t=this._lookbehind;return this._lookbehind=new Uint8Array,t}_feed(t,r){const n=[];let a=-this._lookbehind.length;if(a<0){for(;a<0&&a<=t.length-this._needle.length;){const s=this._charAt(t,a+this._needle.length-1);if(s===this._lastChar&&this._memcmp(t,a,this._needle.length-1))return a>-this._lookbehind.length&&n.push(this._lookbehind.slice(0,this._lookbehind.length+a)),n.push(Qr),this._lookbehind=new Uint8Array,[a+this._needle.length,...n];a+=this._occ[s]}if(a<0)for(;a<0&&!this._memcmp(t,a,t.length-a);)a++;if(a>=0)n.push(this._lookbehind),this._lookbehind=new Uint8Array;else{const s=this._lookbehind.length+a;return s>0&&(n.push(this._lookbehind.slice(0,s)),this._lookbehind=this._lookbehind.slice(s)),this._lookbehind=Uint8Array.from(new Array(this._lookbehind.length+t.length),(i,l)=>this._charAt(t,l-this._lookbehind.length)),[t.length,...n]}}for(a+=r;a<=t.length-this._needle.length;){const s=t[a+this._needle.length-1];if(s===this._lastChar&&t[a]===this._needle[0]&&Ec(this._needle,0,t,a,this._needle.length-1))return a>r&&n.push(t.slice(r,a)),n.push(Qr),[a+this._needle.length,...n];a+=this._occ[s]}if(a<t.length){for(;a<t.length&&(t[a]!==this._needle[0]||!Ec(t,a,this._needle,0,t.length-a));)++a;a<t.length&&(this._lookbehind=t.slice(a))}return a>0&&n.push(t.slice(r,a<t.length?a:t.length)),[t.length,...n]}_charAt(t,r){return r<0?this._lookbehind[this._lookbehind.length+r]:t[r]}_memcmp(t,r,n){return Ec(this._charAt.bind(this,t),r,this._needle,0,n)}}class Bw{constructor(t,r){this._readableStream=r,this._search=new xd(t)}async*[Symbol.asyncIterator](){const t=this._readableStream.getReader();try{for(;;){const n=await t.read();if(n.done)break;yield*this._search.feed(n.value)}const r=this._search.end();r.length&&(yield r)}finally{t.releaseLock()}}}const Ww=Function.prototype.apply.bind(oo,void 0),Jb=Do("--"),Ms=Do(`\r
`);function Uw(e){const t=e.split(";").map(n=>n.trim());if(t.shift()!=="form-data")throw new Error('malformed content-disposition header: missing "form-data" in `'+JSON.stringify(t)+"`");const r={};for(const n of t){const a=n.split("=",2);if(a.length!==2)throw new Error("malformed content-disposition header: key-value pair not found - "+n+" in `"+e+"`");const[s,i]=a;if(i[0]==='"'&&i[i.length-1]==='"')r[s]=i.slice(1,-1).replace(/\\"/g,'"');else if(i[0]!=='"'&&i[i.length-1]!=='"')r[s]=i;else if(i[0]==='"'&&i[i.length-1]!=='"'||i[0]!=='"'&&i[i.length-1]==='"')throw new Error("malformed content-disposition header: mismatched quotations in `"+e+"`")}if(!r.name)throw new Error("malformed content-disposition header: missing field name in `"+e+"`");return r}function jw(e){const t=[];let r=!1,n;for(;typeof(n=e.shift())<"u";){const a=n.indexOf(":");if(a===-1)throw new Error("malformed multipart-form header: missing colon");const s=n.slice(0,a).trim().toLowerCase(),i=n.slice(a+1).trim();switch(s){case"content-disposition":r=!0,t.push(...Object.entries(Uw(i)));break;case"content-type":t.push(["contentType",i])}}if(!r)throw new Error("malformed multipart-form header: missing content-disposition");return Object.fromEntries(t)}async function qw(e,t){let r=!0,n=!1;const a=[[]],s=new xd(Ms);for(;;){const i=await e.next();if(i.done)throw new Error("malformed multipart-form data: unexpected end of stream");if(r&&i.value!==Qr&&Dw(i.value.slice(0,2),Jb))return[void 0,new Uint8Array];let l;if(i.value!==Qr)l=i.value;else if(!n)l=t;else throw new Error("malformed multipart-form data: unexpected boundary");if(!l.length)continue;r&&(r=!1);const c=s.feed(l);for(const[u,d]of c.entries()){const h=d===Qr;if(!(!h&&!d.length)){if(n&&h)return c.push(s.end()),[a.filter(f=>f.length).map(Ww).map(Fw),oo(...c.slice(u+1).map(f=>f===Qr?Ms:f))];(n=h)?a.push([]):a[a.length-1].push(d)}}}}async function*Vw(e,t){const r=oo(Jb,Do(t)),n=new Bw(r,e)[Symbol.asyncIterator]();for(;;){const s=await n.next();if(s.done)return;if(s.value===Qr)break}const a=new xd(Ms);for(;;){let u=function(p){const g=[];for(const b of a.feed(p))c&&g.push(Ms),(c=b===Qr)||g.push(b);return oo(...g)};const[s,i]=await qw(n,r);if(!s)return;async function l(){const p=await n.next();if(p.done)throw new Error("malformed multipart-form data: unexpected end of stream");return p}let c=!1,d=!1;async function h(){const p=await l();let g;if(p.value!==Qr)g=p.value;else if(!c)g=Ms;else return d=!0,{value:a.end()};return{value:u(g)}}const f=[{value:u(i)}];for(yield{...jw(s),data:{[Symbol.asyncIterator](){return this},async next(){for(;;){const p=f.shift();if(!p)break;if(p.value.length>0)return p}for(;;){if(d)return{done:d,value:void 0};const p=await h();if(p.value.length>0)return p}}}};!d;)f.push(await h())}}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kw(...e){return async t=>{for(let r of e){let n=await r(t);if(typeof n<"u"&&n!==null)return n}}}async function zw(e,t){let r=e.headers.get("Content-Type")||"",[n,a]=r.split(/\s*;\s*boundary=/);if(!e.body||!a||n!=="multipart/form-data")throw new TypeError("Could not parse content as FormData.");let s=new FormData,i=Vw(e.body,a);for await(let l of i){if(l.done)break;typeof l.filename=="string"&&(l.filename=l.filename.split(/[/\\]/).pop());let c=await t(l);typeof c<"u"&&c!==null&&s.append(l.name,c)}return s}/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dt.apply(this,arguments)}var Df;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Df||(Df={}));function Ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Id(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Gw(){return Math.random().toString(36).substr(2,8)}function Hf(e,t,r,n){return r===void 0&&(r=null),dt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ei(t):t,{state:r,key:t&&t.key||n||Gw()})}function Bu(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ei(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var ze;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ze||(ze={}));const Jw=new Set(["lazy","caseSensitive","path","id","index","children"]);function Xw(e){return e.index===!0}function Xb(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((a,s)=>{let i=[...r,s],l=typeof a.id=="string"?a.id:i.join("-");if(Ht(a.index!==!0||!a.children,"Cannot specify children on an index route"),Ht(!n[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),Xw(a)){let c=dt({},a,t(a),{id:l});return n[l]=c,c}else{let c=dt({},a,t(a),{id:l,children:void 0});return n[l]=c,a.children&&(c.children=Xb(a.children,t,i,n)),c}})}function Wu(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?ei(t):t,a=Ho(n.pathname||"/",r);if(a==null)return null;let s=Yb(e);Yw(s);let i=null;for(let l=0;i==null&&l<s.length;++l){let c=cP(a);i=iP(s[l],c)}return i}function Yb(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(s,i,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};c.relativePath.startsWith("/")&&(Ht(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Fs([n,c.relativePath]),d=r.concat(c);s.children&&s.children.length>0&&(Ht(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Yb(s.children,t,d,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:aP(u,s.index),routesMeta:d})};return e.forEach((s,i)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,i);else for(let c of Zb(s.path))a(s,i,c)}),t}function Zb(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=Zb(n.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Yw(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:sP(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Zw=/^:[\w-]+$/,Qw=3,eP=2,tP=1,rP=10,nP=-2,Bf=e=>e==="*";function aP(e,t){let r=e.split("/"),n=r.length;return r.some(Bf)&&(n+=nP),t&&(n+=eP),r.filter(a=>!Bf(a)).reduce((a,s)=>a+(Zw.test(s)?Qw:s===""?tP:rP),n)}function sP(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function iP(e,t){let{routesMeta:r}=e,n={},a="/",s=[];for(let i=0;i<r.length;++i){let l=r[i],c=i===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",d=oP({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u);if(!d)return null;Object.assign(n,d.params);let h=l.route;s.push({params:n,pathname:Fs([a,d.pathname]),pathnameBase:pP(Fs([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=Fs([a,d.pathnameBase]))}return s}function oP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=lP(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,h)=>{let{paramName:f,isOptional:p}=d;if(f==="*"){let b=l[h]||"";i=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const g=l[h];return p&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:e}}function lP(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Id(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function cP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Id(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ho(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function uP(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?ei(e):e;return{pathname:r?r.startsWith("/")?r:dP(r,t):t,search:mP(n),hash:gP(a)}}function dP(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Sc(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qb(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function hP(e,t){let r=Qb(e);return t?r.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function fP(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ei(e):(a=dt({},e),Ht(!a.pathname||!a.pathname.includes("?"),Sc("?","pathname","search",a)),Ht(!a.pathname||!a.pathname.includes("#"),Sc("#","pathname","hash",a)),Ht(!a.search||!a.search.includes("#"),Sc("#","search","hash",a)));let s=e===""||a.pathname==="",i=s?"/":a.pathname,l;if(i==null)l=r;else{let h=t.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=uP(a,l),u=i&&i!=="/"&&i.endsWith("/"),d=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Fs=e=>e.join("/").replace(/\/\/+/g,"/"),pP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Nd=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r,a=new Headers(n.headers);return a.has("Content-Type")||a.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(t),dt({},n,{headers:a}))};class Wf extends Error{}class bP{constructor(t,r){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],Ht(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let n;this.abortPromise=new Promise((s,i)=>n=i),this.controller=new AbortController;let a=()=>n(new Wf("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",a),this.controller.signal.addEventListener("abort",a),this.data=Object.entries(t).reduce((s,i)=>{let[l,c]=i;return Object.assign(s,{[l]:this.trackPromise(l,c)})},{}),this.done&&this.unlistenAbortSignal(),this.init=r}trackPromise(t,r){if(!(r instanceof Promise))return r;this.deferredKeys.push(t),this.pendingKeysSet.add(t);let n=Promise.race([r,this.abortPromise]).then(a=>this.onSettle(n,t,void 0,a),a=>this.onSettle(n,t,a));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,a){if(this.controller.signal.aborted&&n instanceof Wf)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n);if(this.pendingKeysSet.delete(r),this.done&&this.unlistenAbortSignal(),n===void 0&&a===void 0){let s=new Error('Deferred data for key "'+r+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(t,"_error",{get:()=>s}),this.emit(!1,r),Promise.reject(s)}return a===void 0?(Object.defineProperty(t,"_error",{get:()=>n}),this.emit(!1,r),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>a}),this.emit(!1,r),a)}emit(t,r){this.subscribers.forEach(n=>n(t,r))}subscribe(t){return this.subscribers.add(t),()=>this.subscribers.delete(t)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((t,r)=>this.pendingKeysSet.delete(r)),this.emit(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(a=>{this.subscribe(s=>{t.removeEventListener("abort",n),(s||this.done)&&a(s)})})}return r}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return Ht(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,a]=r;return Object.assign(t,{[n]:vP(a)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function yP(e){return e instanceof Promise&&e._tracked===!0}function vP(e){if(!yP(e))return e;if(e._error)throw e._error;return e._data}const EP=function(t,r){r===void 0&&(r={});let n=typeof r=="number"?{status:r}:r;return new bP(t,n)},ey=function(t,r){r===void 0&&(r=302);let n=r;typeof n=="number"?n={status:n}:typeof n.status>"u"&&(n.status=302);let a=new Headers(n.headers);return a.set("Location",t),new Response(null,dt({},n,{headers:a}))},SP=(e,t)=>{let r=ey(e,t);return r.headers.set("X-Remix-Reload-Document","true"),r};class $d{constructor(t,r,n,a){a===void 0&&(a=!1),this.status=t,this.statusText=r||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function On(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const ty=["post","put","patch","delete"],_P=new Set(ty),CP=["get",...ty],wP=new Set(CP),PP=new Set([301,302,303,307,308]),AP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TP=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),lo=Symbol("deferred");function RP(e,t){Ht(e.length>0,"You must provide a non-empty routes array to createStaticHandler");let r={},n=(t?t.basename:null)||"/",a;if(t!=null&&t.mapRouteProperties)a=t.mapRouteProperties;else if(t!=null&&t.detectErrorBoundary){let f=t.detectErrorBoundary;a=p=>({hasErrorBoundary:f(p)})}else a=TP;let s=dt({v7_relativeSplatPath:!1,v7_throwAbortReason:!1},t?t.future:null),i=Xb(e,a,void 0,r);async function l(f,p){let{requestContext:g}=p===void 0?{}:p,b=new URL(f.url),v=f.method,y=Hf("",Bu(b),null,"default"),E=Wu(i,y,n);if(!Kf(v)&&v!=="HEAD"){let _=pr(405,{method:v}),{matches:R,route:x}=Vf(i);return{basename:n,location:y,matches:R,loaderData:{},actionData:null,errors:{[x.id]:_},statusCode:_.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}else if(!E){let _=pr(404,{pathname:y.pathname}),{matches:R,route:x}=Vf(i);return{basename:n,location:y,matches:R,loaderData:{},actionData:null,errors:{[x.id]:_},statusCode:_.status,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}let S=await u(f,y,E,g);return Va(S)?S:dt({location:y,basename:n},S)}async function c(f,p){let{routeId:g,requestContext:b}=p===void 0?{}:p,v=new URL(f.url),y=f.method,E=Hf("",Bu(v),null,"default"),S=Wu(i,E,n);if(!Kf(y)&&y!=="HEAD"&&y!=="OPTIONS")throw pr(405,{method:y});if(!S)throw pr(404,{pathname:E.pathname});let _=g?S.find(w=>w.route.id===g):zf(S,E);if(g&&!_)throw pr(403,{pathname:E.pathname,routeId:g});if(!_)throw pr(404,{pathname:E.pathname});let R=await u(f,E,S,b,_);if(Va(R))return R;let x=R.errors?Object.values(R.errors)[0]:void 0;if(x!==void 0)throw x;if(R.actionData)return Object.values(R.actionData)[0];if(R.loaderData){var C;let w=Object.values(R.loaderData)[0];return(C=R.activeDeferreds)!=null&&C[_.route.id]&&(w[lo]=R.activeDeferreds[_.route.id]),w}}async function u(f,p,g,b,v){Ht(f.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if(MP(f.method.toLowerCase()))return await d(f,g,v||zf(g,p),b,v!=null);let y=await h(f,g,b,v);return Va(y)?y:dt({},y,{actionData:null,actionHeaders:{}})}catch(y){if(LP(y)){if(y.type===ze.error)throw y.response;return y.response}if(OP(y))return y;throw y}}async function d(f,p,g,b,v){let y;if(!g.route.action&&!g.route.lazy){let _=pr(405,{method:f.method,pathname:new URL(f.url).pathname,routeId:g.route.id});if(v)throw _;y={type:ze.error,error:_}}else y=await qf("action",f,g,p,r,a,n,s.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:v,requestContext:b}),f.signal.aborted&&Uf(f,v,s);if(ay(y))throw new Response(null,{status:y.status,headers:{Location:y.location}});if(ny(y)){let _=pr(400,{type:"defer-action"});if(v)throw _;y={type:ze.error,error:_}}if(v){if(Uu(y))throw y.error;return{matches:[g],loaderData:{},actionData:{[g.route.id]:y.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{},activeDeferreds:null}}if(Uu(y)){let _=ry(p,g.route.id),R=await h(f,p,b,void 0,{[_.route.id]:y.error});return dt({},R,{statusCode:On(y.error)?y.error.status:500,actionData:null,actionHeaders:dt({},y.headers?{[g.route.id]:y.headers}:{})})}let E=new Request(f.url,{headers:f.headers,redirect:f.redirect,signal:f.signal}),S=await h(E,p,b);return dt({},S,y.statusCode?{statusCode:y.statusCode}:{},{actionData:{[g.route.id]:y.data},actionHeaders:dt({},y.headers?{[g.route.id]:y.headers}:{})})}async function h(f,p,g,b,v){let y=b!=null;if(y&&!(b!=null&&b.route.loader)&&!(b!=null&&b.route.lazy))throw pr(400,{method:f.method,pathname:new URL(f.url).pathname,routeId:b==null?void 0:b.route.id});let S=(b?[b]:IP(p,Object.keys(v||{})[0])).filter(w=>w.route.loader||w.route.lazy);if(S.length===0)return{matches:p,loaderData:p.reduce((w,P)=>Object.assign(w,{[P.route.id]:null}),{}),errors:v||null,statusCode:200,loaderHeaders:{},activeDeferreds:null};let _=await Promise.all([...S.map(w=>qf("loader",f,w,p,r,a,n,s.v7_relativeSplatPath,{isStaticRequest:!0,isRouteRequest:y,requestContext:g}))]);f.signal.aborted&&Uf(f,y,s);let R=new Map,x=NP(p,S,_,v,R),C=new Set(S.map(w=>w.route.id));return p.forEach(w=>{C.has(w.route.id)||(x.loaderData[w.route.id]=null)}),dt({},x,{matches:p,activeDeferreds:R.size>0?Object.fromEntries(R.entries()):null})}return{dataRoutes:i,query:l,queryRoute:c}}function kP(e,t,r){return dt({},t,{statusCode:On(r)?r.status:500,errors:{[t._deepestRenderedBoundaryId||e[0].id]:r}})}function Uf(e,t,r){if(r.v7_throwAbortReason&&e.signal.reason!==void 0)throw e.signal.reason;let n=t?"queryRoute":"query";throw new Error(n+"() call aborted: "+e.method+" "+e.url)}function xP(e,t,r,n,a,s,i,l){let c,u;if(i){c=[];for(let h of t)if(c.push(h),h.route.id===i){u=h;break}}else c=t,u=t[t.length-1];let d=fP(a||".",hP(c,s),Ho(e.pathname,r)||e.pathname,l==="path");return a==null&&(d.search=e.search,d.hash=e.hash),(a==null||a===""||a===".")&&u&&u.route.index&&!sy(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(d.pathname=d.pathname==="/"?r:Fs([r,d.pathname])),Bu(d)}function IP(e,t){let r=e;if(t){let n=e.findIndex(a=>a.route.id===t);n>=0&&(r=e.slice(0,n))}return r}async function jf(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let a=r[e.id];Ht(a,"No route found in manifest");let s={};for(let i in n){let c=a[i]!==void 0&&i!=="hasErrorBoundary";Id(!c,'Route "'+a.id+'" has a static property "'+i+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+i+'" will be ignored.')),!c&&!Jw.has(i)&&(s[i]=n[i])}Object.assign(a,s),Object.assign(a,dt({},t(a),{lazy:void 0}))}async function qf(e,t,r,n,a,s,i,l,c){c===void 0&&(c={});let u,d,h,f=b=>{let v,y=new Promise((E,S)=>v=S);return h=()=>v(),t.signal.addEventListener("abort",h),Promise.race([b({request:t,params:r.params,context:c.requestContext}),y])};try{let b=r.route[e];if(r.route.lazy)if(b){let v,y=await Promise.all([f(b).catch(E=>{v=E}),jf(r.route,s,a)]);if(v)throw v;d=y[0]}else if(await jf(r.route,s,a),b=r.route[e],b)d=await f(b);else if(e==="action"){let v=new URL(t.url),y=v.pathname+v.search;throw pr(405,{method:t.method,pathname:y,routeId:r.route.id})}else return{type:ze.data,data:void 0};else if(b)d=await f(b);else{let v=new URL(t.url),y=v.pathname+v.search;throw pr(404,{pathname:y})}Ht(d!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(b){u=ze.error,d=b}finally{h&&t.signal.removeEventListener("abort",h)}if(Va(d)){let b=d.status;if(PP.has(b)){let y=d.headers.get("Location");if(Ht(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!AP.test(y))y=xP(new URL(t.url),n.slice(0,n.indexOf(r)+1),i,!0,y,l);else if(!c.isStaticRequest){let E=new URL(t.url),S=y.startsWith("//")?new URL(E.protocol+y):new URL(y),_=Ho(S.pathname,i)!=null;S.origin===E.origin&&_&&(y=S.pathname+S.search+S.hash)}if(c.isStaticRequest)throw d.headers.set("Location",y),d;return{type:ze.redirect,status:b,location:y,revalidate:d.headers.get("X-Remix-Revalidate")!==null,reloadDocument:d.headers.get("X-Remix-Reload-Document")!==null}}if(c.isRouteRequest)throw{type:u===ze.error?ze.error:ze.data,response:d};let v;try{let y=d.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?d.body==null?v=null:v=await d.json():v=await d.text()}catch(y){return{type:ze.error,error:y}}return u===ze.error?{type:u,error:new $d(b,d.statusText,v),headers:d.headers}:{type:ze.data,data:v,statusCode:d.status,headers:d.headers}}if(u===ze.error)return{type:u,error:d};if($P(d)){var p,g;return{type:ze.deferred,deferredData:d,statusCode:(p=d.init)==null?void 0:p.status,headers:((g=d.init)==null?void 0:g.headers)&&new Headers(d.init.headers)}}return{type:ze.data,data:d}}function NP(e,t,r,n,a){let s={},i=null,l,c=!1,u={};return r.forEach((d,h)=>{let f=t[h].route.id;if(Ht(!ay(d),"Cannot handle redirect results in processLoaderData"),Uu(d)){let p=ry(e,f),g=d.error;n&&(g=Object.values(n)[0],n=void 0),i=i||{},i[p.route.id]==null&&(i[p.route.id]=g),s[f]=void 0,c||(c=!0,l=On(d.error)?d.error.status:500),d.headers&&(u[f]=d.headers)}else ny(d)?(a.set(f,d.deferredData),s[f]=d.deferredData.data):s[f]=d.data,d.statusCode!=null&&d.statusCode!==200&&!c&&(l=d.statusCode),d.headers&&(u[f]=d.headers)}),n&&(i=n,s[Object.keys(n)[0]]=void 0),{loaderData:s,errors:i,statusCode:l||200,loaderHeaders:u}}function ry(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Vf(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function pr(e,t){let{pathname:r,routeId:n,method:a,type:s}=t===void 0?{}:t,i="Unknown Server Error",l="Unknown @remix-run/router error";return e===400?(i="Bad Request",a&&r&&n?l="You made a "+a+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):e===403?(i="Forbidden",l='Route "'+n+'" does not match URL "'+r+'"'):e===404?(i="Not Found",l='No route matches URL "'+r+'"'):e===405&&(i="Method Not Allowed",a&&r&&n?l="You made a "+a.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":a&&(l='Invalid request method "'+a.toUpperCase()+'"')),new $d(e||500,i,new Error(l),!0)}function ny(e){return e.type===ze.deferred}function Uu(e){return e.type===ze.error}function ay(e){return(e&&e.type)===ze.redirect}function $P(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Va(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function OP(e){if(!Va(e))return!1;let t=e.status,r=e.headers.get("Location");return t>=300&&t<=399&&r!=null}function LP(e){return e&&Va(e.response)&&(e.type===ze.data||e.type===ze.error)}function Kf(e){return wP.has(e.toLowerCase())}function MP(e){return _P.has(e.toLowerCase())}function sy(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function zf(e,t){let r=typeof t=="string"?ei(t).search:t.search;if(e[e.length-1].route.index&&sy(r||""))return e[e.length-1];let n=Qb(e);return n[n.length-1]}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */let tn=function(e){return e.Development="development",e.Production="production",e.Test="test",e}({});function FP(e){return e===tn.Development||e===tn.Production||e===tn.Test}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Od(e,t){if(e instanceof Error&&t!==tn.Development){let r=new Error("Unexpected Server Error");return r.stack=void 0,r}return e}function Gf(e,t){return Object.entries(e).reduce((r,[n,a])=>Object.assign(r,{[n]:Od(a,t)}),{})}function Bo(e,t){let r=Od(e,t);return{message:r.message,stack:r.stack}}function Jf(e,t){if(!e)return null;let r=Object.entries(e),n={};for(let[a,s]of r)if(On(s))n[a]={...s,__type:"RouteErrorResponse"};else if(s instanceof Error){let i=Od(s,t);n[a]={message:i.message,stack:i.stack,__type:"Error",...i.name!=="Error"?{__subType:i.name}:{}}}else n[a]=s;return n}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Wo=(e,t={})=>Nd(e,t),iy=(e,t={})=>EP(e,t),Ld=(e,t=302)=>ey(e,t),oy=(e,t=302)=>SP(e,t);function DP(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function ha(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}const HP=new Set([301,302,303,307,308]);function ly(e){return HP.has(e)}function BP(e){return ly(e.status)}function WP(e){return e!=null&&typeof e.then=="function"&&e._tracked===!0}const UP="__deferred_promise:";function jP(e,t,r){let n=new TextEncoder;return new ReadableStream({async start(s){let i={},l=[];for(let[u,d]of Object.entries(e.data))WP(d)?(i[u]=`${UP}${u}`,(typeof d._data<"u"||typeof d._error<"u")&&l.push(u)):i[u]=d;s.enqueue(n.encode(JSON.stringify(i)+`

`));for(let u of l)Xf(s,n,u,e.data[u],r);let c=e.subscribe((u,d)=>{d&&Xf(s,n,d,e.data[d],r)});await e.resolveData(t),c(),s.close()}})}function Xf(e,t,r,n,a){"_error"in n?e.enqueue(t.encode("error:"+JSON.stringify({[r]:n._error instanceof Error?Bo(n._error,a):n._error})+`

`)):e.enqueue(t.encode("data:"+JSON.stringify({[r]:n._data??null})+`

`))}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qP(e){return Object.keys(e).reduce((t,r)=>(t[r]=e[r].module,t),{})}var Uo={exports:{}},Wa={decodeValues:!0,map:!1,silent:!1};function ju(e){return typeof e=="string"&&!!e.trim()}function qu(e,t){var r=e.split(";").filter(ju),n=r.shift(),a=VP(n),s=a.name,i=a.value;t=t?Object.assign({},Wa,t):Wa;try{i=t.decodeValues?decodeURIComponent(i):i}catch(c){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+i+"'. Set options.decodeValues to false to disable this feature.",c)}var l={name:s,value:i};return r.forEach(function(c){var u=c.split("="),d=u.shift().trimLeft().toLowerCase(),h=u.join("=");d==="expires"?l.expires=new Date(h):d==="max-age"?l.maxAge=parseInt(h,10):d==="secure"?l.secure=!0:d==="httponly"?l.httpOnly=!0:d==="samesite"?l.sameSite=h:l[d]=h}),l}function VP(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}function cy(e,t){if(t=t?Object.assign({},Wa,t):Wa,!e)return t.map?{}:[];if(e.headers)if(typeof e.headers.getSetCookie=="function")e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find(function(a){return a.toLowerCase()==="set-cookie"})];!r&&e.headers.cookie&&!t.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),t=t?Object.assign({},Wa,t):Wa,t.map){var n={};return e.filter(ju).reduce(function(a,s){var i=qu(s,t);return a[i.name]=i,a},n)}else return e.filter(ju).map(function(a){return qu(a,t)})}function KP(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var t=[],r=0,n,a,s,i,l;function c(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function u(){return a=e.charAt(r),a!=="="&&a!==";"&&a!==","}for(;r<e.length;){for(n=r,l=!1;c();)if(a=e.charAt(r),a===","){for(s=r,r+=1,c(),i=r;r<e.length&&u();)r+=1;r<e.length&&e.charAt(r)==="="?(l=!0,r=i,t.push(e.substring(n,s)),n=r):r=s+1}else r+=1;(!l||r>=e.length)&&t.push(e.substring(n,e.length))}return t}Uo.exports=cy;Uo.exports.parse=cy;Uo.exports.parseString=qu;var zP=Uo.exports.splitCookiesString=KP;/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function GP(e,t){let r=t.errors?t.matches.findIndex(s=>t.errors[s.route.id]):-1,n=r>=0?t.matches.slice(0,r+1):t.matches,a;if(r>=0){let{actionHeaders:s,actionData:i,loaderHeaders:l,loaderData:c}=t;t.matches.slice(r).some(u=>{let d=u.route.id;return s[d]&&(!i||i[d]===void 0)?a=s[d]:l[d]&&c[d]===void 0&&(a=l[d]),a!=null})}return n.reduce((s,i,l)=>{let{id:c}=i.route,u=e.routes[c].module,d=t.loaderHeaders[c]||new Headers,h=t.actionHeaders[c]||new Headers,f=a!=null&&l===n.length-1,p=f&&a!==d&&a!==h;if(u.headers==null){let b=new Headers(s);return p&&Vn(a,b),Vn(h,b),Vn(d,b),b}let g=new Headers(u.headers?typeof u.headers=="function"?u.headers({loaderHeaders:d,parentHeaders:s,actionHeaders:h,errorHeaders:f?a:void 0}):u.headers:void 0);return p&&Vn(a,g),Vn(h,g),Vn(d,g),Vn(s,g),g},new Headers)}function Vn(e,t){let r=e.get("Set-Cookie");r&&zP(r).forEach(a=>{t.append("Set-Cookie",a)})}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yf(e,t){if(e===!1||e===null||typeof e>"u")throw console.error("The following error is a bug in Remix; please open an issue! https://github.com/remix-run/remix/issues/new"),new Error(t)}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function JP(e,t,r){let n=Wu(e,t,r);return n?n.map(a=>({params:a.params,pathname:a.pathname,route:a.route})):null}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */async function XP({loadContext:e,action:t,params:r,request:n,routeId:a}){let s=await t({request:dy(uy(n)),context:e,params:r});if(s===void 0)throw new Error(`You defined an action for route "${a}" but didn't return anything from your \`action\` function. Please return a value or \`null\`.`);return ha(s)?s:Wo(s)}async function YP({loadContext:e,loader:t,params:r,request:n,routeId:a}){let s=await t({request:dy(uy(n)),context:e,params:r});if(s===void 0)throw new Error(`You defined a loader for route "${a}" but didn't return anything from your \`loader\` function. Please return a value or \`null\`.`);return DP(s)?s.init&&ly(s.init.status||200)?Ld(new Headers(s.init.headers).get("Location"),s.init):s:ha(s)?s:Wo(s)}function uy(e){let t=new URL(e.url),r=t.searchParams.getAll("index");t.searchParams.delete("index");let n=[];for(let s of r)s&&n.push(s);for(let s of n)t.searchParams.append("index",s);let a={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return a.body&&(a.duplex="half"),new Request(t.href,a)}function dy(e){let t=new URL(e.url);t.searchParams.delete("_data");let r={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return r.body&&(r.duplex="half"),new Request(t.href,r)}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hy(e){let t={};return Object.values(e).forEach(r=>{let n=r.parentId||"";t[n]||(t[n]=[]),t[n].push(r)}),t}function fy(e,t="",r=hy(e)){return(r[t]||[]).map(n=>({...n,children:fy(e,n.id,r)}))}function py(e,t,r="",n=hy(e)){return(n[r]||[]).map(a=>{let s={hasErrorBoundary:a.id==="root"||a.module.ErrorBoundary!=null,id:a.id,path:a.path,loader:a.module.loader?i=>YP({request:i.request,params:i.params,loadContext:i.context,loader:a.module.loader,routeId:a.id}):void 0,action:a.module.action?i=>XP({request:i.request,params:i.params,loadContext:i.context,action:a.module.action,routeId:a.id}):void 0,handle:a.module.handle};return a.index?{index:!0,...s}:{caseSensitive:a.caseSensitive,children:py(e,t,a.id,n),...s}})}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ZP={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},QP=/[&><\u2028\u2029]/g;function eA(e){return e.replace(QP,t=>ZP[t])}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zf(e){return eA(JSON.stringify(e))}var tA={};/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */async function rA(e,t){if(t??(t=tA.REMIX_DEV_ORIGIN),!t)throw Error("Dev server origin not set");let r=new URL(t);r.pathname="ping";let n=await fetch(r.href,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buildHash:e.assets.version})}).catch(a=>{throw console.error(`Could not reach Remix dev server at ${r}`),a});if(!n.ok)throw console.error(`Could not reach Remix dev server at ${r} (${n.status})`),Error(await n.text())}function nA(e){console.log(`[REMIX DEV] ${e.assets.version} ready`)}const my="__remix_devServerHooks";function aA(e){globalThis[my]=e}function Qf(){return globalThis[my]}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ep(e,t){var r,n;let a=fy(e.routes),s=py(e.routes,e.future),i=FP(t)?t:tn.Production,l=RP(s,{basename:e.basename,future:{v7_relativeSplatPath:((r=e.future)===null||r===void 0?void 0:r.v3_relativeSplatPath)===!0,v7_throwAbortReason:((n=e.future)===null||n===void 0?void 0:n.v3_throwAbortReason)===!0}}),c=e.entry.module.handleError||((u,{request:d})=>{i!==tn.Test&&!d.signal.aborted&&console.error(On(u)&&u.error?u.error:u)});return{routes:a,dataRoutes:s,serverMode:i,staticHandler:l,errorHandler:c}}const sA=(e,t)=>{let r,n,a,s,i;return async function(c,u={}){if(r=typeof e=="function"?await e():e,t??(t=r.mode),typeof e=="function"){let y=ep(r,t);n=y.routes,a=y.serverMode,s=y.staticHandler,i=y.errorHandler}else if(!n||!a||!s||!i){let y=ep(r,t);n=y.routes,a=y.serverMode,s=y.staticHandler,i=y.errorHandler}let d=new URL(c.url),h=JP(n,d.pathname,r.basename),f=y=>{if(t===tn.Development){var E,S;(E=Qf())===null||E===void 0||(S=E.processRequestError)===null||S===void 0||S.call(E,y)}i(y,{context:u,params:h&&h.length>0?h[0].params:{},request:c})},p;if(d.searchParams.has("_data")){let y=d.searchParams.get("_data");if(p=await iA(a,r,s,y,c,u,f),r.entry.module.handleDataRequest){var g;p=await r.entry.module.handleDataRequest(p,{context:u,params:(h==null||(g=h.find(E=>E.route.id==y))===null||g===void 0?void 0:g.params)||{},request:c})}}else if(h&&h[h.length-1].route.module.default==null&&h[h.length-1].route.module.ErrorBoundary==null)p=await lA(a,s,h.slice(-1)[0].route.id,c,u,f);else{var b,v;let y=t===tn.Development?await((b=Qf())===null||b===void 0||(v=b.getCriticalCss)===null||v===void 0?void 0:v.call(b,r,d.pathname)):void 0;p=await oA(a,r,s,c,u,f,y)}return c.method==="HEAD"?new Response(null,{headers:p.headers,status:p.status,statusText:p.statusText}):p}};async function iA(e,t,r,n,a,s,i){try{let l=await r.queryRoute(a,{routeId:n,requestContext:s});if(BP(l)){let c=new Headers(l.headers),u=c.get("Location");return c.set("X-Remix-Redirect",t.basename&&Ho(u,t.basename)||u),c.set("X-Remix-Status",l.status),c.delete("Location"),l.headers.get("Set-Cookie")!==null&&c.set("X-Remix-Revalidate","yes"),new Response(null,{status:204,headers:c})}if(lo in l){let c=l[lo],u=jP(c,a.signal,e),d=c.init||{},h=new Headers(d.headers);return h.set("Content-Type","text/remix-deferred"),h.set("X-Remix-Response","yes"),d.headers=h,new Response(u,d)}return l.headers.set("X-Remix-Response","yes"),l}catch(l){if(ha(l))return l.headers.set("X-Remix-Catch","yes"),l;if(On(l))return l&&i(l),gy(l,e);let c=l instanceof Error||l instanceof DOMException?l:new Error("Unexpected Server Error");return i(c),Nd(Bo(c,e),{status:500,headers:{"X-Remix-Error":"yes"}})}}async function oA(e,t,r,n,a,s,i){let l;try{l=await r.query(n,{requestContext:a})}catch(h){return s(h),new Response(null,{status:500})}if(ha(l))return l;l.errors&&(Object.values(l.errors).forEach(h=>{(!On(h)||h.error)&&s(h)}),l.errors=Gf(l.errors,e));let c=GP(t,l),u={manifest:t.assets,routeModules:qP(t.routes),staticHandlerContext:l,criticalCss:i,serverHandoffString:Zf({url:l.location.pathname,basename:t.basename,criticalCss:i,state:{loaderData:l.loaderData,actionData:l.actionData,errors:Jf(l.errors,e)},future:t.future,isSpaMode:t.isSpaMode}),future:t.future,isSpaMode:t.isSpaMode,serializeError:h=>Bo(h,e)},d=t.entry.module.default;try{return await d(n,l.statusCode,c,u,a)}catch(h){s(h);let f=h;if(ha(h)){let p;try{let g=h.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?h.body==null?p=null:p=await h.json():p=await h.text(),f=new $d(h.status,h.statusText,p)}catch{}}l=kP(r.dataRoutes,l,f),l.errors&&(l.errors=Gf(l.errors,e)),u={...u,staticHandlerContext:l,serverHandoffString:Zf({url:l.location.pathname,basename:t.basename,state:{loaderData:l.loaderData,actionData:l.actionData,errors:Jf(l.errors,e)},future:t.future,isSpaMode:t.isSpaMode})};try{return await d(n,l.statusCode,c,u,a)}catch(p){return s(p),by(p,e)}}}async function lA(e,t,r,n,a,s){try{let i=await t.queryRoute(n,{routeId:r,requestContext:a});return Yf(!(lo in i),`You cannot return a \`defer()\` response from a Resource Route.  Did you forget to export a default UI component from the "${r}" route?`),Yf(ha(i),"Expected a Response to be returned from queryRoute"),i}catch(i){return ha(i)?(i.headers.set("X-Remix-Catch","yes"),i):On(i)?(i&&s(i),gy(i,e)):(s(i),by(i,e))}}function gy(e,t){return Nd(Bo(e.error||new Error("Unexpected Server Error"),t),{status:e.status,statusText:e.statusText,headers:{"X-Remix-Error":"yes"}})}function by(e,t){let r="Unexpected Server Error";return t!==tn.Production&&(r+=`

${String(e)}`),new Response(r,{status:500,headers:{"Content-Type":"text/plain"}})}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _c(e){return`__flash_${e}__`}const Md=(e={},t="")=>{let r=new Map(Object.entries(e));return{get id(){return t},get data(){return Object.fromEntries(r)},has(n){return r.has(n)||r.has(_c(n))},get(n){if(r.has(n))return r.get(n);let a=_c(n);if(r.has(a)){let s=r.get(a);return r.delete(a),s}},set(n,a){r.set(n,a)},flash(n,a){r.set(_c(n),a)},unset(n){r.delete(n)}}},cA=e=>e!=null&&typeof e.id=="string"&&typeof e.data<"u"&&typeof e.has=="function"&&typeof e.get=="function"&&typeof e.set=="function"&&typeof e.flash=="function"&&typeof e.unset=="function",uA=e=>({cookie:t,createData:r,readData:n,updateData:a,deleteData:s})=>{let i=kd(t)?t:e((t==null?void 0:t.name)||"__session",t);return yy(i),{async getSession(l,c){let u=l&&await i.parse(l,c),d=u&&await n(u);return Md(d||{},u||"")},async commitSession(l,c){let{id:u,data:d}=l,h=(c==null?void 0:c.maxAge)!=null?new Date(Date.now()+c.maxAge*1e3):(c==null?void 0:c.expires)!=null?c.expires:i.expires;return u?await a(u,d,h):u=await r(d,h),i.serialize(u,c)},async destroySession(l,c){return await s(l.id),i.serialize("",{...c,maxAge:void 0,expires:new Date(0)})}}};function yy(e){Gb(e.isSigned,`The "${e.name}" cookie is not signed, but session cookies should be signed to prevent tampering on the client before they are sent back to the server. See https://remix.run/utils/cookies#signing-cookies for more information.`)}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const dA=e=>({cookie:t}={})=>{let r=kd(t)?t:e((t==null?void 0:t.name)||"__session",t);return yy(r),{async getSession(n,a){return Md(n&&await r.parse(n,a)||{})},async commitSession(n,a){let s=await r.serialize(n.data,a);if(s.length>4096)throw new Error("Cookie length will exceed browser maximum. Length: "+s.length);return s},async destroySession(n,a){return r.serialize("",{...a,maxAge:void 0,expires:new Date(0)})}}};/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const hA=e=>({cookie:t}={})=>{let r=new Map;return e({cookie:t,async createData(n,a){let s=Math.random().toString(36).substring(2,10);return r.set(s,{data:n,expires:a}),s},async readData(n){if(r.has(n)){let{data:a,expires:s}=r.get(n);if(!s||s>new Date)return a;s&&r.delete(n)}return null},async updateData(n,a,s){r.set(n,{data:a,expires:s})},async deleteData(n){r.delete(n)}})};/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */class vy extends Error{constructor(t,r){super(`Field "${t}" exceeded upload size of ${r} bytes.`),this.field=t,this.maxBytes=r}}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fA({filter:e,maxPartSize:t=3e6}={}){return async({filename:r,contentType:n,name:a,data:s})=>{if(e&&!await e({filename:r,contentType:n,name:a}))return;let i=0,l=[];for await(let c of s){if(i+=c.byteLength,i>t)throw new vy(a,t);l.push(c)}return typeof r=="string"?new File(l,r,{type:n}):await new Blob(l,{type:n}).text()}}/**
 * @remix-run/server-runtime v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const pA=Object.freeze(Object.defineProperty({__proto__:null,MaxPartSizeExceededError:vy,broadcastDevReady:rA,createCookieFactory:xw,createCookieSessionStorageFactory:dA,createMemorySessionStorageFactory:hA,createRequestHandler:sA,createSession:Md,createSessionStorageFactory:uA,defer:iy,isCookie:kd,isSession:cA,json:Wo,logDevReady:nA,redirect:Ld,redirectDocument:oy,unstable_composeUploadHandlers:Kw,unstable_createMemoryUploadHandler:fA,unstable_parseMultipartFormData:zw,unstable_setDevServerHooks:aA},Symbol.toStringTag,{value:"Module"}));function mA({context:e,router:t,hydrate:r=!0,nonce:n}){t&&e||lC(!1);let a={router:t,navigator:yA(),static:!0,staticContext:e,basename:e.basename||"/"},s=new Map,i="";if(r!==!1){let c={loaderData:e.loaderData,actionData:e.actionData,errors:bA(e.errors)};i=`window.__staticRouterHydrationData = JSON.parse(${CA(JSON.stringify(JSON.stringify(c)))});`}let{state:l}=a.router;return m.createElement(m.Fragment,null,m.createElement(cC.Provider,{value:a},m.createElement(uC.Provider,{value:l},m.createElement(dC.Provider,{value:s},m.createElement(hC.Provider,{value:{isTransitioning:!1}},m.createElement(fC,{basename:a.basename,location:l.location,navigationType:l.historyAction,navigator:a.navigator,static:a.static,future:{v7_relativeSplatPath:t.future.v7_relativeSplatPath}},m.createElement(gA,{routes:t.routes,future:t.future,state:l})))))),i?m.createElement("script",{suppressHydrationWarning:!0,nonce:n,dangerouslySetInnerHTML:{__html:i}}):null)}function gA({routes:e,future:t,state:r}){return pC(e,void 0,r,t)}function bA(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,a]of t)mC(a)?r[n]={...a,__type:"RouteErrorResponse"}:a instanceof Error?r[n]={message:a.message,__type:"Error",...a.name!=="Error"?{__subType:a.name}:{}}:r[n]=a;return r}function yA(){return{createHref:Ey,encodeLocation:Sy,push(e){throw new Error(`You cannot use navigator.push() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(e)})\` somewhere in your app.`)},replace(e){throw new Error(`You cannot use navigator.replace() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(e)}, { replace: true })\` somewhere in your app.`)},go(e){throw new Error(`You cannot use navigator.go() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${e})\` somewhere in your app.`)},back(){throw new Error("You cannot use navigator.back() on the server because it is a stateless environment.")},forward(){throw new Error("You cannot use navigator.forward() on the server because it is a stateless environment.")}}}function vA(e,t,r={}){let n={},a=gC(e,SC,void 0,n),s=t.matches.map(l=>{let c=n[l.route.id]||l.route;return{...l,route:c}}),i=l=>`You cannot use router.${l}() on the server because it is a stateless environment`;return{get basename(){return t.basename},get future(){var l,c;return{v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:((l=r.future)==null?void 0:l.v7_partialHydration)===!0,v7_prependBasename:!1,v7_relativeSplatPath:((c=r.future)==null?void 0:c.v7_relativeSplatPath)===!0}},get state(){return{historyAction:bC.Pop,location:t.location,matches:s,loaderData:t.loaderData,actionData:t.actionData,errors:t.errors,initialized:!0,navigation:yC,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",fetchers:new Map,blockers:new Map}},get routes(){return a},get window(){},initialize(){throw i("initialize")},subscribe(){throw i("subscribe")},enableScrollRestoration(){throw i("enableScrollRestoration")},navigate(){throw i("navigate")},fetch(){throw i("fetch")},revalidate(){throw i("revalidate")},createHref:Ey,encodeLocation:Sy,getFetcher(){return vC},deleteFetcher(){throw i("deleteFetcher")},dispose(){throw i("dispose")},getBlocker(){return EC},deleteBlocker(){throw i("deleteBlocker")},_internalFetchControllers:new Map,_internalActiveDeferreds:new Map,_internalSetRoutes(){throw i("_internalSetRoutes")}}}function Ey(e){return typeof e=="string"?e:Rd(e)}function Sy(e){let t=typeof e=="string"?e:Rd(e);t=t.replace(/ $/,"%20");let r=EA.test(t)?new URL(t):new URL(t,"http://localhost");return{pathname:r.pathname,search:r.search,hash:r.hash}}const EA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SA={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},_A=/[&><\u2028\u2029]/g;function CA(e){return e.replace(_A,t=>SA[t])}/**
 * @remix-run/react v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wA({context:e,url:t,abortDelay:r}){typeof t=="string"&&(t=new URL(t));let{manifest:n,routeModules:a,criticalCss:s,serverHandoffString:i}=e,l=gw(n.routes,a,e.future,e.isSpaMode);e.staticHandlerContext.loaderData={...e.staticHandlerContext.loaderData};for(let u of e.staticHandlerContext.matches){let d=u.route.id,h=a[d],f=e.manifest.routes[d];h&&bw(f,h,e.isSpaMode)&&(h.HydrateFallback||!f.hasLoader)&&(e.staticHandlerContext.loaderData[d]=void 0)}let c=vA(l,e.staticHandlerContext,{future:{v7_partialHydration:!0,v7_relativeSplatPath:e.future.v3_relativeSplatPath}});return m.createElement(qb.Provider,{value:{manifest:n,routeModules:a,criticalCss:s,serverHandoffString:i,future:e.future,isSpaMode:e.isSpaMode,serializeError:e.serializeError,abortDelay:r}},m.createElement(yw,{location:c.state.location},m.createElement(mA,{router:c,context:e.staticHandlerContext,hydrate:!1})))}/**
 * @remix-run/react v2.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const PA=Object.freeze(Object.defineProperty({__proto__:null,Await:_C,Form:CC,Link:Hu,Links:wC,LiveReload:PC,Meta:AC,NavLink:TC,Navigate:RC,get NavigationType(){return kC},Outlet:Vb,PrefetchPageLinks:xC,RemixBrowser:vw,RemixServer:wA,Route:IC,Routes:NC,Scripts:$C,ScrollRestoration:Ew,UNSAFE_RemixContext:qb,createPath:Rd,createRoutesFromChildren:$f,createRoutesFromElements:$f,createSearchParams:OC,defer:iy,generatePath:LC,isRouteErrorResponse:MC,json:Wo,matchPath:FC,matchRoutes:DC,parsePath:HC,redirect:Ld,redirectDocument:oy,renderMatches:BC,resolvePath:WC,unstable_usePrompt:UC,unstable_useViewTransitionState:jC,useActionData:qC,useAsyncError:VC,useAsyncValue:KC,useBeforeUnload:zC,useBlocker:GC,useFetcher:JC,useFetchers:XC,useFormAction:YC,useHref:ZC,useInRouterContext:QC,useLinkClickHandler:ew,useLoaderData:Kb,useLocation:tw,useMatch:rw,useMatches:nw,useNavigate:aw,useNavigation:sw,useNavigationType:iw,useOutlet:ow,useOutletContext:lw,useParams:cw,useResolvedPath:uw,useRevalidator:dw,useRouteError:zb,useRouteLoaderData:hw,useRoutes:fw,useSearchParams:pw,useSubmit:mw},Symbol.toStringTag,{value:"Module"})),AA="en",TA=["cs","da","de","en","es","fi","fr","it","ja","ko","nb","nl","pl","pt-BR","pt-PT","sv","th","tr","vi","zh-CN","zh-TW"];function Ot(e,t,r){return e<t?t:e>r?r:e}function na(e,t){const r=+`${e}e${t}`;return+`${Math.round(r)}e-${t}`}function _y(e){const{red:t,green:r,blue:n}=e;return"alpha"in e?`rgba(${t}, ${r}, ${n}, ${e.alpha})`:`rgb(${t}, ${r}, ${n})`}const RA=_y;function Cy({red:e,green:t,blue:r}){return`#${Cc(e)}${Cc(t)}${Cc(r)}`}function Cc(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function kA(e){return Cy(jo(e))}function wy(e,t){const r=e/60,n=1-Math.abs(r%2-1),a=t*n;let s=0,i=0,l=0;return r>=0&&r<=1&&(s=t,i=a,l=0),r>=1&&r<=2&&(s=a,i=t,l=0),r>=2&&r<=3&&(s=0,i=t,l=a),r>=3&&r<=4&&(s=0,i=a,l=t),r>=4&&r<=5&&(s=a,i=0,l=t),r>=5&&r<=6&&(s=t,i=0,l=a),{red:s,green:i,blue:l}}function jo(e){const{hue:t,saturation:r,brightness:n,alpha:a=1}=e,s=n*r;let{red:i,green:l,blue:c}=wy(t,s);const u=n-s;return i+=u,l+=u,c+=u,{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:a}}function xA(e){const{hue:t,saturation:r,lightness:n,alpha:a=1}=e,s=(1-Math.abs(2*(n/100)-1))*(r/100);let{red:i,green:l,blue:c}=wy(t,s);const u=n/100-s/2;return i+=u,l+=u,c+=u,{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:a}}function Py(e,t="b"){const{alpha:r=1}=e,n=e.red/255,a=e.green/255,s=e.blue/255,i=Math.max(n,a,s),l=Math.min(n,a,s),c=i-l,u=(i+l)/2;let d=0;if(i===0)d=0;else if(t==="b")d=c/i;else if(t==="l"){const g=u>.5?c/(2-i-l):c/(i+l);d=isNaN(g)?0:g}let h=0;switch(i){case n:h=(a-s)/c+(a<s?6:0);break;case a:h=(s-n)/c+2;break;case s:h=(n-a)/c+4}const f=h/6*360,p=Ot(f,0,360);return{hue:p?na(p,2):0,saturation:na(Ot(d,0,1),4),brightness:na(Ot(i,0,1),4),lightness:na(u,4),alpha:na(r,4)}}function IA(e){const{hue:t,saturation:r,brightness:n,alpha:a=1}=Py(e,"b");return{hue:t,saturation:r,brightness:n,alpha:a}}function NA(e){const{hue:t,saturation:r,lightness:n,alpha:a=1}=Py(e,"l"),s=na(r*100,2),i=na(n*100,2);return{hue:t,saturation:s,lightness:i,alpha:a}}function $A(e){if(e.length===4){const a=(c,u)=>e.slice(c,u).repeat(2),s=parseInt(a(1,2),16),i=parseInt(a(2,3),16),l=parseInt(a(3,4),16);return{red:s,green:i,blue:l}}const t=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return{red:t,green:r,blue:n}}function OA(e={}){const{defaultValue:t="",timeout:r=1500}=e,[n,a]=m.useState("inactive"),s=m.useCallback(i=>{navigator.clipboard.writeText(typeof i=="string"?i:t).then(()=>a("copied"),()=>a("failed")).catch(l=>{throw l})},[t]);return m.useEffect(()=>{if(n==="inactive")return;const i=setTimeout(()=>a("inactive"),r);return()=>clearTimeout(i)},[n,r]),[s,n]}function LA(e){const[t,r]=m.useState(!1),n=m.useCallback(()=>r(!0),[]),a=m.useCallback(()=>r(!1),[]);return mt("focus",n,e),mt("blur",a,e),t}function MA(e){const[t,r]=m.useState(!1),n=m.useRef(null),a=m.useCallback(()=>{n.current&&(clearTimeout(n.current),n.current=null),r(!0)},[]),s=m.useCallback(()=>{n.current=setTimeout(()=>{r(!1)},0)},[]);return mt("focusin",a,e),mt("focusout",s,e),m.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),t}function FA(e){const[t,r]=m.useState(!1),n=m.useCallback(()=>r(!0),[]),a=m.useCallback(()=>r(!1),[]);return mt("mouseenter",n,e),mt("mouseleave",a,e),t}const Ay={touch:"(hover: none) and (pointer: coarse)",stylus:"(hover: none) and (pointer: fine)",pointer:"(hover) and (pointer: coarse)",mouse:"(hover) and (pointer: fine)"},DA=e=>Object.prototype.hasOwnProperty.call(Ay,e);function HA(e,t={}){const{defaultValue:r=!1,initializeWithValue:n=!1}=t,a=DA(e)?Ay[e]:e,s=m.useCallback(u=>Ls?r:window.matchMedia(u).matches,[r]),[i,l]=m.useState(()=>n?s(a):r),c=m.useCallback(()=>{l(s(a))},[s,a]);return xb(()=>{const u=window.matchMedia(a);return c(),u.addListener?u.addListener(c):u.addEventListener("change",c),()=>{u.removeListener?u.removeListener(c):u.removeEventListener("change",c)}},[a]),i}let gn;(function(e){e.All="all",e.Page="page",e.Multi="multi",e.Single="single",e.Range="range"})(gn||(gn={}));function tp(e){if("id"in e)return e.id;throw new Error("Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`")}function BA(e,{selectedResources:t=[],allResourcesSelected:r=!1,resourceIDResolver:n=tp,resourceFilter:a=void 0}={selectedResources:[],allResourcesSelected:!1,resourceIDResolver:tp,resourceFilter:void 0}){const[s,i]=m.useState(t),[l,c]=m.useState(r),u=m.useCallback((f,p,g,b)=>{switch(f===gn.All?c(p):l&&c(!1),f){case gn.Single:i(v=>p?[...v,g]:v.filter(y=>y!==g));break;case gn.All:case gn.Page:if(a){const v=e.filter(a);i(p&&s.length<v.length?v.map(n):[])}else i(p?e.map(n):[]);break;case gn.Multi:if(!g)break;i(v=>{const y=[],E=a?e.filter(a):e;for(let S=g[0];S<=g[1];S++)if(E.includes(e[S])){const _=n(e[S]);(p&&!v.includes(_)||!p&&v.includes(_))&&y.push(_)}return p?[...v,...y]:v.filter(S=>!y.includes(S))});break;case gn.Range:if(!g)break;i(v=>{const S=(a?e.filter(a):e).map(n).slice(Number(g[0]),Number(g[1])+1),_=S.some(w=>s.includes(w));return!S.every(w=>s.includes(w))&&(p||_)?[...new Set([...v,...S]).values()]:v.filter(w=>!S.includes(w))});break}},[l,a,s,e,n]),d=m.useCallback(()=>{i([]),c(!1)},[]),h=m.useCallback(f=>{const g=[...s].filter(b=>!f.includes(b));i(g),g.length===0&&c(!1)},[s]);return{selectedResources:s,allResourcesSelected:l,handleSelectionChange:u,clearSelection:d,removeSelectedResources:h}}var Ty=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M10 6a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),o.createElement("path",{d:"M11 13a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),o.createElement("path",{fillRule:"evenodd",d:"M11.237 3.177a1.75 1.75 0 0 0-2.474 0l-5.586 5.585a1.75 1.75 0 0 0 0 2.475l5.586 5.586a1.75 1.75 0 0 0 2.474 0l5.586-5.586a1.75 1.75 0 0 0 0-2.475l-5.586-5.585Zm-1.414 1.06a.25.25 0 0 1 .354 0l5.586 5.586a.25.25 0 0 1 0 .354l-5.586 5.585a.25.25 0 0 1-.354 0l-5.586-5.585a.25.25 0 0 1 0-.354l5.586-5.586Z"}))};Ty.displayName="AlertDiamondIcon";var Fd=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M10 6.75a.75.75 0 0 1 .75.75v3.5a.75.75 0 1 1-1.5 0v-3.5a.75.75 0 0 1 .75-.75Z"}),o.createElement("path",{d:"M11 13.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"}),o.createElement("path",{fillRule:"evenodd",d:"M10 3.5c-1.045 0-1.784.702-2.152 1.447a449.26 449.26 0 0 1-2.005 3.847l-.028.052a403.426 403.426 0 0 0-2.008 3.856c-.372.752-.478 1.75.093 2.614.57.863 1.542 1.184 2.464 1.184h7.272c.922 0 1.895-.32 2.464-1.184.57-.864.465-1.862.093-2.614-.21-.424-1.113-2.147-2.004-3.847l-.032-.061a429.497 429.497 0 0 1-2.005-3.847c-.368-.745-1.107-1.447-2.152-1.447Zm-.808 2.112c.404-.816 1.212-.816 1.616 0 .202.409 1.112 2.145 2.022 3.88a418.904 418.904 0 0 1 2.018 3.875c.404.817 0 1.633-1.212 1.633h-7.272c-1.212 0-1.617-.816-1.212-1.633.202-.408 1.113-2.147 2.023-3.883a421.932 421.932 0 0 0 2.017-3.872Z"}))};Fd.displayName="AlertTriangleIcon";var Ry=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M10 3.5a.75.75 0 0 1 .75.75v9.69l2.72-2.72a.75.75 0 0 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 1.06-1.06l2.72 2.72v-9.69a.75.75 0 0 1 .75-.75Z"}))};Ry.displayName="ArrowDownIcon";var ky=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M3.5 10a.75.75 0 0 1 .75-.75h9.69l-2.72-2.72a.75.75 0 1 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06-1.06l2.72-2.72h-9.69a.75.75 0 0 1-.75-.75Z"}))};ky.displayName="ArrowRightIcon";var xy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M10 16.5a.75.75 0 0 1-.75-.75v-9.69l-2.72 2.72a.75.75 0 1 1-1.06-1.06l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06l-2.72-2.72v9.69a.75.75 0 0 1-.75.75Z"}))};xy.displayName="ArrowUpIcon";var qo=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M15.78 5.97a.75.75 0 0 1 0 1.06l-6.5 6.5a.75.75 0 0 1-1.06 0l-3.25-3.25a.75.75 0 1 1 1.06-1.06l2.72 2.72 5.97-5.97a.75.75 0 0 1 1.06 0Z"}))};qo.displayName="CheckIcon";var Iy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M13.28 8.78a.75.75 0 0 0-1.06-1.06l-2.97 2.97-1.22-1.22a.75.75 0 0 0-1.06 1.06l1.75 1.75a.75.75 0 0 0 1.06 0l3.5-3.5Z"}),o.createElement("path",{fillRule:"evenodd",d:"M6.25 3.5a2.75 2.75 0 0 0-2.75 2.75v7.5a2.75 2.75 0 0 0 2.75 2.75h7.5a2.75 2.75 0 0 0 2.75-2.75v-7.5a2.75 2.75 0 0 0-2.75-2.75h-7.5Zm-1.25 2.75c0-.69.56-1.25 1.25-1.25h7.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25h-7.5c-.69 0-1.25-.56-1.25-1.25v-7.5Z"}))};Iy.displayName="CheckboxIcon";var Ny=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M11.5 8.25a.75.75 0 0 1 .75.75v4.25a.75.75 0 0 1-1.5 0v-4.25a.75.75 0 0 1 .75-.75Z"}),o.createElement("path",{d:"M9.25 9a.75.75 0 0 0-1.5 0v4.25a.75.75 0 0 0 1.5 0v-4.25Z"}),o.createElement("path",{fillRule:"evenodd",d:"M7.25 5.25a2.75 2.75 0 0 1 5.5 0h3a.75.75 0 0 1 0 1.5h-.75v5.45c0 1.68 0 2.52-.327 3.162a3 3 0 0 1-1.311 1.311c-.642.327-1.482.327-3.162.327h-.4c-1.68 0-2.52 0-3.162-.327a3 3 0 0 1-1.311-1.311c-.327-.642-.327-1.482-.327-3.162v-5.45h-.75a.75.75 0 0 1 0-1.5h3Zm1.5 0a1.25 1.25 0 1 1 2.5 0h-2.5Zm-2.25 1.5h7v5.45c0 .865-.001 1.423-.036 1.848-.033.408-.09.559-.128.633a1.5 1.5 0 0 1-.655.655c-.074.038-.225.095-.633.128-.425.035-.983.036-1.848.036h-.4c-.865 0-1.423-.001-1.848-.036-.408-.033-.559-.09-.633-.128a1.5 1.5 0 0 1-.656-.655c-.037-.074-.094-.225-.127-.633-.035-.425-.036-.983-.036-1.848v-5.45Z"}))};Ny.displayName="DeleteIcon";var $y=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M11.25 8.5c-.414 0-.75.336-.75.75v1.25h-1.25c-.414 0-.75.336-.75.75s.336.75.75.75h1.25v1.25c0 .414.336.75.75.75s.75-.336.75-.75v-1.25h1.25c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-1.25v-1.25c0-.414-.336-.75-.75-.75Z"}),o.createElement("path",{fillRule:"evenodd",d:"M8.75 16.5c-1.438 0-2.618-1.104-2.74-2.51-1.406-.122-2.51-1.302-2.51-2.74v-5c0-1.519 1.231-2.75 2.75-2.75h5c1.438 0 2.618 1.104 2.74 2.51 1.406.122 2.51 1.302 2.51 2.74v5c0 1.519-1.231 2.75-2.75 2.75h-5Zm0-10.5c-1.519 0-2.75 1.231-2.75 2.75v3.725c-.57-.116-1-.62-1-1.225v-5c0-.69.56-1.25 1.25-1.25h5c.605 0 1.11.43 1.225 1h-3.725Zm0 1.5c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h5c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25h-5Z"}))};$y.displayName="DuplicateIcon";var Oy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M15.655 4.344a2.695 2.695 0 0 0-3.81 0l-.599.599-.009-.009-1.06 1.06.008.01-5.88 5.88a2.75 2.75 0 0 0-.805 1.944v1.922a.75.75 0 0 0 .75.75h1.922a2.75 2.75 0 0 0 1.944-.806l7.54-7.539a2.695 2.695 0 0 0 0-3.81Zm-4.409 2.72-5.88 5.88a1.25 1.25 0 0 0-.366.884v1.172h1.172c.331 0 .65-.132.883-.366l5.88-5.88-1.689-1.69Zm2.75.629.599-.599a1.195 1.195 0 1 0-1.69-1.689l-.598.599 1.69 1.689Z"}))};Oy.displayName="EditIcon";var Ly=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M9.75 3c-1.243 0-2.25 1.007-2.25 2.25 0 .414.336.75.75.75s.75-.336.75-.75.336-.75.75-.75h3.5c.69 0 1.25.56 1.25 1.25v8.5c0 .69-.56 1.25-1.25 1.25h-3.5c-.414 0-.75-.336-.75-.75s-.336-.75-.75-.75-.75.336-.75.75c0 1.243 1.007 2.25 2.25 2.25h3.5c1.519 0 2.75-1.231 2.75-2.75v-8.5c0-1.519-1.231-2.75-2.75-2.75h-3.5Z"}),o.createElement("path",{d:"M12.25 10.75c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-5.69l.97-.97c.293-.293.293-.767 0-1.06-.293-.293-.767-.293-1.06 0l-2.25 2.25c-.141.14-.22.331-.22.53s.079.39.22.53l2.25 2.25c.293.293.767.293 1.06 0 .293-.293.293-.767 0-1.06l-.97-.97h5.69Z"}))};Ly.displayName="ExitIcon";var My=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M3 6a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}),o.createElement("path",{d:"M6.75 14a.75.75 0 0 1 .75-.75h5a.75.75 0 0 1 0 1.5h-5a.75.75 0 0 1-.75-.75Z"}),o.createElement("path",{d:"M5.5 9.25a.75.75 0 0 0 0 1.5h9a.75.75 0 0 0 0-1.5h-9Z"}))};My.displayName="FilterIcon";var Dd=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M10 14a.75.75 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5a.75.75 0 0 1-.75.75Z"}),o.createElement("path",{d:"M9 7a1 1 0 1 1 2 0 1 1 0 0 1-2 0Z"}),o.createElement("path",{fillRule:"evenodd",d:"M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-1.5 0a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0Z"}))};Dd.displayName="InfoIcon";var Hd=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M3 6.75c0-2.071 1.679-3.75 3.75-3.75h6.5c2.071 0 3.75 1.679 3.75 3.75v6.5c0 2.071-1.679 3.75-3.75 3.75h-6.5c-2.071 0-3.75-1.679-3.75-3.75v-6.5Zm3.75-2.25c-1.243 0-2.25 1.007-2.25 2.25v6.5c0 1.243 1.007 2.25 2.25 2.25h.5v-11h-.5Zm4.5 11h-2.5v-11h2.5v11Zm1.5 0h.5c1.243 0 2.25-1.007 2.25-2.25v-6.5c0-1.243-1.007-2.25-2.25-2.25h-.5v11Z"}))};Hd.displayName="LayoutColumns3Icon";var Fy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M3 4.75a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}),o.createElement("path",{fillRule:"evenodd",d:"M3 10a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}),o.createElement("path",{fillRule:"evenodd",d:"M3 15.25a.75.75 0 0 1 .75-.75h12.5a.75.75 0 0 1 0 1.5h-12.5a.75.75 0 0 1-.75-.75Z"}))};Fy.displayName="MenuIcon";var Dy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M5 10c0-.414.336-.75.75-.75h8.5c.414 0 .75.336.75.75s-.336.75-.75.75h-8.5c-.414 0-.75-.336-.75-.75Z"}))};Dy.displayName="MinusIcon";var Hy=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M15.375 8.485c1.167.674 1.167 2.358 0 3.031l-7.5 4.33c-1.167.674-2.625-.168-2.625-1.515v-8.66c0-1.348 1.458-2.19 2.625-1.516l7.5 4.33Zm-.75 1.732a.25.25 0 0 0 0-.433l-7.5-4.33a.25.25 0 0 0-.375.217v8.66a.25.25 0 0 0 .375.216l7.5-4.33Z"}))};Hy.displayName="PlayIcon";var Bd=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M10.75 5.75c0-.414-.336-.75-.75-.75s-.75.336-.75.75v3.5h-3.5c-.414 0-.75.336-.75.75s.336.75.75.75h3.5v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5h3.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-3.5v-3.5Z"}))};Bd.displayName="PlusIcon";var co=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillRule:"evenodd",d:"M9.116 4.323a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),o.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 15.677a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};co.displayName="SortAscendingIcon";var uo=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 4.823a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),o.createElement("path",{fillRule:"evenodd",d:"M9.116 15.177a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};uo.displayName="SortDescendingIcon";var By=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M7.75 6.06v7.69a.75.75 0 0 1-1.5 0v-7.69l-1.72 1.72a.75.75 0 0 1-1.06-1.06l3-3a.75.75 0 0 1 1.06 0l3 3a.75.75 0 1 1-1.06 1.06l-1.72-1.72Z"}),o.createElement("path",{d:"M13.75 6.25a.75.75 0 0 0-1.5 0v7.69l-1.72-1.72a.75.75 0 1 0-1.06 1.06l3 3a.75.75 0 0 0 1.06 0l3-3a.75.75 0 1 0-1.06-1.06l-1.72 1.72v-7.69Z"}))};By.displayName="SortIcon";var Wd=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M16.5 6.26a.75.75 0 0 1-1.5 0v-.51a.75.75 0 0 0-.75-.75h-8.5a.75.75 0 0 0-.75.75v.51a.75.75 0 0 1-1.5 0v-.51a2.25 2.25 0 0 1 2.25-2.25h8.5a2.25 2.25 0 0 1 2.25 2.25v.51Z"}),o.createElement("path",{d:"M10.75 16.01a.75.75 0 0 1-1.5 0v-6.69l-1.72 1.72a.75.75 0 1 1-1.06-1.06l3-3a.75.75 0 0 1 1.06 0l3 3a.75.75 0 1 1-1.06 1.06l-1.72-1.72v6.69Z"}))};Wd.displayName="UploadIcon";var ti=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M12.72 13.78a.75.75 0 1 0 1.06-1.06l-2.72-2.72 2.72-2.72a.75.75 0 0 0-1.06-1.06l-2.72 2.72-2.72-2.72a.75.75 0 0 0-1.06 1.06l2.72 2.72-2.72 2.72a.75.75 0 1 0 1.06 1.06l2.72-2.72 2.72 2.72Z"}))};ti.displayName="XIcon";var fa=function(t){return o.createElement("svg",Object.assign({viewBox:"0 0 20 20"},t),o.createElement("path",{d:"M12.72 13.78a.75.75 0 1 0 1.06-1.06l-2.72-2.72 2.72-2.72a.75.75 0 0 0-1.06-1.06l-2.72 2.72-2.72-2.72a.75.75 0 0 0-1.06 1.06l2.72 2.72-2.72 2.72a.75.75 0 1 0 1.06 1.06l2.72-2.72 2.72 2.72Z"}))};fa.displayName="XSmallIcon";var wc={SettingAction:"Polaris-SettingAction",Setting:"Polaris-SettingAction__Setting",Action:"Polaris-SettingAction__Action"};function Wy({action:e,children:t}){return o.createElement("div",{className:wc.SettingAction},o.createElement("div",{className:wc.Setting},t),o.createElement("div",{className:wc.Action},e))}var Ar={Avatar:"Polaris-Avatar",imageHasLoaded:"Polaris-Avatar--imageHasLoaded",Text:"Polaris-Avatar__Text",long:"Polaris-Avatar--long",hidden:"Polaris-Avatar--hidden",sizeXs:"Polaris-Avatar--sizeXs",sizeSm:"Polaris-Avatar--sizeSm",sizeMd:"Polaris-Avatar--sizeMd",sizeLg:"Polaris-Avatar--sizeLg",sizeXl:"Polaris-Avatar--sizeXl",styleOne:"Polaris-Avatar--styleOne",styleTwo:"Polaris-Avatar--styleTwo",styleThree:"Polaris-Avatar--styleThree",styleFour:"Polaris-Avatar--styleFour",styleFive:"Polaris-Avatar--styleFive",styleSix:"Polaris-Avatar--styleSix",styleSeven:"Polaris-Avatar--styleSeven",Image:"Polaris-Avatar__Image",Initials:"Polaris-Avatar__Initials",Svg:"Polaris-Avatar__Svg"};function Mr({alt:e,sourceSet:t,source:r,crossOrigin:n,onLoad:a,className:s,...i}){const l=t?t.map(({source:u,descriptor:d})=>`${u} ${d}`).join(","):null,c=m.useCallback(()=>{a&&a()},[a]);return o.createElement("img",Object.assign({alt:e,src:r,crossOrigin:n,className:s,onLoad:c},l?{srcSet:l}:{},i))}var Ir;(function(e){e.Pending="PENDING",e.Loaded="LOADED",e.Errored="ERRORED"})(Ir||(Ir={}));const Pc=["one","two","three","four","five","six","seven"],rp={xs:"3",sm:"2.5",md:"2.5",lg:"2.5",xl:"2"};function WA(e){let t=0;for(const r of e)t^=r.charCodeAt(0);return t}function UA(e){return e?Pc[WA(e)%Pc.length]:Pc[0]}function Ud({name:e,source:t,onError:r,initials:n,customer:a,size:s="md",accessibilityLabel:i}){const l=se(),c=Ib(),[u,d]=m.useState(Ir.Pending);m.useEffect(()=>{d(Ir.Pending)},[t]);const h=m.useCallback(()=>{d(Ir.Errored),r&&r()},[r]),f=m.useCallback(()=>{d(Ir.Loaded)},[]),p=t&&u!==Ir.Errored,g=e||n;let b;if(i)b=i;else if(e)b=e;else if(n){const w=n.split("").join(" ");b=l.translate("Polaris.Avatar.labelWithInitials",{initials:w})}const v=T(Ar.Avatar,s&&Ar[Be("size",s)],p&&u===Ir.Loaded&&Ar.imageHasLoaded,!a&&!p&&Ar[Be("style",UA(g))]),y=T(Ar.Text,((n==null?void 0:n.length)||0)>2&&Ar.long),E=T(Ar.Image,u!==Ir.Loaded&&Ar.hidden),S=t&&c&&u!==Ir.Errored?o.createElement(Mr,{className:E,source:t,alt:"",role:"presentation",onLoad:f,onError:h}):null,_="0.35em",R=o.createElement(o.Fragment,null,o.createElement("path",{fill:"none",d:"M25.5 13.5C25.5 16.5376 23.0376 19 20 19C16.9624 19 14.5 16.5376 14.5 13.5C14.5 10.4624 16.9624 8 20 8C23.0376 8 25.5 10.4624 25.5 13.5Z",stroke:"currentColor",strokeWidth:rp[s]}),o.createElement("path",{fill:"none",d:"M10.3433 29.682L9.47 31.254C9.03481 32.0373 9.60125 33 10.4974 33H29.5026C30.3988 33 30.9652 32.0373 30.53 31.254L29.6567 29.682C27.7084 26.175 24.0119 24 20 24C15.9882 24 12.2916 26.175 10.3433 29.682Z",stroke:"currentColor",strokeWidth:rp[s],strokeLinecap:"round",strokeLinejoin:"round"})),x=a||!n?R:o.createElement("text",{className:y,x:"50%",y:"50%",dy:_,fill:"currentColor",textAnchor:"middle"},n),C=p?null:o.createElement("span",{className:Ar.Initials},o.createElement("svg",{className:Ar.Svg,viewBox:"0 0 40 40"},x));return o.createElement("span",{"aria-label":b,role:b?"img":"presentation",className:v},C,S)}function jA({connected:e=!1,action:t,avatarUrl:r,accountName:n="",title:a,details:s,termsOfService:i}){const l=_a(),c=n?n.split(/\s+/).map(b=>b[0]).join(""):void 0,u=e?o.createElement("span",null,o.createElement(Ud,{accessibilityLabel:"",name:n,initials:c,source:r})):null,d=a||n,h=o.createElement(G,{as:"h2",variant:"headingSm"},d),f=s?o.createElement(G,{as:"span",variant:"bodyMd",tone:"subdued"},s):null,p=i?o.createElement(ne,{paddingBlockStart:l.mdUp?"400":"500"},o.createElement(G,{as:"span",variant:"bodyMd"},i)):null,g=t?vr(t,{variant:e?void 0:"primary"}):null;return o.createElement(Nb,null,o.createElement(Wy,{action:g},o.createElement(de,{gap:"400"},u,o.createElement(rt,{gap:"100"},h,f))),p)}function Vu(e){return typeof e[0]=="object"&&Object.prototype.hasOwnProperty.call(e[0],"options")}var qA={Loading:"Polaris-Autocomplete__Loading",SectionWrapper:"Polaris-Autocomplete__SectionWrapper"},Ai={Content:"Polaris-Autocomplete-MappedOption__Content",Media:"Polaris-Autocomplete-MappedOption__Media",singleSelectionMedia:"Polaris-Autocomplete-MappedOption--singleSelectionMedia",disabledMedia:"Polaris-Autocomplete-MappedOption--disabledMedia"},VA={Listbox:"Polaris-Listbox"};const jd=m.createContext(void 0),qd=m.createContext({}),Vd=m.createContext({});function Uy(){const e=m.useContext(jd);if(!e)throw new Error("No Combobox was provided. Your component must be wrapped in a <Combobox> component.");return e}function KA(){return m.useContext(qd)}function zA(e,t){const r=t.scrollTop,n=r+t.clientHeight,{offsetHeight:a}=e,{offsetTop:s}=e,i=s+a;if(!(s>r&&i<n)){let c=0;i>n?c=i+a*.85-n:s<r&&(c=s-a*.15-r),requestAnimationFrame(()=>{t.scrollBy({top:c,behavior:"auto"})})}}const jy=m.createContext(void 0),qy=m.createContext(!1),Kd=m.createContext(!1);var Kn={TextOption:"Polaris-Listbox-TextOption",allowMultiple:"Polaris-Listbox-TextOption--allowMultiple",isAction:"Polaris-Listbox-TextOption--isAction",disabled:"Polaris-Listbox-TextOption--disabled",selected:"Polaris-Listbox-TextOption--selected",Content:"Polaris-Listbox-TextOption__Content",Checkbox:"Polaris-Listbox-TextOption__Checkbox"},Tr={Checkbox:"Polaris-Checkbox",ChoiceLabel:"Polaris-Checkbox__ChoiceLabel",Backdrop:"Polaris-Checkbox__Backdrop",Input:"Polaris-Checkbox__Input","Input-indeterminate":"Polaris-Checkbox__Input--indeterminate",Icon:"Polaris-Checkbox__Icon",animated:"Polaris-Checkbox--animated",toneMagic:"Polaris-Checkbox--toneMagic",hover:"Polaris-Checkbox--hover",error:"Polaris-Checkbox--error",checked:"Polaris-Checkbox--checked",pathAnimation:"Polaris-Checkbox--pathAnimation"},jr={Choice:"Polaris-Choice",labelHidden:"Polaris-Choice--labelHidden",Label:"Polaris-Choice__Label",Control:"Polaris-Choice__Control",disabled:"Polaris-Choice--disabled",toneMagic:"Polaris-Choice--toneMagic",Descriptions:"Polaris-Choice__Descriptions",HelpText:"Polaris-Choice__HelpText"};function Vy({id:e,label:t,disabled:r,error:n,children:a,labelHidden:s,helpText:i,onClick:l,labelClassName:c,fill:u,bleed:d,bleedBlockStart:h,bleedBlockEnd:f,bleedInlineStart:p,bleedInlineEnd:g,tone:b}){const v=T(jr.Choice,s&&jr.labelHidden,r&&jr.disabled,b&&jr[Be("tone",b)],c),y={...Is("choice","bleed-block-end","space",f||d),...Is("choice","bleed-block-start","space",h||d),...Is("choice","bleed-inline-start","space",p||d),...Is("choice","bleed-inline-end","space",g||d),...Object.fromEntries(Object.entries($b("choice","fill",u)).map(([x,C])=>[x,C?"100%":"auto"]))},E=o.createElement("label",{className:v,htmlFor:e,onClick:l,style:_d(y)},o.createElement("span",{className:jr.Control},a),o.createElement("span",{className:jr.Label},o.createElement(G,{as:"span",variant:"bodyMd"},t))),S=i?o.createElement("div",{className:jr.HelpText,id:zd(e)},o.createElement(G,{as:"span",tone:r?void 0:"subdued"},i)):null,_=n&&typeof n!="boolean"&&o.createElement("div",{className:jr.Error},o.createElement(Cd,{message:n,fieldID:e})),R=S||_?o.createElement("div",{className:jr.Descriptions},_,S):null;return R?o.createElement("div",null,E,R):E}function zd(e){return`${e}HelpText`}const Ln=m.forwardRef(function({ariaControls:t,ariaDescribedBy:r,label:n,labelHidden:a,checked:s=!1,helpText:i,disabled:l,id:c,name:u,value:d,error:h,onChange:f,onFocus:p,onBlur:g,labelClassName:b,fill:v,bleed:y,bleedBlockStart:E,bleedBlockEnd:S,bleedInlineStart:_,bleedInlineEnd:R,tone:x},C){const w=m.useRef(null),P=m.useId(),N=c??P,$=m.useContext(qy);m.useImperativeHandle(C,()=>({focus:()=>{w.current&&w.current.focus()}}));const L=()=>{g&&g()},k=()=>{f==null||w.current==null||l||(f(w.current.checked,N),w.current.focus())},A=[];h&&typeof h!="boolean"&&A.push(wd(N)),i&&A.push(zd(N)),r&&A.push(r);const O=A.length?A.join(" "):void 0,M=T(Tr.Checkbox,h&&Tr.error),D=s==="indeterminate",I=!D&&!!s,F=D?{indeterminate:"true","aria-checked":"mixed"}:{"aria-checked":I},B=o.createElement("svg",{viewBox:"0 0 16 16",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision"},o.createElement("path",{className:T(s&&Tr.checked),d:"M1.5,5.5L3.44655,8.22517C3.72862,8.62007,4.30578,8.64717,4.62362,8.28044L10.5,1.5",transform:"translate(2 2.980376)",opacity:"0",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",pathLength:"1"})),U=T(Tr.Input,D&&Tr["Input-indeterminate"],x&&Tr[Be("tone",x)]),V={helpText:i,error:h,bleed:y,bleedBlockStart:E,bleedBlockEnd:S,bleedInlineStart:_,bleedInlineEnd:R};return o.createElement(Vy,Object.assign({id:N,label:n,labelHidden:a,disabled:l,labelClassName:T(Tr.ChoiceLabel,b),fill:v,tone:x},V),o.createElement("span",{className:M},o.createElement("input",Object.assign({ref:w,id:N,name:u,value:d,type:"checkbox",checked:I,disabled:l,className:U,onBlur:L,onChange:GA,onClick:k,onFocus:p,"aria-invalid":h!=null,"aria-controls":t,"aria-describedby":O,role:$?"presentation":"checkbox"},F)),o.createElement("span",{className:Tr.Backdrop,onClick:np,onKeyUp:np}),o.createElement("span",{className:T(Tr.Icon,!D&&Tr.animated)},D?o.createElement(le,{source:Dy}):B)))});function GA(){}function np(e){e.stopPropagation()}const Gd=m.memo(function({children:t,selected:r,disabled:n}){const{allowMultiple:a}=m.useContext(Vd),s=m.useContext(Kd),i=T(Kn.TextOption,r&&!a&&Kn.selected,n&&Kn.disabled,a&&Kn.allowMultiple,s&&Kn.isAction),l=r?o.createElement(ne,{width:"100%"},o.createElement(de,{wrap:!1,align:"space-between",gap:"200"},t,o.createElement(de,{align:"end"},o.createElement(le,{source:qo})))):o.createElement(o.Fragment,null,t);return o.createElement("div",{className:i},o.createElement("div",{className:Kn.Content},a&&!s?o.createElement("div",{className:Kn.Checkbox},o.createElement(Ln,{disabled:n,checked:r,label:t})):l))});var ap={ListItem:"Polaris-Listbox-Loading__ListItem",Loading:"Polaris-Listbox-Loading"};function Ky(){const e=m.useContext(jy);if(!e)throw new Error("No Listbox was provided. Listbox components must be wrapped in a Listbox");return e}const JA=m.memo(function({children:t,accessibilityLabel:r}){const{setLoading:n}=Ky();return m.useEffect(()=>(n(r),()=>{n(void 0)}),[r,n]),o.createElement("li",{className:ap.ListItem,role:"presentation"},t||o.createElement("div",{className:ap.Loading},o.createElement(da,{size:"small",accessibilityLabel:r})))}),XA={props:{"data-polaris-listbox-section-item":!0},selector:"[data-polaris-listbox-section-item]"},YA={attribute:"data-polaris-listbox-within-section-item"},zy=m.createContext(null);var sp={SectionGroup:"Polaris-Listbox-Section__SectionGroup",noDivider:"Polaris-Listbox-Section--noDivider"};function ZA({children:e,divider:t=!0,title:r}){const n=m.useId();return o.createElement(zy.Provider,{value:n},o.createElement("li",Object.assign({role:"presentation"},XA.props),r,o.createElement("ul",{role:"group","aria-labelledby":n,className:T(sp.SectionGroup,!t&&sp.noDivider)},e)))}function Gy(){return m.useContext(zy)}function QA({children:e}){const t=Gy()||"",r=typeof e=="string"?o.createElement(ne,{paddingBlockStart:"200",paddingInlineStart:"400",paddingBlockEnd:"200",paddingInlineEnd:"400"},o.createElement(G,{as:"span",variant:"headingSm",tone:"subdued"},e)):e;return o.createElement("div",{"aria-hidden":!0,id:t},r)}var Ac={Action:"Polaris-Listbox-Action",ActionDivider:"Polaris-Listbox-Action__ActionDivider",Icon:"Polaris-Listbox-Action__Icon"},ip={Option:"Polaris-Listbox-Option",divider:"Polaris-Listbox-Option--divider"};const Jy=m.createContext({}),Xy=m.memo(function({value:t,children:r,selected:n,disabled:a=!1,accessibilityLabel:s,divider:i}){const{onOptionSelect:l}=Ky(),c=m.useContext(Kd),{role:u,url:d,external:h,onAction:f,destructive:p}=m.useContext(Jy),g=m.useRef(null),b=m.useId(),y=!!Gy(),E=m.useCallback(w=>{w.preventDefault(),w.stopPropagation(),f&&f(),g.current&&!f&&l({domId:b,value:t,element:g.current,disabled:a})},[b,l,t,a,f]),S=w=>{w.preventDefault()},_=typeof r=="string"?o.createElement(Gd,{selected:n,disabled:a},r):r,R={[YA.attribute]:y},x=u||"option",C=d?o.createElement(_r,{url:d,external:h},_):_;return o.createElement("li",Object.assign({},R,{"data-listbox-option":!0,"data-listbox-option-action":c,"data-listbox-option-value":t,"data-listbox-option-destructive":p,"data-within-section":y,className:T(ip.Option,i&&ip.divider),id:b,ref:g,tabIndex:-1,role:x,"aria-label":s,"aria-selected":n,"aria-disabled":a,onClick:a?void 0:E,onKeyDown:a?void 0:E,onMouseDown:S}),C)});function eT(e){const{selected:t,disabled:r,children:n,icon:a,divider:s}=e,i=a&&o.createElement("div",{className:Ac.Icon},o.createElement(le,{tone:"subdued",source:a})),l=T(Ac.Action,s&&Ac.ActionDivider);return o.createElement(Kd.Provider,{value:!0},o.createElement(Xy,e,o.createElement("div",{className:l},o.createElement(Gd,{selected:t,disabled:r},i,n))))}let Sn;(function(e){e.FirstSelected="FIRST_SELECTED",e.First="FIRST",e.None="NONE"})(Sn||(Sn={}));const tT="[data-listbox-option]",Tc="data-listbox-option-value",rT="data-listbox-option-action",op="data-focused";function ot({children:e,autoSelection:t=Sn.FirstSelected,enableKeyboardControl:r,accessibilityLabel:n,customListId:a,onSelect:s,onActiveOptionChange:i}){const[l,c]=m.useState(),[u,d]=m.useState(),[h,f]=m.useState(!1),[p,g]=m.useState([]),{value:b,setTrue:v,setFalse:y}=Wt(!!r),E=m.useId(),S=a||E,_=m.useRef(null),R=m.useRef(null),{listboxId:x,textFieldLabelId:C,textFieldFocused:w,willLoadMoreOptions:P,setActiveOptionId:N,setListboxId:$,onOptionSelected:L,onKeyToBottom:k}=KA(),A=!!N;m.useEffect(()=>{$&&!x&&$(S)},[$,x,S]);const O=m.useCallback(()=>R.current?[...new Set(R.current.querySelectorAll(tT))]:[],[]),M=m.useCallback(z=>{const ae=z.some(be=>be.getAttribute("aria-selected")==="true");let we=0;const he=z.find((be,ie)=>{const pe=be.getAttribute("aria-disabled")!=="true";let Ae;return ae&&t===Sn.FirstSelected?Ae=be.getAttribute("aria-selected")==="true"&&pe:Ae=pe,Ae&&(we=ie),Ae});if(he)return{element:he,index:we}},[t]),D=m.useCallback(z=>{const{current:ae}=_;ae&&zA(z.element,ae)},[]),I=rr(D,50),F=m.useCallback(()=>{if(k)return f(!0),Promise.resolve(k())},[k]),B=m.useCallback(z=>{if(!z)return d(void 0);u==null||u.element.removeAttribute(op),z.element.setAttribute(op,"true"),I(z),d(z),N==null||N(z.domId),i==null||i(z.value,z.domId)},[u,N,i,I]),U=m.useCallback((z,ae)=>({element:z,index:ae,domId:z.id,value:z.getAttribute(Tc)||"",disabled:z.getAttribute("aria-disabled")==="true",isAction:z.getAttribute(rT)==="true"}),[]),V=m.useCallback(()=>{let z;const ae=O(),we=M(ae);if(ae.length===0&&p.length>0){g(ae),B();return}if(we){const{element:Fe,index:me}=we;z=U(Fe,me)}const he=u!==void 0&&(z==null?void 0:z.domId)===(u==null?void 0:u.domId),be=(u==null?void 0:u.isAction)&&(z==null?void 0:z.isAction)&&(z==null?void 0:z.value)!==(u==null?void 0:u.value),ie=p.map(Fe=>Fe.getAttribute(Tc)),pe=ae.map(Fe=>Fe.getAttribute(Tc)),Ae=pe.length===ie.length&&pe.every((Fe,me)=>ie[me]===Fe),qe=ie.length!==0&&pe.length>ie.length&&ie.every((Fe,me)=>pe[me]===Fe);if(Ae){he&&be&&(g(ae),B(z));return}if(qe){g(ae);return}if(g(ae),h){f(!1);return}B(z)},[h,p,u,M,O,U,B]);m.useEffect(()=>{t!==Sn.None&&!l&&e&&m.Children.count(e)>0&&V()},[e,t,u,l,V]),m.useEffect(()=>{R.current&&(_.current=R.current.closest(u_.selector))},[]),m.useEffect(()=>{r&&!b&&v()},[r,b,v]);const W=m.useCallback(z=>{B(z),L&&L(),s&&s(z.value)},[B,s,L]),H=m.useCallback((z,ae,we)=>{let he;return we==="down"?z===ae?he=P?z+1:0:he=z+1:he=z===0?ae:z-1,he},[P]),Y=m.useCallback(async z=>{const ae=p.length-1;let we=(u==null?void 0:u.index)||0,he=0,be=u==null?void 0:u.element,ie=-1;if(!u&&t===Sn.None){const pe=O(),Ae=M(pe);return g(pe),{element:Ae==null?void 0:Ae.element,nextIndex:(Ae==null?void 0:Ae.index)||0}}for(;ie++<ae;){he=H(we,ae,z),be=p[he];const pe=he>=ae,Ae=(be==null?void 0:be.getAttribute("aria-disabled"))==="true";if(pe&&P&&await F(),Ae){we=he,be=void 0;continue}break}return{element:be,nextIndex:he}},[t,p,u,P,H,F,M,O]),j=m.useCallback(async(z,ae)=>{ae.preventDefault();const{element:we,nextIndex:he}=await Y(z);if(!we)return;const be=U(we,he);B(be)},[U,Y,B]),J=m.useCallback(z=>{j("down",z)},[j]),ge=m.useCallback(z=>{j("up",z)},[j]),Oe=m.useCallback(z=>{z.preventDefault(),z.stopPropagation(),u&&W(u)},[u,W]),Ce=m.useCallback(()=>{r||v()},[r,v]),De=m.useCallback(z=>{if(z.stopPropagation(),b){const ae=M(p);if(ae){const{element:we,index:he}=ae,be=U(we,he);B(be)}}r||y()},[r,p,b,y,M,U,B]),je=b||w?o.createElement(o.Fragment,null,o.createElement(yr,{keyEvent:"keydown",keyCode:it.DownArrow,handler:J}),o.createElement(yr,{keyEvent:"keydown",keyCode:it.UpArrow,handler:ge}),o.createElement(yr,{keyEvent:"keydown",keyCode:it.Enter,handler:Oe})):null,Le=m.useMemo(()=>({onOptionSelect:W,setLoading:c}),[W]);return o.createElement(o.Fragment,null,je,o.createElement(G,{as:"span",visuallyHidden:!0},o.createElement("div",{"aria-live":"polite"},l||null)),o.createElement(jy.Provider,{value:Le},o.createElement(qy.Provider,{value:!0},e?o.createElement("ul",{tabIndex:0,role:"listbox",className:VA.Listbox,"aria-label":A?void 0:n,"aria-labelledby":C,"aria-busy":!!l,"aria-activedescendant":u&&u.domId,id:S,onFocus:A?void 0:Ce,onBlur:A?void 0:De,ref:R},e):null)))}ot.Option=Xy;ot.TextOption=Gd;ot.Loading=JA;ot.Section=ZA;ot.Header=QA;ot.Action=eT;const nT=m.memo(function({label:t,value:r,disabled:n,media:a,selected:s,singleSelection:i}){const l=T(Ai.Media,n&&Ai.disabledMedia,i&&Ai.singleSelectionMedia),c=a?o.createElement("div",{className:l},a):null,u=typeof t=="string"?t:void 0;return o.createElement(ot.Option,{accessibilityLabel:u,key:r,selected:s,value:r,disabled:n},o.createElement(ot.TextOption,{selected:s,disabled:n},o.createElement("div",{className:Ai.Content},c,t)))});var aT={Listbox:"Polaris-Combobox__Listbox"};function sT({value:e,id:t,type:r="text",ariaAutocomplete:n="list",onFocus:a,onBlur:s,onChange:i,...l}){const c=Uy(),{activeOptionId:u,listboxId:d,expanded:h,setTextFieldFocused:f,setTextFieldLabelId:p,onTextFieldFocus:g,onTextFieldChange:b,onTextFieldBlur:v}=c,y=m.useId(),E=m.useMemo(()=>t||y,[y,t]),S=m.useMemo(()=>Us(t||y),[y,t]);m.useEffect(()=>{p&&p(S)},[S,p]);const _=m.useCallback(C=>{a&&a(C),g&&g(),f&&f(!0)},[a,g,f]),R=m.useCallback(C=>{s&&s(C),v&&v(),f&&f(!1)},[s,v,f]),x=m.useCallback((C,w)=>{i&&i(C,w),b&&b(C)},[i,b]);return o.createElement($n,Object.assign({},l,{value:e,id:E,type:r,ariaAutocomplete:n,"aria-haspopup":"listbox",ariaActiveDescendant:u,ariaControls:d,role:"combobox",ariaExpanded:h,onFocus:_,onBlur:R,onChange:x}))}function Vo({activator:e,allowMultiple:t,children:r,preferredPosition:n="below",willLoadMoreOptions:a,height:s,onScrolledToBottom:i,onClose:l}){const[c,u]=m.useState(!1),[d,h]=m.useState(),[f,p]=m.useState(),[g,b]=m.useState(),[v,y]=m.useState(!1),E=!c,S=c&&m.Children.count(r)>0,_=m.useRef(null),R=m.useCallback(()=>{u(!1),l==null||l(),h(void 0)},[l]),x=m.useCallback(()=>{u(!0),h(void 0)},[]),C=m.useCallback(()=>{var A;if(!t){R(),h(void 0);return}(A=_.current)==null||A.forceUpdatePosition()},[t,R]),w=m.useCallback(()=>{E&&x()},[E,x]),P=m.useCallback(()=>{E&&x()},[E,x]),N=m.useCallback(()=>{c&&R()},[c,R]),$=m.useMemo(()=>({activeOptionId:d,expanded:c,listboxId:g,setTextFieldFocused:y,setTextFieldLabelId:p,onTextFieldFocus:w,onTextFieldChange:P,onTextFieldBlur:N}),[d,c,g,y,p,w,P,N]),L=m.useMemo(()=>({allowMultiple:t}),[t]),k=m.useMemo(()=>({listboxId:g,textFieldLabelId:f,textFieldFocused:v,willLoadMoreOptions:a,onOptionSelected:C,setActiveOptionId:h,setListboxId:b,onKeyToBottom:i}),[g,f,v,a,C,h,b,i]);return o.createElement(nt,{ref:_,active:S,activator:o.createElement(jd.Provider,{value:$},e),autofocusTarget:"none",preventFocusOnClose:!0,fullWidth:!0,preferInputActivator:!1,preferredPosition:n,onClose:R},m.Children.count(r)>0?o.createElement(nt.Pane,{onScrolledToBottom:i,height:s},o.createElement(qd.Provider,{value:k},o.createElement(Vd.Provider,{value:L},o.createElement("div",{className:aT.Listbox},r)))):null)}Vo.TextField=sT;var sr={ActionContainer:"Polaris-Autocomplete-MappedAction__ActionContainer",Action:"Polaris-Autocomplete-MappedAction__Action",destructive:"Polaris-Autocomplete-MappedAction--destructive",selected:"Polaris-Autocomplete-MappedAction--selected",disabled:"Polaris-Autocomplete-MappedAction--disabled",Prefix:"Polaris-Autocomplete-MappedAction__Prefix",Suffix:"Polaris-Autocomplete-MappedAction__Suffix",Content:"Polaris-Autocomplete-MappedAction__Content",Text:"Polaris-Autocomplete-MappedAction__Text"};function iT({active:e,content:t,disabled:r,icon:n,image:a,prefix:s,suffix:i,ellipsis:l,role:c,url:u,external:d,onAction:h,destructive:f,badge:p,helpText:g,wrapOverflow:b=!1}){const v=se();let y=null;s?y=o.createElement("div",{className:sr.Prefix},s):n?y=o.createElement("div",{className:sr.Prefix},o.createElement(le,{source:n})):a&&(y=o.createElement("div",{role:"presentation",className:sr.Prefix,style:{backgroundImage:`url(${a}`}}));const E=p&&o.createElement("span",{className:sr.Suffix},o.createElement(Tn,{tone:p.tone},p.content)),S=i&&o.createElement("span",{className:sr.Suffix},i),_=l&&t?v.translate("Polaris.Autocomplete.ellipsis",{content:t}):t,R=o.createElement("div",{className:sr.Text},o.createElement(G,{as:"p",variant:"bodyMd",breakWord:b},_),g?o.createElement(G,{as:"p",variant:"bodyMd",tone:"subdued"},g):null),x=m.useMemo(()=>({role:c,url:u,external:d,onAction:h,destructive:f}),[c,u,d,h,f]),C=T(sr.Action,r&&sr.disabled,f&&sr.destructive,e&&sr.selected);return o.createElement(Jy.Provider,{value:x},o.createElement("div",{className:sr.ActionContainer},o.createElement(ot.Action,{selected:e,disabled:r,value:t||""},o.createElement("div",{className:C},o.createElement("div",{className:sr.Content},y,R,E,S)))))}const Yy=function({options:t,selected:r,textField:n,preferredPosition:a,listTitle:s,allowMultiple:i,loading:l,actionBefore:c,willLoadMoreResults:u,emptyState:d,onSelect:h,onLoadMoreResults:f}){const p=se(),g=m.useCallback(R=>R.map(x=>o.createElement(nT,Object.assign({key:x.id||x.value},x,{selected:r.includes(x.value),singleSelection:!i}))),[r,i]),b=m.useMemo(()=>{const R=l&&!u?[]:t;if(Vu(R)){if(R.every(({options:P})=>P.length===0))return null;const w=R.map(({options:P,title:N})=>{if(P.length===0)return null;const $=g(P);return o.createElement(ot.Section,{divider:!1,title:o.createElement(ot.Header,null,N),key:N},$)});return o.createElement("div",{className:qA.SectionWrapper},w)}const x=R.length>0?g(R):null;return s?o.createElement(ot.Section,{divider:!1,title:o.createElement(ot.Header,null,s)},x):x},[s,l,t,u,g]),v=l?o.createElement(ot.Loading,{accessibilityLabel:p.translate("Polaris.Autocomplete.spinnerAccessibilityLabel")}):null,y=m.useCallback(R=>{if(c&&R===c.content){c.onAction&&c.onAction();return}i?r.includes(R)?h(r.filter(x=>x!==R)):h([...r,R]):h([R])},[i,h,r,c]),E=c&&o.createElement(iT,c),S=d&&t.length<1&&!l&&o.createElement("div",{role:"status"},d),_=c?Sn.First:void 0;return o.createElement(Vo,{activator:n,allowMultiple:i,onScrolledToBottom:f,preferredPosition:a,willLoadMoreOptions:u},E||b||v||S?o.createElement(ot,{autoSelection:_,onSelect:y},E,b&&(!l||u)?b:null,v,S):null)};Yy.TextField=Vo.TextField;var Rc={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function oT(){const e=m.useContext(Ad);if(!e)throw new Pd("No ScrollLockManager was provided.");return e}function Ko(e){const t=oT();return m.useEffect(()=>(t.registerScrollLock(),()=>{t.unregisterScrollLock()}),[t]),null}function zo(e){const{onClick:t,onTouchStart:r,belowNavigation:n,transparent:a,setClosing:s}=e,i=T(Rc.Backdrop,n&&Rc.belowNavigation,a&&Rc.transparent),l=()=>{s&&s(!0)},c=()=>{s&&s(!1),t&&t()};return o.createElement(o.Fragment,null,o.createElement(Ko,null),o.createElement("div",{className:i,onClick:c,onTouchStart:r,onMouseDown:l}))}var oa={Banner:"Polaris-Banner",keyFocused:"Polaris-Banner--keyFocused",withinContentContainer:"Polaris-Banner--withinContentContainer",withinPage:"Polaris-Banner--withinPage",DismissIcon:"Polaris-Banner__DismissIcon","text-success-on-bg-fill":"Polaris-Banner--textSuccessOnBgFill","text-success":"Polaris-Banner__text--success","text-warning-on-bg-fill":"Polaris-Banner--textWarningOnBgFill","text-warning":"Polaris-Banner__text--warning","text-critical-on-bg-fill":"Polaris-Banner--textCriticalOnBgFill","text-critical":"Polaris-Banner__text--critical","text-info-on-bg-fill":"Polaris-Banner--textInfoOnBgFill","text-info":"Polaris-Banner__text--info","icon-secondary":"Polaris-Banner__icon--secondary"};const kc={success:{withinPage:{background:"bg-fill-success",text:"text-success-on-bg-fill",icon:"text-success-on-bg-fill"},withinContentContainer:{background:"bg-surface-success",text:"text-success",icon:"text-success"},icon:qo},warning:{withinPage:{background:"bg-fill-warning",text:"text-warning-on-bg-fill",icon:"text-warning-on-bg-fill"},withinContentContainer:{background:"bg-surface-warning",text:"text-warning",icon:"text-warning"},icon:Fd},critical:{withinPage:{background:"bg-fill-critical",text:"text-critical-on-bg-fill",icon:"text-critical-on-bg-fill"},withinContentContainer:{background:"bg-surface-critical",text:"text-critical",icon:"text-critical"},icon:Ty},info:{withinPage:{background:"bg-fill-info",text:"text-info-on-bg-fill",icon:"text-info-on-bg-fill"},withinContentContainer:{background:"bg-surface-info",text:"text-info",icon:"text-info"},icon:Dd}};function lT(e){const t=m.useRef(null),[r,n]=m.useState(!1);return m.useImperativeHandle(e,()=>({focus:()=>{var l;(l=t.current)==null||l.focus(),n(!0)}}),[]),{wrapperRef:t,handleKeyUp:l=>{l.target===t.current&&n(!0)},handleBlur:()=>n(!1),handleMouseUp:l=>{l.currentTarget.blur(),n(!1)},shouldShowFocus:r}}const cT=m.forwardRef(function(t,r){const{tone:n,stopAnnouncements:a}=t,s=m.useContext(ts),{wrapperRef:i,handleKeyUp:l,handleBlur:c,handleMouseUp:u,shouldShowFocus:d}=lT(r),h=T(oa.Banner,d&&oa.keyFocused,s?oa.withinContentContainer:oa.withinPage);return o.createElement(sC.Provider,{value:!0},o.createElement("div",{className:h,tabIndex:0,ref:i,role:n==="warning"||n==="critical"?"alert":"status","aria-live":a?"off":"polite",onMouseUp:u,onKeyUp:l,onBlur:c},o.createElement(uT,t)))});function uT({tone:e="info",icon:t,hideIcon:r,onDismiss:n,action:a,secondaryAction:s,title:i,children:l}){const c=se(),u=m.useContext(ts),d=!i&&!u,h=Object.keys(kc).includes(e)?e:"info",f=kc[h][u?"withinContentContainer":"withinPage"],p={backgroundColor:f.background,textColor:f.text,bannerTitle:i?o.createElement(G,{as:"h2",variant:"headingSm",breakWord:!0},i):null,bannerIcon:r?null:o.createElement("span",{className:oa[f.icon]},o.createElement(le,{source:t??kc[h].icon})),actionButtons:a||s?o.createElement(Er,null,a&&o.createElement(ye,Object.assign({onClick:a.onAction},a),a.content),s&&o.createElement(ye,Object.assign({onClick:s.onAction},s),s.content)):null,dismissButton:n?o.createElement(ye,{variant:"tertiary",icon:o.createElement("span",{className:oa[d?"icon-secondary":f.icon]},o.createElement(le,{source:ti})),onClick:n,accessibilityLabel:c.translate("Polaris.Banner.dismissButton")}):null},g=l?o.createElement(G,{as:"span",variant:"bodyMd"},l):null;return u?o.createElement(fT,p,g):d?o.createElement(hT,p,g):o.createElement(dT,p,g)}function dT({backgroundColor:e,textColor:t,bannerTitle:r,bannerIcon:n,actionButtons:a,dismissButton:s,children:i}){const{smUp:l}=_a(),c=i||a;return o.createElement(ne,{width:"100%"},o.createElement(rt,{align:"space-between"},o.createElement(ne,{background:e,color:t,borderStartStartRadius:l?"300":void 0,borderStartEndRadius:l?"300":void 0,borderEndStartRadius:!c&&l?"300":void 0,borderEndEndRadius:!c&&l?"300":void 0,padding:"300"},o.createElement(de,{align:"space-between",blockAlign:"center",gap:"200",wrap:!1},o.createElement(de,{gap:"100",wrap:!1},n,r),s)),c&&o.createElement(ne,{padding:{xs:"300",md:"400"},paddingBlockStart:"300"},o.createElement(rt,{gap:"200"},o.createElement("div",null,i),a))))}function hT({backgroundColor:e,bannerIcon:t,actionButtons:r,dismissButton:n,children:a}){const[s,i]=m.useState("center"),l=m.useRef(null),c=m.useRef(null),u=m.useRef(null),d=m.useCallback(()=>{var p,g,b;const h=(p=l.current)==null?void 0:p.offsetHeight,f=((g=c.current)==null?void 0:g.offsetHeight)||((b=u.current)==null?void 0:b.offsetHeight);!h||!f||(h>f?i("start"):i("center"))},[]);return m.useEffect(()=>d(),[d]),mt("resize",d),o.createElement(ne,{width:"100%",padding:"300",borderRadius:"300"},o.createElement(de,{align:"space-between",blockAlign:s,wrap:!1},o.createElement(ne,{width:"100%"},o.createElement(de,{gap:"200",wrap:!1,blockAlign:s},t?o.createElement("div",{ref:c},o.createElement(ne,{background:e,borderRadius:"200",padding:"100"},t)):null,o.createElement(ne,{ref:l,width:"100%"},o.createElement(rt,{gap:"200"},o.createElement("div",null,a),r)))),o.createElement("div",{ref:u,className:oa.DismissIcon},n)))}function fT({backgroundColor:e,textColor:t,bannerTitle:r,bannerIcon:n,actionButtons:a,dismissButton:s,children:i}){return o.createElement(ne,{width:"100%",background:e,padding:"200",borderRadius:"200",color:t},o.createElement(de,{align:"space-between",blockAlign:"start",wrap:!1,gap:"200"},o.createElement(de,{gap:"150",wrap:!1},n,o.createElement(ne,{width:"100%"},o.createElement(rt,{gap:"200"},o.createElement(rt,{gap:"050"},r,o.createElement("div",null,i)),a))),s))}function lp(e=[],t,r,n){const a=r.reduce((c,u)=>c+u,0),s=e.map((c,u)=>u),i=[],l=[];if(n>a)i.push(...s);else{let c=0,u=!1;s.forEach(d=>{const h=r[d];if(c+h>=n-t||u){l.push(d),u=!0;return}i.push(d),c+=h})}return{visiblePromotedActions:i,hiddenPromotedActions:l}}function pT(e){const t=e.filter(r=>r.items);return e.length===t.length}function mT(e){const t=e.filter(r=>!r.items);return e.length===t.length}function Ku(e){return"title"in e&&"actions"in e}function gT(e){return"items"in e}function bT(e){if(!(!e||e.length===0)){if(pT(e))return e;if(mT(e))return[{items:e}]}}function cp(e){var t;if(!e)return!1;for(const r of e)for(const n of r.items)if(((t=n.badge)==null?void 0:t.tone)==="new")return!0;return!1}var Gr={BulkActionsOuterLayout:"Polaris-BulkActions__BulkActionsOuterLayout",BulkActionsSelectAllWrapper:"Polaris-BulkActions__BulkActionsSelectAllWrapper",BulkActionsPromotedActionsWrapper:"Polaris-BulkActions__BulkActionsPromotedActionsWrapper",BulkActionsLayout:"Polaris-BulkActions__BulkActionsLayout","BulkActionsLayout--measuring":"Polaris-BulkActions--bulkActionsLayoutMeasuring",BulkActionsMeasurerLayout:"Polaris-BulkActions__BulkActionsMeasurerLayout",BulkActionButton:"Polaris-BulkActions__BulkActionButton",disabled:"Polaris-BulkActions--disabled",AllAction:"Polaris-BulkActions__AllAction"},up={Indicator:"Polaris-Indicator",pulseIndicator:"Polaris-Indicator--pulseIndicator"};function Jd({pulse:e=!0}){const t=T(up.Indicator,e&&up.pulseIndicator);return o.createElement("span",{className:t})}function Ka({handleMeasurement:e,url:t,external:r,onAction:n,content:a,disclosure:s,accessibilityLabel:i,disabled:l,destructive:c,indicator:u,showContentInButton:d,size:h}){const f=m.useRef(null);Lo(()=>{if(e&&f.current){const v=f.current.getBoundingClientRect().width;e(v)}});const p=s&&!d,g=p?void 0:a,b=o.createElement(ye,{external:r,url:t,accessibilityLabel:p?a:i,tone:c?"critical":void 0,disclosure:s&&d,onClick:n,disabled:l,size:h,icon:p?o.createElement(le,{source:Gs,tone:"base"}):void 0},g);return o.createElement("div",{className:Gr.BulkActionButton,ref:f},p?o.createElement(Gt,{content:a,preferredPosition:"below"},b):b,u&&o.createElement(Jd,null))}function yT({title:e,actions:t,isNewBadgeInBadgeActions:r,size:n}){const{value:a,toggle:s}=Wt(!1);return o.createElement(o.Fragment,null,o.createElement(nt,{active:a,activator:o.createElement(Ka,{disclosure:!0,showContentInButton:!0,onAction:s,content:e,indicator:r,size:n}),onClose:s,preferInputActivator:!0},o.createElement(nn,{items:t,onActionAnyItem:s})))}var xc={CheckableButton:"Polaris-CheckableButton",Checkbox:"Polaris-CheckableButton__Checkbox",Label:"Polaris-CheckableButton__Label"};const Xd=m.forwardRef(function({accessibilityLabel:t,label:r="",onToggleAll:n,selected:a,disabled:s,ariaLive:i},l){const c=m.useRef(null);function u(){var d;(d=c==null?void 0:c.current)==null||d.focus()}return m.useImperativeHandle(l,()=>({focus:u})),o.createElement("div",{className:xc.CheckableButton,onClick:n},o.createElement("div",{className:xc.Checkbox},o.createElement(Ln,{label:t,labelHidden:!0,checked:a,disabled:s,onChange:n,ref:c})),r?o.createElement("span",{className:xc.Label,"aria-live":i},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},r)):null)}),vT=4;function ET({promotedActions:e=[],disabled:t,buttonSize:r,handleMeasurement:n}){const a=se(),s=m.useRef(null),i=a.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),l=o.createElement(Ka,{disclosure:!0,content:i}),c=m.useCallback(()=>{if(!s.current)return;const d=s.current.offsetWidth,h=s.current.children,p=Array.from(h).map(b=>Math.ceil(b.getBoundingClientRect().width)+vT),g=p.pop()||0;n({containerWidth:d,disclosureWidth:g,hiddenActionsWidths:p})},[n]);m.useEffect(()=>{c()},[c,e]);const u=e.map((d,h)=>Ku(d)?o.createElement(Ka,{key:h,disclosure:!0,showContentInButton:!0,content:d.title,size:r}):o.createElement(Ka,Object.assign({key:h,disabled:t},d,{size:r})));return mt("resize",c),o.createElement("div",{className:Gr.BulkActionsMeasurerLayout,ref:s},u,l)}const Yd=m.forwardRef(function({promotedActions:t,actions:r,disabled:n,buttonSize:a,paginatedSelectAllAction:s,paginatedSelectAllText:i,label:l,accessibilityLabel:c,selected:u,onToggleAll:d,onMoreActionPopoverToggle:h,width:f,selectMode:p},g){const b=se(),[v,y]=m.useState(!1),[E,S]=m.useReducer((j,J)=>({...j,...J}),{disclosureWidth:0,containerWidth:1/0,actionsWidths:[],visiblePromotedActions:[],hiddenPromotedActions:[],hasMeasured:!1}),{visiblePromotedActions:_,hiddenPromotedActions:R,containerWidth:x,disclosureWidth:C,actionsWidths:w,hasMeasured:P}=E;m.useEffect(()=>{if(x===0||!t||t.length===0)return;const{visiblePromotedActions:j,hiddenPromotedActions:J}=lp(t,C,w,x);S({visiblePromotedActions:j,hiddenPromotedActions:J,hasMeasured:x!==1/0})},[x,C,t,w]);const N=!t||t&&_.length===0?b.translate("Polaris.ResourceList.BulkActions.actionsActivatorLabel"):b.translate("Polaris.ResourceList.BulkActions.moreActionsActivatorLabel"),$=s?o.createElement(nr,{className:Gr.AllAction,onClick:s.onAction,size:"slim",disabled:n},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},s.content)):null,L=i&&s,A={accessibilityLabel:c,label:L?i:l,selected:u,onToggleAll:d,disabled:n,ariaLive:L?"polite":void 0,ref:g},O=m.useCallback(()=>{h==null||h(v),y(j=>!j)},[h,v]),M=m.useCallback(j=>{const{hiddenActionsWidths:J,containerWidth:ge,disclosureWidth:Oe}=j;if(!t||t.length===0)return;const{visiblePromotedActions:Ce,hiddenPromotedActions:De}=lp(t,Oe,J,ge);S({visiblePromotedActions:Ce,hiddenPromotedActions:De,actionsWidths:J,containerWidth:ge,disclosureWidth:Oe,hasMeasured:!0})},[t]),D=bT(r),I=t?t.filter((j,J)=>!!_.includes(J)).map((j,J)=>Ku(j)?o.createElement(yT,Object.assign({key:J},j,{isNewBadgeInBadgeActions:cp(D),size:a})):o.createElement(Ka,Object.assign({key:J,disabled:n},j,{size:a}))):null,U={items:R.map(j=>t==null?void 0:t[j]).reduce((j,J)=>J?Ku(J)?j.concat(J.actions):j.concat(J):j,[])},V=m.useMemo(()=>{if(D)return D;if(!r)return[];let j=!0;return r.filter(J=>J).reduce((J,ge)=>{if(gT(ge))return j=!1,J.concat(ge);if(j){if(J.length===0)return[{items:[ge]}];const Oe=J[J.length-1];return J.splice(J.length-1,1,{items:[...Oe.items,ge]}),J}return j=!0,J.concat({items:[ge]})},[])},[r,D]),W=o.createElement(Ka,{disclosure:!0,showContentInButton:!I,onAction:O,content:N,disabled:n,indicator:cp(D),size:a}),H=V.length>0?o.createElement(nt,{active:v,activator:W,preferredAlignment:"right",onClose:O},o.createElement(nn,{sections:U.items.length>0?[U,...V]:V,onActionAnyItem:O})):null,Y=o.createElement(ET,{promotedActions:t,disabled:n,buttonSize:a,handleMeasurement:M});return o.createElement("div",{className:Gr.BulkActions,style:f?{width:f}:void 0},o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement("div",{className:Gr.BulkActionsSelectAllWrapper},o.createElement(Xd,A),$),p?o.createElement("div",{className:Gr.BulkActionsPromotedActionsWrapper},o.createElement(de,{gap:"100",blockAlign:"center"},o.createElement("div",{className:Gr.BulkActionsOuterLayout},Y,o.createElement("div",{className:T(Gr.BulkActionsLayout,!P&&Gr["BulkActionsLayout--measuring"])},I)),H)):null))});var qr={CalloutCard:"Polaris-CalloutCard",Image:"Polaris-CalloutCard__Image",DismissImage:"Polaris-CalloutCard__DismissImage",Content:"Polaris-CalloutCard__Content",Title:"Polaris-CalloutCard__Title",Buttons:"Polaris-CalloutCard__Buttons",Container:"Polaris-CalloutCard__Container",Dismiss:"Polaris-CalloutCard__Dismiss",hasDismiss:"Polaris-CalloutCard--hasDismiss"},lt={LegacyCard:"Polaris-LegacyCard",Section:"Polaris-LegacyCard__Section",subdued:"Polaris-LegacyCard--subdued","Section-hideOnPrint":"Polaris-LegacyCard__Section--hideOnPrint",hideOnPrint:"Polaris-LegacyCard--hideOnPrint",Header:"Polaris-LegacyCard__Header","Section-fullWidth":"Polaris-LegacyCard__Section--fullWidth","Section-flush":"Polaris-LegacyCard__Section--flush","Section-subdued":"Polaris-LegacyCard__Section--subdued",SectionHeader:"Polaris-LegacyCard__SectionHeader",Subsection:"Polaris-LegacyCard__Subsection",Footer:"Polaris-LegacyCard__Footer",LeftJustified:"Polaris-LegacyCard__LeftJustified",FirstSectionPadding:"Polaris-LegacyCard__FirstSectionPadding",LastSectionPadding:"Polaris-LegacyCard__LastSectionPadding"};function Zy({children:e,title:t,actions:r}){const n=r?o.createElement(Er,null,rn(r,{variant:"plain"})):null,a=m.isValidElement(t)?t:o.createElement(G,{variant:"headingSm",as:"h2"},t),s=n||e?o.createElement(de,{wrap:!1,gap:"200",align:"space-between",blockAlign:"center"},a,o.createElement(de,{wrap:!1,gap:"400",blockAlign:"center"},n,e)):a;return o.createElement("div",{className:lt.Header},s)}var bn={LegacyStack:"Polaris-LegacyStack",Item:"Polaris-LegacyStack__Item",noWrap:"Polaris-LegacyStack--noWrap",spacingNone:"Polaris-LegacyStack--spacingNone",spacingExtraTight:"Polaris-LegacyStack--spacingExtraTight",spacingTight:"Polaris-LegacyStack--spacingTight",spacingBaseTight:"Polaris-LegacyStack--spacingBaseTight",spacingLoose:"Polaris-LegacyStack--spacingLoose",spacingExtraLoose:"Polaris-LegacyStack--spacingExtraLoose",distributionLeading:"Polaris-LegacyStack--distributionLeading",distributionTrailing:"Polaris-LegacyStack--distributionTrailing",distributionCenter:"Polaris-LegacyStack--distributionCenter",distributionEqualSpacing:"Polaris-LegacyStack--distributionEqualSpacing",distributionFill:"Polaris-LegacyStack--distributionFill",distributionFillEvenly:"Polaris-LegacyStack--distributionFillEvenly",alignmentLeading:"Polaris-LegacyStack--alignmentLeading",alignmentTrailing:"Polaris-LegacyStack--alignmentTrailing",alignmentCenter:"Polaris-LegacyStack--alignmentCenter",alignmentFill:"Polaris-LegacyStack--alignmentFill",alignmentBaseline:"Polaris-LegacyStack--alignmentBaseline",vertical:"Polaris-LegacyStack--vertical","Item-fill":"Polaris-LegacyStack__Item--fill"};function Qy({children:e,fill:t}){const r=T(bn.Item,t&&bn["Item-fill"]);return o.createElement("div",{className:r},e)}const Sr=m.memo(function({children:t,vertical:r,spacing:n,distribution:a,alignment:s,wrap:i}){const l=T(bn.LegacyStack,r&&bn.vertical,n&&bn[Be("spacing",n)],a&&bn[Be("distribution",a)],s&&bn[Be("alignment",s)],i===!1&&bn.noWrap),c=d_(t).map((u,d)=>Ob(u,Qy,{key:d}));return o.createElement("div",{className:l},c)});Sr.Item=Qy;function ev({children:e,title:t,subdued:r,flush:n,fullWidth:a,actions:s,hideOnPrint:i}){const l=T(lt.Section,n&&lt["Section-flush"],r&&lt["Section-subdued"],a&&lt["Section-fullWidth"],i&&lt["Section-hideOnPrint"]),c=s?o.createElement(Er,null,rn(s,{variant:"plain"})):null,u=typeof t=="string"?o.createElement(G,{variant:"headingSm",as:"h3",fontWeight:"medium"},t):t,d=u||c?o.createElement("div",{className:lt.SectionHeader},c?o.createElement(Sr,{alignment:"baseline"},o.createElement(Sr.Item,{fill:!0},u),c):u):null;return o.createElement("div",{className:l},d,e)}function ST({children:e}){return o.createElement("div",{className:lt.Subsection},e)}const Rn=function({children:t,hideOnPrint:r,title:n,subdued:a,sectioned:s,actions:i,primaryFooterAction:l,secondaryFooterActions:c,secondaryFooterActionsDisclosureText:u,footerActionAlignment:d="right"}){const h=se(),{value:f,toggle:p}=Wt(!1),g=_T(),b=T(lt.LegacyCard,a&&lt.subdued,r&&lt.hideOnPrint),v=n||i?o.createElement(Zy,{actions:i,title:n}):null,y=s?o.createElement(ev,null,t):t,E=l?vr(l,{variant:"primary"}):null;let S=null;c&&c.length&&(c.length===1?S=vr(c[0]):S=o.createElement(o.Fragment,null,o.createElement(nt,{active:f,activator:o.createElement(ye,{disclosure:!0,onClick:p},u||h.translate("Polaris.Common.more")),onClose:p},o.createElement(nn,{items:c}))));const _=E||S?o.createElement("div",{className:T(lt.Footer,d==="left"&&lt.LeftJustified)},d==="right"?o.createElement(Er,null,S,E):o.createElement(Er,null,E,S)):null;return o.createElement(ts.Provider,{value:!0},o.createElement("div",{className:b,ref:g},v,y,_))};Rn.Header=Zy;Rn.Section=ev;Rn.Subsection=ST;function _T(){const e=m.useRef(null);return m.useEffect(()=>{const t=e.current;let r,n;if(t){const a=()=>{var u,d;xa(r,"top",!1),xa(n,"bottom",!1);const i=t.querySelectorAll(`.${lt.Section}, .${lt.Header}, .${lt.Footer}`);if(!(i!=null&&i.length))return;const l=i[0],c=CT(i);(u=t.firstChild)!=null&&u.contains(l)&&(r=l,xa(r,"top",!0)),(d=t.lastChild)!=null&&d.contains(c)&&(n=c,xa(n,"bottom",!0))};a();const s=new MutationObserver(a);return s.observe(t,{childList:!0,subtree:!0}),()=>{xa(r,"top",!1),xa(n,"bottom",!1),s.disconnect()}}},[]),e}function xa(e,t,r){if(!(!e||e.className.includes(lt["Section-flush"])))switch(t){case"top":e.classList.toggle(lt.FirstSectionPadding,r);return;case"bottom":e.classList.toggle(lt.LastSectionPadding,r)}}function CT(e){let t=e[0];return e.forEach(r=>{t.contains(r)||(t=r)}),t}function wT({title:e,children:t,illustration:r,primaryAction:n,secondaryAction:a,onDismiss:s}){const i=vr(n),l=a?vr(a,{variant:a.variant??"tertiary"}):null,c=l?o.createElement(Er,null,i,l):i,u=s?o.createElement("div",{className:qr.Dismiss},o.createElement(ye,{variant:"plain",icon:fa,onClick:s,accessibilityLabel:"Dismiss card"})):null,d=T(qr.Image,s&&qr.DismissImage),h=T(qr.Container,s&&qr.hasDismiss);return o.createElement(Rn,null,o.createElement("div",{className:h},u,o.createElement(Rn.Section,null,o.createElement("div",{className:qr.CalloutCard},o.createElement("div",{className:qr.Content},o.createElement("div",{className:qr.Title},o.createElement(G,{variant:"headingSm",as:"h2"},e)),o.createElement(G,{as:"span",variant:"bodyMd"},o.createElement(rt,null,t)),o.createElement("div",{className:qr.Buttons},c)),o.createElement(Mr,{alt:"",className:d,source:r})))))}var PT={ChoiceChildren:"Polaris-ChoiceList__ChoiceChildren"},ms={RadioButton:"Polaris-RadioButton",Input:"Polaris-RadioButton__Input",Backdrop:"Polaris-RadioButton__Backdrop",ChoiceLabel:"Polaris-RadioButton__ChoiceLabel",toneMagic:"Polaris-RadioButton--toneMagic"};function tv({ariaDescribedBy:e,label:t,labelHidden:r,helpText:n,checked:a,disabled:s,onChange:i,onFocus:l,onBlur:c,id:u,name:d,value:h,fill:f,bleed:p,bleedBlockStart:g,bleedBlockEnd:b,bleedInlineStart:v,bleedInlineEnd:y,tone:E}){const S=m.useId(),_=u??S,R=d||_,x=m.useRef(null),C=()=>{c&&c()};function w({currentTarget:k}){i&&i(k.checked,_)}const P=[];n&&P.push(zd(_)),e&&P.push(e);const N=P.length?P.join(" "):void 0,$=T(ms.Input,E&&ms[Be("tone",E)]),L={helpText:n,bleed:p,bleedBlockStart:g,bleedBlockEnd:b,bleedInlineStart:v,bleedInlineEnd:y};return o.createElement(Vy,Object.assign({label:t,labelHidden:r,disabled:s,id:_,labelClassName:ms.ChoiceLabel,fill:f},L,a?{tone:E}:{}),o.createElement("span",{className:ms.RadioButton},o.createElement("input",{id:_,name:R,value:h,type:"radio",checked:a,disabled:s,className:$,onChange:w,onFocus:l,onBlur:C,"aria-describedby":N,ref:x}),o.createElement("span",{className:ms.Backdrop})))}function rv({title:e,titleHidden:t,allowMultiple:r,choices:n,selected:a,onChange:s=AT,error:i,disabled:l=!1,name:c,tone:u}){const d=r?Ln:tv,h=m.useId(),f=c??h,p=r?`${f}[]`:f,g=e?o.createElement(ne,{as:"legend",paddingBlockEnd:{xs:"0",md:"100"}},o.createElement(G,{as:"span",variant:"bodyMd",visuallyHidden:t},e)):null,b=n.map(y=>{const{value:E,id:S,label:_,helpText:R,disabled:x,describedByError:C}=y;function w(L){s(TT(y,L,a,r),f)}const P=dp(y,a),N=y.renderChildren?y.renderChildren(P):null,$=N?o.createElement("div",{className:PT.ChoiceChildren},o.createElement(ne,{paddingBlockStart:{xs:"400",md:"0"}},N)):null;return o.createElement("li",{key:E},o.createElement(Lb,{marginBlockEnd:R?{xs:"100",md:"0"}:{xs:"0"}},o.createElement(d,{name:p,value:E,id:S,label:_,disabled:x||l,fill:{xs:!0,sm:!1},checked:dp(y,a),helpText:R,onChange:w,ariaDescribedBy:i&&C?wd(p):null,tone:u}),$))}),v=i&&o.createElement(ne,{paddingBlockStart:{xs:"0",md:"100"},paddingBlockEnd:"200"},o.createElement(Cd,{message:i,fieldID:p}));return o.createElement(rt,{as:"fieldset",gap:{xs:"400",md:"0"},"aria-invalid":i!=null,id:p},g,o.createElement(rt,{as:"ul",gap:{xs:"400",md:"0"}},b),v)}function AT(){}function dp({value:e},t){return t.includes(e)}function TT({value:e},t,r,n=!1){return t?n?[...r,e]:[e]:r.filter(a=>a!==e)}var Ic={Collapsible:"Polaris-Collapsible",isFullyClosed:"Polaris-Collapsible--isFullyClosed",expandOnPrint:"Polaris-Collapsible--expandOnPrint"};function Go({id:e,expandOnPrint:t,open:r,transition:n=!0,children:a,onAnimationEnd:s}){const[i,l]=m.useState(0),[c,u]=m.useState(r),[d,h]=m.useState("idle"),f=m.useRef(null),p=d==="idle"&&r&&c,g=d==="idle"&&!r&&!c,b=t||!g?a:null,v=T(Ic.Collapsible,g&&Ic.isFullyClosed,t&&Ic.expandOnPrint),y=kT(n),S={...typeof n=="object"&&{transitionDuration:n.duration,transitionTimingFunction:n.timingFunction},maxHeight:p?"none":`${i}px`,overflow:p?"visible":"hidden"},_=m.useCallback(({target:x})=>{x===f.current&&(h("idle"),u(r),s&&s())},[s,r]),R=m.useCallback(()=>{y?(u(r),h("idle"),r&&f.current?l(f.current.scrollHeight):l(0)):h("measuring")},[r,y]);return m.useEffect(()=>{r!==c&&R()},[r,c]),m.useEffect(()=>{!r||!f.current||l(f.current.scrollHeight)},[]),m.useEffect(()=>{if(f.current)switch(d){case"idle":break;case"measuring":l(f.current.scrollHeight),h("animating");break;case"animating":l(r?f.current.scrollHeight:0)}},[d,r,c]),o.createElement("div",{id:e,style:S,ref:f,className:v,onTransitionEnd:_,"aria-hidden":!r},b)}const RT=/^0(ms|s)$/;function kT(e){if(typeof e=="boolean")return!e;const{duration:t}=e;return!!(t&&RT.test(t.trim()))}var en={ColorPicker:"Polaris-ColorPicker",MainColor:"Polaris-ColorPicker__MainColor",fullWidth:"Polaris-ColorPicker--fullWidth",Dragger:"Polaris-ColorPicker__Dragger",ColorLayer:"Polaris-ColorPicker__ColorLayer",HuePicker:"Polaris-ColorPicker__HuePicker",AlphaPicker:"Polaris-ColorPicker__AlphaPicker",Slidable:"Polaris-ColorPicker__Slidable"};const ho=13;function xT(e,t,r){const n=$T(e,t,r);return Ot(n,0,t)}function IT(e,t){const r=Ot(e,0,t);return NT(r,t)}function NT(e,t){const r=e-ho,n=t-ho*2;return Ot(1-r/n,0,1)}function $T(e,t,r){const n=t-(r+ho);return Ot((1-e)*n+ho,0,t-r)}let zu=!1;Ls||window.addEventListener("touchmove",e=>{zu&&e.preventDefault()},{passive:!1});class Zd extends m.PureComponent{constructor(...t){super(...t),this.state={dragging:!1},this.node=null,this.draggerNode=null,this.setDraggerNode=r=>{this.draggerNode=r},this.setNode=r=>{this.node=r},this.startDrag=r=>{LT(r)&&this.handleDraggerMove(r.clientX,r.clientY),zu=!0,this.setState({dragging:!0})},this.handleDragEnd=()=>{zu=!1,this.setState({dragging:!1})},this.handleMove=r=>{if(r.stopImmediatePropagation(),r.stopPropagation(),r.cancelable&&r.preventDefault(),OT(r)){this.handleDraggerMove(r.clientX,r.clientY);return}this.handleDraggerMove(r.touches[0].clientX,r.touches[0].clientY)},this.handleDraggerMove=(r,n)=>{if(this.node==null)return;const{onChange:a}=this.props,s=this.node.getBoundingClientRect(),i=r-s.left,l=n-s.top;a({x:i,y:l})}}componentDidMount(){const{onDraggerHeight:t}=this.props;if(t==null)return;const{draggerNode:r}=this;r!=null&&t(r.clientWidth)}render(){const{dragging:t}=this.state,{draggerX:r=0,draggerY:n=0}=this.props,a={transform:`translate3d(${r}px, ${n}px, 0)`},s=t?o.createElement(Nt,{event:"mousemove",handler:this.handleMove,passive:!1}):null,i=t?o.createElement(Nt,{event:"touchmove",handler:this.handleMove,passive:!1}):null,l=t?o.createElement(Nt,{event:"mouseup",handler:this.handleDragEnd}):null,c=t?o.createElement(Nt,{event:"touchend",handler:this.handleDragEnd}):null,u=t?o.createElement(Nt,{event:"touchcancel",handler:this.handleDragEnd}):null;return o.createElement("div",{ref:this.setNode,className:en.Slidable,onMouseDown:this.startDrag,onTouchStart:this.startDrag},l,s,i,c,u,o.createElement("div",{style:a,className:en.Dragger,ref:this.setDraggerNode}))}}function OT(e){return e.type==="mousemove"}function LT(e){return e.type==="mousedown"}class MT extends m.PureComponent{constructor(...t){super(...t),this.state={sliderHeight:0,draggerHeight:0},this.setSliderHeight=r=>{r!=null&&this.setState({sliderHeight:r.clientHeight})},this.setDraggerHeight=r=>{this.setState({draggerHeight:r})},this.handleChange=({y:r})=>{const{onChange:n}=this.props,{sliderHeight:a}=this.state,s=IT(r,a);n(s)}}render(){const{color:t,alpha:r}=this.props,{sliderHeight:n,draggerHeight:a}=this.state,s=xT(r,n,a),i=FT(t);return o.createElement("div",{className:en.AlphaPicker,ref:this.setSliderHeight},o.createElement("div",{className:en.ColorLayer,style:{background:i}}),o.createElement(Zd,{draggerY:s,draggerX:0,onChange:this.handleChange,onDraggerHeight:this.setDraggerHeight}))}}function FT(e){const{red:t,green:r,blue:n}=jo(e),a=`${t}, ${r}, ${n}`;return`linear-gradient(to top, rgba(${a}, 0) 18px, rgba(${a}, 1) calc(100% - 18px))`}const fo=13;function DT(e,t,r){const n=WT(e,t,r);return Ot(n,0,t)}function HT(e,t){const r=Ot(e,0,t);return BT(r,t)}function BT(e,t){const r=e-fo,n=t-fo*2;return Ot(r/n*360,0,360)}function WT(e,t,r){const n=t-(r+fo);return Ot(e/360*n+fo,0,t-r)}class UT extends m.PureComponent{constructor(...t){super(...t),this.state={sliderHeight:0,draggerHeight:0},this.setSliderHeight=r=>{r!=null&&this.setState({sliderHeight:r.clientHeight})},this.setDraggerHeight=r=>{this.setState({draggerHeight:r})},this.handleChange=({y:r})=>{const{onChange:n}=this.props,{sliderHeight:a}=this.state,s=HT(r,a);n(s)}}render(){const{hue:t}=this.props,{sliderHeight:r,draggerHeight:n}=this.state,a=DT(t,r,n);return o.createElement("div",{className:en.HuePicker,ref:this.setSliderHeight},o.createElement(Zd,{draggerY:a,draggerX:0,onChange:this.handleChange,onDraggerHeight:this.setDraggerHeight}))}}const hp=200;class jT extends m.PureComponent{constructor(...t){super(...t),this.state={pickerSize:{width:0,height:0}},this.colorNode=null,this.handleResize=rr(()=>{const{colorNode:r}=this;r!=null&&this.setState({pickerSize:{width:r.clientWidth,height:r.clientHeight}})},hp,{leading:!0,trailing:!0,maxWait:hp}),this.setColorNode=r=>{this.colorNode=r},this.handleHueChange=r=>{const{color:{brightness:n,saturation:a,alpha:s=1},onChange:i}=this.props;i({hue:r,brightness:n,saturation:a,alpha:s})},this.handleAlphaChange=r=>{const{color:{hue:n,brightness:a,saturation:s},onChange:i}=this.props;i({hue:n,brightness:a,saturation:s,alpha:r})},this.handleDraggerMove=({x:r,y:n})=>{const{pickerSize:a}=this.state,{color:{hue:s,alpha:i=1},onChange:l}=this.props,c=Ot(r/a.width,0,1),u=Ot(1-n/a.height,0,1);l({hue:s,saturation:c,brightness:u,alpha:i})},this.handlePickerDrag=r=>{r.preventDefault()}}componentDidMount(){const{colorNode:t}=this;t!=null&&this.setState({pickerSize:{width:t.clientWidth,height:t.clientHeight}})}render(){const{id:t,color:r,allowAlpha:n,fullWidth:a}=this.props,{hue:s,saturation:i,brightness:l,alpha:c}=r,{pickerSize:u}=this.state,d=c!=null&&n?c:1,{red:h,green:f,blue:p}=jo({hue:s,saturation:1,brightness:1}),g=`rgba(${h}, ${f}, ${p}, ${d})`,b=Ot(i*u.width,0,u.width),v=Ot(u.height-l*u.height,0,u.height),y=n?o.createElement(MT,{alpha:d,color:r,onChange:this.handleAlphaChange}):null,E=T(en.ColorPicker,a&&en.fullWidth);return o.createElement("div",{className:E,id:t,onMouseDown:this.handlePickerDrag},o.createElement("div",{ref:this.setColorNode,className:en.MainColor},o.createElement("div",{className:en.ColorLayer,style:{backgroundColor:g}}),o.createElement(Zd,{onChange:this.handleDraggerMove,draggerX:b,draggerY:v})),o.createElement(UT,{hue:s,onChange:this.handleHueChange}),y,o.createElement(Nt,{event:"resize",handler:this.handleResize}))}}var qT={InlineGrid:"Polaris-InlineGrid"};function po({children:e,columns:t,gap:r,alignItems:n}){const a={...$b("inline-grid","grid-template-columns",VT(t)),...Is("inline-grid","gap","space",r),"--pc-inline-grid-align-items":n};return o.createElement("div",{className:qT.InlineGrid,style:_d(a)},e)}function VT(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).map(([t,r])=>[t,fp(r)])):fp(e)}function fp(e){if(e)return typeof e=="number"||!isNaN(Number(e))?`repeat(${Number(e)}, minmax(0, 1fr))`:typeof e=="string"?e:e.map(t=>{switch(t){case"oneThird":return"minmax(0, 1fr)";case"oneHalf":return"minmax(0, 1fr)";case"twoThirds":return"minmax(0, 2fr)"}}).join(" ")}const ri=m.createContext(void 0);function Ca(){const e=m.useContext(ri);if(!e)throw new Error("No Frame context was provided. Your component must be wrapped in a <Frame> component. See https://polaris.shopify.com/components/internal-only/frame for implementation instructions.");return e}const KT=m.memo(function({message:t,saveAction:r,discardAction:n,alignContentFlush:a,fullWidth:s,contextControl:i,secondaryMenu:l}){const{setContextualSaveBar:c,removeContextualSaveBar:u}=Ca();return m.useEffect(()=>{c({message:t,saveAction:r,discardAction:n,alignContentFlush:a,fullWidth:s,contextControl:i,secondaryMenu:l})},[t,r,n,a,c,s,i,l]),m.useEffect(()=>u,[u]),null});var zT=typeof Element<"u",GT=typeof Map=="function",JT=typeof Set=="function",XT=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Ji(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,a;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!Ji(e[n],t[n]))return!1;return!0}var s;if(GT&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!Ji(n.value[1],t.get(n.value[0])))return!1;return!0}if(JT&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(XT&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;if(zT&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((a[n]==="_owner"||a[n]==="__v"||a[n]==="__o")&&e.$$typeof)&&!Ji(e[a[n]],t[a[n]]))return!1;return!0}return e!==e&&t!==t}var YT=function(t,r){try{return Ji(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const wn=c_(YT);function ZT(e){return function(t,r){const{firstVisibleColumnIndex:n,tableLeftVisibleEdge:a,tableRightVisibleEdge:s}=e,i=t.offsetLeft,l=i+t.offsetWidth,c=pp(i,a,s,"left"),u=pp(l,a,s,"right"),d=c||u,h=t.offsetWidth;return d&&(e.firstVisibleColumnIndex=Math.min(n,r)),{leftEdge:i,rightEdge:l,isVisible:d,width:h,index:r}}}function pp(e,t,r,n){return e>=t+(n==="left"?0:30)&&e<=r-30}function QT(e,t){const{firstVisibleColumnIndex:r}=e,n=Math.max(r-1,0),a=t[n],s=t[r];return{previousColumn:a,currentColumn:s}}var ce={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"};function gs({content:e,contentType:t,nthColumn:r,firstColumn:n,truncate:a,header:s,total:i,totalInFooter:l,sorted:c,sortable:u,sortDirection:d,inFixedNthColumn:h,verticalAlign:f="top",defaultSortDirection:p="ascending",onSort:g,colSpan:b,setRef:v=()=>{},stickyHeadingCell:y=!1,stickyCellWidth:E,hovered:S=!1,handleFocus:_=()=>{},hasFixedNthColumn:R=!1,fixedCellVisible:x=!1,firstColumnMinWidth:C,style:w,lastFixedFirstColumn:P}){const N=se(),$=t==="numeric",L=T(ce.Cell,ce[`Cell-${Be("verticalAlign",f)}`],n&&ce["Cell-firstColumn"],a&&ce["Cell-truncated"],s&&ce["Cell-header"],i&&ce["Cell-total"],l&&ce["Cell-total-footer"],$&&ce["Cell-numeric"],u&&ce["Cell-sortable"],c&&ce["Cell-sorted"],y&&ce.StickyHeaderCell,S&&ce["Cell-hovered"],P&&h&&x&&ce["Cell-separate"],r&&h&&y&&ce.FixedFirstColumn),k=T(s&&ce.Heading,s&&t==="text"&&ce["Heading-left"]),A=T(u&&ce.Icon),O=c&&d?d:p,M=O==="descending"?uo:co,D=d==="ascending"?"descending":"ascending",I=N.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:c?D:O}),F=o.createElement("span",{className:A},o.createElement(le,{source:M,accessibilityLabel:I})),B=!(y&&R&&r&&!h),V=u?o.createElement("button",{className:k,onClick:g,onFocus:_,tabIndex:B?0:-1},F,e):e,W=b&&b>1?{colSpan:b}:{},H=r&&C?{minWidth:C}:{minWidth:E},Y=o.createElement("th",Object.assign({ref:v},Fu.props,W,{className:L,"aria-sort":d,style:{...w,...H},"data-index-table-sticky-heading":!0}),V),j=s?o.createElement("th",Object.assign({},Fu.props,{"aria-sort":d},W,{ref:v,className:L,scope:"col",style:{...H}}),V):o.createElement("th",Object.assign({},W,{ref:v,className:L,scope:"row",style:{...H}}),a?o.createElement(e1,{className:ce.TooltipContent},e):e),J=s||n||r?j:o.createElement("td",Object.assign({className:L},W),e);return y?Y:J}const e1=({children:e,className:t=""})=>{const r=m.useRef(null),{current:n}=r,a=o.createElement("span",{ref:r,className:t},e);return(n==null?void 0:n.scrollWidth)>(n==null?void 0:n.offsetWidth)?o.createElement(Gt,{content:r.current.innerText},a):a};function nv({children:e,onMount:t,fallback:r=null}){const n=Ib(),a=n?e:r;return m.useEffect(()=>{n&&t&&t()},[n,t]),o.createElement(o.Fragment,null,a)}function t1(){const e=m.useContext(Mb);if(!e)throw new Pd("No StickyManager was provided.");return e}class r1 extends m.Component{constructor(...t){super(...t),this.state={isSticky:!1,style:{}},this.placeHolderNode=null,this.stickyNode=null,this.setPlaceHolderNode=r=>{this.placeHolderNode=r},this.setStickyNode=r=>{this.stickyNode=r},this.handlePositioning=(r,n=0,a=0,s=0)=>{const{isSticky:i}=this.state;(r&&!i||!r&&i)&&(this.adjustPlaceHolderNode(r),this.setState({isSticky:!i},()=>{if(this.props.onStickyChange==null||(this.props.onStickyChange(!i),this.props.boundingElement==null))return null;this.props.boundingElement.toggleAttribute("data-sticky-active")}));const l=r?{position:"fixed",top:n,left:a,width:s}:{};this.setState({style:l})},this.adjustPlaceHolderNode=r=>{this.placeHolderNode&&this.stickyNode&&(this.placeHolderNode.style.paddingBottom=r?`${h_(this.stickyNode).height}px`:"0px")}}componentDidMount(){const{boundingElement:t,offset:r=!1,disableWhenStacked:n=!1,stickyManager:a}=this.props;!this.stickyNode||!this.placeHolderNode||a.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:r,boundingElement:t,disableWhenStacked:n})}componentWillUnmount(){const{stickyManager:t}=this.props;this.stickyNode&&t.unregisterStickyItem(this.stickyNode)}render(){const{style:t,isSticky:r}=this.state,{children:n}=this.props,a=n1(n)?n(r):n;return o.createElement("div",null,o.createElement("div",{ref:this.setPlaceHolderNode}),o.createElement("div",{ref:this.setStickyNode,style:t},a))}}function n1(e){return typeof e=="function"}function Jo(e){const t=t1();return o.createElement(r1,Object.assign({},e,{stickyManager:t}))}function a1({columnVisibilityData:e,isScrolledFarthestLeft:t,isScrolledFarthestRight:r,navigateTableLeft:n,navigateTableRight:a,fixedFirstColumns:s,setRef:i=()=>{}}){const l=se(),c=e.map((h,f)=>{if(f<s)return;const p=T(ce.Pip,h.isVisible&&ce["Pip-visible"]);return o.createElement("div",{className:p,key:`pip-${f}`})}),u=l.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),d=l.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return o.createElement("div",{className:ce.Navigation,ref:i},o.createElement(ye,{variant:"tertiary",icon:f_,disabled:t,accessibilityLabel:u,onClick:n}),c,o.createElement(ye,{variant:"tertiary",icon:p_,disabled:r,accessibilityLabel:d,onClick:a}))}const mp=e=>{const t=[];return e&&e.forEach(r=>{t.push(r.clientHeight)}),t};class s1 extends m.PureComponent{constructor(...t){super(...t),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=m.createRef(),this.scrollContainer=m.createRef(),this.table=m.createRef(),this.stickyTable=m.createRef(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=rr(()=>{const{table:{current:r},scrollContainer:{current:n}}=this;let a=!1;r&&n&&(a=r.scrollWidth>n.clientWidth+1),this.setState({condensed:a,...this.calculateColumnVisibilityData(a)})}),this.setCellRef=({ref:r,index:n,inStickyHeader:a})=>{if(r!=null)if(a){this.stickyHeadings[n]=r;const s=r.querySelector("button");if(s==null)return;s.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[n]=r,this.tableHeadingWidths[n]=r.clientWidth},this.changeHeadingFocus=()=>{const{tableHeadings:r,stickyHeadings:n,stickyNav:a,headerNav:s}=this,i=n.findIndex(p=>{var g;return p===((g=document.activeElement)==null?void 0:g.parentElement)}),l=r.findIndex(p=>{var g;return p===((g=document.activeElement)==null?void 0:g.parentElement)}),c=a==null?void 0:a.querySelectorAll("button"),u=s==null?void 0:s.querySelectorAll("button");let d=-1;c==null||c.forEach((p,g)=>{p===document.activeElement&&(d=g)});let h=-1;if(u==null||u.forEach((p,g)=>{p===document.activeElement&&(h=g)}),i<0&&l<0&&d<0&&h<0)return null;let f;if(i>=0?f=r[i].querySelector("button"):l>=0&&(f=n[l].querySelector("button")),d>=0?f=u==null?void 0:u[d]:h>=0&&(f=c==null?void 0:c[h]),f==null)return null;f.style.visibility="visible",f.focus(),f.style.removeProperty("visibility")},this.calculateColumnVisibilityData=r=>{const n=this.fixedFirstColumns(),{table:{current:a},scrollContainer:{current:s},dataTable:{current:i}}=this,{stickyHeader:l}=this.props;if((l||r)&&a&&s&&i){const c=a.querySelectorAll(Fu.selector),u=c[n-1],d=n?u.offsetLeft+u.offsetWidth:0;if(c.length>0){const h=c.length-1,f=s.scrollLeft+d,p=s.scrollLeft+i.offsetWidth,g={firstVisibleColumnIndex:h,tableLeftVisibleEdge:f,tableRightVisibleEdge:p},b=[...c].map(ZT(g)),v=b[b.length-1],y=n?f===d:f===0;return{columnVisibilityData:b,...QT(g,b),isScrolledFarthestLeft:y,isScrolledFarthestRight:v.rightEdge<=p}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=r=>{var f;const n=this.fixedFirstColumns();if(this.scrollContainer.current==null||r.target==null||this.state.columnVisibilityData.length===0)return;const s=r.target.parentNode,i=this.scrollContainer.current.scrollLeft,l=this.scrollContainer.current.offsetWidth,c=i+l,u=this.state.columnVisibilityData.length>0?(f=this.state.columnVisibilityData[n])==null?void 0:f.rightEdge:0,d=s.offsetLeft,h=s.offsetLeft+s.offsetWidth;i>d-u&&(this.scrollContainer.current.scrollLeft=d-u),h>c&&(this.scrollContainer.current.scrollLeft=h-l)},this.stickyHeaderScrolling=()=>{const{current:r}=this.stickyTable,{current:n}=this.scrollContainer;r==null||n==null||(r.scrollLeft=n.scrollLeft)},this.scrollListener=()=>{var r;this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(n=>({...this.calculateColumnVisibilityData(n.condensed)}))},100),this.setState({isScrolledFarthestLeft:((r=this.scrollContainer.current)==null?void 0:r.scrollLeft)===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=r=>()=>{this.setState({rowHovered:r})},this.handleFocus=r=>{var u;const n=this.fixedFirstColumns();if(this.scrollContainer.current==null||r.target==null)return;const a=r.target.parentNode,i=this.props?(u=this.state.columnVisibilityData[n])==null?void 0:u.rightEdge:0,c=a.offsetLeft-i;this.scrollContainer.current.scrollLeft>c&&(this.scrollContainer.current.scrollLeft=c)},this.navigateTable=r=>{var d;const n=this.fixedFirstColumns(),{currentColumn:a,previousColumn:s}=this.state,i=(d=this.state.columnVisibilityData[n-1])==null?void 0:d.rightEdge;if(!a||!s)return;let l=0;for(let h=0;h<a.index;h++)l+=this.state.columnVisibilityData[h].width;const{current:c}=this.scrollContainer;return()=>{let h=0;n?h=r==="right"?l-i+a.width:l-s.width-i:h=r==="right"?a.rightEdge:s.leftEdge,c&&(c.scrollLeft=h,requestAnimationFrame(()=>{this.setState(f=>({...this.calculateColumnVisibilityData(f.condensed)}))}))}},this.renderHeading=({heading:r,headingIndex:n,inFixedNthColumn:a,inStickyHeader:s})=>{var w;const{sortable:i,truncate:l=!1,columnContentTypes:c,defaultSortDirection:u,initialSortColumnIndex:d=0,verticalAlign:h,firstColumnMinWidth:f}=this.props,p=this.fixedFirstColumns(),{sortDirection:g=u,sortedColumnIndex:b=d,isScrolledFarthestLeft:v}=this.state;let y;const E=`heading-cell-${n}`,S=`stickyheader-${n}`,_=s?S:E;if(i){const P=i[n],N=P&&b===n;y={defaultSortDirection:u,sorted:N,sortable:P,sortDirection:N?g:"none",onSort:this.defaultOnSort(n),fixedNthColumn:p,inFixedNthColumn:p}}const R=s?this.tableHeadingWidths[n]:void 0,x=!v,C={header:!0,stickyHeadingCell:s,content:r,contentType:c[n],nthColumn:n<p,fixedFirstColumns:p,truncate:l,headingIndex:n,...y,verticalAlign:h,handleFocus:this.handleFocus,stickyCellWidth:R,fixedCellVisible:x,firstColumnMinWidth:f};return a&&s?[o.createElement(gs,Object.assign({key:_},C,{setRef:P=>{this.setCellRef({ref:P,index:n,inStickyHeader:s})},inFixedNthColumn:!1})),o.createElement(gs,Object.assign({key:`${_}-sticky`},C,{setRef:P=>{this.setCellRef({ref:P,index:n,inStickyHeader:s})},inFixedNthColumn:!!p,lastFixedFirstColumn:n===p-1,style:{left:(w=this.state.columnVisibilityData[n])==null?void 0:w.leftEdge}}))]:o.createElement(gs,Object.assign({key:_},C,{setRef:P=>{this.setCellRef({ref:P,index:n,inStickyHeader:s})},lastFixedFirstColumn:n===p-1,inFixedNthColumn:a}))},this.totalsRowHeading=()=>{const{i18n:r,totals:n,totalsName:a}=this.props,s=a||{singular:r.translate("Polaris.DataTable.totalRowHeading"),plural:r.translate("Polaris.DataTable.totalsRowHeading")};return n&&n.filter(i=>i!=="").length>1?s.plural:s.singular},this.renderTotals=({total:r,index:n})=>{const a=this.fixedFirstColumns(),s=`totals-cell-${n}`,{truncate:i=!1,verticalAlign:l,columnContentTypes:c}=this.props;let u,d;n===0&&(u=this.totalsRowHeading()),r!==""&&n>0&&(d=c[n],u=r);const h=this.props.showTotalsInFooter;return o.createElement(gs,{total:!0,totalInFooter:h,nthColumn:n<=a-1,firstColumn:n===0,key:s,content:u,contentType:d,truncate:i,verticalAlign:l})},this.getColSpan=(r,n,a,s)=>{if(this.fixedFirstColumns())return 1;const l=r||1,c=n||a,u=Math.floor(c/l),d=c%l;return s===0?u+d:u},this.defaultRenderRow=({row:r,index:n,inFixedNthColumn:a,rowHeights:s})=>{const{columnContentTypes:i,truncate:l=!1,verticalAlign:c,hoverable:u=!0,headings:d}=this.props,{condensed:h}=this.state,f=this.fixedFirstColumns(),p=T(ce.TableRow,u&&ce.hoverable);return o.createElement("tr",{key:`row-${n}`,className:p,onMouseEnter:this.handleHover(n),onMouseLeave:this.handleHover()},r.map((g,b)=>{const v=n===this.state.rowHovered,y=`cell-${b}-row-${n}`,E=this.getColSpan(r.length,d.length,i.length,b);return o.createElement(gs,{key:y,content:g,contentType:i[b],nthColumn:b<=f-1,firstColumn:b===0,truncate:l,verticalAlign:c,colSpan:E,hovered:v,style:s?{height:`${s[n]}px`}:{},inFixedNthColumn:h&&a})}))},this.defaultOnSort=r=>{const{onSort:n,defaultSortDirection:a="ascending",initialSortColumnIndex:s}=this.props,{sortDirection:i=a,sortedColumnIndex:l=s}=this.state;let c=a;return l===r&&(c=i==="ascending"?"descending":"ascending"),()=>{this.setState({sortDirection:c,sortedColumnIndex:r},()=>{n&&n(r,c)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(t){wn(t,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){var U,V,W;const{headings:t,totals:r,showTotalsInFooter:n,rows:a,footerContent:s,hideScrollIndicator:i=!1,increasedTableDensity:l=!1,hasZebraStripingOnData:c=!1,stickyHeader:u=!1,hasFixedFirstColumn:d=!1,pagination:h}=this.props,{condensed:f,columnVisibilityData:p,isScrolledFarthestLeft:g,isScrolledFarthestRight:b}=this.state,v=this.fixedFirstColumns(),y=a.length%2===0,E=T(ce.DataTable,f&&ce.condensed,r&&ce.ShowTotals,n&&ce.ShowTotalsInFooter,c&&ce.ZebraStripingOnData,c&&y&&ce.RowCountIsEven),S=T(ce.TableWrapper,f&&ce.condensed,l&&ce.IncreasedTableDensity,u&&ce.StickyHeaderEnabled),_=o.createElement("tr",null,t.map((H,Y)=>this.renderHeading({heading:H,headingIndex:Y,inFixedNthColumn:!1,inStickyHeader:!1}))),R=r?o.createElement("tr",null,r.map((H,Y)=>this.renderTotals({total:H,index:Y}))):null,x=a.map(H=>H.slice(0,v)),C=t.slice(0,v),w=r==null?void 0:r.slice(0,v),P=(U=this.table.current)==null?void 0:U.children[0].childNodes,N=(V=this.table.current)==null?void 0:V.children[1].childNodes,$=mp(P),L=mp(N),k=f&&v!==0&&o.createElement("table",{className:T(ce.FixedFirstColumn,!g&&ce.separate),style:{width:`${(W=p[v-1])==null?void 0:W.rightEdge}px`}},o.createElement("thead",null,o.createElement("tr",{style:{height:`${$[0]}px`}},C.map((H,Y)=>this.renderHeading({heading:H,headingIndex:Y,inFixedNthColumn:!0,inStickyHeader:!1}))),r&&!n&&o.createElement("tr",{style:{height:`${$[1]}px`}},w==null?void 0:w.map((H,Y)=>this.renderTotals({total:H,index:Y})))),o.createElement("tbody",null,x.map((H,Y)=>this.defaultRenderRow({row:H,index:Y,inFixedNthColumn:!0,rowHeights:L}))),r&&n&&o.createElement("tfoot",null,o.createElement("tr",null,w==null?void 0:w.map((H,Y)=>this.renderTotals({total:H,index:Y}))))),A=a.map((H,Y)=>this.defaultRenderRow({row:H,index:Y,inFixedNthColumn:!1})),O=s?o.createElement("div",{className:ce.Footer},s):null,M=h?o.createElement(Mo,Object.assign({type:"table"},h)):null,D=n?null:R,I=n?o.createElement("tfoot",null,R):null,F=H=>i?null:o.createElement(a1,{columnVisibilityData:p,isScrolledFarthestLeft:g,isScrolledFarthestRight:b,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:v,setRef:Y=>{H==="header"?this.headerNav=Y:H==="sticky"&&(this.stickyNav=Y)}}),B=u?o.createElement(nv,null,o.createElement("div",{className:ce.StickyHeaderWrapper,role:"presentation"},o.createElement(Jo,{boundingElement:this.dataTable.current,onStickyChange:H=>{this.changeHeadingFocus(),this.stickyHeaderActive=H}},H=>{const Y=T(ce.StickyHeaderInner,H&&ce["StickyHeaderInner-isSticky"]),j=T(ce.StickyHeaderTable,!g&&ce.separate);return o.createElement("div",{className:Y},o.createElement("div",null,F("sticky")),o.createElement("table",{className:j,ref:this.stickyTable},o.createElement("thead",null,o.createElement("tr",{className:ce.StickyTableHeadingsRow},t.map((J,ge)=>this.renderHeading({heading:J,headingIndex:ge,inFixedNthColumn:!!(ge<=v-1&&v),inStickyHeader:!0}))))))}))):null;return o.createElement("div",{className:S,ref:this.dataTable},B,F("header"),o.createElement("div",{className:E},o.createElement("div",{className:ce.ScrollContainer,ref:this.scrollContainer},o.createElement(Nt,{event:"resize",handler:this.handleResize}),o.createElement(Nt,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),k,o.createElement("table",{className:ce.Table,ref:this.table},o.createElement("thead",null,_,D),o.createElement("tbody",null,A),I)),M,O))}fixedFirstColumns(){const{hasFixedFirstColumn:t,fixedFirstColumns:r=0,headings:n}=this.props,a=t&&!r?1:r;return a>=n.length?0:a}}function i1(e){const t=se();return o.createElement(s1,Object.assign({},e,{i18n:t}))}const o1=7;function l1(e,t,r=0){const n=new Date(t,e,1),a=n.getDay(),s=[[]];let i=s[0],l=n;const c=av(r);for(let u=0;u<c.indexOf(a);u++)i.push(null);for(;l.getMonth()===e;)i.length===o1&&(i=[],s.push(i)),i.push(l),l=new Date(t,e,l.getDate()+1);for(;i.length<7;)i.push(null);return s}function c1(e,t){if(e==null)return!1;const{start:r,end:n}=t;return!!(r&&e>r&&n&&e<n)}function u1(e,t){if(e==null)return!1;const{start:r,end:n}=t;return!!(r&&gr(r,e)||n&&gr(n,e))}function gr(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function d1(e,t){if(e==null)return{start:t,end:t};const{start:r,end:n}=e;return n&&(js(r,n)||ua(r,n))?{start:t,end:t}:r?ua(t,r)?{start:t,end:t}:{start:r,end:t}:n?ua(t,n)?{start:t,end:n}:{start:r||n,end:t}:{start:t,end:t}}function gp(e){return e===11?0:e+1}function bp(e,t){return e===11?t+1:t}function h1(e){return e===0?11:e-1}function f1(e,t){return e===0?t-1:t}function js(e,t){return e.getTime()>t.getTime()}function ua(e,t){return e.getTime()<t.getTime()}function Ns(e,t){return t.some(r=>e.getTime()===r.getTime())}const p1=[0,1,2,3,4,5,6];function av(e){const t=[...p1];return[...t.splice(e),...t]}function Ds(e){switch(e){case 0:return"january";case 1:return"february";case 2:return"march";case 3:return"april";case 4:return"may";case 5:return"june";case 6:return"july";case 7:return"august";case 8:return"september";case 9:return"october";case 10:return"november";case 11:return"december"}}function yp(e){switch(e){case 0:return"sunday";case 1:return"monday";case 2:return"tuesday";case 3:return"wednesday";case 4:return"thursday";case 5:return"friday";case 6:return"saturday"}}var He={DatePicker:"Polaris-DatePicker",MonthLayout:"Polaris-DatePicker__MonthLayout",MonthContainer:"Polaris-DatePicker__MonthContainer",Month:"Polaris-DatePicker__Month",DayCell:"Polaris-DatePicker__DayCell","DayCell-inRange":"Polaris-DatePicker__DayCell--inRange",Day:"Polaris-DatePicker__Day","Day-inRange":"Polaris-DatePicker__Day--inRange","Day-selected":"Polaris-DatePicker__Day--selected","Day-disabled":"Polaris-DatePicker__Day--disabled",EmptyDayCell:"Polaris-DatePicker__EmptyDayCell",Weekday:"Polaris-DatePicker__Weekday",Header:"Polaris-DatePicker__Header",Title:"Polaris-DatePicker__Title","Day-firstInRange":"Polaris-DatePicker__Day--firstInRange","Day-hasRange":"Polaris-DatePicker__Day--hasRange","Day-hoverRight":"Polaris-DatePicker__Day--hoverRight","Day-lastInRange":"Polaris-DatePicker__Day--lastInRange",Week:"Polaris-DatePicker__Week"};const m1=m.memo(function({label:t,title:r,current:n}){return o.createElement("th",{"aria-label":t,scope:"col",className:He.Weekday},o.createElement(G,{as:"span",variant:"bodySm",alignment:"center",fontWeight:n?"bold":"regular",tone:n?void 0:"subdued"},r))}),vp=m.memo(function({day:t,focused:r,onClick:n,onHover:a=Nc,onFocus:s=Nc,selected:i,inRange:l,inHoveringRange:c,disabled:u,lastDayOfMonth:d,isLastSelectedDay:h,isFirstSelectedDay:f,isHoveringRight:p,rangeIsDifferent:g,weekday:b,selectedAccessibilityLabelPrefix:v}){const y=se(),E=m.useRef(null),S=d||t;if(m.useEffect(()=>{r&&E.current&&E.current.focus()},[r]),!t)return o.createElement("td",{className:He.EmptyDayCell,onMouseOver:()=>a(S)});const _=n&&!u?n.bind(null,t):Nc,R=gr(new Date,t),x=T(He.DayCell,i&&He["DayCell-selected"],(l||c)&&!u&&He["DayCell-inRange"],h&&He["DayCell-lastInRange"],f&&He["DayCell-firstInRange"],p&&He["DayCell-hoverRight"],g&&He["DayCell-hasRange"]),C=T(He.Day,i&&He["Day-selected"],u&&He["Day-disabled"],(l||c)&&!u&&He["Day-inRange"],h&&He["Day-lastInRange"],f&&He["Day-firstInRange"],p&&He["Day-hoverRight"],g&&He["Day-hasRange"]),w=t.getDate(),P=(r||i||R||w===1)&&!u?0:-1,N=[i&&v?`${v} `:"",`${R?y.translate("Polaris.DatePicker.today"):""}`,`${b||""} `,`${y.translate(`Polaris.DatePicker.months.${Ds(t.getMonth())}`)} `,`${w} `,`${t.getFullYear()}`].join("");return o.createElement("td",{className:x},o.createElement("button",{onFocus:()=>s(t),type:"button",ref:E,tabIndex:P,className:C,onMouseOver:()=>a(S),onClick:_,"aria-label":N,"aria-disabled":u,"aria-pressed":i},o.createElement(G,{as:"span",variant:"bodySm",alignment:"center",fontWeight:R?"bold":"regular"},w)))});function Nc(){}function Ep({focusedDate:e,selected:t,hoverDate:r,disableDatesBefore:n,disableDatesAfter:a,disableSpecificDates:s,allowRange:i,onChange:l=$c,onHover:c=$c,onFocus:u=$c,month:d,year:h,weekStartsOn:f,accessibilityLabelPrefixes:p}){const g=se(),b=i?g1:()=>!1,v=new Date,y=v.getMonth()===d&&v.getFullYear()===h,E=m.useMemo(()=>l1(d,h,f),[d,f,h]),S=av(f).map(P=>o.createElement(m1,{key:P,title:g.translate(`Polaris.DatePicker.daysAbbreviated.${yp(P)}`),label:w(P),current:y&&new Date().getDay()===P})),_=m.useCallback(P=>{l(d1(i?t:void 0,P))},[i,l,t]),R=m.useMemo(()=>new Date(h,d+1,0),[d,h]);function x(P,N){if(P==null)return o.createElement(vp,{key:N,onHover:c,lastDayOfMonth:R});const $=n&&ua(P,n)||a&&js(P,a)||s&&Ns(P,s),L=i&&t&&y1(P,t),k=i&&t&&(!gr(t.start,t.end)&&b1(P,t)||r&&gr(t.start,t.end)&&js(r,t.start)&&gr(P,r)&&!L),A=!(t&&gr(t.start,t.end)),O=r&&ua(P,r),[M,D]=p;let I;return i&&L||!i&&M?I=M:i&&k&&(I=D),o.createElement(vp,{selectedAccessibilityLabelPrefix:I,weekday:w(N),focused:e!=null&&gr(P,e),day:P,key:N,onFocus:u,onClick:_,onHover:c,selected:t!=null&&u1(P,t),inRange:t!=null&&c1(P,t),disabled:$,inHoveringRange:t!=null&&r!=null&&b(P,t,r),isLastSelectedDay:k,isFirstSelectedDay:L,isHoveringRight:O,rangeIsDifferent:A})}const C=E.map((P,N)=>o.createElement("tr",{className:He.Week,key:N},P.map(x)));return o.createElement("div",{className:He.MonthContainer},o.createElement("table",{role:"grid",className:He.Month},o.createElement("caption",{className:He.Title},o.createElement(G,{as:"span",variant:"bodyMd",alignment:"center",fontWeight:y?"bold":"medium"},g.translate(`Polaris.DatePicker.months.${Ds(d)}`)," ",h)),o.createElement("thead",null,o.createElement("tr",{className:He.WeekHeadings},S)),o.createElement("tbody",null,C)));function w(P){return g.translate(`Polaris.DatePicker.days.${yp(P)}`)}}function $c(){}function g1(e,t,r){if(e==null)return!1;const{start:n,end:a}=t;return!!(gr(n,a)&&e>n&&e<=r)}function b1(e,t){if(e==null)return!1;const{end:r}=t;return!!(r&&gr(r,e))}function y1(e,t){if(e==null)return!1;const{start:r}=t;return!!(r&&gr(r,e))}function v1({id:e,selected:t,month:r,year:n,allowRange:a,multiMonth:s,disableDatesBefore:i,disableDatesAfter:l,disableSpecificDates:c,weekStartsOn:u=0,dayAccessibilityLabelPrefix:d,onMonthChange:h,onChange:f=E1}){const p=se(),[g,b]=m.useState(void 0),[v,y]=m.useState(void 0);m.useEffect(()=>{y(void 0)},[t]);const E=m.useCallback(W=>{y(W)},[]),S=m.useCallback(W=>{h&&h(W.getMonth(),W.getFullYear()),b(W),y(W)},[h]),_=m.useCallback(W=>{const{end:H}=W;b(H),y(new Date(H)),f(W)},[f]),R=m.useCallback((W,H)=>{h&&(y(void 0),h(W,H))},[h]),x=m.useCallback(W=>{b(W)},[]),C=m.useCallback(W=>{const{key:H}=W,Y=Oc(t),j=v||Y&&Y.start;if(j!=null){if(H==="ArrowUp"){const J=new Date(j);J.setDate(j.getDate()-7),i&&ua(J,i)||c&&Ns(J,c)||S(J)}if(H==="ArrowDown"){const J=new Date(j);J.setDate(j.getDate()+7),l&&js(J,l)||c&&Ns(J,c)||S(J)}if(H==="ArrowRight"){const J=new Date(j);J.setDate(j.getDate()+1),l&&js(J,l)||c&&Ns(J,c)||S(J)}if(H==="ArrowLeft"){const J=new Date(j);J.setDate(j.getDate()-1),i&&ua(J,i)||c&&Ns(J,c)||S(J)}}},[l,i,c,v,t,S]),w=bp(r,n),P=gp(r),N=bp(P,w),$=gp(P),L=f1(r,n),k=h1(r),A=p.translate(`Polaris.DatePicker.months.${Ds(k)}`),O=s?p.translate(`Polaris.DatePicker.months.${Ds($)}`):p.translate(`Polaris.DatePicker.months.${Ds(P)}`),M=s?N:w,D=m.useMemo(()=>Oc(t),[t]),I=a?p.translate("Polaris.DatePicker.start"):d,F=p.translate("Polaris.DatePicker.end"),B=[I,F],U=s?o.createElement(Ep,{onFocus:E,focusedDate:v,month:P,year:w,selected:D,hoverDate:g,onChange:_,onHover:x,disableDatesBefore:i,disableDatesAfter:l,disableSpecificDates:c,allowRange:a,weekStartsOn:u,accessibilityLabelPrefixes:B}):null,V=T(He.DatePicker);return o.createElement("div",{id:e,className:V,onKeyDown:S1,onKeyUp:C},o.createElement("div",{className:He.Header},o.createElement(ye,{variant:"tertiary",icon:m_,accessibilityLabel:p.translate("Polaris.DatePicker.previousMonth",{previousMonthName:A,showPreviousYear:L}),onClick:()=>R(k,L)}),o.createElement(ye,{variant:"tertiary",icon:ky,accessibilityLabel:p.translate("Polaris.DatePicker.nextMonth",{nextMonth:O,nextYear:M}),onClick:()=>R(P,w)})),o.createElement("div",{className:He.MonthLayout},o.createElement(Ep,{onFocus:E,focusedDate:v,month:r,year:n,selected:Oc(t),hoverDate:g,onChange:_,onHover:x,disableDatesBefore:i,disableDatesAfter:l,disableSpecificDates:c,allowRange:a,weekStartsOn:u,accessibilityLabelPrefixes:B}),U))}function E1(){}function S1(e){const{key:t}=e;(t==="ArrowUp"||t==="ArrowDown"||t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}function Oc(e){return e instanceof Date?{start:e,end:e}:e}var Ti={DescriptionList:"Polaris-DescriptionList",Term:"Polaris-DescriptionList__Term",spacingTight:"Polaris-DescriptionList--spacingTight",Description:"Polaris-DescriptionList__Description"};function _1({items:e,gap:t="loose"}){const r=e.reduce((a,{term:s,description:i},l)=>[...a,o.createElement("dt",{key:`dt${l}`,className:Ti.Term},o.createElement(G,{as:"span",variant:"headingSm"},s)),o.createElement("dd",{key:`dd${l}`,className:Ti.Description},i)],[]),n=T(Ti.DescriptionList,t==="tight"&&Ti.spacingTight);return o.createElement("dl",{className:n},r)}var C1={Divider:"Polaris-Divider"};const w1=({borderColor:e="border-secondary",borderWidth:t="025"})=>{const r=e==="transparent"?e:`var(--p-color-${e})`;return o.createElement("hr",{className:C1.Divider,style:{borderBlockStart:`var(--p-border-width-${t}) solid ${r}`}})};function sv(e=""){const t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}const P1=["dragover","dragenter","drop"];function A1(e,t){return e.type==="application/x-moz-file"||T1(e,t)}function Sp(e){if(R1(e)&&e.dataTransfer){const t=e.dataTransfer;if(t.files&&t.files.length)return Array.from(t.files);if(t.items&&t.items.length)return Array.from(t.items)}else if(k1(e)&&e.target.files)return Array.from(e.target.files);return[]}function T1(e,t){if(e&&t){const r=e.name||"",n=e.type||"",a=n.replace(/\/.*$/,"");return(Array.isArray(t)?t:t.split(",")).some(i=>{const l=i.trim();return l.startsWith(".")?r.toLowerCase().endsWith(l.toLowerCase()):l.endsWith("/*")?a===l.replace(/\/.*$/,""):n===l})}return!0}function R1(e){return P1.indexOf(e.type)>0}function k1(e){return Object.prototype.hasOwnProperty.call(e,"target")}const iv=!0;function ov(e){return e?"allowMultiple":"single"}const lv=m.createContext({disabled:!1,focused:!1,size:"extraLarge",type:"file",measuring:!1,allowMultiple:iv});var dr={DropZone:"Polaris-DropZone",focused:"Polaris-DropZone--focused",noOutline:"Polaris-DropZone--noOutline",hasOutline:"Polaris-DropZone--hasOutline",isDisabled:"Polaris-DropZone--isDisabled",isDragging:"Polaris-DropZone--isDragging",sizeLarge:"Polaris-DropZone--sizeLarge",sizeMedium:"Polaris-DropZone--sizeMedium",sizeSmall:"Polaris-DropZone--sizeSmall",measuring:"Polaris-DropZone--measuring",Container:"Polaris-DropZone__Container",Overlay:"Polaris-DropZone__Overlay",hasError:"Polaris-DropZone--hasError"},Ia={FileUpload:"Polaris-DropZone-FileUpload",large:"Polaris-DropZone-FileUpload--large",small:"Polaris-DropZone-FileUpload--small",ActionTitle:"Polaris-DropZone-FileUpload__ActionTitle","ActionTitle-disabled":"Polaris-DropZone-FileUpload__ActionTitle--disabled","ActionTitle-focused":"Polaris-DropZone-FileUpload__ActionTitle--focused",UploadIcon:"Polaris-DropZone-FileUpload__UploadIcon",disabled:"Polaris-DropZone-FileUpload--disabled"};function x1(e){const t=se(),{size:r,measuring:n,type:a,disabled:s,allowMultiple:i}=m.useContext(lv),l=sv(a),c=ov(i),{actionTitle:u=t.translate(`Polaris.DropZone.${c}.actionTitle${l}`),actionHint:d}=e,h=o.createElement(ye,{disabled:s},u),f=T(Ia.FileUpload,n&&Ia.measuring,r==="large"&&Ia.large,r==="small"&&Ia.small),p=d&&o.createElement(G,{variant:"bodySm",as:"p",tone:"subdued"},d);let g;switch(r){case"large":case"medium":g=o.createElement(rt,{inlineAlign:"center",gap:"200"},h,p);break;case"small":g=o.createElement("div",{className:T(Ia.UploadIcon,s&&Ia.disabled)},o.createElement(le,{source:Wd}));break}return o.createElement("div",{className:f},g)}const cv=function({dropOnPage:t,label:r,labelAction:n,labelHidden:a,children:s,disabled:i=!1,outline:l=!0,accept:c,active:u,overlay:d=!0,allowMultiple:h=iv,overlayText:f,errorOverlayText:p,id:g,type:b="file",onClick:v,error:y,openFileDialog:E,variableHeight:S,onFileDialogClose:_,customValidator:R,onDrop:x,onDropAccepted:C,onDropRejected:w,onDragEnter:P,onDragOver:N,onDragLeave:$}){const L=m.useRef(null),k=m.useRef(null),A=m.useRef([]),O=m.useCallback(rr(()=>{if(!L.current)return;if(S){j(!1);return}let ee="large";const oe=L.current.getBoundingClientRect().width;oe<100?ee="small":oe<160&&(ee="medium"),H(ee),Y&&j(!1)},50,{trailing:!0}),[]),[M,D]=m.useState(!1),[I,F]=m.useState(!1),{value:B,setTrue:U,setFalse:V}=Wt(!1),[W,H]=m.useState("large"),[Y,j]=m.useState(!0),J=se(),ge=m.useCallback(ee=>{const oe=[],Re=[];return Array.from(ee).forEach(ke=>{!A1(ke,c)||R&&!R(ke)?Re.push(ke):oe.push(ke)}),h||(oe.splice(1,oe.length),Re.push(...oe.slice(1))),{files:ee,acceptedFiles:oe,rejectedFiles:Re}},[c,h,R]),Oe=m.useCallback(ee=>{if(Ri(ee),i)return;const oe=Sp(ee),{files:Re,acceptedFiles:ke,rejectedFiles:Pt}=ge(oe);A.current=[],D(!1),F(Pt.length>0),x&&x(Re,ke,Pt),C&&ke.length&&C(ke),w&&Pt.length&&w(Pt),ee.target&&"value"in ee.target&&(ee.target.value="")},[i,ge,x,C,w]),Ce=m.useCallback(ee=>{if(Ri(ee),i)return;const oe=Sp(ee);if(ee.target&&!A.current.includes(ee.target)&&A.current.push(ee.target),M)return;const{rejectedFiles:Re}=ge(oe);D(!0),F(Re.length>0),P&&P()},[i,M,ge,P]),De=m.useCallback(ee=>{Ri(ee),!i&&N&&N()},[i,N]),je=m.useCallback(ee=>{ee.preventDefault(),!i&&(A.current=A.current.filter(oe=>{const Re=t&&!Ls?document:L.current;return oe!==ee.target&&Re&&Re.contains(oe)}),!(A.current.length>0)&&(D(!1),F(!1),$&&$()))},[t,i,$]),Le=t&&!Ls?document:L.current;mt("drop",Oe,Le),mt("dragover",De,Le),mt("dragenter",Ce,Le),mt("dragleave",je,Le),mt("resize",O,Ls?null:window),Lo(()=>{O()});const z=m.useId(),ae=g??z,we=sv(b),he=ov(h),be=f===void 0?J.translate(`Polaris.DropZone.${he}.overlayText${we}`):f,ie=p===void 0?J.translate(`Polaris.DropZone.errorOverlayText${we}`):p,pe=r||J.translate(`Polaris.DropZone.${he}.label${we}`),Ae=r?a:!0,qe=T(dr.DropZone,l&&dr.hasOutline,!l&&dr.noOutline,B&&dr.focused,(u||M)&&dr.isDragging,i&&dr.isDisabled,(I||y)&&dr.hasError,!S&&dr[Be("size",W)],Y&&dr.measuring),Fe=(u||M)&&!I&&!y&&d&&Z(Wd,be),me=M&&(I||y)&&Z(Fb,ie,"critical"),Ue=m.useMemo(()=>({disabled:i,focused:B,size:W,type:b||"file",measuring:Y,allowMultiple:h}),[i,B,Y,W,b,h]),Je=m.useCallback(()=>{k.current&&k.current.click()},[k]),ur=m.useCallback(()=>{Je(),_==null||_()},[Je,_]);function Z(ee,oe,Re){return o.createElement("div",{className:dr.Overlay},o.createElement(rt,{gap:"200",inlineAlign:"center"},W==="small"&&o.createElement(le,{source:ee,tone:Re}),(W==="medium"||W==="large")&&o.createElement(G,{variant:"bodySm",as:"p",fontWeight:"bold"},oe)))}function te(ee){if(!i)return v?v(ee):Je()}return m.useEffect(()=>{E&&ur()},[E,ur]),o.createElement(lv.Provider,{value:Ue},o.createElement(Js,{id:ae,label:pe,action:n,labelHidden:Ae},o.createElement("div",{ref:L,className:qe,"aria-disabled":i,onClick:te,onDragStart:Ri},Fe,me,o.createElement(G,{variant:"bodySm",as:"span",visuallyHidden:!0},o.createElement("input",{id:ae,accept:c,disabled:i,multiple:h,onChange:Oe,onFocus:U,onBlur:V,type:"file",ref:k,autoComplete:"off"})),o.createElement("div",{className:dr.Container},s))))};function Ri(e){e.preventDefault(),e.stopPropagation()}cv.FileUpload=x1;var I1="data:image/svg+xml,%3csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' d='M41.87 24a17.87 17.87 0 11-35.74 0 17.87 17.87 0 0135.74 0zm-3.15 18.96a24 24 0 114.24-4.24L59.04 54.8a3 3 0 11-4.24 4.24L38.72 42.96z' fill='%238C9196'/%3e%3c/svg%3e",N1=I1;function Qd({title:e,description:t,withIllustration:r}){const a=se().translate("Polaris.EmptySearchResult.altText"),s=t?o.createElement("p",null,t):null,i=r?o.createElement(Mr,{alt:a,source:N1,draggable:!1}):null;return o.createElement(Sr,{alignment:"center",vertical:!0},i,o.createElement(G,{variant:"headingLg",as:"p"},e),o.createElement(G,{tone:"subdued",as:"span"},s))}var zn={ImageContainer:"Polaris-EmptyState__ImageContainer",Image:"Polaris-EmptyState__Image",loaded:"Polaris-EmptyState--loaded",imageContained:"Polaris-EmptyState--imageContained",SkeletonImageContainer:"Polaris-EmptyState__SkeletonImageContainer",SkeletonImage:"Polaris-EmptyState__SkeletonImage"};function $1({children:e,heading:t,image:r,largeImage:n,imageContained:a,fullWidth:s=!1,action:i,secondaryAction:l,footerContent:c}){const[u,d]=m.useState(!1),h=m.useCallback(()=>{d(!0)},[]),f=T(zn.Image,u&&zn.loaded,a&&zn.imageContained),p=n?o.createElement(Mr,{alt:"",role:"presentation",source:n,className:f,sourceSet:[{source:r,descriptor:"568w"},{source:n,descriptor:"1136w"}],sizes:"(max-width: 568px) 60vw",onLoad:h}):o.createElement(Mr,{alt:"",role:"presentation",className:f,source:r,onLoad:h}),g=T(zn.SkeletonImage,u&&zn.loaded),b=T(zn.ImageContainer,!u&&zn.SkeletonImageContainer),v=o.createElement("div",{className:b},p,o.createElement("div",{className:g})),y=l?vr(l,{}):null,E=c?o.createElement(ne,{paddingBlockStart:"400"},o.createElement(G,{as:"span",alignment:"center",variant:"bodySm"},c)):null,S=i?vr(i,{variant:"primary",size:"medium"}):null,_=t?o.createElement(ne,{paddingBlockEnd:"150"},o.createElement(G,{variant:"headingMd",as:"p",alignment:"center"},t)):null,R=e?o.createElement(G,{as:"span",alignment:"center",variant:"bodySm"},e):null,x=_||e?o.createElement(ne,{paddingBlockEnd:"400"},_,R):null,C=S||y?o.createElement(de,{align:"center",gap:"200"},y,S):null,w=x||C||E?o.createElement(ne,{maxWidth:s?"100%":"400px"},o.createElement(rt,{inlineAlign:"center"},x,C,E)):null;return o.createElement(ne,{paddingInlineStart:"0",paddingInlineEnd:"0",paddingBlockStart:"500",paddingBlockEnd:"1600"},o.createElement(rt,{inlineAlign:"center"},v,w))}var Gn={ExceptionList:"Polaris-ExceptionList",Item:"Polaris-ExceptionList__Item",Icon:"Polaris-ExceptionList__Icon",statusWarning:"Polaris-ExceptionList--statusWarning",statusCritical:"Polaris-ExceptionList--statusCritical",Bullet:"Polaris-ExceptionList__Bullet",Title:"Polaris-ExceptionList__Title",Description:"Polaris-ExceptionList__Description"},O1={Truncate:"Polaris-Truncate"};function uv({children:e}){return o.createElement("span",{className:O1.Truncate},e)}function L1({items:e}){const t=e.map((r,n)=>{const{status:a,icon:s,title:i,description:l,truncate:c=!1}=r,u=T(Gn.Item,a&&Gn[Be("status",a)]),d=s?o.createElement(le,{source:s}):o.createElement("span",{className:Gn.Bullet}),h=i&&o.createElement("span",{className:Gn.Title},i),f=l&&o.createElement("span",{className:Gn.Description},l),p=c?uv:m.Fragment;return o.createElement("li",{className:u,key:n},o.createElement("span",{className:Gn.Icon},d),o.createElement(p,null,h,f))});return o.createElement("ul",{className:Gn.ExceptionList},t)}var er={Container:"Polaris-Filters__Container",SearchField:"Polaris-Filters__SearchField",FiltersWrapper:"Polaris-Filters__FiltersWrapper",hideQueryField:"Polaris-Filters--hideQueryField",FiltersInner:"Polaris-Filters__FiltersInner",AddFilter:"Polaris-Filters__AddFilter",FiltersWrapperWithAddButton:"Polaris-Filters__FiltersWrapperWithAddButton",AddFilterActivatorMultiple:"Polaris-Filters__AddFilterActivatorMultiple",FiltersStickyArea:"Polaris-Filters__FiltersStickyArea",ClearAll:"Polaris-Filters__ClearAll",MultiplePinnedFilterClearAll:"Polaris-Filters__MultiplePinnedFilterClearAll"};function M1({onChange:e,onClear:t,onFocus:r,onBlur:n,focused:a,value:s,placeholder:i,disabled:l,borderlessQueryField:c,loading:u,selectedViewName:d}){const h=se(),f=m.useId(),{mdUp:p}=_a(),g=s&&d&&p?o.createElement(G,{as:"span",variant:"bodyMd",tone:"subdued"},h.translate("Polaris.Filters.searchInView",{viewName:d})):null;function b(y){e(y)}function v(){t?t():e("")}return o.createElement($n,{id:f,value:s,onChange:y=>b(y??s),onFocus:r,onBlur:n,onClearButtonClick:v,autoComplete:"off",placeholder:i,disabled:l,variant:c?"borderless":"inherit",size:"slim",prefix:p?o.createElement(le,{source:Xs}):void 0,suffix:g,focused:a,label:i,labelHidden:!0,clearButton:!0,autoSize:!!g,loading:u})}function dv(e,t){const r=o.useRef(e);m.useEffect(()=>{const n=r.current;e!==r.current&&(r.current=e,t(e,n))},[e,t])}var Yt={FilterButton:"Polaris-Filters-FilterPill__FilterButton",focusedFilterButton:"Polaris-Filters-FilterPill--focusedFilterButton",ActiveFilterButton:"Polaris-Filters-FilterPill__ActiveFilterButton",PlainButton:"Polaris-Filters-FilterPill__PlainButton",ToggleButton:"Polaris-Filters-FilterPill__ToggleButton",Label:"Polaris-Filters-FilterPill__Label",clearButton:"Polaris-Filters-FilterPill--clearButton",IconWrapper:"Polaris-Filters-FilterPill__IconWrapper",PopoverWrapper:"Polaris-Filters-FilterPill__PopoverWrapper",ClearButtonWrapper:"Polaris-Filters-FilterPill__ClearButtonWrapper"};function F1({filterKey:e,label:t,filter:r,disabled:n,hideClearButton:a,selected:s,initialActive:i,closeOnChildOverlayClick:l,onRemove:c,onClick:u}){const d=se(),h=m.useRef(null),{value:f,setTrue:p,setFalse:g}=Wt(!1),[b,v]=m.useState(i);m.useEffect(()=>{var L,k;const N=h.current;if(!N||!b)return;const $=(L=N.parentElement)==null?void 0:L.parentElement;$&&((k=$.scroll)==null||k.call($,{left:N.offsetLeft}))},[h,b]);const y=m.useCallback(()=>{r&&v(N=>!N),u&&u(e)},[r,e,u]),E=m.useCallback(()=>{y(),s||c==null||c(e)},[c,s,e,y]),S=()=>{c&&c(e),v(!1)},_=T(Yt.FilterButton,s&&Yt.ActiveFilterButton,b&&Yt.FocusFilterButton,f&&Yt.focusedFilterButton),R=T(Yt.PlainButton,Yt.clearButton),x=T(Yt.PlainButton,Yt.ToggleButton),C=o.createElement("div",{className:Yt.Label},o.createElement(G,{variant:"bodySm",as:"span"},t)),w=o.createElement("div",{className:_},o.createElement(de,{gap:"0",wrap:!1},o.createElement(nr,{onFocus:p,onBlur:g,onClick:y,className:x,type:"button"},o.createElement(de,{wrap:!1,align:"center",blockAlign:"center",gap:"0"},s?o.createElement(o.Fragment,null,C):o.createElement(o.Fragment,null,C,o.createElement("div",{className:Yt.IconWrapper},o.createElement(le,{source:Ys,tone:"base"}))))),s?o.createElement(nr,{onClick:S,className:R,type:"button","aria-label":d.translate("Polaris.FilterPill.clear")},o.createElement("div",{className:Yt.IconWrapper},o.createElement(le,{source:fa,tone:"base"}))):null)),P=!a&&o.createElement("div",{className:Yt.ClearButtonWrapper},o.createElement(ye,{onClick:S,variant:"plain",disabled:!s,textAlign:"left"},d.translate("Polaris.FilterPill.clear")));return n?null:o.createElement("div",{ref:h},o.createElement(nt,{active:b,activator:w,key:e,onClose:E,preferredAlignment:"left",preventCloseOnChildOverlayClick:!l},o.createElement("div",{className:Yt.PopoverWrapper},o.createElement(nt.Section,null,o.createElement(rt,{gap:"100"},r,P)))))}function D1({filters:e,appliedFilters:t,onClearAll:r,disabled:n,hideQueryField:a,disableFilters:s,mountedStateStyles:i,onAddFilterClick:l,closeOnChildOverlayClick:c,children:u}){const d=se(),[h,f]=m.useState(!1),p=m.useRef(!1);m.useEffect(()=>{p.current=!0});const g=()=>f(I=>!I),b=()=>{l==null||l(),g()},v=t==null?void 0:t.map(({key:I})=>I),y=e.filter(({pinned:I})=>I).map(({key:I})=>I),E=e.filter(({pinned:I,key:F})=>!!I||(v==null?void 0:v.includes(F))),[S,_]=m.useState(E.map(({key:I})=>I));dv(e.length,()=>{_(E.map(({key:I})=>I))});const R=S.map(I=>e.find(F=>F.key===I)).reduce((I,F)=>F?[...I,F]:I,[]),x=({key:I,onAction:F})=>()=>{setTimeout(()=>{_(B=>[...new Set([...B,I])]),F==null||F(),g()},0)},C=I=>({...I,content:I.label,onAction:x(I)}),w=e.filter(I=>!R.some(({key:F})=>F===I.key)),P=w.filter(I=>!I.section&&!I.hidden).map(C),N=w.filter(I=>I.section).reduce((I,F)=>{const B=C(F),U=I.findIndex(V=>V.title===F.section);return U===-1?I.push({title:F.section,items:[B]}):I[U].items.push(B),I},[]),$=R.length>=1,L=o.createElement("div",null,o.createElement(nr,{type:"button",className:er.AddFilter,onClick:b,"aria-label":d.translate("Polaris.Filters.addFilter"),disabled:n||P.length===0&&N.length===0||s},o.createElement(G,{as:"span",variant:"bodySm",tone:n?"disabled":"base"},d.translate("Polaris.Filters.addFilter")," "),o.createElement(Bd,null))),k=()=>{_(y),r==null||r()},A=e.some(I=>!I.pinned)||e.length!==S.length,O=R.map(({key:I,...F})=>{const B=t==null?void 0:t.find(({key:V})=>V===I),U=()=>{_(V=>V.filter(W=>{const H=W===I,Y=y.includes(W);return!H||Y})),B==null||B.onRemove(I)};return o.createElement(F1,Object.assign({key:I},F,{initialActive:p.current&&!F.pinned&&!B,label:(B==null?void 0:B.label)||F.label,filterKey:I,selected:v==null?void 0:v.includes(I),onRemove:U,disabled:F.disabled||s,closeOnChildOverlayClick:c}))}),M=A?o.createElement("div",{className:T(er.AddFilterActivator,$&&er.AddFilterActivatorMultiple)},o.createElement(nt,{active:h&&!n,activator:L,onClose:g},o.createElement(nn,{actionRole:"menuitem",items:P,sections:N}))):null,D=t!=null&&t.length?o.createElement("div",{className:T(er.ClearAll,$&&A&&er.MultiplePinnedFilterClearAll)},o.createElement(ye,{size:"micro",onClick:k,variant:"monochromePlain"},d.translate("Polaris.Filters.clearFilters"))):null;return o.createElement("div",{className:T(er.FiltersWrapper,A&&$&&er.FiltersWrapperWithAddButton),"aria-live":"polite",style:i},o.createElement("div",{className:T(er.FiltersInner)},o.createElement("div",{className:T(er.FiltersStickyArea)},O,M,D)),a?o.createElement(ne,{paddingInlineEnd:"300",paddingBlockStart:"200",paddingBlockEnd:"200"},o.createElement(de,{align:"start",blockAlign:"center",gap:{xs:"400",md:"300"}},u)):null)}const Gu="var(--p-motion-duration-150)",Xi="-36px",H1={transition:`opacity ${Gu} var(--p-motion-ease)`,opacity:0},B1={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0},unmounted:{opacity:0}},W1={transition:`opacity ${Gu} var(--p-motion-ease), margin ${Gu} var(--p-motion-ease)`,opacity:0,marginTop:Xi},U1={entering:{opacity:1,marginTop:0},entered:{opacity:1,marginTop:0},exiting:{opacity:0,marginTop:Xi},exited:{opacity:0,marginTop:Xi},unmounted:{opacity:0,marginTop:Xi}};function hv({queryValue:e,queryPlaceholder:t,focused:r,filters:n,appliedFilters:a,onQueryChange:s,onQueryClear:i,onQueryBlur:l,onQueryFocus:c,onClearAll:u,children:d,disabled:h,hideFilters:f,hideQueryField:p,disableQueryField:g,borderlessQueryField:b,loading:v,disableFilters:y,mountedState:E,onAddFilterClick:S,closeOnChildOverlayClick:_,selectedViewName:R}){const x=f||n.length===0,C=p?null:o.createElement("div",{className:er.Container},o.createElement(ne,{padding:"200"},o.createElement(de,{align:"start",blockAlign:"center",gap:{xs:"400",md:"300"}},o.createElement("div",{className:er.SearchField,style:E?{...H1,...B1[E]}:void 0},o.createElement(M1,{onChange:s,onFocus:c,onBlur:l,onClear:i,value:e,placeholder:t,focused:r,disabled:h||g,borderlessQueryField:b,loading:v,selectedViewName:R})),d))),w=E&&!p?{...W1,...U1[E]}:void 0,P=x?null:o.createElement(D1,{filters:n,appliedFilters:a,onClearAll:u,disabled:h,hideQueryField:p,disableFilters:y,onAddFilterClick:S,closeOnChildOverlayClick:_,mountedStateStyles:w},d);return o.createElement("div",{className:T(er.Filters,p&&er.hideQueryField)},C,P)}const eh=m.memo(function({children:t,disabled:r,root:n}){return m.useEffect(()=>{if(r||!n)return;const a=j1(n)?n.current:n;!a||a.querySelector("[autofocus]")||Bt(a,!1)},[r,n]),o.createElement(o.Fragment,null,t)});function j1(e){return e.current!==void 0}var q1={FooterHelp:"Polaris-FooterHelp"};function V1({children:e,align:t="center"}){const r={"--pc-footer-help-align":t};return o.createElement("div",{className:q1.FooterHelp,style:r},o.createElement(G,{as:"p",variant:"bodyLg"},e))}function ni({acceptCharset:e,action:t,autoComplete:r,children:n,encType:a,implicitSubmit:s=!0,method:i="post",name:l,noValidate:c,preventDefault:u=!0,target:d,onSubmit:h}){const f=se(),p=m.useCallback(v=>{u&&(v.preventDefault(),h(v))},[h,u]),g=K1(r),b=s?o.createElement(G,{as:"span",visuallyHidden:!0},o.createElement("button",{type:"submit","aria-hidden":"true",tabIndex:-1},f.translate("Polaris.Common.submit"))):null;return o.createElement("form",{acceptCharset:e,action:t,autoComplete:g,encType:a,method:i,name:l,noValidate:c,target:d,onSubmit:p},b,n)}function K1(e){return e==null?e:e?"on":"off"}function mo(){return mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mo.apply(this,arguments)}function th(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Ju(e,t){return Ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ju(e,t)}function rh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ju(e,t)}function z1(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function G1(e,t){e.classList?e.classList.add(t):z1(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function _p(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function J1(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=_p(e.className,t):e.setAttribute("class",_p(e.className&&e.className.baseVal||"",t))}const Cp={disabled:!1},go=o.createContext(null);var fv=function(t){return t.scrollTop},$s="unmounted",Qn="exited",ea="entering",Ha="entered",Xu="exiting",an=function(e){rh(t,e);function t(n,a){var s;s=e.call(this,n,a)||this;var i=a,l=i&&!i.isMounting?n.enter:n.appear,c;return s.appearStatus=null,n.in?l?(c=Qn,s.appearStatus=ea):c=Ha:n.unmountOnExit||n.mountOnEnter?c=$s:c=Qn,s.state={status:c},s.nextCallback=null,s}t.getDerivedStateFromProps=function(a,s){var i=a.in;return i&&s.status===$s?{status:Qn}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(a){var s=null;if(a!==this.props){var i=this.state.status;this.props.in?i!==ea&&i!==Ha&&(s=ea):(i===ea||i===Ha)&&(s=Xu)}this.updateStatus(!1,s)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var a=this.props.timeout,s,i,l;return s=i=l=a,a!=null&&typeof a!="number"&&(s=a.exit,i=a.enter,l=a.appear!==void 0?a.appear:i),{exit:s,enter:i,appear:l}},r.updateStatus=function(a,s){if(a===void 0&&(a=!1),s!==null)if(this.cancelNextCallback(),s===ea){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:wi.findDOMNode(this);i&&fv(i)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qn&&this.setState({status:$s})},r.performEnter=function(a){var s=this,i=this.props.enter,l=this.context?this.context.isMounting:a,c=this.props.nodeRef?[l]:[wi.findDOMNode(this),l],u=c[0],d=c[1],h=this.getTimeouts(),f=l?h.appear:h.enter;if(!a&&!i||Cp.disabled){this.safeSetState({status:Ha},function(){s.props.onEntered(u)});return}this.props.onEnter(u,d),this.safeSetState({status:ea},function(){s.props.onEntering(u,d),s.onTransitionEnd(f,function(){s.safeSetState({status:Ha},function(){s.props.onEntered(u,d)})})})},r.performExit=function(){var a=this,s=this.props.exit,i=this.getTimeouts(),l=this.props.nodeRef?void 0:wi.findDOMNode(this);if(!s||Cp.disabled){this.safeSetState({status:Qn},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:Xu},function(){a.props.onExiting(l),a.onTransitionEnd(i.exit,function(){a.safeSetState({status:Qn},function(){a.props.onExited(l)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(a,s){s=this.setNextCallback(s),this.setState(a,s)},r.setNextCallback=function(a){var s=this,i=!0;return this.nextCallback=function(l){i&&(i=!1,s.nextCallback=null,a(l))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},r.onTransitionEnd=function(a,s){this.setNextCallback(s);var i=this.props.nodeRef?this.props.nodeRef.current:wi.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!i||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var c=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],u=c[0],d=c[1];this.props.addEndListener(u,d)}a!=null&&setTimeout(this.nextCallback,a)},r.render=function(){var a=this.state.status;if(a===$s)return null;var s=this.props,i=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var l=th(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return o.createElement(go.Provider,{value:null},typeof i=="function"?i(a,l):o.cloneElement(o.Children.only(i),l))},t}(o.Component);an.contextType=go;an.propTypes={};function Na(){}an.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Na,onEntering:Na,onEntered:Na,onExit:Na,onExiting:Na,onExited:Na};an.UNMOUNTED=$s;an.EXITED=Qn;an.ENTERING=ea;an.ENTERED=Ha;an.EXITING=Xu;const qs=an;var X1=function(t,r){return t&&r&&r.split(" ").forEach(function(n){return G1(t,n)})},Lc=function(t,r){return t&&r&&r.split(" ").forEach(function(n){return J1(t,n)})},Mn=function(e){rh(t,e);function t(){for(var n,a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=e.call.apply(e,[this].concat(s))||this,n.appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(l,c){var u=n.resolveArguments(l,c),d=u[0],h=u[1];n.removeClasses(d,"exit"),n.addClass(d,h?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(l,c)},n.onEntering=function(l,c){var u=n.resolveArguments(l,c),d=u[0],h=u[1],f=h?"appear":"enter";n.addClass(d,f,"active"),n.props.onEntering&&n.props.onEntering(l,c)},n.onEntered=function(l,c){var u=n.resolveArguments(l,c),d=u[0],h=u[1],f=h?"appear":"enter";n.removeClasses(d,f),n.addClass(d,f,"done"),n.props.onEntered&&n.props.onEntered(l,c)},n.onExit=function(l){var c=n.resolveArguments(l),u=c[0];n.removeClasses(u,"appear"),n.removeClasses(u,"enter"),n.addClass(u,"exit","base"),n.props.onExit&&n.props.onExit(l)},n.onExiting=function(l){var c=n.resolveArguments(l),u=c[0];n.addClass(u,"exit","active"),n.props.onExiting&&n.props.onExiting(l)},n.onExited=function(l){var c=n.resolveArguments(l),u=c[0];n.removeClasses(u,"exit"),n.addClass(u,"exit","done"),n.props.onExited&&n.props.onExited(l)},n.resolveArguments=function(l,c){return n.props.nodeRef?[n.props.nodeRef.current,l]:[l,c]},n.getClassNames=function(l){var c=n.props.classNames,u=typeof c=="string",d=u&&c?c+"-":"",h=u?""+d+l:c[l],f=u?h+"-active":c[l+"Active"],p=u?h+"-done":c[l+"Done"];return{baseClassName:h,activeClassName:f,doneClassName:p}},n}var r=t.prototype;return r.addClass=function(a,s,i){var l=this.getClassNames(s)[i+"ClassName"],c=this.getClassNames("enter"),u=c.doneClassName;s==="appear"&&i==="done"&&u&&(l+=" "+u),i==="active"&&a&&fv(a),l&&(this.appliedClasses[s][i]=l,X1(a,l))},r.removeClasses=function(a,s){var i=this.appliedClasses[s],l=i.base,c=i.active,u=i.done;this.appliedClasses[s]={},l&&Lc(a,l),c&&Lc(a,c),u&&Lc(a,u)},r.render=function(){var a=this.props;a.classNames;var s=th(a,["classNames"]);return o.createElement(qs,mo({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(o.Component);Mn.defaultProps={classNames:""};Mn.propTypes={};function Y1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nh(e,t){var r=function(s){return t&&m.isValidElement(s)?t(s):s},n=Object.create(null);return e&&m.Children.map(e,function(a){return a}).forEach(function(a){n[a.key]=r(a)}),n}function Z1(e,t){e=e||{},t=t||{};function r(d){return d in t?t[d]:e[d]}var n=Object.create(null),a=[];for(var s in e)s in t?a.length&&(n[s]=a,a=[]):a.push(s);var i,l={};for(var c in t){if(n[c])for(i=0;i<n[c].length;i++){var u=n[c][i];l[n[c][i]]=r(u)}l[c]=r(c)}for(i=0;i<a.length;i++)l[a[i]]=r(a[i]);return l}function la(e,t,r){return r[t]!=null?r[t]:e.props[t]}function Q1(e,t){return nh(e.children,function(r){return m.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:la(r,"appear",e),enter:la(r,"enter",e),exit:la(r,"exit",e)})})}function eR(e,t,r){var n=nh(e.children),a=Z1(t,n);return Object.keys(a).forEach(function(s){var i=a[s];if(m.isValidElement(i)){var l=s in t,c=s in n,u=t[s],d=m.isValidElement(u)&&!u.props.in;c&&(!l||d)?a[s]=m.cloneElement(i,{onExited:r.bind(null,i),in:!0,exit:la(i,"exit",e),enter:la(i,"enter",e)}):!c&&l&&!d?a[s]=m.cloneElement(i,{in:!1}):c&&l&&m.isValidElement(u)&&(a[s]=m.cloneElement(i,{onExited:r.bind(null,i),in:u.props.in,exit:la(i,"exit",e),enter:la(i,"enter",e)}))}}),a}var tR=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},rR={component:"div",childFactory:function(t){return t}},ah=function(e){rh(t,e);function t(n,a){var s;s=e.call(this,n,a)||this;var i=s.handleExited.bind(Y1(s));return s.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},s}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,s){var i=s.children,l=s.handleExited,c=s.firstRender;return{children:c?Q1(a,l):eR(a,i,l),firstRender:!1}},r.handleExited=function(a,s){var i=nh(this.props.children);a.key in i||(a.props.onExited&&a.props.onExited(s),this.mounted&&this.setState(function(l){var c=mo({},l.children);return delete c[a.key],{children:c}}))},r.render=function(){var a=this.props,s=a.component,i=a.childFactory,l=th(a,["component","childFactory"]),c=this.state.contextValue,u=tR(this.state.children).map(i);return delete l.appear,delete l.enter,delete l.exit,s===null?o.createElement(go.Provider,{value:c},u):o.createElement(go.Provider,{value:c},o.createElement(s,l,u))},t}(o.Component);ah.propTypes={};ah.defaultProps=rR;const pv=ah;function Yu(e,t,r){if(!document)return;(r||document.documentElement).style.setProperty(e,t)}var Ze={Frame:"Polaris-Frame",Navigation:"Polaris-Frame__Navigation",hasTopBar:"Polaris-Frame--hasTopBar","Navigation-enter":"Polaris-Frame__Navigation--enter","Navigation-enterActive":"Polaris-Frame__Navigation--enterActive","Navigation-exit":"Polaris-Frame__Navigation--exit","Navigation-exitActive":"Polaris-Frame__Navigation--exitActive",NavigationDismiss:"Polaris-Frame__NavigationDismiss","Navigation-visible":"Polaris-Frame__Navigation--visible",TopBar:"Polaris-Frame__TopBar",ContextualSaveBar:"Polaris-Frame__ContextualSaveBar",Main:"Polaris-Frame__Main",hasNav:"Polaris-Frame--hasNav",Content:"Polaris-Frame__Content",hasSidebar:"Polaris-Frame--hasSidebar",GlobalRibbonContainer:"Polaris-Frame__GlobalRibbonContainer",LoadingBar:"Polaris-Frame__LoadingBar",Skip:"Polaris-Frame__Skip",focused:"Polaris-Frame--focused",pressed:"Polaris-Frame--pressed"};function nR(){const e=m.useRef(!1);return m.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var wp={Loading:"Polaris-Frame-Loading",Level:"Polaris-Frame-Loading__Level"};const Pp=99;function aR(){const e=se(),t=nR(),[r,n]=m.useState(0),[a,s]=m.useState(!1);m.useEffect(()=>{r>=Pp||a||requestAnimationFrame(()=>{if(!t.current)return;const l=Math.max((Pp-r)/10,1);s(!0),n(r+l)})},[r,a,t]);const i={transform:`scaleX(${Math.floor(r)/100})`};return o.createElement("div",{className:wp.Loading,"aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,role:"progressbar","aria-label":e.translate("Polaris.Loading.label")},o.createElement("div",{className:wp.Level,style:i,onTransitionEnd:()=>s(!1)}))}var Ap={startFade:"Polaris-Frame-CSSAnimation--startFade",endFade:"Polaris-Frame-CSSAnimation--endFade"},or;(function(e){e.Entering="entering",e.Entered="entered",e.Exiting="exiting",e.Exited="exited"})(or||(or={}));function sR({in:e,className:t,type:r,children:n}){const[a,s]=m.useState(e?or.Entering:or.Exited),i=m.useRef(!1),l=m.useRef(null);m.useEffect(()=>{i.current&&a===or.Entering&&h(or.Entered)},[a]),m.useEffect(()=>{i.current&&(e&&h(or.Entering),!e&&h(or.Exiting))},[e]),m.useEffect(()=>{i.current=!0},[]);const c=T(t,Ap[Be("start",r)],e&&Ap[Be("end",r)]),u=a===or.Exited&&!e?null:n;return o.createElement("div",{className:c,ref:l,onTransitionEnd:d},u);function d(){a===or.Exiting&&h(or.Exited)}function h(f){s(f),f===or.Entering&&l.current&&l.current.getBoundingClientRect()}}function mv(e,t){if(!e)return null;const r=Object.keys(e);for(const n of r){if(n===t)return e[t];if(g_(e[n])){const a=mv(e[n],t);if(a)return a}}return null}function sh(e={},t=0,r="width"){const n=typeof e=="number"?e:mv(e,r);return n?`${n}px`:`${t}px`}var Jn={ContextualSaveBar:"Polaris-Frame-ContextualSaveBar",LogoContainer:"Polaris-Frame-ContextualSaveBar__LogoContainer",ContextControl:"Polaris-Frame-ContextualSaveBar__ContextControl",Contents:"Polaris-Frame-ContextualSaveBar__Contents",fullWidth:"Polaris-Frame-ContextualSaveBar--fullWidth",MessageContainer:"Polaris-Frame-ContextualSaveBar__MessageContainer",ActionContainer:"Polaris-Frame-ContextualSaveBar__ActionContainer",Action:"Polaris-Frame-ContextualSaveBar__Action"},Mc={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},Tp={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function gv({children:e,flush:t=!1,subdued:r=!1,titleHidden:n=!1}){const a=T(Tp.Section,n&&Tp.titleHidden);return o.createElement("div",{className:a},o.createElement(ne,Object.assign({as:"section",padding:t?"0":"400"},n&&{paddingInlineEnd:"0"},r&&{background:"bg-surface-tertiary"}),e))}var St={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function iR({trapping:e}){const t=m.useContext(Y_),r=m.useId();if(!t)throw new Pd("No FocusManager was provided.");const{trapFocusList:n,add:a,remove:s}=t,i=n[0]===r,l=m.useMemo(()=>({canSafelyFocus:i}),[i]);return m.useEffect(()=>{if(e)return a(r),()=>{s(r)}},[a,r,s,e]),l}function Xo({trapping:e=!0,children:t}){const{canSafelyFocus:r}=iR({trapping:e}),n=m.useRef(null),[a,s]=m.useState(!0);m.useEffect(()=>{const c=r&&!(n.current&&n.current.contains(document.activeElement))?!e:!0;s(c)},[r,e]);const i=c=>{const u=n.current&&n.current.contains(document.activeElement);e===!1||!n.current||u||c.target instanceof Element&&c.target.matches(`${b_.selector} *`)||r&&c.target instanceof HTMLElement&&n.current!==c.target&&!n.current.contains(c.target)&&Bt(n.current)},l=c=>{if(e===!1||!n.current)return;const u=y_(n.current),d=v_(n.current);c.target===d&&!c.shiftKey&&(c.preventDefault(),E_(n.current)),c.target===u&&c.shiftKey&&(c.preventDefault(),S_(n.current))};return o.createElement(eh,{disabled:a,root:n.current},o.createElement("div",{ref:n},o.createElement(Nt,{event:"focusin",handler:i}),o.createElement(yr,{keyCode:it.Tab,keyEvent:"keydown",handler:l}),t))}function oR({instant:e,labelledBy:t,children:r,limitHeight:n,size:a,onClose:s,onExited:i,onEntered:l,setClosing:c,hasToasts:u,...d}){const h=Zs(),f=m.useRef(null),p=m.useContext(ri);let g;p&&(g=p.toastMessages);const b=T(St.Modal,a&&St[Be("size",a)],n&&St.limitHeight),v=e?qs:cR;m.useEffect(()=>{f.current&&!f.current.contains(document.activeElement)&&Bt(f.current)},[]);const y=()=>{c&&c(!0)},E=()=>{c&&c(!1),s()},S=o.createElement("div",{"aria-live":"assertive"},g?g.map(_=>o.createElement(G,{visuallyHidden:!0,as:"p",key:_.id},_.content)):null);return o.createElement(v,Object.assign({},d,{nodeRef:f,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(h.motion["motion-duration-200"],10),onEntered:l,onExited:i}),o.createElement("div",{className:St.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:f},o.createElement(Xo,null,o.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":t,"aria-labelledby":t,tabIndex:-1,className:St.Dialog},o.createElement("div",{className:b},o.createElement(yr,{keyCode:it.Escape,keyEvent:"keydown",handler:y}),o.createElement(yr,{keyCode:it.Escape,handler:E}),r),S))))}const lR={appear:T(St.animateFadeUp,St.entering),appearActive:T(St.animateFadeUp,St.entered),enter:T(St.animateFadeUp,St.entering),enterActive:T(St.animateFadeUp,St.entered),exit:T(St.animateFadeUp,St.exiting),exitActive:T(St.animateFadeUp,St.exited)};function cR({children:e,...t}){return o.createElement(Mn,Object.assign({},t,{classNames:lR}),e)}function Rp({pressed:e,onClick:t}){const r=se();return o.createElement(ye,{variant:"tertiary",pressed:e,icon:ti,onClick:t,accessibilityLabel:r.translate("Polaris.Common.close")})}function uR({id:e,children:t,closing:r,titleHidden:n,onClose:a}){const s="400",i="400";return n||!t?o.createElement(ne,{position:"absolute",insetInlineEnd:s,insetBlockStart:i,zIndex:"1"},o.createElement(Rp,{onClick:a})):o.createElement(ne,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:s,paddingInlineEnd:s,borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},o.createElement(po,{columns:{xs:"1fr auto"},gap:"400"},o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement(G,{id:e,as:"h2",variant:"headingMd",breakWord:!0},t)),o.createElement(Rp,{pressed:r,onClick:a})))}function dR({primaryAction:e,secondaryActions:t,children:r}){const n=e&&rn(e,{variant:"primary"})||null,a=t&&rn(t)||null,s=n||a?o.createElement(de,{gap:"200"},a,n):null;return o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement(ne,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},o.createElement(de,{gap:"400",blockAlign:"center",align:"space-between"},o.createElement(ne,null,r),s)))}const kp=200,hR=400,ar=function({children:t,title:r,titleHidden:n=!1,src:a,iFrameName:s,open:i,instant:l,sectioned:c,loading:u,size:d,limitHeight:h,footer:f,primaryAction:p,secondaryActions:g,onScrolledToBottom:b,activator:v,activatorWrapper:y="div",onClose:E,onIFrameLoad:S,onTransitionEnd:_,noScroll:R}){const[x,C]=m.useState(kp),[w,P]=m.useState(!1),N=m.useId(),$=m.useRef(null),k=se().translate("Polaris.Modal.iFrameTitle");let A,O;const M=m.useCallback(()=>{_&&_()},[_]),D=m.useCallback(()=>{C(kp);const U=v&&xp(v)?v&&v.current:$.current;U&&requestAnimationFrame(()=>Bt(U))},[v]),I=m.useCallback(U=>{const V=U.target;if(V&&V.contentWindow)try{C(V.contentWindow.document.body.scrollHeight)}catch{C(hR)}S!=null&&S(U)},[S]);if(i){const U=!f&&!p&&!g?null:o.createElement(dR,{primaryAction:p,secondaryActions:g},f),V=c?Ob(t,gv,{titleHidden:n}):t,W=u?o.createElement(ne,{padding:"400"},o.createElement(de,{gap:"400",align:"center",blockAlign:"center"},o.createElement(da,null))):V,H=R?o.createElement("div",{className:Mc.NoScrollBody},o.createElement(ne,{width:"100%",overflowX:"hidden",overflowY:"hidden"},W)):o.createElement(Ga,{shadow:!0,className:Mc.Body,onScrolledToBottom:b},W),Y=a?o.createElement("iframe",{name:s,title:k,src:a,className:Mc.IFrame,onLoad:I,style:{height:`${x}px`}}):H;A=o.createElement(oR,{instant:l,labelledBy:N,onClose:E,onEntered:M,onExited:D,size:d,limitHeight:h,setClosing:P},o.createElement(uR,{titleHidden:n,id:N,closing:w,onClose:E},r),Y,U),O=o.createElement(zo,{setClosing:P,onClick:E})}const F=!l,B=v&&!xp(v)?o.createElement(ne,{ref:$,as:y},v):null;return o.createElement(ts.Provider,{value:!0},B,o.createElement(Fo,{idPrefix:"modal"},o.createElement(pv,{appear:F,enter:F,exit:F},A),O))};function xp(e){return Object.prototype.hasOwnProperty.call(e,"current")}ar.Section=gv;function fR({open:e,onDiscard:t,onCancel:r}){const n=se();return o.createElement(ar,{title:n.translate("Polaris.DiscardConfirmationModal.title"),open:e,onClose:r,primaryAction:{content:n.translate("Polaris.DiscardConfirmationModal.primaryAction"),destructive:!0,onAction:t},secondaryActions:[{content:n.translate("Polaris.DiscardConfirmationModal.secondaryAction"),onAction:r}],sectioned:!0},n.translate("Polaris.DiscardConfirmationModal.message"))}function pR({alignContentFlush:e,message:t,saveAction:r,discardAction:n,fullWidth:a,contextControl:s,secondaryMenu:i}){const l=se(),{logo:c}=Ca(),{value:u,toggle:d,setFalse:h}=Wt(!1),f=m.useCallback(()=>{n&&n.onAction&&n.onAction(),h()},[h,n]),p=n&&n.content?n.content:l.translate("Polaris.ContextualSaveBar.discard");let g;n&&n.discardConfirmationModal?g=d:n&&(g=n.onAction);const b=n&&n.onAction&&n.discardConfirmationModal&&o.createElement(fR,{open:u,onCancel:d,onDiscard:f}),v=n&&o.createElement(ye,{variant:"tertiary",size:"large",url:n.url,onClick:g,loading:n.loading,disabled:n.disabled,accessibilityLabel:n.content},p),y=r&&r.content?r.content:l.translate("Polaris.ContextualSaveBar.save"),E=r&&o.createElement(ye,{variant:"primary",tone:"success",size:"large",url:r.url,onClick:r.onAction,loading:r.loading,disabled:r.disabled,accessibilityLabel:r.content},y),S=sh(c,104),_=c&&o.createElement(Mr,{style:{width:S},source:c.contextualSaveBarSource||"",alt:""}),R=e||s?null:o.createElement("div",{className:Jn.LogoContainer,style:{width:S}},_),x=s?o.createElement("div",{className:Jn.ContextControl},s):null,C=T(Jn.Contents,a&&Jn.fullWidth);return o.createElement(o.Fragment,null,o.createElement("div",{className:Jn.ContextualSaveBar},x,R,o.createElement("div",{className:C},o.createElement("div",{className:Jn.MessageContainer},o.createElement(le,{source:Fd}),t&&o.createElement(G,{as:"h2",variant:"headingMd",tone:"text-inverse",truncate:!0},t)),o.createElement("div",{className:Jn.ActionContainer},o.createElement(Sr,{spacing:"tight",wrap:!1},i,v,E)))),b)}function bv(e,t=wn){const r=m.useRef(e);return t(r.current,e)||(r.current=e),r.current}function ih(e,t,r){m.useEffect(e,bv(t,r))}function mR(e,t,r){return m.useCallback(e,bv(t,r))}var ta={ToastManager:"Polaris-Frame-ToastManager",ToastWrapper:"Polaris-Frame-ToastManager__ToastWrapper","ToastWrapper-enter":"Polaris-Frame-ToastManager__ToastWrapper--enter","ToastWrapper-exit":"Polaris-Frame-ToastManager__ToastWrapper--exit","ToastWrapper-enter-done":"Polaris-Frame-ToastManager--toastWrapperEnterDone","ToastWrapper--hoverable":"Polaris-Frame-ToastManager--toastWrapperHoverable"},ln={Toast:"Polaris-Frame-Toast",Action:"Polaris-Frame-Toast__Action",error:"Polaris-Frame-Toast--error",CloseButton:"Polaris-Frame-Toast__CloseButton",LeadingIcon:"Polaris-Frame-Toast__LeadingIcon",toneMagic:"Polaris-Frame-Toast--toneMagic",WithActionOnComponent:"Polaris-Frame-Toast__WithActionOnComponent"};const yv=5e3,Zu=1e4;function gR({content:e,onDismiss:t,duration:r,error:n,action:a,tone:s,onClick:i,icon:l,isHovered:c}){const d=a&&!r?Zu:r||yv,h=m.useRef(d),f=m.useRef(null),p=m.useRef(null);m.useEffect(()=>{function E(){f.current=Date.now(),p.current=setTimeout(()=>{t()},h.current)}function S(){f.current&&(h.current-=Date.now()-f.current),p.current&&clearTimeout(p.current),p.current=null}return c?S():E(),()=>{p.current&&clearTimeout(p.current)}},[c,t]),m.useEffect(()=>{a&&r&&r<Zu&&console.log("Toast with action should persist for at least 10,000 milliseconds to give the merchant enough time to act on it.")},[a,r]);const g=o.createElement("button",{type:"button",className:ln.CloseButton,onClick:t},o.createElement(le,{source:fa,tone:"inherit"})),b=a?o.createElement("div",{className:ln.Action},o.createElement(ye,{variant:"monochromePlain",removeUnderline:!0,size:"slim",onClick:a.onAction},a.content)):null;let v=null;n?v=o.createElement("div",{className:ln.LeadingIcon},o.createElement(le,{source:Fb,tone:"inherit"})):l&&(v=o.createElement("div",{className:ln.LeadingIcon},o.createElement(le,{source:l,tone:"inherit"})));const y=T(ln.Toast,n&&ln.error,s&&ln[Be("tone",s)]);return!a&&i?o.createElement("button",{"aria-live":"assertive",className:T(y,ln.WithActionOnComponent),type:"button",onClick:i},o.createElement(yr,{keyCode:it.Escape,handler:t}),v,o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement(G,Object.assign({as:"span",variant:"bodyMd",fontWeight:"medium"},s==="magic"&&{tone:"magic"}),e))):o.createElement("div",{className:y,"aria-live":"assertive"},o.createElement(yr,{keyCode:it.Escape,handler:t}),v,o.createElement(de,{gap:"400",blockAlign:"center"},o.createElement(G,Object.assign({as:"span",variant:"bodyMd",fontWeight:"medium"},s==="magic"&&{tone:"magic"}),e)),b,g)}const bR=10,Ip=30;function yR(e){const t=r=>(r-1)*r/2;return e*bR-t(e)}const vR=m.memo(function({toastMessages:t}){const r=[],[n,a]=m.useState(!1),s=m.useRef(!1),i=m.useRef(null),l=m.useRef(null),c=mR(()=>{const d=t.length-1;t.forEach((h,f)=>{const p=d-f,g=r[f];if(!g.current)return;const b=g.current.clientHeight,v=n?1:.9**p,y=yR(p),E=n?b+(b-8)*p:b+y;g.current.style.setProperty("--pc-toast-manager-translate-y-in",`-${E}px`),g.current.style.setProperty("--pc-toast-manager-scale-in",`${v}`),g.current.style.setProperty("--pc-toast-manager-blur-in",n?"0":`${p*.5}px`),g.current.style.setProperty("--pc-toast-manager-transition-delay-in",`${n?p*Ip:0}ms`),g.current.style.setProperty("--pc-toast-manager-scale-out",`${p===0?.85:v**2}`),g.current.style.setProperty("--pc-toast-manager-translate-y-out",`${-E}px`)})},[t,r,n]);ih(()=>{c(),t.length===0&&a(!1),n?i.current=setTimeout(()=>{s.current=!0},t.length*Ip+400):i.current&&(clearTimeout(i.current),s.current=!1)},[t,n]);const u=t.map((d,h)=>{const f=t.length-h-1,p=m.createRef();r[h]=p;function g(){a(!0)}function b(){s.current&&a(!1)}return o.createElement(Mn,{nodeRef:r[h],key:d.id,timeout:{enter:0,exit:200},classNames:ER},o.createElement("div",{ref:p,onMouseEnter:f>0?g:b},o.createElement("div",{ref:v=>f===0?l.current=v:null},o.createElement(gR,Object.assign({},d,{isHovered:n})))))});return o.createElement(Fo,{idPrefix:"toast"},o.createElement(Nt,{event:"resize",handler:c}),o.createElement("div",{className:ta.ToastManager,"aria-live":"assertive",onMouseEnter:function(d){var p;const h=d.target,f=(p=l.current)==null?void 0:p.contains(h);a(!f)},onMouseLeave:function(){a(!1)}},o.createElement(pv,{component:null},u)))}),ER={enter:T(ta.ToastWrapper,ta["ToastWrapper-enter"]),enterDone:T(ta.ToastWrapper,ta["ToastWrapper-enter-done"]),exit:T(ta.ToastWrapper,ta["ToastWrapper-exit"])},Np="AppFrameMain",SR="AppFrameNav",_R="AppFrameTopBar",CR="AppFrameLoadingBar";class wR extends m.PureComponent{constructor(...t){super(...t),this.state={skipFocused:!1,globalRibbonHeight:0,loadingStack:0,toastMessages:[],showContextualSaveBar:!1},this.contextualSaveBar=null,this.globalRibbonContainer=null,this.navigationNode=m.createRef(),this.setGlobalRibbonHeight=()=>{const{globalRibbonContainer:r}=this;r&&this.setState({globalRibbonHeight:r.offsetHeight},this.setGlobalRibbonRootProperty)},this.setOffset=()=>{const{offset:r="0px"}=this.props;Yu("--pc-frame-offset",r)},this.setGlobalRibbonRootProperty=()=>{const{globalRibbonHeight:r}=this.state;Yu("--pc-frame-global-ribbon-height",`${r}px`)},this.showToast=r=>{this.setState(({toastMessages:n})=>({toastMessages:n.find(({id:s})=>s===r.id)!=null?n:[...n,r]}))},this.hideToast=({id:r})=>{this.setState(({toastMessages:n})=>({toastMessages:n.filter(({id:a})=>r!==a)}))},this.setContextualSaveBar=r=>{const{showContextualSaveBar:n}=this.state;this.contextualSaveBar={...r},n===!0?this.forceUpdate():this.setState({showContextualSaveBar:!0})},this.removeContextualSaveBar=()=>{this.contextualSaveBar=null,this.setState({showContextualSaveBar:!1})},this.startLoading=()=>{this.setState(({loadingStack:r})=>({loadingStack:r+1}))},this.stopLoading=()=>{this.setState(({loadingStack:r})=>({loadingStack:Math.max(0,r-1)}))},this.handleResize=()=>{this.props.globalRibbon&&this.setGlobalRibbonHeight()},this.handleFocus=()=>{this.setState({skipFocused:!0})},this.handleBlur=()=>{this.setState({skipFocused:!1})},this.handleClick=r=>{const{skipToContentTarget:n}=this.props;n&&n.current&&(n.current.focus(),r==null||r.preventDefault())},this.handleNavigationDismiss=()=>{const{onNavigationDismiss:r}=this.props;r!=null&&r()},this.setGlobalRibbonContainer=r=>{this.globalRibbonContainer=r},this.handleNavKeydown=r=>{const{key:n}=r,{mediaQuery:{isNavigationCollapsed:a},showMobileNavigation:s}=this.props;a&&s&&n==="Escape"&&this.handleNavigationDismiss()}}componentDidMount(){this.handleResize(),!this.props.globalRibbon&&(this.setGlobalRibbonRootProperty(),this.setOffset())}componentDidUpdate(t){this.props.globalRibbon!==t.globalRibbon&&this.setGlobalRibbonHeight(),this.setOffset()}render(){const{skipFocused:t,loadingStack:r,toastMessages:n,showContextualSaveBar:a}=this.state,{logo:s,children:i,navigation:l,topBar:c,globalRibbon:u,showMobileNavigation:d=!1,skipToContentTarget:h,i18n:f,sidebar:p,mediaQuery:{isNavigationCollapsed:g}}=this.props,b=T(Ze.Navigation,d&&Ze["Navigation-visible"]),v=g&&!d,y=g&&d,E=y?0:-1,S={...y&&{"aria-modal":!0,role:"dialog"}},_=l?o.createElement(C_,null,M=>o.createElement(Xo,{trapping:y},o.createElement(Mn,{nodeRef:this.navigationNode,appear:g,exit:g,in:d,timeout:parseInt(M.motion["motion-duration-300"],10),classNames:PR},o.createElement("div",Object.assign({key:"NavContent"},S,{"aria-label":f.translate("Polaris.Frame.navigationLabel"),ref:this.navigationNode,className:b,onKeyDown:this.handleNavKeydown,id:SR,hidden:v}),l,o.createElement("button",{type:"button",className:Ze.NavigationDismiss,onClick:this.handleNavigationDismiss,"aria-hidden":v||!g&&!d,"aria-label":f.translate("Polaris.Frame.Navigation.closeMobileNavigationLabel"),tabIndex:E},o.createElement(le,{source:ti})))))):null,R=r>0?o.createElement("div",{className:Ze.LoadingBar,id:CR},o.createElement(aR,null)):null,x=c?o.createElement("div",Object.assign({className:Ze.TopBar},Du.props,__.props,{id:_R}),c):null,C=u?o.createElement("div",{className:Ze.GlobalRibbonContainer,ref:this.setGlobalRibbonContainer},u):null,w=T(Ze.Skip,t&&Ze.focused),P=h!=null&&h.current?h.current.id:Np,N=o.createElement("div",{className:w},o.createElement("a",{href:`#${P}`,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick},o.createElement(G,{as:"span",variant:"bodyLg",fontWeight:"medium"},f.translate("Polaris.Frame.skipToContent")))),$=l?{"data-has-navigation":!0}:{},L=T(Ze.Frame,l&&Ze.hasNav,c&&Ze.hasTopBar,p&&Ze.hasSidebar),k=o.createElement(sR,{in:a,className:Ze.ContextualSaveBar,type:"fade"},o.createElement(pR,this.contextualSaveBar)),A=d&&g?o.createElement(zo,{belowNavigation:!0,onClick:this.handleNavigationDismiss,onTouchStart:this.handleNavigationDismiss}):null,O={logo:s,showToast:this.showToast,hideToast:this.hideToast,toastMessages:n,startLoading:this.startLoading,stopLoading:this.stopLoading,setContextualSaveBar:this.setContextualSaveBar,removeContextualSaveBar:this.removeContextualSaveBar};return o.createElement(ri.Provider,{value:O},o.createElement("div",Object.assign({className:L},Du.props,$),N,x,_,k,R,A,o.createElement("main",{className:Ze.Main,id:Np,"data-has-global-ribbon":!!u},o.createElement("div",{className:Ze.Content},i)),o.createElement(vR,{toastMessages:n}),C,o.createElement(Nt,{event:"resize",handler:this.handleResize})))}}const PR={enter:T(Ze["Navigation-enter"]),enterActive:T(Ze["Navigation-enterActive"]),enterDone:T(Ze["Navigation-enterActive"]),exit:T(Ze["Navigation-exit"]),exitActive:T(Ze["Navigation-exitActive"])};function AR(e){const t=se(),r=rs();return o.createElement(wR,Object.assign({},e,{i18n:t,mediaQuery:r}))}var $p={FullscreenBar:"Polaris-FullscreenBar",BackAction:"Polaris-FullscreenBar__BackAction"};function TR({onAction:e,children:t}){const r=se(),n=o.createElement(G,{as:"span",variant:"bodyLg"},r.translate("Polaris.FullscreenBar.back"));return o.createElement("div",{className:$p.FullscreenBar},o.createElement("button",{className:$p.BackAction,onClick:e,"aria-label":r.translate("Polaris.FullscreenBar.accessibilityLabel")},o.createElement(le,{source:Ly}),n),t)}var RR={Grid:"Polaris-Grid"},$a={Cell:"Polaris-Grid-Cell","Cell-1-column-xs":"Polaris-Grid-Cell--cell_1ColumnXs","Cell-2-column-xs":"Polaris-Grid-Cell--cell_2ColumnXs","Cell-3-column-xs":"Polaris-Grid-Cell--cell_3ColumnXs","Cell-4-column-xs":"Polaris-Grid-Cell--cell_4ColumnXs","Cell-5-column-xs":"Polaris-Grid-Cell--cell_5ColumnXs","Cell-6-column-xs":"Polaris-Grid-Cell--cell_6ColumnXs","Cell-1-column-sm":"Polaris-Grid-Cell--cell_1ColumnSm","Cell-2-column-sm":"Polaris-Grid-Cell--cell_2ColumnSm","Cell-3-column-sm":"Polaris-Grid-Cell--cell_3ColumnSm","Cell-4-column-sm":"Polaris-Grid-Cell--cell_4ColumnSm","Cell-5-column-sm":"Polaris-Grid-Cell--cell_5ColumnSm","Cell-6-column-sm":"Polaris-Grid-Cell--cell_6ColumnSm","Cell-1-column-md":"Polaris-Grid-Cell--cell_1ColumnMd","Cell-2-column-md":"Polaris-Grid-Cell--cell_2ColumnMd","Cell-3-column-md":"Polaris-Grid-Cell--cell_3ColumnMd","Cell-4-column-md":"Polaris-Grid-Cell--cell_4ColumnMd","Cell-5-column-md":"Polaris-Grid-Cell--cell_5ColumnMd","Cell-6-column-md":"Polaris-Grid-Cell--cell_6ColumnMd","Cell-1-column-lg":"Polaris-Grid-Cell--cell_1ColumnLg","Cell-2-column-lg":"Polaris-Grid-Cell--cell_2ColumnLg","Cell-3-column-lg":"Polaris-Grid-Cell--cell_3ColumnLg","Cell-4-column-lg":"Polaris-Grid-Cell--cell_4ColumnLg","Cell-5-column-lg":"Polaris-Grid-Cell--cell_5ColumnLg","Cell-6-column-lg":"Polaris-Grid-Cell--cell_6ColumnLg","Cell-7-column-lg":"Polaris-Grid-Cell--cell_7ColumnLg","Cell-8-column-lg":"Polaris-Grid-Cell--cell_8ColumnLg","Cell-9-column-lg":"Polaris-Grid-Cell--cell_9ColumnLg","Cell-10-column-lg":"Polaris-Grid-Cell--cell_10ColumnLg","Cell-11-column-lg":"Polaris-Grid-Cell--cell_11ColumnLg","Cell-12-column-lg":"Polaris-Grid-Cell--cell_12ColumnLg","Cell-1-column-xl":"Polaris-Grid-Cell--cell_1ColumnXl","Cell-2-column-xl":"Polaris-Grid-Cell--cell_2ColumnXl","Cell-3-column-xl":"Polaris-Grid-Cell--cell_3ColumnXl","Cell-4-column-xl":"Polaris-Grid-Cell--cell_4ColumnXl","Cell-5-column-xl":"Polaris-Grid-Cell--cell_5ColumnXl","Cell-6-column-xl":"Polaris-Grid-Cell--cell_6ColumnXl","Cell-7-column-xl":"Polaris-Grid-Cell--cell_7ColumnXl","Cell-8-column-xl":"Polaris-Grid-Cell--cell_8ColumnXl","Cell-9-column-xl":"Polaris-Grid-Cell--cell_9ColumnXl","Cell-10-column-xl":"Polaris-Grid-Cell--cell_10ColumnXl","Cell-11-column-xl":"Polaris-Grid-Cell--cell_11ColumnXl","Cell-12-column-xl":"Polaris-Grid-Cell--cell_12ColumnXl"};function kR({area:e,column:t,columnSpan:r,row:n,children:a}){const s=T($a.Cell,(r==null?void 0:r.xs)&&$a[`Cell-${r.xs}-column-xs`],(r==null?void 0:r.sm)&&$a[`Cell-${r.sm}-column-sm`],(r==null?void 0:r.md)&&$a[`Cell-${r.md}-column-md`],(r==null?void 0:r.lg)&&$a[`Cell-${r.lg}-column-lg`],(r==null?void 0:r.xl)&&$a[`Cell-${r.xl}-column-xl`]),i={gridArea:e,"--pc-column-xs":t==null?void 0:t.xs,"--pc-column-sm":t==null?void 0:t.sm,"--pc-column-md":t==null?void 0:t.md,"--pc-column-lg":t==null?void 0:t.lg,"--pc-column-xl":t==null?void 0:t.xl,"--pc-row-xs":n==null?void 0:n.xs,"--pc-row-sm":n==null?void 0:n.sm,"--pc-row-md":n==null?void 0:n.md,"--pc-row-lg":n==null?void 0:n.lg,"--pc-row-xl":n==null?void 0:n.xl};return o.createElement("div",{className:s,style:i},a)}const vv=function({gap:t,areas:r,children:n,columns:a}){const s={"--pc-grid-gap-xs":t==null?void 0:t.xs,"--pc-grid-gap-sm":t==null?void 0:t.sm,"--pc-grid-gap-md":t==null?void 0:t.md,"--pc-grid-gap-lg":t==null?void 0:t.lg,"--pc-grid-gap-xl":t==null?void 0:t.xl,"--pc-grid-columns-xs":a==null?void 0:a.xs,"--pc-grid-columns-sm":a==null?void 0:a.sm,"--pc-grid-columns-md":a==null?void 0:a.md,"--pc-grid-columns-lg":a==null?void 0:a.lg,"--pc-grid-columns-xl":a==null?void 0:a.xl,"--pc-grid-areas-xs":bs(r==null?void 0:r.xs),"--pc-grid-areas-sm":bs(r==null?void 0:r.sm),"--pc-grid-areas-md":bs(r==null?void 0:r.md),"--pc-grid-areas-lg":bs(r==null?void 0:r.lg),"--pc-grid-areas-xl":bs(r==null?void 0:r.xl)};return o.createElement("div",{className:RR.Grid,style:s},n)};function bs(e){if(e)return`'${e==null?void 0:e.join("' '")}'`}vv.Cell=kR;let Ke;(function(e){e.Default="DEFAULT",e.Filtering="FILTERING",e.EditingColumns="EDITING_COLUMNS"})(Ke||(Ke={}));var ir={IndexFiltersWrapper:"Polaris-IndexFilters__IndexFiltersWrapper",IndexFilters:"Polaris-IndexFilters",IndexFiltersSticky:"Polaris-IndexFilters__IndexFiltersSticky",IndexFiltersStickyFlush:"Polaris-IndexFilters__IndexFiltersStickyFlush",TabsWrapper:"Polaris-IndexFilters__TabsWrapper",SmallScreenTabsWrapper:"Polaris-IndexFilters__SmallScreenTabsWrapper",TabsWrapperLoading:"Polaris-IndexFilters__TabsWrapperLoading",DesktopLoading:"Polaris-IndexFilters__DesktopLoading",TabsLoading:"Polaris-IndexFilters__TabsLoading",ActionWrap:"Polaris-IndexFilters__ActionWrap",Spinner:"Polaris-IndexFilters__Spinner",ButtonWrap:"Polaris-IndexFilters__ButtonWrap"};const xR=250;function IR(e,t,r){const n=typeof window<"u"&&!!window.IntersectionObserver,a={root:null,rootMargin:`${r?"0px":"-56px"} 0px 0px 0px`,threshold:0},[s,i]=m.useState(0),[l,c]=m.useState(!1),u=m.useRef(null),d=m.useRef(null),h=p=>{p.forEach(g=>{c(!g.isIntersecting)})},f=m.useRef(n?new IntersectionObserver(h,a):null);return m.useEffect(()=>{function p(){const b=u.current;if(!b)return{height:0};const y=b.getBoundingClientRect().height;i(y)}p();const g=rr(p,xR,{trailing:!0});return window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[u,e]),m.useEffect(()=>{const p=f.current;if(!p)return;const g=d.current;return g&&p.observe(g),()=>{p==null||p.disconnect()}},[d]),{intersectionRef:d,measurerRef:u,isSticky:l&&!t,indexFilteringHeight:s}}function Ev(){const[e,t]=m.useState(!1),r=m.useCallback(()=>t(!0),[]);return mt("touchstart",r),e}const Op=40;function NR({primaryAction:e,cancelAction:t,viewNames:r,disabled:n}){const a=se(),[s,i]=m.useState(""),[l,c]=m.useState(!1),u=m.useRef(null),d=Ev();m.useEffect(()=>{!u.current||d||l&&Bt(u.current)},[l,d]);async function h(){(e==null?void 0:e.type)==="save-as"?f():await(e==null?void 0:e.onAction(""))}function f(){c(!0)}function p(){c(!1)}function g(R){i(R)}async function b(){S||(await(e==null?void 0:e.onAction(s)),p())}const v=m.useMemo(()=>{switch(e==null?void 0:e.type){case"save":return a.translate("Polaris.IndexFilters.UpdateButtons.save");case"save-as":default:return a.translate("Polaris.IndexFilters.UpdateButtons.saveAs")}},[e==null?void 0:e.type,a]),y=o.createElement(ye,{size:"micro",onClick:h,disabled:(e==null?void 0:e.disabled)||n},v),E=r.some(R=>R.trim().toLowerCase()===s.trim().toLowerCase()),S=E||!s||(e==null?void 0:e.loading)||s.length>Op,_=t?o.createElement(ye,{variant:"tertiary",size:"micro",onClick:t.onAction,disabled:n},a.translate("Polaris.IndexFilters.UpdateButtons.cancel")):null;return e?o.createElement(de,{align:"start",blockAlign:"center",gap:"100"},_,e.type==="save-as"?o.createElement(ar,{activator:o.createElement(de,null,y),open:l,title:a.translate("Polaris.IndexFilters.UpdateButtons.modal.title"),onClose:p,primaryAction:{onAction:b,content:a.translate("Polaris.IndexFilters.UpdateButtons.modal.save"),disabled:S},secondaryActions:[{onAction:p,content:a.translate("Polaris.IndexFilters.UpdateButtons.modal.cancel")}]},o.createElement(ar.Section,null,o.createElement(ni,{onSubmit:b},o.createElement(Qs,null,o.createElement("div",{ref:u},o.createElement($n,{label:a.translate("Polaris.IndexFilters.UpdateButtons.modal.label"),value:s,onChange:g,autoComplete:"off",maxLength:Op,showCharacterCount:!0,error:E?a.translate("Polaris.IndexFilters.UpdateButtons.modal.sameName",{name:s}):void 0})))))):y):_}var Lp={DirectionButton:"Polaris-SortButton-DirectionButton","DirectionButton-active":"Polaris-SortButton-DirectionButton__DirectionButton--active"};function Mp({onClick:e,active:t,children:r,direction:n,value:a}){const s=T(Lp.DirectionButton,t&&Lp["DirectionButton-active"]);function i(){e([a])}return o.createElement(nr,{className:s,onClick:i},o.createElement(le,{source:n==="asc"?xy:Ry,tone:"base"}),o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},r))}let bo;(function(e){e.Asc="asc",e.Desc="desc"})(bo||(bo={}));function $R({choices:e,selected:t,onChange:r,disabled:n,onChangeKey:a,onChangeDirection:s}){var E,S,_,R;const i=se(),[l,c]=m.useState(!1),[u,d]=t[0].split(" ");function h(){c(x=>!x)}function f(){c(!1)}function p(x){if(a){const[C]=x[0].split(" ");a(C)}else r(x)}function g(x){if(s){const[,C]=x[0].split(" ");s(C)}else r(x)}const b=m.useMemo(()=>e.reduce((C,w)=>{const P=C.some(L=>L.label===w.label),[,N]=w.value.split(" "),$=N===d;return P?$?C.map(L=>L.label===w.label?w:L):C:[...C,w]},[]),[e,d]),v=e.filter(x=>{const[C]=x.value.split(" ");return C===u}),y=o.createElement(Gt,{content:i.translate("Polaris.IndexFilters.SortButton.tooltip"),preferredPosition:"above",hoverDelay:400},o.createElement(ye,{size:"slim",icon:By,onClick:h,disabled:n,accessibilityLabel:i.translate("Polaris.IndexFilters.SortButton.ariaLabel")}));return o.createElement(nt,{active:l&&!n,activator:y,autofocusTarget:"first-node",onClose:f,preferredAlignment:"right",fluidContent:!0},o.createElement(ne,{minWidth:"148px",paddingInlineStart:"300",paddingInlineEnd:"300",paddingBlockStart:"200",paddingBlockEnd:"200",borderBlockEndWidth:"025",borderColor:"border-secondary"},o.createElement(rv,{title:i.translate("Polaris.IndexFilters.SortButton.title"),choices:b,selected:t,onChange:p})),o.createElement(ne,{paddingInlineStart:"150",paddingInlineEnd:"150",paddingBlockStart:"200",paddingBlockEnd:"200"},o.createElement(Mp,{direction:"asc",active:d===bo.Asc,onClick:g,value:(E=v==null?void 0:v[0])==null?void 0:E.value},(S=v==null?void 0:v[0])==null?void 0:S.directionLabel),o.createElement(Mp,{direction:"desc",active:d===bo.Desc,onClick:g,value:(_=v==null?void 0:v[1])==null?void 0:_.value},(R=v==null?void 0:v[1])==null?void 0:R.directionLabel)))}var OR={Container:"Polaris-IndexFilters-Container"};const LR=({children:e})=>o.createElement("div",{className:OR.Container},e);function Fp(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}function Dp(e,t,r,n,a){const s=n.reduce((u,d)=>u+d,0),i=e.map((u,d)=>d),l=[],c=[];if(a>s)l.push(...i);else{l.push(t);let u=n[t];i.forEach(d=>{if(d!==t){const h=n[d];if(u+h>=a-r){c.push(d);return}l.push(d),u+=h}})}return{visibleTabs:l,hiddenTabs:c}}var Se={Outer:"Polaris-Tabs__Outer",Wrapper:"Polaris-Tabs__Wrapper",WrapperWithNewButton:"Polaris-Tabs__WrapperWithNewButton",ButtonWrapper:"Polaris-Tabs__ButtonWrapper",Tabs:"Polaris-Tabs",Tab:"Polaris-Tabs__Tab","Tab-active":"Polaris-Tabs__Tab--active","Tab-hasActions":"Polaris-Tabs__Tab--hasActions","Tab-iconOnly":"Polaris-Tabs__Tab--iconOnly",fillSpace:"Polaris-Tabs--fillSpace",TabContainer:"Polaris-Tabs__TabContainer",fitted:"Polaris-Tabs--fitted",titleWithIcon:"Polaris-Tabs--titleWithIcon",List:"Polaris-Tabs__List",Item:"Polaris-Tabs__Item",DisclosureTab:"Polaris-Tabs__DisclosureTab","DisclosureTab-visible":"Polaris-Tabs__DisclosureTab--visible",DisclosureActivator:"Polaris-Tabs__DisclosureActivator",TabsMeasurer:"Polaris-Tabs__TabsMeasurer",NewTab:"Polaris-Tabs__NewTab",ActionListWrap:"Polaris-Tabs__ActionListWrap",Panel:"Polaris-Tabs__Panel","Panel-hidden":"Polaris-Tabs__Panel--hidden"};const Fc=40;function MR({open:e,isModalLoading:t,name:r,onClose:n,onClickPrimaryAction:a,onClickSecondaryAction:s,helpText:i,viewNames:l}){const c=se(),[u,d]=m.useState(r),h=m.useRef(null),f=l==null?void 0:l.some(y=>y.trim().toLowerCase()===u.trim().toLowerCase()),p=t||f||!u||u.length>Fc;m.useEffect(()=>{h.current&&e&&Bt(h.current)},[e]),m.useEffect(()=>{e&&d(r.slice(0,Fc))},[r,e]);const g=m.useCallback(y=>{d(y)},[]);async function b(){p||(await a(u),d(""),n())}function v(){s==null||s(),d(r),n()}return o.createElement(ar,{open:e,onClose:n,title:c.translate("Polaris.Tabs.DuplicateModal.title"),primaryAction:{content:c.translate("Polaris.Tabs.DuplicateModal.create"),onAction:b,disabled:p},secondaryActions:[{content:c.translate("Polaris.Tabs.DuplicateModal.cancel"),onAction:v}],instant:!0},o.createElement(ar.Section,null,o.createElement(ni,{onSubmit:b},o.createElement(Qs,null,o.createElement("div",{ref:h},o.createElement($n,{label:c.translate("Polaris.Tabs.DuplicateModal.label"),value:u,onChange:g,autoComplete:"off",helpText:i,maxLength:Fc,showCharacterCount:!0,error:f?c.translate("Polaris.Tabs.DuplicateModal.errors.sameName",{name:u}):void 0}))))))}function FR({open:e,isModalLoading:t,name:r,onClose:n,onClickPrimaryAction:a,onClickSecondaryAction:s,helpText:i,viewNames:l}){const c=se(),[u,d]=m.useState(r),h=m.useRef(null),f=l==null?void 0:l.filter(y=>y!==r).some(y=>y.trim().toLowerCase()===u.trim().toLowerCase()),p=t||f||u===r||!u;m.useEffect(()=>{h.current&&e&&Bt(h.current)},[e]),m.useEffect(()=>{e&&d(r)},[r,e]);const g=m.useCallback(y=>{d(y)},[]);async function b(){p||(await a(u),d(""),n())}function v(){s==null||s(),d(r),n()}return o.createElement(ar,{open:e,onClose:n,title:c.translate("Polaris.Tabs.RenameModal.title"),primaryAction:{content:c.translate("Polaris.Tabs.RenameModal.create"),onAction:b,disabled:p},secondaryActions:[{content:c.translate("Polaris.Tabs.RenameModal.cancel"),onAction:v}],instant:!0},o.createElement(ar.Section,null,o.createElement(ni,{onSubmit:b},o.createElement(Qs,null,o.createElement("div",{ref:h},o.createElement($n,{label:c.translate("Polaris.Tabs.RenameModal.label"),value:u,onChange:g,autoComplete:"off",helpText:i,maxLength:40,showCharacterCount:!0,error:f?c.translate("Polaris.Tabs.RenameModal.errors.sameName",{name:u}):void 0}))))))}const yo=m.forwardRef(({content:e,accessibilityLabel:t,badge:r,id:n,panelID:a,url:s,onAction:i,actions:l,disabled:c,isModalLoading:u,icon:d,siblingTabHasFocus:h,measuring:f,focused:p,selected:g,onToggleModal:b,onTogglePopover:v,viewNames:y,tabIndexOverride:E,onFocus:S},_)=>{const R=se(),[x,C]=m.useState(!1),[w,P]=m.useState(null),N=m.useRef(g),$=m.useRef(!1),L=m.useRef(null);m.useEffect(()=>{v(x)},[x,v]),m.useEffect(()=>{b(!!w)},[w,b]),m.useEffect(()=>()=>{b(!1),v(!1)},[b,v]),m.useEffect(()=>{if(f)return;(p||document.activeElement&&document.activeElement.id===n)&&g&&a!=null&&!$.current&&(Hp(a),$.current=!0),g&&!N.current&&a!=null?Hp(a):p&&L.current!=null&&w==null&&!c&&Bt(L.current),N.current=g},[p,n,e,f,a,g,w,c]);let k;g&&!h&&!f||p&&!f?k=0:k=-1,E!=null&&(k=E);const A=l==null?void 0:l.find(ie=>ie.type==="rename"),O=l==null?void 0:l.find(ie=>ie.type==="duplicate"),M=l==null?void 0:l.find(ie=>ie.type==="delete"),D=m.useCallback(()=>{l!=null&&l.length&&C(ie=>!ie)},[l]),I=m.useCallback(()=>{c||(g?D():i==null||i())},[g,i,D,c]),F=ie=>{P(ie)},B=()=>{P(null)},U=m.useCallback(async ie=>{var pe;await((pe=A==null?void 0:A.onPrimaryAction)==null?void 0:pe.call(A,ie)),setTimeout(()=>{L.current&&Bt(L.current)},250)},[A]),V=m.useCallback(async()=>{var ie;await((ie=M==null?void 0:M.onPrimaryAction)==null?void 0:ie.call(M,e)),B()},[M,e]),W=m.useCallback(async ie=>{var pe;await((pe=O==null?void 0:O.onPrimaryAction)==null?void 0:pe.call(O,ie))},[O]),H={rename:{icon:Dd,content:R.translate("Polaris.Tabs.Tab.rename")},duplicate:{icon:$y,content:R.translate("Polaris.Tabs.Tab.duplicate")},edit:{icon:Oy,content:R.translate("Polaris.Tabs.Tab.edit")},"edit-columns":{icon:Hd,content:R.translate("Polaris.Tabs.Tab.editColumns")},delete:{icon:Ny,content:R.translate("Polaris.Tabs.Tab.delete"),destructive:!0}},Y=l==null?void 0:l.map(({type:ie,onAction:pe,onPrimaryAction:Ae,...qe})=>{const Fe=!ie.includes("edit");return{...H[ie],...qe,onAction:()=>{pe==null||pe(e),D(),Fe&&F(ie)}}}),j=m.useCallback(ie=>{ie.key===" "&&(ie.preventDefault(),I())},[I]),J=T(Se.TabContainer,g&&Se.Underline),ge=c||g?void 0:s,Oe=ge?_r:nr,Ce=T(Se.Tab,d&&Se["Tab-iconOnly"],x&&Se["Tab-popoverActive"],g&&Se["Tab-active"],g&&(l==null?void 0:l.length)&&Se["Tab-hasActions"]),De=r?o.createElement(Tn,{tone:g?void 0:"new"},r):null,je=g&&(l!=null&&l.length)?o.createElement("div",{className:T(Se.IconWrap)},o.createElement(le,{source:Ys})):null,Le=o.createElement(Oe,{id:n,className:Ce,tabIndex:k,"aria-selected":g,"aria-controls":a,"aria-label":t,role:E==null?"tab":void 0,disabled:c,url:ge,onFocus:S,onMouseUp:io,onClick:I,onKeyDown:j},o.createElement(de,{gap:"200",align:"center",blockAlign:"center",wrap:!1},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},d??e),De),je),z=!g||!(l!=null&&l.length),ae=A?o.createElement(FR,{name:e,open:w==="rename",onClose:B,onClickPrimaryAction:U,isModalLoading:u,viewNames:y}):null,we=O?o.createElement(MR,{open:w==="duplicate",name:R.translate("Polaris.Tabs.Tab.copy",{name:e}),onClose:B,onClickPrimaryAction:W,isModalLoading:u,viewNames:y||[]}):null,he=M?o.createElement(ar,{open:w==="delete",onClose:B,primaryAction:{content:R.translate("Polaris.Tabs.Tab.deleteModal.delete"),onAction:V,destructive:!0,disabled:u},secondaryActions:[{content:R.translate("Polaris.Tabs.Tab.deleteModal.cancel"),onAction:B}],title:R.translate("Polaris.Tabs.Tab.deleteModal.title"),instant:!0},o.createElement(ar.Section,null,R.translate("Polaris.Tabs.Tab.deleteModal.description",{viewName:e}))):null,be=z||c?Le:o.createElement(o.Fragment,null,o.createElement(nt,{active:x,activator:Le,autofocusTarget:"first-node",onClose:D},o.createElement("div",{className:Se.ActionListWrap},o.createElement(nn,{actionRole:"menuitem",items:Y}))),ae,we,he);return d?be:o.createElement("li",{className:J,ref:DR([L,_]),role:"presentation"},be)});yo.displayName="Tab";function Hp(e){const t=document.getElementById(e);t&&t.focus({preventScroll:!0})}function DR(e){return t=>{for(const r of e)r!=null&&(r.current=t)}}const HR=m.memo(function({selected:t,tabs:r,activator:n,tabToFocus:a,siblingTabHasFocus:s,handleMeasurement:i}){const l=m.useRef(null),c=m.useRef(null),u=m.useCallback(()=>{c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(()=>{if(!l.current)return;const f=l.current.offsetWidth-20-28,p=l.current.children,b=Array.from(p).map(y=>Math.ceil(y.getBoundingClientRect().width)+4),v=b.pop()||0;i({containerWidth:f,disclosureWidth:v,hiddenTabWidths:b})})},[i]);m.useEffect(()=>{u()},[u,r]),Lo(()=>{});const d=r.map((f,p)=>o.createElement(yo,{measuring:!0,key:`$${f.id}Hidden`,id:`${f.id}Measurer`,siblingTabHasFocus:s,focused:p===a,selected:p===t,url:f.url,content:f.content,onTogglePopover:Bp,onToggleModal:Bp})),h=T(Se.Tabs,Se.TabsMeasurer);return mt("resize",u),o.createElement("div",{className:h,ref:l},d,n)});function Bp(){}function Wp({hidden:e,id:t,tabID:r,children:n}){const a=T(Se.Panel,e&&Se["Panel-hidden"]);return o.createElement("div",{className:a,id:t,role:"tabpanel","aria-labelledby":r,tabIndex:-1},n)}const BR=m.memo(function({id:t,focused:r,children:n,url:a,accessibilityLabel:s,onClick:i=WR}){const l=m.useRef(null);m.useEffect(()=>{l.current&&l.current instanceof HTMLElement&&r&&l.current.focus()},[l,r]);const c=T(Se.Item),u={id:t,ref:l,onClick:i,className:c,"aria-selected":!1,"aria-label":s},d=a?o.createElement(_r,Object.assign({},u,{url:a}),n):o.createElement("button",Object.assign({},u,{ref:l,type:"button"}),n);return o.createElement("li",null,d)});function WR(){}function UR({focusIndex:e,disclosureTabs:t,onClick:r=Up,onKeyPress:n=Up}){const a=t.map(({id:s,content:i,...l},c)=>o.createElement(BR,Object.assign({key:s},l,{id:s,focused:c===e,onClick:r.bind(null,s)}),i));return o.createElement("ul",{className:Se.List,onKeyDown:jR,onKeyUp:n},a)}function Up(){}function jR(e){const{key:t}=e;(t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}const jp=40;function qR({activator:e,open:t,onClose:r,onClickPrimaryAction:n,onClickSecondaryAction:a,viewNames:s}){const i=se(),[l,c]=m.useState(""),[u,d]=m.useState(!1),h=m.useRef(null),f=Ev(),p=s.some(E=>E.trim().toLowerCase()===l.trim().toLowerCase()),g=!l||p||u||l.length>jp;m.useEffect(()=>{if(!(!h.current||f)&&t){Bt(h.current);const E=setTimeout(()=>{h.current&&Bt(h.current)},50);return()=>clearTimeout(E)}},[t,f]);const b=m.useCallback(E=>{c(E)},[]);async function v(){p||g||(d(!0),await n(l),d(!1),c(""),r())}function y(){a==null||a(),c(""),r()}return o.createElement(ar,{activator:e,open:t,onClose:r,title:i.translate("Polaris.Tabs.CreateViewModal.title"),primaryAction:{content:i.translate("Polaris.Tabs.CreateViewModal.create"),onAction:v,disabled:g},secondaryActions:[{content:i.translate("Polaris.Tabs.CreateViewModal.cancel"),onAction:y}]},o.createElement(ar.Section,null,o.createElement(ni,{onSubmit:v},o.createElement(Qs,null,o.createElement("div",{ref:h},o.createElement($n,{label:i.translate("Polaris.Tabs.CreateViewModal.label"),value:l,onChange:b,autoComplete:"off",maxLength:jp,showCharacterCount:!0,error:p?i.translate("Polaris.Tabs.CreateViewModal.errors.sameName",{name:l}):void 0}))))))}const VR="create-new-view",Sv=({tabs:e,children:t,selected:r,newViewAccessibilityLabel:n,canCreateNewView:a,disabled:s,onCreateNewView:i,onSelect:l,fitted:c,disclosureText:u})=>{const d=se(),{mdDown:h}=_a(),f=m.useRef(null),p=m.useRef(null),g=m.useRef(null),[b,v]=m.useReducer((Z,te)=>({...Z,...te}),{disclosureWidth:0,containerWidth:1/0,tabWidths:[],visibleTabs:[],hiddenTabs:[],showDisclosure:!1,tabToFocus:-1,isNewViewModalActive:!1,modalSubmitted:!1,isTabsFocused:!1,isTabPopoverOpen:!1,isTabModalOpen:!1}),{tabToFocus:y,visibleTabs:E,hiddenTabs:S,showDisclosure:_,isNewViewModalActive:R,modalSubmitted:x,disclosureWidth:C,tabWidths:w,containerWidth:P,isTabsFocused:N,isTabModalOpen:$,isTabPopoverOpen:L}=b,k=Fp($),A=Fp(L);m.useEffect(()=>{k&&!$?v({isTabsFocused:!0,tabToFocus:r}):A&&!L&&!$&&v({isTabsFocused:!0,tabToFocus:r})},[A,L,k,$,r,y]);const O=m.useCallback(Z=>v({isTabPopoverOpen:Z}),[]),M=m.useCallback(Z=>v({isTabModalOpen:Z}),[]),D=()=>{v({isNewViewModalActive:!1})},I=async Z=>{if(!i)return!1;const te=await(i==null?void 0:i(Z));return te&&v({modalSubmitted:!0}),te},F=()=>{v({isNewViewModalActive:!0})},B=m.useCallback(Z=>{const te=e.find(oe=>oe.id===Z);if(te==null)return null;const ee=e.indexOf(te);l==null||l(ee)},[e,l]),U=m.useCallback((Z,te)=>{const ee=()=>{var ke;B(Z.id),(ke=Z.onAction)==null||ke.call(Z)},oe=e.map(({content:ke})=>ke),Re=Z.panelID||`${Z.id}-panel`;return o.createElement(yo,Object.assign({},Z,{key:`${te}-${Z.id}`,id:Z.id,panelID:t?Re:void 0,disabled:s||Z.disabled,siblingTabHasFocus:y>-1,focused:te===y,selected:te===r,onAction:ee,accessibilityLabel:Z.accessibilityLabel,url:Z.url,content:Z.content,onToggleModal:M,onTogglePopover:O,viewNames:oe,ref:te===r?g:null}))},[s,B,e,t,r,y,M,O]),V=m.useCallback(Z=>{const te=Z.target,ee=te.classList.contains(Se.Item),oe=te.closest("[data-tabs-focus-catchment]")||ee;te.classList.contains(Se.DisclosureActivator)||!oe||v({isTabsFocused:!0})},[]),W=m.useCallback(Z=>{var Pt,Mt,bt;const te=Z.target,ee=Z.relatedTarget,oe=(Pt=ee==null?void 0:ee.closest)==null?void 0:Pt.call(ee,`.${Se.Tabs}`),Re=(bt=(Mt=te==null?void 0:te.classList)==null?void 0:Mt.contains)==null?void 0:bt.call(Mt,Se.Tab),ke=ee==null?void 0:ee.classList.contains(Se.Item);if(!ee&&!$&&!Re&&!ke){v({tabToFocus:-1});return}if(!oe&&!$&&!Re&&!ke){v({tabToFocus:-1});return}v({isTabsFocused:!1})},[$]),H=Z=>{if(L||$||R)return;const{key:te}=Z;(te==="ArrowLeft"||te==="ArrowRight")&&(Z.preventDefault(),Z.stopPropagation())};m.useEffect(()=>{const{visibleTabs:Z,hiddenTabs:te}=Dp(e,r,C,w,P);v({visibleTabs:Z,hiddenTabs:te})},[P,C,e,r,w,v]);const Y=m.useCallback(()=>{var te;const Z=(te=g.current)==null?void 0:te.querySelector(`.${Se["Tab-active"]}`);Z&&De(Z.offsetLeft)},[]);m.useEffect(()=>{h&&Y()},[Y,r,h]),m.useEffect(()=>{N&&!_&&v({tabToFocus:r})},[N,r,v,_]);const j=Z=>{const{showDisclosure:te,visibleTabs:ee,hiddenTabs:oe,tabToFocus:Re,isNewViewModalActive:ke}=b;if($||L||ke)return;const Pt=Z.key,Mt=te||h?ee.concat(oe):[...ee];let bt=Mt.indexOf(Re);Pt==="ArrowRight"&&(bt+=1,bt===Mt.length&&(bt=0)),Pt==="ArrowLeft"&&(bt===-1||bt===0?bt=Mt.length-1:bt-=1);const Ee=Mt[bt];Ee!=null&&v({tabToFocus:Ee})},J=()=>{v({showDisclosure:!_,tabToFocus:S[0]})},ge=()=>{v({showDisclosure:!1})},Oe=m.useCallback(Z=>{const{hiddenTabWidths:te,containerWidth:ee,disclosureWidth:oe}=Z,{visibleTabs:Re,hiddenTabs:ke}=Dp(e,r,oe,te,ee);v({visibleTabs:Re,hiddenTabs:ke,disclosureWidth:oe,containerWidth:ee,tabWidths:te})},[e,r,v]),Ce=Z=>{B(Z),ge(),v({isTabsFocused:!0})},De=Z=>{setTimeout(()=>{var te,ee;if(f.current&&typeof f.current.scroll=="function"){const oe=((te=p==null?void 0:p.current)==null?void 0:te.offsetLeft)||0;(ee=f==null?void 0:f.current)==null||ee.scroll({left:Z-oe})}},0)},je=n||d.translate("Polaris.Tabs.newViewAccessibilityLabel"),Le=h?[...E,...S]:E,z=Le.sort((Z,te)=>Z-te).filter(Z=>e[Z]).map(Z=>U(e[Z],Z)),ae=E.length<e.length&&!h,we=T(Se.Tabs,c&&Se.fitted,ae&&Se.fillSpace),he=T(Se.Wrapper,a&&Se.WrapperWithNewButton),be=T(Se.DisclosureTab,ae&&Se["DisclosureTab-visible"]),ie=T(Se.DisclosureActivator),pe=o.createElement(o.Fragment,null,o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},u??d.translate("Polaris.Tabs.toggleTabsLabel")),o.createElement("div",{className:T(Se.IconWrap,ae&&_&&Se["IconWrap-open"])},o.createElement(le,{source:Ys,tone:"subdued"}))),qe=o.createElement(nr,{type:"button",className:ie,onClick:J,"aria-label":u??d.translate("Polaris.Tabs.toggleTabsLabel"),disabled:s},pe),Fe=S.map(Z=>e[Z]),me=e.map(({content:Z})=>Z),Ue=o.createElement(HR,{tabToFocus:y,activator:qe,selected:r,tabs:e,siblingTabHasFocus:y>-1,handleMeasurement:Oe}),Je=o.createElement(yo,{id:VR,content:je,actions:[],onAction:F,onFocus:()=>{x&&v({tabToFocus:r,modalSubmitted:!1})},icon:o.createElement(le,{source:Bd,accessibilityLabel:je}),disabled:s,onTogglePopover:O,onToggleModal:M,tabIndexOverride:0}),ur=t?e.map((Z,te)=>r===te?o.createElement(Wp,{id:e[te].panelID||`${e[te].id}-panel`,tabID:e[te].id,key:e[te].id},t):o.createElement(Wp,{id:e[te].panelID||`${e[te].id}-panel`,tabID:e[te].id,key:e[te].id,hidden:!0})):null;return o.createElement("div",{className:Se.Outer},o.createElement(ne,{padding:{md:"200"}},Ue,o.createElement("div",{className:he,ref:f},o.createElement("div",{className:Se.ButtonWrapper,ref:p},o.createElement("ul",{role:z.length>0?"tablist":void 0,className:we,onFocus:V,onBlur:W,onKeyDown:H,onKeyUp:j,"data-tabs-focus-catchment":!0},z,h||Le.length===0?null:o.createElement("li",{className:be,role:"presentation"},o.createElement(nt,{preferredPosition:"below",preferredAlignment:"left",activator:qe,active:ae&&_,onClose:ge,autofocusTarget:"first-node"},o.createElement(UR,{focusIndex:S.indexOf(y),disclosureTabs:Fe,onClick:Ce,onKeyPress:j})))),a&&Le.length>0?o.createElement("div",{className:Se.NewTab},o.createElement(qR,{open:R,onClose:D,onClickPrimaryAction:I,viewNames:me,activator:s?Je:o.createElement("div",null,o.createElement(Gt,{content:d.translate("Polaris.Tabs.newViewTooltip"),preferredPosition:"above",hoverDelay:400},Je))})):null))),ur)};function KR({onClick:e,label:t,disabled:r,tooltipContent:n,style:a,hideFilters:s,hideQueryField:i}){const l=o.createElement(de,{gap:"0"},i?null:o.createElement(le,{source:Xs,tone:"base"}),s?null:o.createElement(le,{source:My,tone:"base"})),c=o.createElement("div",{style:a},o.createElement(ye,{size:"slim",onClick:e,disabled:r,icon:l,accessibilityLabel:t})),u=o.createElement(G,{as:"span",variant:"bodyMd",alignment:"center"},n);return o.createElement(Gt,{content:u,preferredPosition:"above",hoverDelay:400},c)}function zR({onClick:e,disabled:t}){const r=se(),n=o.createElement(G,{as:"span",variant:"bodyMd",alignment:"center"},r.translate("Polaris.IndexFilters.EditColumnsButton.tooltip"));return o.createElement(Gt,{content:n,preferredPosition:"above",hoverDelay:400},o.createElement(ye,{size:"slim",onClick:e,disabled:t,icon:Hd,accessibilityLabel:r.translate("Polaris.IndexFilters.EditColumnsButton.accessibilityLabel")}))}const GR=["INPUT","SELECT","TEXTAREA"],Qu=150,Dc={transition:`opacity ${Qu}ms var(--p-motion-ease)`,opacity:0},Hc={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0},unmounted:{opacity:0}};function JR({tabs:e,selected:t,onSelect:r,onSort:n,onSortKeyChange:a,onSortDirectionChange:s,onAddFilterClick:i,sortOptions:l,sortSelected:c,queryValue:u="",queryPlaceholder:d,primaryAction:h,cancelAction:f,filters:p,appliedFilters:g,onClearAll:b,onQueryChange:v,onQueryFocus:y,onQueryClear:E,onEditStart:S,disabled:_,disableQueryField:R,hideFilters:x,loading:C,mode:w,setMode:P,disableStickyMode:N,isFlushWhenSticky:$=!1,canCreateNewView:L=!0,onCreateNewView:k,filteringAccessibilityLabel:A,filteringAccessibilityTooltip:O,hideQueryField:M,closeOnChildOverlayClick:D,disableKeyboardShortcuts:I,showEditColumnsButton:F,autoFocusSearchField:B=!0}){const U=se(),{mdDown:V}=_a(),W=m.useRef(null),H=m.useRef(null),{value:Y,setFalse:j,setTrue:J}=Wt(w===Ke.Filtering&&B);dv(w,Ee=>{Ee===Ke.Filtering&&B?J():j()}),mt("keydown",Ee=>{var jn;if(I||M&&x)return;const{key:Wn}=Ee,Un=(jn=document==null?void 0:document.activeElement)==null?void 0:jn.tagName;if(w!==Ke.Default&&Ee.key==="Escape"&&Re(),Wn==="f"&&w===Ke.Default){if(Un&&GR.includes(Un))return;bt(),Ee.preventDefault()}});const{intersectionRef:Oe,measurerRef:Ce,indexFilteringHeight:De,isSticky:je}=IR(w,!!N,$),Le=e.map(({content:Ee})=>Ee),z=m.useCallback(Ee=>{n==null||n(Ee)},[n]),ae=m.useCallback(Ee=>{v(Ee)},[v]),he=((Ee,on)=>m.useCallback(async Wn=>{await(Ee==null?void 0:Ee(Wn))&&(P(Ke.Default),on==null||on())},[Ee,on]))(h==null?void 0:h.onAction),be=m.useCallback(()=>{var Ee;(Ee=f==null?void 0:f.onAction)==null||Ee.call(f),P(Ke.Default)},[f,P]),ie=m.useMemo(()=>h?{...h,onAction:he}:void 0,[he,h]),pe=m.useMemo(()=>f?{...f,onAction:be}:void 0,[f,be]),Ae=m.useCallback(Ee=>{P(Ee),S==null||S(Ee)},[S,P]),qe=m.useMemo(()=>pe||ie?o.createElement(NR,{primaryAction:ie,cancelAction:pe,viewNames:Le,disabled:_}):null,[ie,pe,_,Le]),Fe=m.useMemo(()=>l!=null&&l.length?o.createElement($R,{choices:l,selected:c,onChange:z,onChangeKey:a,onChangeDirection:s,disabled:_}):null,[z,s,a,l,c,_]);function me(){Ae(Ke.EditingColumns)}const Ue=F?o.createElement(zR,{onClick:me,disabled:_}):null,Je=(h==null?void 0:h.loading)||(f==null?void 0:f.loading);function ur(){Ae(Ke.Filtering)}const Z=I?"Polaris.IndexFilters.searchFilterTooltip":"Polaris.IndexFilters.searchFilterTooltipWithShortcut",te=O||U.translate(Z),ee=A||U.translate("Polaris.IndexFilters.searchFilterAccessibilityLabel"),oe=C||Je;function Re(){f==null||f.onAction(),P(Ke.Default)}function ke(){E==null||E()}function Pt(){j()}function Mt(){J(),y==null||y()}function bt(){w===Ke.Default&&Ae(Ke.Filtering)}return o.createElement("div",{className:ir.IndexFiltersWrapper,style:{height:De}},o.createElement("div",{ref:Oe}),o.createElement("div",{className:T(ir.IndexFilters,je&&ir.IndexFiltersSticky,je&&$&&ir.IndexFiltersStickyFlush),ref:Ce},o.createElement(qs,{nodeRef:W,in:w!==Ke.Filtering,timeout:Qu},Ee=>o.createElement("div",{ref:W},w!==Ke.Filtering?o.createElement(LR,null,o.createElement(de,{align:"start",blockAlign:"center",gap:{xs:"0",md:"200"},wrap:!1},o.createElement("div",{className:T(ir.TabsWrapper,V&&ir.SmallScreenTabsWrapper,oe&&ir.TabsWrapperLoading)},o.createElement("div",{className:ir.TabsInner,style:{...Dc,...Hc[Ee]}},o.createElement(Sv,{tabs:e,selected:t,onSelect:r,disabled:!!(w!==Ke.Default||_),canCreateNewView:L,onCreateNewView:k})),oe&&V&&o.createElement("div",{className:ir.TabsLoading},o.createElement(da,{size:"small"}))),o.createElement("div",{className:ir.ActionWrap},oe&&!V&&o.createElement("div",{className:ir.DesktopLoading},oe?o.createElement(da,{size:"small"}):null),w===Ke.Default?o.createElement(o.Fragment,null,x&&M?null:o.createElement(KR,{onClick:ur,label:ee,tooltipContent:te,disabled:_,hideFilters:x,hideQueryField:M,style:{...Dc,...Hc[Ee]}}),Ue,Fe):null,w===Ke.EditingColumns?qe:null))):null)),o.createElement(qs,{nodeRef:H,in:w===Ke.Filtering,timeout:Qu},Ee=>o.createElement("div",{ref:H},w===Ke.Filtering?o.createElement(hv,{queryValue:u,queryPlaceholder:d,onQueryChange:ae,onQueryClear:ke,onQueryFocus:Mt,onQueryBlur:Pt,onAddFilterClick:i,filters:p,appliedFilters:g,onClearAll:b,disableFilters:_,hideFilters:x,hideQueryField:M,disableQueryField:_||R,loading:C||Je,focused:Y,mountedState:V?void 0:Ee,borderlessQueryField:!0,closeOnChildOverlayClick:D},o.createElement("div",{className:ir.ButtonWrap},o.createElement(de,{gap:"200",align:"start",blockAlign:"center"},o.createElement("div",{style:{...Dc,...Hc[Ee]}},qe),Fe))):null))))}function XR(e=Ke.Default){const[t,r]=m.useState(e);return{mode:t,setMode:r}}var q={IndexTable:"Polaris-IndexTable",IndexTableWrapper:"Polaris-IndexTable__IndexTableWrapper","IndexTableWrapper-scrollBarHidden":"Polaris-IndexTable__IndexTableWrapper--scrollBarHidden",IndexTableWrapperWithSelectAllActions:"Polaris-IndexTable__IndexTableWrapperWithSelectAllActions","LoadingContainer-enter":"Polaris-IndexTable__LoadingContainer--enter","LoadingContainer-enter-active":"Polaris-IndexTable--loadingContainerEnterActive","LoadingContainer-exit":"Polaris-IndexTable__LoadingContainer--exit","LoadingContainer-exit-active":"Polaris-IndexTable--loadingContainerExitActive",LoadingPanel:"Polaris-IndexTable__LoadingPanel",LoadingPanelRow:"Polaris-IndexTable__LoadingPanelRow",LoadingPanelText:"Polaris-IndexTable__LoadingPanelText",Table:"Polaris-IndexTable__Table","Table-scrolling":"Polaris-IndexTable__Table--scrolling","TableCell-first":"Polaris-IndexTable__TableCell--first","StickyTable-scrolling":"Polaris-IndexTable__StickyTable--scrolling",TableCell:"Polaris-IndexTable__TableCell","TableHeading-first":"Polaris-IndexTable__TableHeading--first","TableHeading-second":"Polaris-IndexTable__TableHeading--second","Table-sticky":"Polaris-IndexTable__Table--sticky",StickyTable:"Polaris-IndexTable__StickyTable","Table-unselectable":"Polaris-IndexTable__Table--unselectable",TableRow:"Polaris-IndexTable__TableRow","TableRow-unclickable":"Polaris-IndexTable__TableRow--unclickable",toneSuccess:"Polaris-IndexTable--toneSuccess","TableRow-child":"Polaris-IndexTable__TableRow--child",toneWarning:"Polaris-IndexTable--toneWarning",toneCritical:"Polaris-IndexTable--toneCritical",toneSubdued:"Polaris-IndexTable--toneSubdued","TableRow-subheader":"Polaris-IndexTable__TableRow--subheader","TableRow-selected":"Polaris-IndexTable__TableRow--selected","TableRow-hovered":"Polaris-IndexTable__TableRow--hovered","TableRow-disabled":"Polaris-IndexTable__TableRow--disabled",ZebraStriping:"Polaris-IndexTable__ZebraStriping",TableHeading:"Polaris-IndexTable__TableHeading","TableHeading-flush":"Polaris-IndexTable__TableHeading--flush","TableHeading-align-center":"Polaris-IndexTable--tableHeadingAlignCenter","TableHeading-align-end":"Polaris-IndexTable--tableHeadingAlignEnd","TableHeading-extra-padding-right":"Polaris-IndexTable--tableHeadingExtraPaddingRight","TableHeading-sortable":"Polaris-IndexTable__TableHeading--sortable",TableHeadingSortButton:"Polaris-IndexTable__TableHeadingSortButton",TableHeadingSortIcon:"Polaris-IndexTable__TableHeadingSortIcon","TableHeadingSortButton-heading-align-end":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEnd","TableHeadingSortButton-heading-align-end-currently-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndCurrentlySorted","TableHeadingSortIcon-heading-align-end":"Polaris-IndexTable--tableHeadingSortIconHeadingAlignEnd","TableHeadingSortButton-heading-align-end-previously-sorted":"Polaris-IndexTable--tableHeadingSortButtonHeadingAlignEndPreviouslySorted","right-aligned-sort-button-slide-out":"Polaris-IndexTable--rightAlignedSortButtonSlideOut","reveal-right-aligned-sort-button-icon":"Polaris-IndexTable--revealRightAlignedSortButtonIcon",TableHeadingUnderline:"Polaris-IndexTable__TableHeadingUnderline",TableHeadingTooltipUnderlinePlaceholder:"Polaris-IndexTable__TableHeadingTooltipUnderlinePlaceholder","TableHeadingSortIcon-visible":"Polaris-IndexTable__TableHeadingSortIcon--visible",TableHeadingSortSvg:"Polaris-IndexTable__TableHeadingSortSvg",SortableTableHeadingWithCustomMarkup:"Polaris-IndexTable__SortableTableHeadingWithCustomMarkup",SortableTableHeaderWrapper:"Polaris-IndexTable__SortableTableHeaderWrapper",ColumnHeaderCheckboxWrapper:"Polaris-IndexTable__ColumnHeaderCheckboxWrapper",FirstStickyHeaderElement:"Polaris-IndexTable__FirstStickyHeaderElement","TableHeading-unselectable":"Polaris-IndexTable__TableHeading--unselectable","TableCell-flush":"Polaris-IndexTable__TableCell--flush","Table-sticky-scrolling":"Polaris-IndexTable--tableStickyScrolling","StickyTableHeader-sticky-scrolling":"Polaris-IndexTable--stickyTableHeaderStickyScrolling","TableHeading-last":"Polaris-IndexTable__TableHeading--last","Table-sticky-last":"Polaris-IndexTable--tableStickyLast","StickyTableHeader-sticky-last":"Polaris-IndexTable--stickyTableHeaderStickyLast","Table-sortable":"Polaris-IndexTable__Table--sortable",StickyTableHeader:"Polaris-IndexTable__StickyTableHeader","StickyTableHeader-isSticky":"Polaris-IndexTable__StickyTableHeader--isSticky",StickyTableHeadings:"Polaris-IndexTable__StickyTableHeadings","StickyTableHeading-second":"Polaris-IndexTable__StickyTableHeading--second",unselectable:"Polaris-IndexTable--unselectable","StickyTableHeading-second-scrolling":"Polaris-IndexTable--stickyTableHeadingSecondScrolling",ScrollLeft:"Polaris-IndexTable__ScrollLeft",ScrollRight:"Polaris-IndexTable__ScrollRight","ScrollRight-onboarding":"Polaris-IndexTable__ScrollRight--onboarding",SelectAllActionsWrapper:"Polaris-IndexTable__SelectAllActionsWrapper",SelectAllActionsWrapperWithPagination:"Polaris-IndexTable__SelectAllActionsWrapperWithPagination",SelectAllActionsWrapperSticky:"Polaris-IndexTable__SelectAllActionsWrapperSticky",SelectAllActionsWrapperAtEnd:"Polaris-IndexTable__SelectAllActionsWrapperAtEnd",SelectAllActionsWrapperAtEndAppear:"Polaris-IndexTable__SelectAllActionsWrapperAtEndAppear",BulkActionsWrapper:"Polaris-IndexTable__BulkActionsWrapper",BulkActionsWrapperVisible:"Polaris-IndexTable__BulkActionsWrapperVisible",PaginationWrapper:"Polaris-IndexTable__PaginationWrapper",PaginationWrapperScrolledPastTop:"Polaris-IndexTable__PaginationWrapperScrolledPastTop",ScrollBarContainer:"Polaris-IndexTable__ScrollBarContainer",ScrollBarContainerWithPagination:"Polaris-IndexTable__ScrollBarContainerWithPagination",ScrollBarContainerScrolledPastTop:"Polaris-IndexTable__ScrollBarContainerScrolledPastTop",ScrollBarContainerWithSelectAllActions:"Polaris-IndexTable__ScrollBarContainerWithSelectAllActions",ScrollBarContainerSelectAllActionsSticky:"Polaris-IndexTable__ScrollBarContainerSelectAllActionsSticky",scrollBarContainerCondensed:"Polaris-IndexTable--scrollBarContainerCondensed",scrollBarContainerHidden:"Polaris-IndexTable--scrollBarContainerHidden",ScrollBar:"Polaris-IndexTable__ScrollBar",disableTextSelection:"Polaris-IndexTable--disableTextSelection",EmptySearchResultWrapper:"Polaris-IndexTable__EmptySearchResultWrapper",condensedRow:"Polaris-IndexTable--condensedRow",CondensedList:"Polaris-IndexTable__CondensedList",HeaderWrapper:"Polaris-IndexTable__HeaderWrapper","StickyTable-condensed":"Polaris-IndexTable__StickyTable--condensed","StickyTableHeader-condensed":"Polaris-IndexTable__StickyTableHeader--condensed",ScrollBarContent:"Polaris-IndexTable__ScrollBarContent"};const Zr="All";let Qe;(function(e){e.All="all",e.Page="page",e.Multi="multi",e.Single="single",e.Range="range"})(Qe||(Qe={}));const _v=m.createContext(void 0),Cv=m.createContext(void 0),wv=m.createContext(void 0);function Pv(){const e=m.useContext(Cv);if(!e)throw new Error("Missing IndexProvider context");return e}function YR(){const e=m.useContext(wv);if(!e)throw new Error("Missing IndexProvider context");return e}function Av(){const e=m.useContext(_v);if(!e)throw new Error("Missing IndexProvider context");return e}function ZR({selectedItemsCount:e,itemCount:t,hasMoreItems:r,resourceName:n,defaultPaginatedSelectAllText:a}){const s=se(),i=!!e,l=e==="All"||e>0,c={singular:s.translate("Polaris.IndexProvider.defaultItemSingular"),plural:s.translate("Polaris.IndexProvider.defaultItemPlural")},u=n||c,d=g(),h=b(),f=v();let p="indeterminate";return!e||e===0?p=void 0:(e===Zr||e===t)&&(p=!0),{paginatedSelectAllText:d,bulkActionsLabel:h,bulkActionsAccessibilityLabel:f,resourceName:u,selectMode:l,bulkSelectState:p,selectable:i};function g(){if(!(!i||!r)&&e===Zr)return a||s.translate("Polaris.IndexProvider.allItemsSelected",{itemsLength:t,resourceNamePlural:u.plural.toLocaleLowerCase()})}function b(){const y=e===Zr?`${t}+`:e;return s.translate("Polaris.IndexProvider.selected",{selectedItemsCount:y})}function v(){const y=t,E=e===y;return y===1&&E?s.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllSingle",{resourceNameSingular:u.singular}):y===1?s.translate("Polaris.IndexProvider.a11yCheckboxSelectAllSingle",{resourceNameSingular:u.singular}):E?s.translate("Polaris.IndexProvider.a11yCheckboxDeselectAllMultiple",{itemsLength:t,resourceNamePlural:u.plural}):s.translate("Polaris.IndexProvider.a11yCheckboxSelectAllMultiple",{itemsLength:t,resourceNamePlural:u.plural})}}function QR({onSelectionChange:e=()=>{}}){const t=m.useRef(null);return m.useCallback((n,a,s,i)=>{const l=t.current;if(Qe.Multi&&typeof i=="number"&&(t.current=i),n===Qe.Single||n===Qe.Multi&&(typeof l!="number"||typeof i!="number"))e(Qe.Single,a,s);else if(n===Qe.Multi){const c=Math.min(l,i),u=Math.max(l,i);e(n,a,[c,u])}else n===Qe.Page||n===Qe.All?e(n,a):n===Qe.Range&&e(Qe.Range,a,s)},[e])}function ek({children:e,resourceName:t,loading:r,onSelectionChange:n,selectedItemsCount:a=0,itemCount:s,hasMoreItems:i,condensed:l,selectable:c=!0,paginatedSelectAllText:u}){const{paginatedSelectAllText:d,bulkActionsLabel:h,bulkActionsAccessibilityLabel:f,resourceName:p,selectMode:g,bulkSelectState:b}=ZR({selectedItemsCount:a,itemCount:s,hasMoreItems:i,resourceName:t,defaultPaginatedSelectAllText:u}),v=QR({onSelectionChange:n}),y=m.useMemo(()=>({itemCount:s,selectMode:g&&c,selectable:c,resourceName:p,loading:r,paginatedSelectAllText:d,hasMoreItems:i,bulkActionsLabel:h,bulkActionsAccessibilityLabel:f,bulkSelectState:b,selectedItemsCount:a,condensed:l}),[s,g,c,p,r,d,i,h,f,b,a,l]),E=m.useMemo(()=>({selectable:c,selectMode:g&&c,condensed:l}),[l,g,c]);return o.createElement(_v.Provider,{value:y},o.createElement(wv.Provider,{value:E},o.createElement(Cv.Provider,{value:v},e)))}const tk=m.memo(function({children:t,className:r,flush:n,colSpan:a,headers:s,scope:i,as:l="td",id:c}){const u=T(r,q.TableCell,n&&q["TableCell-flush"]);return o.createElement(l,{id:c,colSpan:a,headers:s,scope:i,className:u},t)});var qp={TableCellContentContainer:"Polaris-IndexTable-Checkbox__TableCellContentContainer",Wrapper:"Polaris-IndexTable-Checkbox__Wrapper"};const Yo=m.createContext({}),Tv=m.createContext(void 0),Rv={scrollableContainer:null,canScrollLeft:!1,canScrollRight:!1},kv=m.createContext(Rv),rk=m.memo(function({accessibilityLabel:t}){const r=se(),{resourceName:n}=Av(),{itemId:a,selected:s,disabled:i,onInteraction:l}=m.useContext(Yo),c=t||r.translate("Polaris.IndexTable.selectItem",{resourceName:n.singular});return o.createElement(nk,null,o.createElement("div",{className:qp.TableCellContentContainer},o.createElement("div",{className:qp.Wrapper,onClick:l,onKeyUp:ak},o.createElement(Ln,{id:`Select-${a}`,label:c,labelHidden:!0,checked:s,disabled:i}))))});function nk({children:e}){const{position:t}=m.useContext(Yo),r=m.useRef(null),n=m.useCallback(rr(()=>{if(t!==0||!r.current)return;const{width:s}=r.current.getBoundingClientRect();Yu("--pc-checkbox-offset",`${s}px`)}),[t]);m.useEffect(()=>{n()},[n]),m.useEffect(()=>{if(r.current)return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[n]);const a=T(q.TableCell,q["TableCell-first"]);return o.createElement("td",{className:a,ref:r},e)}function ak(){}const sk=m.memo(function({children:t,selected:r,id:n,position:a,tone:s,disabled:i,selectionRange:l,rowType:c="data",accessibilityLabel:u,onNavigation:d,onClick:h}){const{selectable:f,selectMode:p,condensed:g}=YR(),b=Pv(),{value:v,setTrue:y,setFalse:E}=Wt(!1),S=m.useCallback(k=>{k.stopPropagation();let A=Qe.Single;if("key"in k&&k.key!==" "||!b)return;k.nativeEvent.shiftKey?A=Qe.Multi:l&&(A=Qe.Range),b(A,!r,l??n,a)},[n,b,r,l,a]),_=m.useMemo(()=>({itemId:n,selected:r,position:a,onInteraction:S,disabled:i}),[n,r,i,a,S]),R=m.useRef(null),x=m.useRef(!1),C=m.useRef(null),w=m.useCallback(k=>{C.current=k;const A=k==null?void 0:k.querySelector("[data-primary-link]");A&&(R.current=A)},[]),P=T(q.TableRow,c==="subheader"&&q["TableRow-subheader"],c==="child"&&q["TableRow-child"],f&&g&&q.condensedRow,r&&q["TableRow-selected"],v&&!g&&q["TableRow-hovered"],i&&q["TableRow-disabled"],s&&q[Be("tone",s)],!f&&!h&&!R.current&&q["TableRow-unclickable"]);let N;(!i&&f||h||R.current)&&(N=k=>{if(c!=="subheader"&&!(!C.current||x.current)){if(k.stopPropagation(),k.preventDefault(),h){h();return}if(R.current&&!p){x.current=!0;const{ctrlKey:A,metaKey:O}=k.nativeEvent;if(d&&d(n),(A||O)&&R.current instanceof HTMLAnchorElement){x.current=!1,window.open(R.current.href,"_blank");return}R.current.dispatchEvent(new MouseEvent(k.type,k.nativeEvent))}else x.current=!1,S(k)}});const $=g?"li":"tr",L=f?o.createElement(rk,{accessibilityLabel:u}):null;return o.createElement(Yo.Provider,{value:_},o.createElement(Tv.Provider,{value:v},o.createElement($,{key:n,id:n,className:P,onMouseEnter:y,onMouseLeave:E,onClick:N,ref:w},L,t)))});function Vp(e,t){return e?Array.from(e.querySelectorAll(t)):[]}var ik={ScrollContainer:"Polaris-IndexTable-ScrollContainer"};function ok({children:e,scrollableContainerRef:t,onScroll:r}){m.useEffect(()=>{t.current&&t.current.dispatchEvent(new Event("scroll"))},[t]);const[n,a]=m.useState(Rv),s=m.useCallback(rr(()=>{if(!t.current)return;const i=t.current.scrollWidth-t.current.offsetWidth,l=t.current.scrollLeft>0,c=t.current.scrollLeft<i;r(l,c),a({scrollableContainer:t.current,canScrollLeft:l,canScrollRight:c})},40,{trailing:!0,leading:!0,maxWait:40}),[r,t]);return o.createElement(kv.Provider,{value:n},o.createElement("div",{className:ik.ScrollContainer,ref:t,onScroll:s},e))}const lk=16,ck=300;function uk({headings:e,bulkActions:t=[],promotedBulkActions:r=[],children:n,emptyState:a,sort:s,paginatedSelectAllActionText:i,lastColumnSticky:l=!1,sortable:c,sortDirection:u,defaultSortDirection:d="descending",sortColumnIndex:h,onSort:f,sortToggleLabels:p,hasZebraStriping:g,pagination:b,...v}){const y=Zs(),{loading:E,bulkSelectState:S,resourceName:_,bulkActionsAccessibilityLabel:R,selectMode:x,selectable:C=v.selectable,paginatedSelectAllText:w,itemCount:P,hasMoreItems:N,selectedItemsCount:$,condensed:L}=Av(),k=Pv(),A=se(),{value:O,toggle:M}=Wt(!1),D=m.useRef({top:0,left:0}),I=m.useRef([]),F=m.useRef(null),B=m.useRef(null),U=m.useRef(null),V=m.useRef(null),W=m.useRef(null),[H,Y]=m.useState(!1),[j,J]=m.useState(null),[ge,Oe]=m.useState(!0),Ce=m.useRef([]),De=m.useRef([]),je=m.useRef(null),Le=m.useRef(null),z=m.useRef(null),ae=m.useRef(null),we=m.useRef(null),he=m.useRef(!1),be=m.useRef(!1),ie=m.useRef(h),pe=m.useRef(!1),Ae=m.useRef(0),qe=m.useRef(!1);$!==Ae.current&&(pe.current=!0,Ae.current=$),!qe.current&&$!==0&&(qe.current=!0);const Fe=m.useCallback(X=>{X!==null&&!H&&Y(!0),U.current=X},[H]),me=m.useCallback(()=>{k($===Zr?Qe.Page:Qe.All,!0)},[k,$]),Ue=m.useMemo(()=>rr(()=>{var _e,At;if(!B.current||!F.current)return;const X=F.current.getBoundingClientRect();D.current={top:X.top,left:X.left},I.current=Ce.current.map(Ft=>({offsetWidth:Ft.offsetWidth||0,offsetLeft:Ft.offsetLeft||0})),Ce.current.length!==0&&(C&&Ce.current.length>1&&(Ce.current[1].style.left=`${I.current[0].offsetWidth}px`,(_e=De.current)!=null&&_e.length&&(De.current[1].style.left=`${I.current[0].offsetWidth}px`)),(At=De.current)!=null&&At.length&&De.current.forEach((Ft,Pr)=>{var Wr;Ft.style.minWidth=`${((Wr=I.current[Pr])==null?void 0:Wr.offsetWidth)||0}px`}))}),[C]),Je=m.useCallback(()=>{var X,_e;ae.current&&B.current&&H&&(ae.current.style.setProperty("--pc-index-table-scroll-bar-content-width",`${B.current.offsetWidth-lk}px`),Oe(((X=we.current)==null?void 0:X.offsetWidth)===((_e=B.current)==null?void 0:_e.offsetWidth)))},[H]),ur=m.useCallback(rr(Je,ck,{trailing:!0}),[Je]),[Z,te]=m.useState(!0),ee=m.useCallback(rr(()=>{if(!l||!B.current||!F.current)return;const X=B.current.getBoundingClientRect(),_e=F.current.getBoundingClientRect();te(X.width>_e.width)}),[l]);m.useEffect(()=>{ee()},[ee]);const[oe,Re]=m.useState(!0),ke=m.useCallback(()=>{if(!F.current||!Ce.current.length)return;const X=F.current.getBoundingClientRect(),_e=C?Ce.current[0].getBoundingClientRect().width:0,At=Ce.current[C?1:0].getBoundingClientRect().width,Ft=C?Ce.current.length>2:1,Pr=l&&Ft?Ce.current[Ce.current.length-1].getBoundingClientRect().width:0;Re(X.width>At+_e+Pr+100)},[l,C]);m.useEffect(()=>{H&&ke()},[ke,H]);const Pt=m.useCallback(()=>{var X;(X=ae.current)==null||X.style.setProperty("--pc-index-table-scroll-bar-content-width","0px"),Ue(),ur(),ee(),ke()},[Ue,ur,ee,ke]),Mt=m.useCallback((X,_e)=>{!F.current||!ae.current||(he.current||(be.current=!0,ae.current.scrollLeft=F.current.scrollLeft),he.current=!1,z.current&&(z.current.scrollLeft=F.current.scrollLeft),(X&&!O||!X&&O)&&M(),te(_e))},[O,M]),bt=m.useCallback(()=>{!F.current||!ae.current||(be.current||(he.current=!0,F.current.scrollLeft=ae.current.scrollLeft),be.current=!1)},[]);m.useLayoutEffect(()=>{Ce.current=Vp(B.current,"[data-index-table-heading]"),De.current=Vp(je.current,"[data-index-table-sticky-heading]"),Ue()},[e,Ue,Le,H]),m.useEffect(()=>{Je(),J(L?V.current:B.current)},[H,Je,L]);const Ee=e.map((X,_e)=>kf(X,_e,"th",{"data-index-table-heading":!0},X.id)),on=e.map((X,_e)=>kf(X,_e,"div",{"data-index-table-sticky-heading":!0})),[Wn,Un]=m.useState($===Zr?`${P}+`:$);m.useEffect(()=>{($===Zr||$>0)&&Un($===Zr?`${P}+`:$)},[$,P]);const jn=A.translate("Polaris.IndexTable.selected",{selectedItemsCount:Wn}),hc=m.useCallback(()=>{k(Qe.Page,!S||S==="indeterminate")},[S,k]),fc=i_(),pc={enter:q["LoadingContainer-enter"],enterActive:q["LoadingContainer-enter-active"],exit:q["LoadingContainer-exit"],exitActive:q["LoadingContainer-exit-active"]},hs=o.createElement(Mn,{in:E,classNames:pc,timeout:parseInt(y.motion["motion-duration-100"],10),nodeRef:W,appear:!0,unmountOnExit:!0},o.createElement("div",{className:q.LoadingPanel,ref:W},o.createElement("div",{className:q.LoadingPanelRow},o.createElement(da,{size:"small"}),o.createElement("span",{className:q.LoadingPanelText},A.translate("Polaris.IndexTable.resourceLoadingAccessibilityLabel",{resourceNamePlural:_.plural.toLocaleLowerCase()}))))),mc=T(q.StickyTable,O&&q["StickyTable-scrolling"],L&&q["StickyTable-condensed"]),fs=!L||$,ue=fs?r:[],Me=fs?t:[],yt=o.createElement("div",{className:mc,role:"presentation"},o.createElement(Jo,{boundingElement:j},X=>{const _e=T(q.StickyTableHeader,X&&q["StickyTableHeader-isSticky"],oe&&q["StickyTableHeader-sticky"],O&&q["StickyTableHeader-scrolling"],oe&&l&&q["StickyTableHeader-sticky-last"],oe&&l&&Z&&q["StickyTableHeader-sticky-scrolling"]),At=T(q.BulkActionsWrapper,x&&q.BulkActionsWrapperVisible,L&&q["StickyTableHeader-condensed"],X&&q["StickyTableHeader-isSticky"]),Ft=fs&&!L?o.createElement("div",{className:At},o.createElement(Yd,{selectMode:x,onToggleAll:hc,paginatedSelectAllText:w,paginatedSelectAllAction:fc,accessibilityLabel:R,selected:S,promotedActions:ue,actions:Me,onSelectModeToggle:L?o_:void 0,label:jn,buttonSize:"micro"})):null,Pr=L?o.createElement("div",{className:T(q.HeaderWrapper,(!C||L)&&q.unselectable)},hs,s):o.createElement("div",{className:_e,ref:je},hs,o.createElement("div",{className:q.StickyTableHeadings,ref:z},on));return o.createElement(o.Fragment,null,Pr,Ft)})),Br=T(q.ScrollBarContainer,b&&q.ScrollBarContainerWithPagination,L&&q.scrollBarContainerCondensed,ge&&q.scrollBarContainerHidden),Xt=T(B.current&&H&&q.ScrollBarContent),Ei=P>0?o.createElement(nv,{onMount:Je},o.createElement("div",{className:Br,ref:we},o.createElement("div",{onScroll:bt,className:q.ScrollBar,ref:ae},o.createElement("div",{className:Xt})))):null,ps=c==null?void 0:c.some(X=>X),gc=T(q.Table,O&&q["Table-scrolling"],x&&q.disableTextSelection,!C&&q["Table-unselectable"],oe&&q["Table-sticky"],ps&&q["Table-sortable"],oe&&l&&q["Table-sticky-last"],oe&&l&&Z&&q["Table-sticky-scrolling"],g&&q.ZebraStriping),YS=a||o.createElement(Qd,{title:A.translate("Polaris.IndexTable.emptySearchTitle",{resourceNamePlural:_.plural}),description:A.translate("Polaris.IndexTable.emptySearchDescription"),withIllustration:!0}),Rf=o.createElement(o.Fragment,null,o.createElement(Nt,{event:"resize",handler:Pt}),yt),ZS=T(q.CondensedList,g&&q.ZebraStriping),QS=L?o.createElement(o.Fragment,null,Rf,o.createElement("ul",{"data-selectmode":!!x,className:ZS,ref:V},n)):o.createElement(o.Fragment,null,Rf,o.createElement(ok,{scrollableContainerRef:F,onScroll:Mt},o.createElement("table",{ref:B,className:gc},o.createElement("thead",null,o.createElement("tr",{className:q.HeadingRow},Ee)),o.createElement("tbody",{ref:Fe},n)))),e_=P>0?QS:o.createElement("div",{className:q.EmptySearchResultWrapper},YS),t_=b?o.createElement("div",{className:q.PaginationWrapper},o.createElement(Mo,Object.assign({type:"table"},b))):null;return o.createElement(o.Fragment,null,o.createElement("div",{className:q.IndexTable},o.createElement("div",{className:q.IndexTableWrapper},!L&&hs,e_,Ei,t_)));function kf(X,_e,At,Ft,Pr){const Wr=_e===0,ka=_e===e.length-1,Ur=c==null?void 0:c.some(Ci=>Ci===!0),Si=X.alignment||"start",bc=T(q.TableHeading,Si==="center"&&q["TableHeading-align-center"],Si==="end"&&q["TableHeading-align-end"],Ur&&q["TableHeading-sortable"],Wr&&q["TableHeading-second"],ka&&!X.hidden&&q["TableHeading-last"],!C&&q["TableHeading-unselectable"],X.flush&&q["TableHeading-flush"]),yc=C!==!1&&Wr&&I.current&&I.current.length>0?{left:I.current[0].offsetWidth}:void 0,qn=o.createElement(At,Object.assign({id:Pr,className:bc,key:dk(X),style:yc},Ft),a_(X,_e));if(_e!==0||!C)return qn;const _i=T(q.TableHeading,Ur&&q["TableHeading-sortable"],_e===0&&q["TableHeading-first"]);return[o.createElement(At,Object.assign({className:_i,key:`${X}-${_e}`},Ft),r_()),qn]}function r_(){return o.createElement("div",{className:q.ColumnHeaderCheckboxWrapper},o.createElement(Ln,{label:A.translate("Polaris.IndexTable.selectAllLabel",{resourceNamePlural:_.plural}),labelHidden:!0,onChange:s_,checked:S}))}function n_(X,_e){pe.current=!1,qe.current=!1,ie.current=h,f==null||f(X,_e)}function a_(X,_e){let At;const Ft={width:X.tooltipWidth??"default",activatorWrapper:"div",dismissOnMouseOut:!0,persistOnClick:X.tooltipPersistsOnClick},Pr={...Ft,padding:"400",borderRadius:"200",content:X.tooltipContent,preferredPosition:"above"},Wr=o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium",visuallyHidden:X.hidden},X.title);X.new?At=o.createElement(Sr,{wrap:!1,alignment:"center"},Wr,o.createElement(Tn,{tone:"new"},A.translate("Polaris.IndexTable.onboardingBadgeText"))):At=Wr;const ka={"--pc-index-table-heading-extra-padding-right":X.paddingBlockEnd?`var(--p-space-${X.paddingBlockEnd})`:"0"};if(c!=null&&c[_e]){const Ur=_e===h,Si=!Ur&&_e===ie.current,bc=pe.current||!qe.current&&$!==0,yc=u==="ascending";let qn=X.defaultSortDirection??d,_i=qn==="ascending"?co:uo;Ur&&(qn=yc?"descending":"ascending",_i=u==="ascending"?co:uo);const vc=o.createElement("span",{className:T(q.TableHeadingSortIcon,(X==null?void 0:X.alignment)==="end"&&q["TableHeadingSortIcon-heading-align-end"],Ur&&q["TableHeadingSortIcon-visible"])},o.createElement(_i,{focusable:"false","aria-hidden":"true",className:q.TableHeadingSortSvg})),Ci={onClick:()=>n_(_e,qn),className:T(q.TableHeadingSortButton,!Ur&&(X==null?void 0:X.alignment)==="end"&&q["TableHeadingSortButton-heading-align-end"],Ur&&(X==null?void 0:X.alignment)==="end"&&q["TableHeadingSortButton-heading-align-end-currently-sorted"],Si&&!bc&&(X==null?void 0:X.alignment)==="end"&&q["TableHeadingSortButton-heading-align-end-previously-sorted"]),tabIndex:x?-1:0},xf=o.createElement(nr,Ci,vc,o.createElement("span",{className:T(p&&x&&X.tooltipContent&&q.TableHeadingTooltipUnderlinePlaceholder)},At));if(!p||x)return o.createElement("div",{className:q.SortableTableHeadingWithCustomMarkup},xf);const l_=Ur?u:qn,If=p[_e][l_];if(!X.tooltipContent)return o.createElement("div",{style:ka,className:T(X.paddingBlockEnd&&q["TableHeading-extra-padding-right"])},o.createElement(Gt,Object.assign({},Ft,{content:If,preferredPosition:"above"}),xf));if(X.tooltipContent)return o.createElement("div",{className:T(q.SortableTableHeadingWithCustomMarkup,X.paddingBlockEnd&&q["TableHeading-extra-padding-right"]),style:ka},o.createElement(nr,Ci,o.createElement(Gt,Pr,o.createElement("span",{className:q.TableHeadingUnderline},At)),o.createElement(Gt,Object.assign({},Ft,{content:If,preferredPosition:"above"}),vc)))}return X.tooltipContent?o.createElement("div",{style:ka,className:T(X.paddingBlockEnd&&q["TableHeading-extra-padding-right"])},o.createElement(Gt,Object.assign({},Pr,{activatorWrapper:"span"}),o.createElement("span",{className:T(q.TableHeadingUnderline,q.SortableTableHeaderWrapper)},At))):o.createElement("div",{style:ka,className:T(X.paddingBlockEnd&&q["TableHeading-extra-padding-right"])},At)}function s_(X){k(Qe.Page,X)}function i_(){if(!C||!N)return;const X=i??A.translate("Polaris.IndexTable.selectAllItems",{itemsLength:P,resourceNamePlural:_.plural.toLocaleLowerCase()});return{content:$===Zr?A.translate("Polaris.IndexTable.undo"):X,onAction:me}}function o_(){k(Qe.All,!1)}}function dk(e){return e.id?e.id:typeof e.title=="string"?e.title:""}function oh({children:e,selectable:t=!0,itemCount:r,selectedItemsCount:n=0,resourceName:a,loading:s,hasMoreItems:i,condensed:l,onSelectionChange:c,paginatedSelectAllText:u,...d}){return o.createElement(o.Fragment,null,o.createElement(ek,{selectable:t&&!l,itemCount:r,selectedItemsCount:n,resourceName:a,loading:s,hasMoreItems:i,condensed:l,onSelectionChange:c,paginatedSelectAllText:u},o.createElement(uk,d,e)))}oh.Cell=tk;oh.Row=sk;var hk={Code:"Polaris-InlineCode__Code"};const fk=({children:e})=>o.createElement("code",{className:hk.Code},e);var Kp={KeyboardKey:"Polaris-KeyboardKey",small:"Polaris-KeyboardKey--small"};function pk({children:e="",size:t}){const r=!t&&e.length>1?e.toLowerCase():e.toUpperCase(),n=T(Kp.KeyboardKey,t&&Kp[t]);return o.createElement("kbd",{className:n},r)}var Ve={LegacyFilters:"Polaris-LegacyFilters",LegacyFiltersContainer:"Polaris-LegacyFilters__LegacyFiltersContainer",LegacyFiltersContainerHeader:"Polaris-LegacyFilters__LegacyFiltersContainerHeader",LegacyFiltersDesktopContainerContent:"Polaris-LegacyFilters__LegacyFiltersDesktopContainerContent",LegacyFiltersMobileContainerContent:"Polaris-LegacyFilters__LegacyFiltersMobileContainerContent",LegacyFiltersContainerFooter:"Polaris-LegacyFilters__LegacyFiltersContainerFooter",LegacyFiltersMobileContainerFooter:"Polaris-LegacyFilters__LegacyFiltersMobileContainerFooter",EmptyFooterState:"Polaris-LegacyFilters__EmptyFooterState",FilterTriggerContainer:"Polaris-LegacyFilters__FilterTriggerContainer",FilterTrigger:"Polaris-LegacyFilters__FilterTrigger",FilterTriggerTitle:"Polaris-LegacyFilters__FilterTriggerTitle",AppliedFilterBadgeContainer:"Polaris-LegacyFilters__AppliedFilterBadgeContainer",open:"Polaris-LegacyFilters--open",FilterTriggerLabelContainer:"Polaris-LegacyFilters__FilterTriggerLabelContainer",first:"Polaris-LegacyFilters--first",last:"Polaris-LegacyFilters--last",FilterNodeContainer:"Polaris-LegacyFilters__FilterNodeContainer",SearchIcon:"Polaris-LegacyFilters__SearchIcon",Backdrop:"Polaris-LegacyFilters__Backdrop",HelpText:"Polaris-LegacyFilters__HelpText",TagsContainer:"Polaris-LegacyFilters__TagsContainer"};const lh=m.createContext({});var Qt={ConnectedFilterControl:"Polaris-LegacyFilters-ConnectedFilterControl",CenterContainer:"Polaris-LegacyFilters-ConnectedFilterControl__CenterContainer",right:"Polaris-LegacyFilters-ConnectedFilterControl--right",Item:"Polaris-LegacyFilters-ConnectedFilterControl__Item","Item-focused":"Polaris-LegacyFilters-ConnectedFilterControl__Item--focused",ProxyButtonContainer:"Polaris-LegacyFilters-ConnectedFilterControl__ProxyButtonContainer",RightContainer:"Polaris-LegacyFilters-ConnectedFilterControl__RightContainer",MoreFiltersButtonContainer:"Polaris-LegacyFilters-ConnectedFilterControl__MoreFiltersButtonContainer",queryFieldHidden:"Polaris-LegacyFilters-ConnectedFilterControl--queryFieldHidden",RightContainerWithoutMoreFilters:"Polaris-LegacyFilters-ConnectedFilterControl__RightContainerWithoutMoreFilters",onlyButtonVisible:"Polaris-LegacyFilters-ConnectedFilterControl--onlyButtonVisible",Wrapper:"Polaris-LegacyFilters-ConnectedFilterControl__Wrapper",AuxiliaryContainer:"Polaris-LegacyFilters-ConnectedFilterControl__AuxiliaryContainer"};function Bc({children:e}){const{value:t,setTrue:r,setFalse:n}=Wt(!1),a=T(Qt.Item,t&&Qt["Item-focused"]);return o.createElement("div",{onBlur:n,onFocus:r,className:a},e)}const mk=150;class gk extends m.Component{constructor(...t){super(...t),this.state={availableWidth:0,proxyButtonsWidth:{}},this.container=m.createRef(),this.proxyButtonContainer=m.createRef(),this.moreFiltersButtonContainer=m.createRef(),this.handleResize=rr(()=>{this.measureProxyButtons(),this.measureAvailableWidth()},40,{leading:!0,trailing:!0,maxWait:40})}componentDidMount(){this.handleResize()}render(){const{children:t,rightPopoverableActions:r,rightAction:n,auxiliary:a,forceShowMorefiltersButton:s=!0,queryFieldHidden:i}=this.props,l=r!=null?this.getActionsToRender(r):[],c=T(Qt.ConnectedFilterControl,r&&Qt.right),u=s||r&&r.length!==l.length,d=T(Qt.RightContainer,!u&&Qt.RightContainerWithoutMoreFilters,i&&Qt.queryFieldHidden),h=l.length>0?o.createElement("div",{className:d},this.popoverFrom(l)):null,f=T(Qt.MoreFiltersButtonContainer,l.length===0&&Qt.onlyButtonVisible),p=n?o.createElement("div",{ref:this.moreFiltersButtonContainer,className:f},u&&o.createElement(Bc,null,n)):null,g=r?o.createElement("div",{className:Qt.ProxyButtonContainer,ref:this.proxyButtonContainer,"aria-hidden":!0},r.map(v=>o.createElement("div",{key:v.key,"data-key":v.key},this.activatorButtonFrom(v,{proxy:!0})))):null,b=a?o.createElement("div",{className:Qt.AuxiliaryContainer},a):null;return o.createElement(o.Fragment,null,g,o.createElement("div",{className:Qt.Wrapper},o.createElement("div",{className:c,ref:this.container},t?o.createElement("div",{className:Qt.CenterContainer},o.createElement(Bc,null,t)):null,h,p,o.createElement(Nt,{event:"resize",handler:this.handleResize})),b))}measureProxyButtons(){if(this.proxyButtonContainer.current){const t={};this.proxyButtonContainer.current&&Array.from(this.proxyButtonContainer.current.children).forEach(n=>{const a=n.getBoundingClientRect().width+78,s=n instanceof HTMLElement&&n.dataset.key;s&&(t[s]=a)}),this.setState({proxyButtonsWidth:t})}}measureAvailableWidth(){if(this.container.current&&this.moreFiltersButtonContainer.current){const t=this.container.current.getBoundingClientRect().width,r=this.moreFiltersButtonContainer.current.getBoundingClientRect().width,n=0,a=this.props.queryFieldHidden?0:mk,s=t-a-r-n;this.setState({availableWidth:s})}}getActionsToRender(t){let r=this.state.availableWidth;const n=[];for(let a=0;r>0&&a<t.length;a++){const s=t[a],i=this.state.proxyButtonsWidth[s.key];if(i<=r)n.push(s),r-=i;else break}return n}activatorButtonFrom(t,r){const n=r!=null&&r.proxy?void 0:`Activator-${t.key}`;return o.createElement(ye,{onClick:t.onAction,disclosure:!0,disabled:this.props.disabled||t.disabled,id:n,size:"large"},t.content)}popoverFrom(t){return t.map(r=>o.createElement(Bc,{key:r.key},o.createElement(nt,{active:r.popoverOpen,activator:this.activatorButtonFrom(r),onClose:r.onAction,preferredAlignment:"left",sectioned:!0},r.popoverContent)))}}function bk({children:e,hidden:t}){return t?o.createElement(G,{as:"span",visuallyHidden:!0},e):o.createElement(o.Fragment,null,e)}var Zt={Tag:"Polaris-Tag",disabled:"Polaris-Tag--disabled",clickable:"Polaris-Tag--clickable",linkable:"Polaris-Tag--linkable",removable:"Polaris-Tag--removable",Button:"Polaris-Tag__Button",Link:"Polaris-Tag__Link",segmented:"Polaris-Tag--segmented",Text:"Polaris-Tag__Text",sizeLarge:"Polaris-Tag--sizeLarge",overlay:"Polaris-Tag--overlay"};function xv({children:e,disabled:t=!1,onClick:r,onRemove:n,accessibilityLabel:a,url:s,size:i}){const l=se(),c=n&&s,u=T(Zt.Tag,t&&Zt.disabled,r&&Zt.clickable,n&&Zt.removable,s&&!t&&Zt.linkable,c&&Zt.segmented,i&&Zt[Be("size",i)]);let d=a;d||(d=typeof e=="string"?e:void 0);const h=o.createElement(G,{as:"span",variant:"bodySm",truncate:!0},o.createElement("span",{title:d,className:Zt.Text},e));if(r)return o.createElement("button",{type:"button",disabled:t,className:u,onClick:r},h);const f=l.translate("Polaris.Tag.ariaLabel",{children:d||""}),p=n?o.createElement("button",{type:"button","aria-label":f,className:T(Zt.Button,c&&Zt.segmented),onClick:n,onMouseUp:io,disabled:t},o.createElement(le,{source:fa})):null,g=s&&!t?o.createElement("a",{className:T(Zt.Link,c&&Zt.segmented),href:s},h):h;return o.createElement("span",{className:u,"aria-disabled":t},g,i==="large"&&o.createElement("span",{className:Zt.overlay}),p)}var ht={Sheet:"Polaris-Sheet",Container:"Polaris-Sheet__Container",Bottom:"Polaris-Sheet__Bottom",enterBottom:"Polaris-Sheet--enterBottom",enterBottomActive:"Polaris-Sheet--enterBottomActive",exitBottom:"Polaris-Sheet--exitBottom",exitBottomActive:"Polaris-Sheet--exitBottomActive",Right:"Polaris-Sheet__Right",enterRight:"Polaris-Sheet--enterRight",enterRightActive:"Polaris-Sheet--enterRightActive",exitRight:"Polaris-Sheet--exitRight",exitRightActive:"Polaris-Sheet--exitRightActive"};const yk={enter:T(ht.Bottom,ht.enterBottom),enterActive:T(ht.Bottom,ht.enterBottomActive),exit:T(ht.Bottom,ht.exitBottom),exitActive:T(ht.Bottom,ht.exitBottomActive)},vk={enter:T(ht.Right,ht.enterRight),enterActive:T(ht.Right,ht.enterRightActive),exit:T(ht.Right,ht.exitRight),exitActive:T(ht.Right,ht.exitRightActive)};function ed({children:e,open:t,onClose:r,onEntered:n,onExit:a,accessibilityLabel:s,activator:i}){const l=Zs(),{isNavigationCollapsed:c}=rs(),u=m.useRef(null),d=m.useRef(null),h=m.useCallback(()=>{r();const p=i&&zp(i)?i&&i.current:d.current;p&&requestAnimationFrame(()=>Bt(p))},[i,r]);m.useEffect(()=>{},[]);const f=i&&!zp(i)?o.createElement("div",{ref:d},i):null;return o.createElement(o.Fragment,null,f,o.createElement(Fo,{idPrefix:"sheet"},o.createElement(Mn,{nodeRef:u,classNames:c?yk:vk,timeout:parseInt(l.motion["motion-duration-300"],10),in:t,mountOnEnter:!0,unmountOnExit:!0,onEntered:n,onExit:a},o.createElement("div",Object.assign({className:ht.Container},Du.props,w_.props,{ref:u}),o.createElement(Xo,{trapping:t},o.createElement("div",{role:"dialog","aria-modal":!0,tabIndex:-1,className:ht.Sheet,"aria-label":s},e)))),o.createElement(yr,{keyCode:it.Escape,handler:h}),t&&o.createElement(zo,{transparent:!0,onClick:h})))}function zp(e){return Object.prototype.hasOwnProperty.call(e,"current")}var Nr;(function(e){e.Filter="Filter",e.Shortcut="Shortcut"})(Nr||(Nr={}));class Iv extends m.Component{constructor(...t){super(...t),this.state={open:!1,readyForFocus:!1},this.moreFiltersButtonContainer=m.createRef(),this.moreFiltersDoneButtonContainer=m.createRef(),this.focusNode=m.createRef(),this.closeFilters=()=>{this.setState({open:!1},()=>{this.moreFiltersButtonContainer.current&&Bt(this.moreFiltersButtonContainer.current,!1)})},this.toggleFilters=()=>{this.state.open===!0?this.closeFilters():this.openFilters()},this.setReadyForFocus=r=>()=>{this.setState({readyForFocus:r})},this.handleClearAll=()=>{this.props.onClearAll(),this.moreFiltersDoneButtonContainer.current&&Bt(this.moreFiltersDoneButtonContainer.current,!1)}}render(){const{filters:t,queryValue:r,onQueryBlur:n,onQueryChange:a,onQueryFocus:s,focused:i,onClearAll:l,appliedFilters:c,onQueryClear:u,queryPlaceholder:d,children:h,disabled:f=!1,helpText:p,hideTags:g,hideQueryField:b,disableQueryField:v=!1,i18n:y,mediaQuery:{isNavigationCollapsed:E}}=this.props,{resourceName:S}=this.context,{open:_,readyForFocus:R}=this.state,x=_?o.createElement(o.Fragment,null,o.createElement(Ko,null),o.createElement("div",{className:Ve.Backdrop,onClick:this.closeFilters})):null,C=t.map((j,J)=>{const ge=this.state[`${j.key}${Nr.Filter}`]===!0,Oe=ge?A_:Ys,Ce=T(Ve.FilterTriggerContainer,ge&&Ve.open,J===0&&Ve.first,t.length!==1&&J===t.length-1&&Ve.last),De=this.getAppliedFilterContent(j.key),je=De?o.createElement("div",{className:Ve.AppliedFilterBadgeContainer},o.createElement(Tn,{tone:"new"},De)):null,Le=`${j.key}Collapsible`,z=T(Ve.FilterTrigger);return o.createElement("div",{key:j.key,className:Ce},o.createElement("button",{onClick:()=>this.toggleFilter(j.key),className:z,id:`${j.key}ToggleButton`,type:"button","aria-controls":Le,"aria-expanded":ge},o.createElement("div",{className:Ve.FilterTriggerLabelContainer},o.createElement("h3",{className:Ve.FilterTriggerTitle},o.createElement(G,{as:"span",tone:this.props.disabled||j.disabled?"subdued":void 0},j.label)),o.createElement("span",{className:Ve.FilterTriggerIcon},o.createElement(le,{source:Oe,tone:"base"}))),je),o.createElement(Go,{id:Le,open:ge,onAnimationEnd:this.setReadyForFocus(!0)},o.createElement("div",{className:Ve.FilterNodeContainer},o.createElement(eh,{disabled:!ge||!R||!_,root:this.focusNode},this.generateFilterMarkup(j)))))}),w=c?c.length:0,P=g&&w>0?y.translate("Polaris.Filters.moreFiltersWithCount",{count:w}):y.translate("Polaris.Filters.moreFilters"),N=t.length?o.createElement("div",{ref:this.moreFiltersButtonContainer},o.createElement(ye,{onClick:this.toggleFilters,disabled:f,size:"large"},P)):null,$=S||{singular:y.translate("Polaris.ResourceList.defaultItemSingular"),plural:y.translate("Polaris.ResourceList.defaultItemPlural")},L=this.transformFilters(t),k=o.createElement(gk,{rightPopoverableActions:L,rightAction:N,auxiliary:h,disabled:f,forceShowMorefiltersButton:t.length>L.length,queryFieldHidden:b},b?null:o.createElement($n,{placeholder:d||y.translate("Polaris.Filters.filter",{resourceName:$.plural}),onChange:a,onBlur:n,onFocus:s,value:r,focused:i,label:d||y.translate("Polaris.Filters.filter",{resourceName:$.plural}),labelHidden:!0,prefix:o.createElement("span",{className:Ve.SearchIcon},o.createElement(le,{source:Xs})),clearButton:!0,onClearButtonClick:u,disabled:f||v,autoComplete:"off"})),A=T(Ve.LegacyFiltersContainerHeader),O=o.createElement("div",{className:A},o.createElement(G,{variant:"headingLg",as:"h3"},P),o.createElement(ye,{icon:fa,variant:"plain",accessibilityLabel:y.translate("Polaris.Filters.cancel"),onClick:this.closeFilters})),M=o.createElement("div",{className:A},o.createElement(ye,{icon:fa,variant:"plain",accessibilityLabel:y.translate("Polaris.Filters.cancel"),onClick:this.closeFilters}),o.createElement(G,{variant:"headingLg",as:"h3"},P),o.createElement(ye,{onClick:this.closeFilters,variant:"primary"},y.translate("Polaris.Filters.done"))),D=T(Ve.LegacyFiltersContainerFooter),I=o.createElement("div",{className:D},o.createElement(ye,{onClick:this.handleClearAll,disabled:!this.hasAppliedFilters()},y.translate("Polaris.Filters.clearAllFilters")),o.createElement("div",{ref:this.moreFiltersDoneButtonContainer},o.createElement(ye,{onClick:this.closeFilters,variant:"primary"},y.translate("Polaris.Filters.done")))),F=o.createElement("div",{className:Ve.LegacyFiltersMobileContainerFooter},this.hasAppliedFilters()?o.createElement(ye,{onClick:l,fullWidth:!0},y.translate("Polaris.Filters.clearAllFilters")):o.createElement("div",{className:Ve.EmptyFooterState},o.createElement(G,{tone:"subdued",as:"span"},o.createElement("p",null,y.translate("Polaris.Filters.noFiltersApplied"))))),B=!c||c.length<1,U=g?null:o.createElement(bk,{hidden:B},o.createElement("div",{className:Ve.TagsContainer,"aria-live":"polite"},(c||[]).map(j=>o.createElement(xv,{key:j.key,onRemove:()=>{j.onRemove(j.key)},disabled:f},j.label)))),V=T(Ve.LegacyFiltersMobileContainerContent),W=T(Ve.LegacyFiltersDesktopContainerContent),H=E?o.createElement(ed,{accessibilityLabel:P,open:_,onClose:this.closeFilters,onEntered:this.setReadyForFocus(!0),onExit:this.setReadyForFocus(!1)},M,o.createElement(Ga,{className:V,shadow:!0},C,F)):o.createElement(ed,{accessibilityLabel:P,open:_,onClose:this.closeFilters,onEntered:this.setReadyForFocus(!0),onExit:this.setReadyForFocus(!1)},o.createElement("div",{className:Ve.LegacyFiltersContainer},O,o.createElement(Ga,{className:W,shadow:!0},C),I)),Y=p?o.createElement("div",{id:"FiltersHelpText",className:Ve.HelpText},o.createElement(G,{tone:"subdued",as:"span"},p)):null;return o.createElement(P_.Provider,{value:!0},o.createElement("div",{className:Ve.LegacyFilters},k,H,U,Y,x,o.createElement(yr,{keyCode:it.Escape,handler:this.closeFilters})))}hasAppliedFilters(){const{appliedFilters:t,queryValue:r}=this.props;return!!(t&&t.length>0)||!!(r&&r!=="")}getAppliedFilterContent(t){const{appliedFilters:r}=this.props;if(!r)return;const n=r.find(a=>a.key===t);return n==null?void 0:n.label}getAppliedFilterRemoveHandler(t){const{appliedFilters:r}=this.props;if(!r)return;const n=r.find(a=>a.key===t);return n==null?void 0:n.onRemove}openFilters(){this.setState({open:!0})}toggleFilter(t){this.state[`${t}${Nr.Filter}`]===!0?this.setState({readyForFocus:!1,[`${t}${Nr.Filter}`]:!1}):this.setState({readyForFocus:!1,[`${t}${Nr.Filter}`]:!0})}openFilterShortcut(t){this.setState({[`${t}${Nr.Shortcut}`]:!0})}closeFilterShortcut(t){this.setState({[`${t}${Nr.Shortcut}`]:!1})}toggleFilterShortcut(t){this.state[`${t}${Nr.Shortcut}`]===!0?this.closeFilterShortcut(t):this.openFilterShortcut(t)}transformFilters(t){const r=[];return Ek(t).forEach(n=>{const{key:a,label:s,disabled:i}=n;r.push({popoverContent:this.generateFilterMarkup(n),popoverOpen:!!this.state[`${a}${Nr.Shortcut}`],key:a,content:s,disabled:i,onAction:()=>this.toggleFilterShortcut(a)})}),r}generateFilterMarkup(t){const r=this.props.i18n,n=this.getAppliedFilterRemoveHandler(t.key),a=n==null?void 0:()=>{n(t.key)},s=!t.hideClearButton&&o.createElement(ye,{variant:"plain",disabled:a==null,onClick:a,accessibilityLabel:r.translate("Polaris.Filters.clearLabel",{filterName:t.label})},r.translate("Polaris.Filters.clear"));return o.createElement("div",{ref:this.focusNode},o.createElement(Sr,{vertical:!0,spacing:"tight"},t.filter,s))}}Iv.contextType=lh;function Ek(e){return e.filter(t=>t.shortcut===!0)}function Sk(e){const t=se(),r=rs();return o.createElement(Iv,Object.assign({},e,{i18n:t,mediaQuery:r}))}function Gp(e,t,r,n,a){const s=n.reduce((u,d)=>u+d,0),i=e.map((u,d)=>d),l=[],c=[];if(a>s)l.push(...i);else{l.push(t);let u=n[t];i.forEach(d=>{if(d!==t){const h=n[d];if(u+h>=a-r){c.push(d);return}l.push(d),u+=h}})}return{visibleTabs:l,hiddenTabs:c}}var Ie={LegacyTabs:"Polaris-LegacyTabs",fitted:"Polaris-LegacyTabs--fitted",TabContainer:"Polaris-LegacyTabs__TabContainer",Title:"Polaris-LegacyTabs__Title",fillSpace:"Polaris-LegacyTabs--fillSpace",Tab:"Polaris-LegacyTabs__Tab","Tab-selected":"Polaris-LegacyTabs__Tab--selected",titleWithIcon:"Polaris-LegacyTabs--titleWithIcon",Panel:"Polaris-LegacyTabs__Panel","Panel-hidden":"Polaris-LegacyTabs__Panel--hidden",Item:"Polaris-LegacyTabs__Item",DisclosureTab:"Polaris-LegacyTabs__DisclosureTab","DisclosureTab-visible":"Polaris-LegacyTabs__DisclosureTab--visible",DisclosureActivator:"Polaris-LegacyTabs__DisclosureActivator",TabMeasurer:"Polaris-LegacyTabs__TabMeasurer"};function Jp({hidden:e,id:t,tabID:r,children:n}){const a=T(Ie.Panel,e&&Ie["Panel-hidden"]);return o.createElement("div",{className:a,id:t,role:"tabpanel","aria-labelledby":r,tabIndex:-1},n)}function Nv({id:e,focused:t,siblingTabHasFocus:r,children:n,onClick:a,selected:s,url:i,panelID:l,measuring:c,accessibilityLabel:u}){const d=m.useRef(s),h=m.useRef(!1),f=m.useRef(null);m.useEffect(()=>{if(c)return;(t||document.activeElement&&document.activeElement.id===e)&&s&&l!=null&&!h.current&&(Xp(l),h.current=!0),s&&!d.current&&l!=null?Xp(l):t&&f.current!=null&&Bt(f.current),d.current=s},[t,e,c,l,s]);const p=a&&a.bind(null,e),g=T(Ie.Tab,s&&Ie["Tab-selected"]);let b;s&&!r&&!c||t&&!c?b=0:b=-1;const v=T(Ie.TabContainer,s&&Ie.Underline),y=i?o.createElement(_r,{id:e,url:i,role:"tab",tabIndex:b,onClick:p,className:g,"aria-selected":s,"aria-controls":l,"aria-label":u,onMouseUp:io},o.createElement("span",{className:Ie.Title},o.createElement(G,{as:"span",variant:"bodyMd",fontWeight:"semibold"},n))):o.createElement("button",{id:e,role:"tab",type:"button",tabIndex:b,className:g,onClick:p,"aria-selected":s,"aria-controls":l,"aria-label":u,onMouseUp:io},o.createElement("span",{className:Ie.Title},o.createElement(G,{as:"span",variant:"bodyMd",fontWeight:"semibold"},n)));return o.createElement("li",{className:v,ref:f,role:"presentation"},y)}function Xp(e){const t=document.getElementById(e);t&&t.focus({preventScroll:!0})}const _k=m.memo(function({selected:t,tabs:r,activator:n,tabToFocus:a,siblingTabHasFocus:s,handleMeasurement:i}){const l=m.useRef(null),c=m.useRef(null),u=m.useCallback(()=>{c.current&&cancelAnimationFrame(c.current),c.current=requestAnimationFrame(()=>{if(!l.current)return;const f=l.current.offsetWidth,p=l.current.children,b=Array.from(p).map(y=>Math.ceil(y.getBoundingClientRect().width)),v=b.pop()||0;i({containerWidth:f,disclosureWidth:v,hiddenTabWidths:b})})},[i]);m.useEffect(()=>{u()},[u,r]),Lo(()=>{});const d=r.map((f,p)=>o.createElement(Nv,{measuring:!0,key:`${p}${f.id}Hidden`,id:`${f.id}Measurer`,siblingTabHasFocus:s,focused:p===a,selected:p===t,onClick:Ck,url:f.url},f.content)),h=T(Ie.LegacyTabs,Ie.TabMeasurer);return o.createElement("div",{className:h,ref:l},o.createElement(Nt,{event:"resize",handler:u}),d,n)});function Ck(){}let $v=class extends m.PureComponent{constructor(...t){super(...t),this.focusedNode=null,this.setFocusedNode=r=>{this.focusedNode=r}}componentDidMount(){const{focusedNode:t}=this,{focused:r}=this.props;t&&t instanceof HTMLElement&&r&&t.focus()}componentDidUpdate(){const{focusedNode:t}=this,{focused:r}=this.props;t&&t instanceof HTMLElement&&r&&t.focus()}render(){const{id:t,panelID:r,children:n,url:a,accessibilityLabel:s,onClick:i=wk}=this.props,l=T(Ie.Item),c={id:t,ref:this.setFocusedNode,onClick:i,className:l,"aria-controls":r,"aria-selected":!1,"aria-label":s},u=a?o.createElement(_r,Object.assign({},c,{url:a}),n):o.createElement("button",Object.assign({},c,{type:"button"}),n);return o.createElement("li",null,u)}};$v.contextType=Td;function wk(){}function Pk({focusIndex:e,disclosureTabs:t,onClick:r=Yp,onKeyPress:n=Yp}){const a=t.map(({id:s,content:i,...l},c)=>o.createElement($v,Object.assign({key:s},l,{id:s,focused:c===e,onClick:r.bind(null,s)}),i));return o.createElement("div",{onKeyDown:Ak,onKeyUp:n},o.createElement(ne,{as:"ul",padding:"200"},a))}function Yp(){}function Ak(e){const{key:t}=e;(t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}class Tk extends m.PureComponent{constructor(...t){super(...t),this.state={disclosureWidth:0,containerWidth:1/0,tabWidths:[],visibleTabs:[],hiddenTabs:[],showDisclosure:!1,tabToFocus:-1},this.handleKeyPress=r=>{const{tabToFocus:n,visibleTabs:a,hiddenTabs:s,showDisclosure:i}=this.state,l=r.key,c=i?a.concat(s):[...a];let u=c.indexOf(n);l==="ArrowRight"&&(u+=1,u===c.length&&(u=0)),l==="ArrowLeft"&&(u===-1||u===0?u=c.length-1:u-=1),this.setState({tabToFocus:c[u]})},this.renderTabMarkup=(r,n)=>{const{selected:a,children:s}=this.props,{tabToFocus:i}=this.state,l=r.panelID||`${r.id}-panel`;return o.createElement(Nv,{key:`${n}-${r.id}`,id:r.id,siblingTabHasFocus:i>-1,focused:n===i,selected:n===a,onClick:this.handleTabClick,panelID:s?l:void 0,accessibilityLabel:r.accessibilityLabel,url:r.url},r.content)},this.handleFocus=r=>{const{selected:n,tabs:a}=this.props,s=r.target;if(s.classList.contains(Ie.Tab)||s.classList.contains(Ie.Item)){let l=-1;a.every((c,u)=>c.id===s.id?(l=u,!1):!0),this.setState({tabToFocus:l});return}if(s.classList.contains(Ie.DisclosureActivator))return;if(!r.relatedTarget){this.setState({tabToFocus:n});return}const i=r.relatedTarget;i instanceof HTMLElement&&!i.classList.contains(Ie.Tab)&&!i.classList.contains(Ie.Item)&&!i.classList.contains(Ie.DisclosureActivator)&&this.setState({tabToFocus:n})},this.handleBlur=r=>{if(r.relatedTarget==null){this.setState({tabToFocus:-1});return}const n=r.relatedTarget;n instanceof HTMLElement&&!n.classList.contains(Ie.Tab)&&!n.classList.contains(Ie.Item)&&this.setState({tabToFocus:-1})},this.handleDisclosureActivatorClick=()=>{this.setState(({showDisclosure:r})=>({showDisclosure:!r}))},this.handleClose=()=>{this.setState({showDisclosure:!1})},this.handleMeasurement=r=>{const{tabs:n,selected:a}=this.props,{tabToFocus:s}=this.state,{hiddenTabWidths:i,containerWidth:l,disclosureWidth:c}=r,{visibleTabs:u,hiddenTabs:d}=Gp(n,a,c,i,l);this.setState({tabToFocus:s===-1?-1:a,visibleTabs:u,hiddenTabs:d,disclosureWidth:c,containerWidth:l,tabWidths:i})},this.handleTabClick=r=>{const{tabs:n,onSelect:a=Rk}=this.props,s=n.find(l=>l.id===r);if(s==null)return;const i=n.indexOf(s);a(i)}}static getDerivedStateFromProps(t,r){const{disclosureWidth:n,tabWidths:a,containerWidth:s}=r,{visibleTabs:i,hiddenTabs:l}=Gp(t.tabs,t.selected,n,a,s);return{visibleTabs:i,hiddenTabs:l,selected:t.selected}}render(){const{tabs:t,selected:r,fitted:n,children:a,i18n:s,disclosureText:i}=this.props,{tabToFocus:l,visibleTabs:c,hiddenTabs:u,showDisclosure:d}=this.state,h=u.map(C=>t[C]),f=a?t.map((C,w)=>r===w?o.createElement(Jp,{id:t[w].panelID||`${t[w].id}-panel`,tabID:t[w].id,key:t[w].id},a):o.createElement(Jp,{id:t[w].panelID||`${t[w].id}-panel`,tabID:t[w].id,key:t[w].id,hidden:!0})):null,p=c.sort((C,w)=>C-w).map(C=>this.renderTabMarkup(t[C],C)),g=c.length<t.length,b=!!i,v=T(Ie.LegacyTabs,n&&Ie.fitted,g&&Ie.fillSpace),y=T(Ie.DisclosureTab,g&&Ie["DisclosureTab-visible"]),E=T(Ie.DisclosureActivator,b&&Ie.Tab),S=T(Ie.Title,b&&Ie.titleWithIcon),_=b?o.createElement(o.Fragment,null,i,o.createElement(le,{source:Ys,tone:"subdued"})):o.createElement(le,{source:Gs,tone:"subdued"}),R=o.createElement("button",{type:"button",className:E,onClick:this.handleDisclosureActivatorClick,"aria-label":s.translate("Polaris.Tabs.toggleTabsLabel")},o.createElement("span",{className:S},_)),x=i?o.createElement("div",{className:Ie.TabContainer},R):R;return o.createElement("div",null,o.createElement(ne,{borderBlockEndWidth:"025",borderColor:"border-secondary",paddingInlineStart:"200",paddingInlineEnd:"200"},o.createElement(_k,{tabToFocus:l,activator:x,selected:r,tabs:t,siblingTabHasFocus:l>-1,handleMeasurement:this.handleMeasurement}),o.createElement("ul",{role:"tablist",className:v,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:kk,onKeyUp:this.handleKeyPress},p,o.createElement("li",{className:y,role:"presentation"},o.createElement(nt,{preferredPosition:"below",activator:x,active:g&&d,onClose:this.handleClose,autofocusTarget:"first-node"},o.createElement(Pk,{focusIndex:u.indexOf(l),disclosureTabs:h,onClick:this.handleTabClick,onKeyPress:this.handleKeyPress}))))),f)}}function Rk(){}function kk(e){const{key:t}=e;(t==="ArrowLeft"||t==="ArrowRight")&&(e.preventDefault(),e.stopPropagation())}function xk(e){const t=se();return o.createElement(Tk,Object.assign({},e,{i18n:t}))}const Ik=m.memo(function(){const{startLoading:t,stopLoading:r}=Ca();return m.useEffect(()=>(t(),()=>{r()}),[t,r]),null});var Rr={MediaCard:"Polaris-MediaCard",portrait:"Polaris-MediaCard--portrait",MediaContainer:"Polaris-MediaCard__MediaContainer",sizeSmall:"Polaris-MediaCard--sizeSmall",InfoContainer:"Polaris-MediaCard__InfoContainer",ActionContainer:"Polaris-MediaCard__ActionContainer"};function Nk({title:e,children:t,primaryAction:r,secondaryAction:n,description:a,popoverActions:s=[],portrait:i=!1,size:l="medium",onDismiss:c}){const u=se(),{value:d,toggle:h}=Wt(!1);let f=null;if(e){const w=typeof e=="string"?o.createElement(G,{variant:"headingSm",as:"h2"},e):e;f=o.createElement("div",null,w)}const p=c?o.createElement(ye,{icon:ti,onClick:c,size:"slim",accessibilityLabel:u.translate("Polaris.MediaCard.dismissButton"),variant:"tertiary"}):null,g=o.createElement(de,{blockAlign:"center"},o.createElement(ye,{icon:Gs,onClick:h,size:"slim",accessibilityLabel:u.translate("Polaris.MediaCard.popoverButton"),variant:"tertiary"})),b=s.length>0?o.createElement(nt,{active:d,activator:g,onClose:h,preferredAlignment:"left",preferredPosition:"below"},o.createElement(nn,{items:s,onActionAnyItem:h})):null,v=r?o.createElement("div",null,vr(r)):null,y=n?o.createElement("div",null,vr(n)):null,E=T(Rr.ActionContainer,i&&Rr.portrait),S=v||y?o.createElement("div",{className:E},o.createElement(Er,null,v,y)):null,_=T(Rr.MediaCard,i&&Rr.portrait),R=T(Rr.MediaContainer,i&&Rr.portrait,l==="small"&&Rr.sizeSmall),x=T(Rr.InfoContainer,i&&Rr.portrait,l==="small"&&Rr.sizeSmall),C=b||p?o.createElement(ne,{position:"absolute",insetInlineEnd:"500",zIndex:"var(--p-z-index-2)"},o.createElement(de,{gap:"100",wrap:!1},b,p)):null;return o.createElement(Rn,null,o.createElement("div",{className:_},o.createElement("div",{className:R},t),o.createElement("div",{className:x},o.createElement(ne,{padding:"500"},o.createElement(rt,{gap:"200"},o.createElement(de,{wrap:!1,align:"space-between",gap:"200"},f,C),o.createElement(G,{as:"p",variant:"bodySm"},a),S)))))}const ch=m.createContext({location:""});var re={Navigation:"Polaris-Navigation",UserMenu:"Polaris-Navigation__UserMenu",ContextControl:"Polaris-Navigation__ContextControl",PrimaryNavigation:"Polaris-Navigation__PrimaryNavigation",LogoContainer:"Polaris-Navigation__LogoContainer",hasLogoSuffix:"Polaris-Navigation--hasLogoSuffix",Logo:"Polaris-Navigation__Logo",LogoLink:"Polaris-Navigation__LogoLink",Item:"Polaris-Navigation__Item","Icon-resized":"Polaris-Navigation__Icon--resized",Badge:"Polaris-Navigation__Badge",ItemInnerWrapper:"Polaris-Navigation__ItemInnerWrapper",ItemWrapper:"Polaris-Navigation__ItemWrapper",ItemInnerDisabled:"Polaris-Navigation__ItemInnerDisabled","ItemInnerWrapper-display-actions-on-hover":"Polaris-Navigation--itemInnerWrapperDisplayActionsOnHover",SecondaryActions:"Polaris-Navigation__SecondaryActions","ItemInnerWrapper-selected":"Polaris-Navigation__ItemInnerWrapper--selected",Text:"Polaris-Navigation__Text","ItemInnerWrapper-open":"Polaris-Navigation__ItemInnerWrapper--open","Item-selected":"Polaris-Navigation__Item--selected","Item-child-active":"Polaris-Navigation--itemChildActive","Item-disabled":"Polaris-Navigation__Item--disabled",Icon:"Polaris-Navigation__Icon","ListItem-hasAction":"Polaris-Navigation__ListItem--hasAction",subNavigationActive:"Polaris-Navigation--subNavigationActive",ListItem:"Polaris-Navigation__ListItem",RollupSection:"Polaris-Navigation__RollupSection",SecondaryNavigation:"Polaris-Navigation__SecondaryNavigation","Text-truncated":"Polaris-Navigation__Text--truncated",ItemWithFloatingActions:"Polaris-Navigation__ItemWithFloatingActions",SecondaryAction:"Polaris-Navigation__SecondaryAction",List:"Polaris-Navigation__List","Item-line":"Polaris-Navigation__Item--line","Item-hover-line":"Polaris-Navigation--itemHoverLine","Item-line-pointer":"Polaris-Navigation--itemLinePointer","Item-hover-pointer":"Polaris-Navigation--itemHoverPointer","SecondaryNavigation-noIcon":"Polaris-Navigation__SecondaryNavigation--noIcon",Section:"Polaris-Navigation__Section","Section-fill":"Polaris-Navigation__Section--fill","Section-withSeparator":"Polaris-Navigation__Section--withSeparator",SectionHeading:"Polaris-Navigation__SectionHeading",Action:"Polaris-Navigation__Action",RollupToggle:"Polaris-Navigation__RollupToggle",Indicator:"Polaris-Navigation__Indicator",SecondaryNavigationOpen:"Polaris-Navigation__SecondaryNavigationOpen","snappy-grow":"Polaris-Navigation__snappy--grow"};let et;(function(e){e[e.MatchForced=0]="MatchForced",e[e.MatchUrl=1]="MatchUrl",e[e.MatchPaths=2]="MatchPaths",e[e.Excluded=3]="Excluded",e[e.NoMatch=4]="NoMatch"})(et||(et={}));function $k({ItemComponent:e,icon:t,longestMatch:r,subNavigationItems:n,showExpanded:a,truncateText:s,secondaryNavigationId:i}){const l=m.useId(),{onNavigationDismiss:c}=m.useContext(ch),[u,d]=m.useState(),h=n.findIndex(p=>wn(p,r)),f=n.findIndex(p=>wn(p,u));return o.createElement("div",{className:T(re.SecondaryNavigation,a&&re.SecondaryNavigationOpen,!t&&re["SecondaryNavigation-noIcon"])},o.createElement(Go,{id:i||l,open:a,transition:!1},o.createElement("ul",{className:re.List},n.map((p,g)=>{const{label:b,...v}=p,y=()=>{c==null||c(),p.onClick&&p.onClick!==c&&p.onClick()},E=g<h;return o.createElement(e,Object.assign({key:b},v,{label:b,showVerticalLine:E,showVerticalHoverPointer:g===f,level:1,onMouseEnter:p.disabled?void 0:()=>d(p),onMouseLeave:p.disabled?void 0:()=>d(void 0),matches:wn(p,r),onClick:y,truncateText:s}))}))))}const Zp=2,Ok=1e3;function uh({url:e,icon:t,matchedItemIcon:r,label:n,subNavigationItems:a=[],secondaryAction:s,secondaryActions:i,displayActionsOnHover:l,disabled:c,onClick:u,accessibilityLabel:d,selected:h,badge:f,new:p,matches:g,exactMatch:b,matchPaths:v,excludePaths:y,external:E,onToggleExpandedState:S,expanded:_,shouldResizeIcon:R,truncateText:x,showVerticalLine:C,showVerticalHoverPointer:w,level:P=0,onMouseEnter:N,onMouseLeave:$}){const L=se(),{isNavigationCollapsed:k}=rs(),A=m.useId(),{location:O,onNavigationDismiss:M}=m.useContext(ch),D=m.useRef(null),[I,F]=m.useState(!1);m.useEffect(()=>{!k&&_&&(S==null||S())},[_,k,S]),xb(()=>{const me=D.current;x&&me&&F(me.scrollHeight>me.clientHeight)},[x]);const B=c?-1:0,V=a.filter(me=>me.new).length>0?o.createElement("span",{className:re.Indicator},o.createElement(Jd,{pulse:!0})):null,W=Eo({url:e,matches:g,exactMatch:b,matchPaths:v,excludePaths:y},O),H=a.filter(me=>{const Ue=Eo(me,O);return Ue===et.MatchForced||Ue===et.MatchUrl||Ue===et.MatchPaths}),Y=H.length>0,j=h??(W===et.MatchForced||W===et.MatchUrl||W===et.MatchPaths),J=j||Y?r??t:t,ge=J?o.createElement("div",{className:T(re.Icon,R&&re["Icon-resized"])},o.createElement(le,{source:J})):null;let Oe=null;p?Oe=o.createElement(Tn,{tone:"new"},L.translate("Polaris.Badge.TONE_LABELS.new")):typeof f=="string"?Oe=o.createElement(Tn,{tone:"new"},f):Oe=f;const Ce=Oe==null?null:o.createElement("div",{className:re.Badge},Oe),De=!w&&!g&&P!==0?"subdued":void 0;let je="regular";(g||j)&&!Y?je="semibold":(P===0||w)&&(je="medium");const Le=o.createElement("span",{className:T(re.Text,x&&re["Text-truncated"]),ref:D},o.createElement(G,{as:"span",variant:"bodyMd",tone:De,fontWeight:je},n),V);if(e==null){const me=T(re.Item,c&&re["Item-disabled"],h&&re["Item-selected"]);return o.createElement("li",{className:re.ListItem},o.createElement("div",{className:re.ItemWrapper},o.createElement("div",{className:T(re.ItemInnerWrapper,c&&re.ItemInnerDisabled,h&&re["ItemInnerWrapper-selected"])},o.createElement("button",{type:"button",className:me,disabled:c,"aria-disabled":c,"aria-label":d,onClick:Fe(u)},ge,Le,Ce))))}const z=i||s&&[s];z&&z.length>Zp&&(z.length=Zp);const ae=z!=null&&z.length?o.createElement("span",{className:re.SecondaryActions},z.map(me=>o.createElement(Lk,Object.assign({key:me.accessibilityLabel},me,{tabIndex:B,disabled:c})))):null,we=o.createElement(o.Fragment,null,ge,Le,ae?null:Ce),he=o.createElement(o.Fragment,null,ae?Ce:null),be=j||_||Y,ie=T(re.Item,c&&re["Item-disabled"],(j||Y)&&re["Item-selected"],be&&re.subNavigationActive,Y&&re["Item-child-active"],C&&re["Item-line"],g&&re["Item-line-pointer"],w&&re["Item-hover-pointer"]);let pe=null;if(a.length>0){const me=H.sort(({url:Ue},{url:Je})=>Je.length-Ue.length)[0];pe=o.createElement($k,{ItemComponent:uh,icon:J,longestMatch:me,subNavigationItems:a,showExpanded:be,truncateText:x,secondaryNavigationId:A})}const Ae=T(re.ListItem,!!(z&&z.length)&&re["ListItem-hasAction"]),qe=()=>{const me=o.createElement(_r,Object.assign({url:e,className:ie,external:E,tabIndex:B,"aria-disabled":c,"aria-label":d,onClick:Fe(u)},Dk(A,a.length>0,be)),we);return I?o.createElement(Gt,{hoverDelay:Ok,content:n,preferredPosition:"above"},me):me};return o.createElement("li",{className:Ae,onMouseEnter:()=>{N==null||N(n)},onMouseLeave:$},o.createElement("div",{className:re.ItemWrapper},o.createElement("div",{className:T(re.ItemInnerWrapper,j&&Y&&re["ItemInnerWrapper-open"]||j&&!Y&&re["ItemInnerWrapper-selected"],l&&re["ItemInnerWrapper-display-actions-on-hover"],c&&re.ItemInnerDisabled)},l&&ae&&Ce?o.createElement("span",{className:re.ItemWithFloatingActions},qe(),ae):o.createElement(o.Fragment,null,qe(),ae),he)),pe);function Fe(me){return Ue=>{const{currentTarget:Je}=Ue;if(Je.getAttribute("href")===O&&Ue.preventDefault(),a&&a.length>0&&k)Ue.preventDefault(),S==null||S();else if(M){M(),me&&me!==M&&me();return}me&&me()}}}function Lk({url:e,icon:t,accessibilityLabel:r,tooltip:n,onClick:a,disabled:s,tabIndex:i}){const l=e?o.createElement(_r,{external:!0,url:e,className:re.SecondaryAction,tabIndex:i,"aria-disabled":s,"aria-label":r,onClick:a},o.createElement(le,{source:t})):o.createElement(nr,{className:re.SecondaryAction,tabIndex:i,disabled:s,accessibilityLabel:r,onClick:a},o.createElement(le,{source:t}));return n?o.createElement(Gt,n," ",l," "):l}function Mk(e,t){const r=Eo(e,t),n=e.subNavigationItems&&e.subNavigationItems.filter(i=>{const l=Eo(i,t);return l===et.MatchForced||l===et.MatchUrl||l===et.MatchPaths}),a=n&&n.length>0;return r===et.MatchForced||r===et.MatchUrl||r===et.MatchPaths||a}function vo(e){const t=e.split("?")[0].split("#")[0];return t.endsWith("/")?t:`${t}/`}function Fk(e,t){return vo(e)===vo(t)}function Wc(e,t){return vo(e).startsWith(vo(t))}function Eo({url:e,matches:t,exactMatch:r,matchPaths:n,excludePaths:a},s){return e==null?et.NoMatch:t?et.MatchForced:t===!1||a&&a.some(l=>Wc(s,l))?et.Excluded:n&&n.some(l=>Wc(s,l))?et.MatchPaths:(r?Fk(s,e):Wc(s,e))?et.MatchUrl:et.NoMatch}function Dk(e,t,r){return t?{"aria-expanded":r,"aria-controls":e}:void 0}function Hk({title:e,fill:t,action:r,items:n,rollup:a,separator:s}){const{value:i,toggle:l,setFalse:c}=Wt(!1),u=m.useRef(null),{isNavigationCollapsed:d}=rs(),[h,f]=m.useState(),p=($,L)=>()=>{$&&$(),u.current&&cancelAnimationFrame(u.current),(!L||!d)&&(u.current=requestAnimationFrame(c))};m.useEffect(()=>()=>{u.current&&cancelAnimationFrame(u.current)});const g=T(re.Section,s&&re["Section-withSeparator"],t&&re["Section-fill"]),b=r&&o.createElement("button",{type:"button",className:re.Action,"aria-label":r.accessibilityLabel,onClick:r.onClick},o.createElement(le,{source:r.icon})),v=r&&(r.tooltip?o.createElement(Gt,r.tooltip,b):b),y=e&&o.createElement("li",{className:re.SectionHeading},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium",tone:"subdued"},e),v),E=n.map(($,L)=>{const{onClick:k,label:A,subNavigationItems:O,...M}=$,D=O!=null&&O.length>0,I=()=>{f(h===L?-1:L)};return o.createElement(uh,Object.assign({key:A},M,{label:A,subNavigationItems:O,onClick:p(k,D),onToggleExpandedState:I,expanded:h===L}))}),S=T(re.Item,re.RollupToggle),_=a&&(i?a.hide:a.view),R=a&&n.length>a.after&&o.createElement("div",{className:re.ListItem,key:"List Item"},o.createElement("div",{className:re.ItemWrapper},o.createElement("div",{className:re.ItemInnerWrapper},o.createElement("button",{type:"button",className:S,onClick:l,"aria-label":_},o.createElement("span",{className:re.Icon},o.createElement(le,{source:Gs})))))),x=n.findIndex($=>a?a.activePath===$.url||$.url&&a.activePath.startsWith($.url)||($.subNavigationItems?$.subNavigationItems.some(({url:L})=>a.activePath.startsWith(L)):!1):!1),C=a?E.slice(0,a.after):E,w=a?E.slice(a.after):[];a&&x!==-1&&x>a.after-1&&C.push(...w.splice(x-a.after,1));const P=m.useId(),N=a&&w.length>0&&o.createElement("li",{className:re.RollupSection},o.createElement(Go,{id:P,open:i},o.createElement("ul",{className:re.List},w)),R);return o.createElement("ul",{className:g},y,C,N)}const dh=function({children:t,contextControl:r,location:n,onDismiss:a,ariaLabelledBy:s,logoSuffix:i}){const{logo:l}=Ca(),c=sh(l,104),u=l?o.createElement("div",{className:T(re.LogoContainer,i&&re.hasLogoSuffix)},o.createElement(_r,{url:l.url||"",className:re.LogoLink,style:{width:c}},o.createElement(Mr,{source:l.topBarSource||"",alt:l.accessibilityLabel||"",className:re.Logo,style:{width:c}})),i):null,d=r?o.createElement("div",{className:re.ContextControl},r):u,h=m.useMemo(()=>({location:n,onNavigationDismiss:a}),[n,a]);return o.createElement(ch.Provider,{value:h},o.createElement(ts.Provider,{value:!0},o.createElement("nav",{className:re.Navigation,"aria-labelledby":s},d,o.createElement(Ga,{className:re.PrimaryNavigation},t))))};dh.Item=uh;dh.Section=Hk;function td(e,t,r){return e.length!==t.length?!1:e.every((n,a)=>{const s=t[a];return r!=null?r(n,s):n===s})}var vt={Option:"Polaris-OptionList-Option",SingleSelectOption:"Polaris-OptionList-Option__SingleSelectOption",focused:"Polaris-OptionList-Option--focused",active:"Polaris-OptionList-Option--active",disabled:"Polaris-OptionList-Option--disabled",select:"Polaris-OptionList-Option--select",Media:"Polaris-OptionList-Option__Media",Label:"Polaris-OptionList-Option__Label",MultiSelectOption:"Polaris-OptionList-Option__MultiSelectOption",CheckboxLabel:"Polaris-OptionList-Option__CheckboxLabel",verticalAlignTop:"Polaris-OptionList-Option--verticalAlignTop",verticalAlignCenter:"Polaris-OptionList-Option--verticalAlignCenter",verticalAlignBottom:"Polaris-OptionList-Option--verticalAlignBottom",Icon:"Polaris-OptionList-Option__Icon",Checkbox:"Polaris-OptionList-Option__Checkbox"};function Bk({label:e,value:t,id:r,select:n,active:a,allowMultiple:s,disabled:i,media:l,onClick:c,section:u,index:d,verticalAlign:h,onPointerEnter:f,onFocus:p}){const{value:g,toggle:b}=Wt(!1),v=m.useCallback(()=>{i||c(u,d)},[i,d,c,u]),y=m.useCallback(()=>{i||f(u,d)},[i,f,u,d]),E=m.useCallback(()=>{b(),p(u,d)},[b,p,u,d]),S=l?o.createElement("div",{className:vt.Media},l):null,_=T(vt.SingleSelectOption,g&&vt.focused,i&&vt.disabled,n&&vt.select,a&&vt.active,h&&vt[Be("verticalAlign",h)]),R=T(vt.Label,i&&vt.disabled,a&&vt.active,n&&vt.select,h&&vt[Be("verticalAlign",h)],s&&vt.CheckboxLabel,s&&vt.MultiSelectOption),x=s?o.createElement("label",{htmlFor:r,className:R},o.createElement("div",{className:vt.Checkbox},o.createElement(Ln,{id:r,label:"",ariaDescribedBy:`${r}-label`,value:t,checked:n,disabled:i,onChange:v})),S,o.createElement("span",{id:`${r}-label`},e)):o.createElement("button",{id:r,type:"button",className:_,onClick:v,disabled:i,onFocus:E,onBlur:b,"aria-pressed":a||n},o.createElement(o.Fragment,null,o.createElement(de,{wrap:!1,blockAlign:Wk(h)},S,e),(n||a)&&o.createElement("span",{className:vt.Icon},o.createElement(le,{source:qo})))),C=a?o.createElement(Ga.ScrollTo,null):null;return o.createElement("li",{key:r,className:vt.Option,tabIndex:-1,onPointerEnter:y},C,x)}function Wk(e){switch(e){case"top":return"start";case"center":return"center";case"bottom":return"end";default:return"start"}}function Uk({options:e,sections:t,title:r,selected:n,allowMultiple:a,role:s,verticalAlign:i,onChange:l,id:c,onPointerEnterOption:u,onFocusOption:d}){const[h,f]=m.useState(Qp(e,t,r)),p=m.useId(),g=c??p;ih(()=>{f(Qp(e||[],t||[],r))},[e,t,r],jk);const b=m.useCallback((_,R)=>{const x=h[_].options[R].value,C=n.indexOf(x);if(a){const w=C===-1?[x,...n]:[...n.slice(0,C),...n.slice(C+1,n.length)];l(w);return}l([x])},[h,n,a,l]),v=m.useCallback((_,R)=>{if(!u)return;const x=h[_].options[R].value;u(x)},[h,u]),y=m.useCallback((_,R)=>{if(!d)return;const x=h[_].options[R].value;d(x)},[h,d]),S=h.length>0?h.map(({title:_,options:R},x)=>{const C=x===0,w=C?"h2":"h3",P=_?o.createElement(ne,{paddingBlockStart:C?"050":"300",paddingInlineStart:"150",paddingBlockEnd:"100",paddingInlineEnd:"150",borderColor:"border-secondary"},o.createElement(G,{as:w,variant:"headingSm"},_)):null,N=R&&R.map((k,A)=>{const O=n.includes(k.value),M=k.id||`${g}-${x}-${A}`;return o.createElement(Bk,Object.assign({key:M},k,{id:M,section:x,index:A,onClick:b,select:O,allowMultiple:a,verticalAlign:i,onPointerEnter:v,onFocus:y}))}),$=o.createElement(ne,{as:"ul",id:`${g}-${x}`,role:s},N),L=C?_?"100":"0":_?"050":"0";return o.createElement(ne,{key:_||`noTitle-${x}`,as:"li",paddingBlockStart:L},o.createElement(rt,{gap:C&&t?void 0:"0"},P,$))}):null;return o.createElement(ne,{as:"ul",role:s,padding:"150"},S)}function Qp(e,t,r){if(e==null){const n={options:[],title:r};return t==null?[]:[n,...t]}return t==null?[{title:r,options:e}]:[{title:r,options:e},...t]}function jk(e,t){return Vu(e)&&Vu(t)?td(e,t,qk):td(e,t)}function qk(e,t){const{options:r}=e,{options:n}=t,a=td(r,n),s=e.title===t.title;return a&&s}var Vk={PageActions:"Polaris-PageActions"};function Kk({primaryAction:e,secondaryActions:t}){let r=null;Nf(e)?r=o.createElement(o.Fragment,null,e):e&&(r=rn(e,{variant:"primary"}));let n=null;return T_(t)&&t.length>0?n=o.createElement(Er,null,rn(t)):Nf(t)&&(n=o.createElement(o.Fragment,null,t)),o.createElement("div",{className:Vk.PageActions},o.createElement(Sr,{distribution:"trailing",spacing:"tight"},n,r))}function zk(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var em={Activator:"Polaris-Picker-Activator",disabled:"Polaris-Picker-Activator--disabled"};const Ov=m.forwardRef(({disabled:e,label:t,placeholder:r,selected:n,onClick:a},s)=>o.createElement("button",{ref:s,disabled:e,onClick:a,className:T(em.Activator,e&&em.disabled)},o.createElement(rt,{as:"span",gap:"100"},t&&o.createElement(G,{as:"span",variant:"bodySm",alignment:"start",tone:"subdued"},t),(n!==""||r)&&o.createElement(G,{as:"span",variant:"bodyMd",alignment:"start",tone:n?void 0:"subdued"},n||r)),o.createElement("span",null,o.createElement(le,{tone:"subdued",source:Db}))));Ov.displayName="Activator";var Gk={SearchField:"Polaris-Picker-SearchField"};function Jk({value:e,id:t,type:r="text",onFocus:n,onBlur:a,onChange:s,label:i,prefix:l,placeholder:c,focused:u}){var P;const d=o.useRef(null),h=Uy(),{activeOptionId:f,listboxId:p,setTextFieldFocused:g,setTextFieldLabelId:b,onTextFieldFocus:v,onTextFieldChange:y,onTextFieldBlur:E}=h,S=m.useId(),_=m.useMemo(()=>t||S,[S,t]),R=m.useMemo(()=>Us(t||S),[S,t]);m.useEffect(()=>{b&&b(R)},[R,b]);const x=m.useCallback(N=>{n&&n(N),v&&v(),g&&g(!0)},[n,v,g]),C=m.useCallback(N=>{a&&a(N),E&&E(),g&&g(!1)},[a,E,g]),w=m.useCallback((N,$)=>{s&&s(N,$),y&&y(N)},[s,y]);return u&&document.activeElement!==d.current&&((P=d.current)==null||P.focus()),o.createElement(de,{gap:"100",blockAlign:"center"},o.createElement(Hb,{id:_},o.createElement(G,{as:"span",visuallyHidden:!0},i),o.createElement("span",null,l)),o.createElement("input",{ref:d,id:_,className:Gk.SearchField,value:e,type:r,"aria-activedescendant":f,role:"combobox","aria-haspopup":"listbox","aria-autocomplete":"list","aria-expanded":"true",placeholder:c,"aria-controls":p,onFocus:x,onBlur:C,onChange:({target:N})=>w(N.value,_)}))}const Xk=e=>new RegExp(e,"i"),Yk=e=>new RegExp(`^${zk(e)}$`,"i");function Zk({activator:e,allowMultiple:t,searchField:r,options:n=[],willLoadMoreOptions:a,height:s,addAction:i,onScrolledToBottom:l,onClose:c,...u}){var V;const d=o.createRef(),[h,f]=m.useState([]),[p,g]=m.useState(!1),[b,v]=m.useState(),[y,E]=m.useState(),[S,_]=m.useState(),[R,x]=m.useState(""),[C,w]=m.useState(n),P=!p,N=m.useCallback(()=>{var W;g(!1),c==null||c(),(W=d.current)==null||W.focus()},[d,c]),$=m.useCallback(()=>{g(!0)},[]),L=m.useCallback(()=>{P&&$()},[P,$]),k=m.useCallback(()=>{P&&$()},[P,$]),A=m.useCallback(()=>{p&&(N(),x(""),w(n))},[p,N,n]),O=m.useMemo(()=>({activeOptionId:b,expanded:p,listboxId:S,setTextFieldLabelId:E,onTextFieldFocus:L,onTextFieldChange:k,onTextFieldBlur:A}),[b,p,S,E,L,k,A]),M=m.useMemo(()=>({allowMultiple:t}),[t]),D=m.useMemo(()=>({listboxId:S,textFieldLabelId:y,textFieldFocused:p,willLoadMoreOptions:a,setActiveOptionId:v,setListboxId:_,onKeyToBottom:l}),[S,y,p,a,v,_,l]),I=m.useCallback(W=>{if(x(W),W===""){w(n);return}const H=n==null?void 0:n.filter(Y=>Xk(W).exec(Yi(Y.children)));w(H??[])},[n]),F=m.useCallback(W=>{var H;if(x(""),I(""),(H=u.onSelect)==null||H.call(u,W),!t){N(),f([W]);return}f(Y=>h.includes(W)?Y.filter(j=>j!==W):[...Y,W])},[I,u,t,h,N]),B=Yi((V=n.find(W=>W.value===(h==null?void 0:h[0])))==null?void 0:V.children),U=n.some(W=>{const H=Yk(R);return Yi(W.children).match(H)});return o.createElement(nt,{activator:o.createElement(Ov,Object.assign({},e,{onClick:$,selected:B||"",placeholder:e.placeholder,ref:d})),active:p,autofocusTarget:"none",onClose:N,preferredPosition:"cover",preventFocusOnClose:!0},o.createElement(nt.Pane,{onScrolledToBottom:l,height:s},r?o.createElement(ne,{paddingBlockStart:"200",paddingBlockEnd:"100",paddingInline:"200",borderBlockEndWidth:"025",borderColor:"border"},o.createElement(jd.Provider,{value:O},o.createElement(Jk,Object.assign({},r,{value:R,onChange:W=>{var H;I(W),(H=r.onChange)==null||H.call(r,W,r.id??"")},prefix:o.createElement(le,{source:Xs}),labelHidden:!0,focused:p})))):null,o.createElement(qd.Provider,{value:D},o.createElement(Vd.Provider,{value:M},o.createElement(ne,{paddingBlock:"200"},o.createElement(ot,Object.assign({},u,{onSelect:F}),C==null?void 0:C.map(W=>o.createElement(ot.Option,Object.assign({key:W.value,selected:h.some(H=>H===W.value)},W))),i&&R!==""&&!U?o.createElement(ot.Action,Object.assign({},i,{value:R})):null))))))}const Yi=e=>{var t;return typeof e=="string"?e:m.isValidElement(e)?Yi((t=e==null?void 0:e.props)==null?void 0:t.children):""},Qk={isNavigationCollapsed:!1};function ex({strict:e,children:t,i18n:r,link:n,mediaQuery:a,features:s,frame:i,theme:l=L_}){const c=e?m.StrictMode:m.Fragment,u=m.useMemo(()=>new Z_(r||{}),[r]),d=m.useMemo(()=>new Q_,[]),h=m.useMemo(()=>new R_,[]),f=tx(i),p=eC(Qk,a);return o.createElement(c,null,o.createElement(k_.Provider,{value:l},o.createElement(x_.Provider,{value:I_(l)},o.createElement(Td.Provider,{value:s},o.createElement(N_.Provider,{value:u},o.createElement(Ad.Provider,{value:d},o.createElement(Mb.Provider,{value:h},o.createElement($_.Provider,{value:n},o.createElement(O_.Provider,{value:p},o.createElement(Wb,null,o.createElement(tC,null,o.createElement(rC,null,o.createElement(ri.Provider,{value:f},t)))))))))))))}function Oa(){}function tx({logo:e=void 0,showToast:t=Oa,hideToast:r=Oa,toastMessages:n=[],setContextualSaveBar:a=Oa,removeContextualSaveBar:s=Oa,startLoading:i=Oa,stopLoading:l=Oa}={}){return{logo:e,showToast:t,hideToast:r,toastMessages:n,setContextualSaveBar:a,removeContextualSaveBar:s,startLoading:i,stopLoading:l}}var cn={ProgressBar:"Polaris-ProgressBar",sizeSmall:"Polaris-ProgressBar--sizeSmall",sizeMedium:"Polaris-ProgressBar--sizeMedium",sizeLarge:"Polaris-ProgressBar--sizeLarge",toneHighlight:"Polaris-ProgressBar--toneHighlight",tonePrimary:"Polaris-ProgressBar--tonePrimary",toneSuccess:"Polaris-ProgressBar--toneSuccess",toneCritical:"Polaris-ProgressBar--toneCritical",Indicator:"Polaris-ProgressBar__Indicator",IndicatorAppearActive:"Polaris-ProgressBar__IndicatorAppearActive",IndicatorAppearDone:"Polaris-ProgressBar__IndicatorAppearDone",Progress:"Polaris-ProgressBar__Progress",Label:"Polaris-ProgressBar__Label"};function rx({progress:e=0,size:t="medium",tone:r="highlight",animated:n=!0,ariaLabelledBy:a}){const s=Zs(),i=se(),l=m.useRef(null),c=T(cn.ProgressBar,t&&cn[Be("size",t)],r&&cn[Be("tone",r)]);i.translate(e<0?"Polaris.ProgressBar.negativeWarningMessage":"Polaris.ProgressBar.exceedWarningMessage",{progress:e});const u=nx(e),d=n?s.motion["motion-duration-500"]:s.motion["motion-duration-0"];return o.createElement("div",{className:c},o.createElement("progress",{"aria-labelledby":a,className:cn.Progress,value:u,max:"100"}),o.createElement(Mn,{in:!0,appear:!0,timeout:parseInt(d,10),nodeRef:l,classNames:{appearActive:cn.IndicatorAppearActive,appearDone:cn.IndicatorAppearDone}},o.createElement("div",{ref:l,className:cn.Indicator,style:{"--pc-progress-bar-duration":d,"--pc-progress-bar-percent":u/100}},o.createElement("span",{className:cn.Label},u,"%"))))}function nx(e,t){let r;return e<0?r=0:e>100?r=100:r=e,r}var So={RangeSlider:"Polaris-RangeSlider","Track--dashed-after":"Polaris-RangeSlider--trackDashedAfter","Track--dashed":"Polaris-RangeSlider--trackDashed"},at={DualThumb:"Polaris-RangeSlider-DualThumb",TrackWrapper:"Polaris-RangeSlider-DualThumb__TrackWrapper",disabled:"Polaris-RangeSlider-DualThumb--disabled",Track:"Polaris-RangeSlider-DualThumb__Track",error:"Polaris-RangeSlider-DualThumb--error",Thumbs:"Polaris-RangeSlider-DualThumb__Thumbs",Prefix:"Polaris-RangeSlider-DualThumb__Prefix",Suffix:"Polaris-RangeSlider-DualThumb__Suffix",Output:"Polaris-RangeSlider-DualThumb__Output",OutputBubble:"Polaris-RangeSlider-DualThumb__OutputBubble"},_t;(function(e){e[e.Lower=0]="Lower",e[e.Upper=1]="Upper"})(_t||(_t={}));class Lv extends m.Component{constructor(...t){super(...t),this.state={value:Uc(this.props.value,this.props.min,this.props.max,this.props.step),trackWidth:0,trackLeft:0},this.track=m.createRef(),this.trackWrapper=m.createRef(),this.thumbLower=m.createRef(),this.thumbUpper=m.createRef(),this.setTrackPosition=rr(()=>{if(this.track.current){const{width:n,left:a}=this.track.current.getBoundingClientRect(),s=n-16,i=a+16/2,l=this.props.max-this.props.min,c=this.props.min/l*s;this.setState({trackWidth:s,trackLeft:i-c})}},40,{leading:!0,trailing:!0,maxWait:40}),this.handleMouseDownThumbLower=r=>{r.button!==0||this.props.disabled||(ki(this.handleMouseMoveThumbLower),r.stopPropagation())},this.handleMouseMoveThumbLower=r=>{const n=this.state.value[1];this.setValue([this.actualXPosition(r.clientX),n],_t.Upper)},this.handleTouchStartThumbLower=r=>{this.props.disabled||(xi(this.handleTouchMoveThumbLower),r.stopPropagation())},this.handleTouchMoveThumbLower=r=>{r.preventDefault();const n=this.state.value[1];this.setValue([this.actualXPosition(r.touches[0].clientX),n],_t.Upper)},this.handleMouseDownThumbUpper=r=>{r.button!==0||this.props.disabled||(ki(this.handleMouseMoveThumbUpper),r.stopPropagation())},this.handleMouseMoveThumbUpper=r=>{const n=this.state.value[0];this.setValue([n,this.actualXPosition(r.clientX)],_t.Lower)},this.handleTouchStartThumbUpper=r=>{this.props.disabled||(xi(this.handleTouchMoveThumbUpper),r.stopPropagation())},this.handleTouchMoveThumbUpper=r=>{r.preventDefault();const n=this.state.value[0];this.setValue([n,this.actualXPosition(r.touches[0].clientX)],_t.Lower)},this.handleKeypressLower=r=>{if(this.props.disabled)return;const{incrementValueLower:n,decrementValueLower:a}=this,i={[it.UpArrow]:n,[it.RightArrow]:n,[it.DownArrow]:a,[it.LeftArrow]:a}[r.keyCode];i!=null&&(r.preventDefault(),r.stopPropagation(),i())},this.handleKeypressUpper=r=>{if(this.props.disabled)return;const{incrementValueUpper:n,decrementValueUpper:a}=this,i={[it.UpArrow]:n,[it.RightArrow]:n,[it.DownArrow]:a,[it.LeftArrow]:a}[r.keyCode];i!=null&&(r.preventDefault(),r.stopPropagation(),i())},this.incrementValueLower=()=>{this.setValue([this.state.value[0]+this.props.step,this.state.value[1]],_t.Upper)},this.decrementValueLower=()=>{this.setValue([this.state.value[0]-this.props.step,this.state.value[1]],_t.Upper)},this.incrementValueUpper=()=>{this.setValue([this.state.value[0],this.state.value[1]+this.props.step],_t.Lower)},this.decrementValueUpper=()=>{this.setValue([this.state.value[0],this.state.value[1]-this.props.step],_t.Lower)},this.dispatchValue=()=>{const{onChange:r,id:n}=this.props,{value:a}=this.state;r(a,n)},this.setValue=(r,n)=>{const{props:{min:a,max:s,step:i},state:{value:l}}=this,c=Uc(r,a,s,i,n);jc(c,l)===!1&&this.setState({value:c},this.dispatchValue)},this.handleMouseDownTrack=r=>{if(r.button!==0||this.props.disabled)return;r.preventDefault();const n=this.actualXPosition(r.clientX),{value:a}=this.state,s=Math.abs(a[0]-n),i=Math.abs(a[1]-n);s<=i?(this.setValue([n,a[1]],_t.Upper),ki(this.handleMouseMoveThumbLower),this.thumbLower.current!=null&&this.thumbLower.current.focus()):(this.setValue([a[0],n],_t.Lower),ki(this.handleMouseMoveThumbUpper),this.thumbUpper.current!=null&&this.thumbUpper.current.focus())},this.handleTouchStartTrack=r=>{if(this.props.disabled)return;r.preventDefault();const n=this.actualXPosition(r.touches[0].clientX),{value:a}=this.state,s=Math.abs(a[0]-n),i=Math.abs(a[1]-n);s<=i?(this.setValue([n,a[1]],_t.Upper),xi(this.handleTouchMoveThumbLower),this.thumbLower.current!=null&&this.thumbLower.current.focus()):(this.setValue([a[0],n],_t.Lower),xi(this.handleTouchMoveThumbUpper),this.thumbUpper.current!=null&&this.thumbUpper.current.focus())},this.actualXPosition=r=>{if(this.track.current){const{min:n,max:a}=this.props,{trackLeft:s,trackWidth:i}=this.state;return(r-s)/i*(a-n)}else return 0}}static getDerivedStateFromProps(t,r){const{min:n,step:a,max:s,value:i,onChange:l,id:c}=t,{prevValue:u}=r;if(jc(u,i))return null;const d=Uc(i,n,s,a);return jc(i,d)||l(d,c),{prevValue:i,value:d}}componentDidMount(){this.setTrackPosition(),this.trackWrapper.current!=null&&this.trackWrapper.current.addEventListener("touchstart",this.handleTouchStartTrack,{passive:!1})}componentWillUnmount(){this.trackWrapper.current!=null&&this.trackWrapper.current.removeEventListener("touchstart",this.handleTouchStartTrack)}render(){const{id:t,min:r,max:n,prefix:a,suffix:s,disabled:i,output:l,error:c,onFocus:u,onBlur:d,label:h,labelAction:f,labelHidden:p,helpText:g}=this.props,{value:b}=this.state,v=t,y=`${t}Upper`,E=[];c&&E.push(`${t}Error`);const S=E.length?E.join(" "):void 0,_=T(at.TrackWrapper,c&&at.error,i&&at.disabled),R=T(at.Thumbs,at.ThumbLower,i&&at.disabled),x=T(at.Thumbs,at.ThumbUpper,i&&at.disabled),C=this.state.trackWidth,w=n-r,P=r/w*C,N=b[0]/w*C-P,$=b[1]/w*C-P,L=T(at.Output,at.OutputLower),k=!i&&l?o.createElement("output",{htmlFor:v,className:L,style:{left:`${N}px`}},o.createElement("div",{className:at.OutputBubble},o.createElement(G,{as:"span",variant:"headingSm",alignment:"center"},b[0]))):null,A=T(at.Output,at.OutputUpper),O=!i&&l?o.createElement("output",{htmlFor:y,className:A,style:{left:`${$}px`}},o.createElement("div",{className:at.OutputBubble},o.createElement(G,{as:"span",variant:"headingSm",alignment:"center"},b[1]))):null,M={"--pc-range-slider-progress-lower":`${N}px`,"--pc-range-slider-progress-upper":`${$}px`},D=a&&o.createElement("div",{className:at.Prefix},a),I=s&&o.createElement("div",{className:at.Suffix},s);return o.createElement(o.Fragment,null,o.createElement(Js,{id:t,label:h,error:c,action:f,labelHidden:p,helpText:g},o.createElement("div",{className:T(at.DualThumb,So.RangeSlider)},D,o.createElement("div",{className:_,onMouseDown:this.handleMouseDownTrack,ref:this.trackWrapper},o.createElement("div",{className:at.Track,style:M,ref:this.track}),o.createElement("div",{className:So["Track--dashed"]}),o.createElement("div",{id:v,className:R,style:{left:`${N}px`},role:"slider","aria-disabled":i,"aria-valuemin":r,"aria-valuemax":n,"aria-valuenow":b[0],"aria-invalid":!!c,"aria-describedby":S,"aria-labelledby":Us(t),onFocus:u,onBlur:d,tabIndex:0,onKeyDown:this.handleKeypressLower,onMouseDown:this.handleMouseDownThumbLower,onTouchStart:this.handleTouchStartThumbLower,ref:this.thumbLower}),k,o.createElement("div",{id:y,className:x,style:{left:`${$}px`},role:"slider","aria-disabled":i,"aria-valuemin":r,"aria-valuemax":n,"aria-valuenow":b[1],"aria-invalid":!!c,"aria-describedby":S,"aria-labelledby":Us(t),onFocus:u,onBlur:d,tabIndex:0,onKeyDown:this.handleKeypressUpper,onMouseDown:this.handleMouseDownThumbUpper,onTouchStart:this.handleTouchStartThumbUpper,ref:this.thumbUpper}),O),I)),o.createElement(Nt,{event:"resize",handler:this.setTrackPosition}))}}Lv.contextType=Td;function ki(e){document.addEventListener("mousemove",e),document.addEventListener("mouseup",()=>{document.removeEventListener("mousemove",e)},{once:!0})}function xi(e){const t=()=>{document.removeEventListener("touchmove",e),document.removeEventListener("touchend",t),document.removeEventListener("touchcancel",t)};document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",t,{once:!0}),document.addEventListener("touchcancel",t,{once:!0})}function Uc(e,t,r,n,a=_t.Upper){let s=u(h(e[1])),i=d(h(e[0]));const l=s-n,c=i+n;return a===_t.Upper&&i>l?i=l:a===_t.Lower&&s<c&&(s=c),[i,s];function u(f){const p=t+n;return f<p?p:f>r?r:f}function d(f){const p=r-n;return f<t?t:f>p?p:f}function h(f){return Math.round(f/n)*n}}function jc(e,t){return e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1]}var Vr={SingleThumb:"Polaris-RangeSlider-SingleThumb",disabled:"Polaris-RangeSlider-SingleThumb--disabled",InputWrapper:"Polaris-RangeSlider-SingleThumb__InputWrapper",Prefix:"Polaris-RangeSlider-SingleThumb__Prefix",Suffix:"Polaris-RangeSlider-SingleThumb__Suffix",Input:"Polaris-RangeSlider-SingleThumb__Input",error:"Polaris-RangeSlider-SingleThumb--error",Output:"Polaris-RangeSlider-SingleThumb__Output",OutputBubble:"Polaris-RangeSlider-SingleThumb__OutputBubble"};function ax(e){return Math.sign(e)===1?-Math.abs(e):Math.sign(e)===-1?Math.abs(e):0}function sx(e){const{id:t,error:r,helpText:n,value:a,min:s,max:i,disabled:l,output:c,prefix:u,suffix:d,label:h,labelAction:f,labelHidden:p,step:g,onBlur:b,onFocus:v}=e,y=Ot(a,s,i),E=[];r&&E.push(`${t}Error`),n&&E.push(Bb(t));const S=E.length?E.join(" "):void 0,_=(y-s)*100/(i-s),R=ax((_-50)/100),x={"--pc-range-slider-min":s,"--pc-range-slider-max":i,"--pc-range-slider-current":y,"--pc-range-slider-progress":`${_}%`,"--pc-range-slider-output-factor":`${R}`},C=!l&&c&&o.createElement("output",{htmlFor:t,className:Vr.Output},o.createElement("div",{className:Vr.OutputBubble},o.createElement(G,{as:"span",variant:"headingSm",alignment:"center"},y))),w=u&&o.createElement("div",{className:Vr.Prefix},u),P=d&&o.createElement("div",{className:Vr.Suffix},d),N=T(Vr.SingleThumb,So.RangeSlider,r&&Vr.error,l&&Vr.disabled);return o.createElement(Js,{id:t,label:h,error:r,action:f,labelHidden:p,helpText:n},o.createElement("div",{className:N,style:x},w,o.createElement("div",{className:T(Vr.InputWrapper,So["Track--dashed-after"])},o.createElement("input",{type:"range",className:Vr.Input,id:t,name:t,min:s,max:i,step:g,value:y,disabled:l,onChange:$,onFocus:v,onBlur:b,"aria-valuemin":s,"aria-valuemax":i,"aria-valuenow":y,"aria-invalid":!!r,"aria-describedby":S}),C),P));function $(L){const{onChange:k}=e;k&&k(parseFloat(L.currentTarget.value),t)}}function ix({min:e=0,max:t=100,step:r=1,value:n,...a}){const i={id:m.useId(),min:e,max:t,step:r,...a};return ox(n)?o.createElement(Lv,Object.assign({value:n},i)):o.createElement(sx,Object.assign({value:n},i))}function ox(e){return Array.isArray(e)}var Ye={ResourceItem:"Polaris-ResourceItem",Actions:"Polaris-ResourceItem__Actions",ItemWrapper:"Polaris-ResourceItem__ItemWrapper",CheckboxWrapper:"Polaris-ResourceItem__CheckboxWrapper",focusedInner:"Polaris-ResourceItem--focusedInner",focused:"Polaris-ResourceItem--focused",selected:"Polaris-ResourceItem--selected",Link:"Polaris-ResourceItem__Link",Button:"Polaris-ResourceItem__Button",selectable:"Polaris-ResourceItem--selectable",disabled:"Polaris-ResourceItem--disabled",ListItem:"Polaris-ResourceItem__ListItem",hasBulkActions:"Polaris-ResourceItem--hasBulkActions"};const fr="All";class lx extends m.Component{constructor(...t){super(...t),this.state={actionsMenuVisible:!1,focused:!1,focusedInner:!1,selected:tm(this.props.id,this.props.context.selectedItems)},this.node=null,this.overlayRef=m.createRef(),this.buttonOverlay=m.createRef(),this.setNode=r=>{this.node=r},this.handleFocus=r=>{r.target===this.buttonOverlay.current||this.node&&r.target===this.overlayRef.current?this.setState({focused:!0,focusedInner:!1}):this.node&&this.node.contains(r.target)&&this.setState({focused:!0,focusedInner:!0})},this.handleBlur=({relatedTarget:r})=>{this.node&&r instanceof Element&&this.node.contains(r)||this.setState({focused:!1,focusedInner:!1})},this.handleMouseOut=()=>{this.state.focused&&this.setState({focused:!1,focusedInner:!1}),this.props.onMouseOut&&this.props.onMouseOut()},this.handleLargerSelectionArea=r=>{La(r),this.handleSelection(!this.state.selected,r.nativeEvent.shiftKey)},this.handleSelection=(r,n)=>{const{id:a,sortOrder:s,context:{onSelectionChange:i}}=this.props;a==null||i==null||(this.setState({focused:r,focusedInner:r}),i(r,a,s,n))},this.handleClick=r=>{La(r);const{id:n,onClick:a,url:s,context:{selectMode:i}}=this.props,{ctrlKey:l,metaKey:c}=r.nativeEvent,u=this.node&&this.node.querySelector("a");if(i){this.handleLargerSelectionArea(r);return}if(u!==r.target){if(a&&a(n),s&&(l||c)){window.open(s,"_blank");return}s&&u&&u.click()}},this.handleKeyUp=r=>{const{disabled:n,onClick:a=cx,context:{selectMode:s}}=this.props,{key:i}=r;i==="Enter"&&this.props.url&&!s&&!n&&a()},this.handleActionsClick=()=>{this.setState(({actionsMenuVisible:r})=>({actionsMenuVisible:!r}))},this.handleCloseRequest=()=>{this.setState({actionsMenuVisible:!1})}}static getDerivedStateFromProps(t,r){const n=tm(t.id,t.context.selectedItems);return r.selected===n?null:{selected:n}}shouldComponentUpdate(t,r){const{children:n,context:{selectedItems:a,...s},...i}=t,{children:l,context:{selectedItems:c,...u},...d}=this.props,h=t.context.selectMode;return!wn(this.state,r)||this.props.context.selectMode!==h||!t.context.selectMode&&(!wn(d,i)||!wn(u,s))}render(){const{children:t,url:r,external:n,media:a,shortcutActions:s,ariaControls:i,ariaExpanded:l,persistActions:c=!1,accessibilityLabel:u,name:d,context:{selectable:h,selectMode:f,hasBulkActions:p,loading:g,resourceName:b},i18n:v,verticalAlignment:y,dataHref:E,breakpoints:S,onMouseOver:_,disabled:R}=this.props,{actionsMenuVisible:x,focused:C,focusedInner:w,selected:P}=this.state;let N=null,$=null;if(h){const B=d||u||v.translate("Polaris.Common.checkbox");$=o.createElement("div",{className:Ye.CheckboxWrapper,onClick:La,onChange:this.handleLargerSelectionArea},o.createElement(nm,null,U=>o.createElement(Ln,{id:U,label:B,labelHidden:!0,checked:P,disabled:g||R,bleedInlineStart:"300",bleedInlineEnd:"300",bleedBlockStart:"300",bleedBlockEnd:"300",fill:!0,labelClassName:Ye.CheckboxLabel})))}(a||h)&&(N=o.createElement(de,{gap:"300",blockAlign:a&&h?"center":rm(y)},$,a));const L=T(Ye.ResourceItem,C&&Ye.focused,h&&Ye.selectable,P&&Ye.selected,f&&Ye.selectMode,c&&Ye.persistActions,w&&Ye.focusedInner,R&&Ye.disabled),k=T(Ye.ListItem,C&&!w&&Ye.focused,p&&Ye.hasBulkActions,P&&Ye.selected,h&&Ye.selectable);let A=null,O=null;if(s&&!g)if(c){A=S!=null&&S.lgUp?o.createElement("div",{className:Ye.Actions,onClick:La},o.createElement(Er,null,rn(s,{variant:"tertiary"}))):null;const B=d?v.translate("Polaris.ResourceList.Item.actionsDropdownLabel",{accessibilityLabel:d}):v.translate("Polaris.ResourceList.Item.actionsDropdown");O=!f&&(S!=null&&S.lgDown)?o.createElement("div",{onClick:La},o.createElement(nt,{activator:o.createElement(ye,{accessibilityLabel:B,onClick:this.handleActionsClick,variant:"tertiary",icon:Gs}),onClose:this.handleCloseRequest,active:x},o.createElement(nn,{items:s}))):null}else S!=null&&S.lgUp&&(A=o.createElement("div",{className:Ye.Actions,onClick:La},o.createElement(ne,{position:"absolute",insetBlockStart:"400",insetInlineEnd:"500"},o.createElement(Er,{variant:"segmented"},rn(s,{size:"slim"})))));const M=o.createElement(ne,{id:this.props.id,position:"relative",paddingInlineStart:"300",paddingInlineEnd:"300",paddingBlockStart:"300",paddingBlockEnd:"300",zIndex:"var(--pc-resource-item-content-stacking-order)"},o.createElement(po,{columns:{xs:"1fr auto"}},o.createElement(po,{columns:{xs:a||h?"auto 1fr":"1fr"},gap:"300"},N,o.createElement(de,{blockAlign:rm(y)},o.createElement(ne,{width:"100%",padding:"0"},t))),A,O)),D=g?-1:0,I=u||v.translate("Polaris.ResourceList.Item.viewItem",{itemName:d||b&&b.singular||""}),F=r?o.createElement(nm,null,B=>o.createElement(_r,{"aria-describedby":this.props.id,"aria-label":I,className:Ye.Link,url:r,external:n,tabIndex:D,id:B,ref:this.overlayRef})):o.createElement("button",{className:Ye.Button,"aria-label":I,"aria-controls":i,"aria-expanded":l,onClick:this.handleClick,tabIndex:D,ref:this.buttonOverlay});return o.createElement("li",{className:k,"data-href":E},o.createElement("div",{className:Ye.ItemWrapper},o.createElement("div",{ref:this.setNode,className:L,onClick:R?()=>{}:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyUp:this.handleKeyUp,onMouseOver:_,onMouseOut:this.handleMouseOut,"data-href":r},R?null:F,M)))}}function cx(){}function La(e){e.stopPropagation()}function tm(e,t){return!!(t&&(Array.isArray(t)&&t.includes(e)||t===fr))}function Mv(e){const t=_a();return o.createElement(lx,Object.assign({},e,{breakpoints:t,context:m.useContext(lh),i18n:se()}))}function rm(e){switch(e){case"leading":return"start";case"trailing":return"end";case"center":return"center";case"fill":return"stretch";case"baseline":return"baseline";default:return"start"}}function nm(e){const t=m.useId();return e.children(t)}var $e={FiltersWrapper:"Polaris-ResourceList__FiltersWrapper",ResourceListWrapper:"Polaris-ResourceList__ResourceListWrapper",ResourceList:"Polaris-ResourceList",HeaderOuterWrapper:"Polaris-ResourceList__HeaderOuterWrapper",BulkActionsWrapper:"Polaris-ResourceList__BulkActionsWrapper","HeaderWrapper-disabled":"Polaris-ResourceList__HeaderWrapper--disabled","HeaderWrapper-overlay":"Polaris-ResourceList__HeaderWrapper--overlay",HeaderWrapper:"Polaris-ResourceList__HeaderWrapper","HeaderWrapper-isSticky":"Polaris-ResourceList__HeaderWrapper--isSticky",HeaderContentWrapper:"Polaris-ResourceList__HeaderContentWrapper","HeaderWrapper-inSelectMode":"Polaris-ResourceList__HeaderWrapper--inSelectMode",SortWrapper:"Polaris-ResourceList__SortWrapper",AlternateToolWrapper:"Polaris-ResourceList__AlternateToolWrapper","HeaderWrapper-hasSelect":"Polaris-ResourceList__HeaderWrapper--hasSelect","HeaderWrapper-hasAlternateTool":"Polaris-ResourceList__HeaderWrapper--hasAlternateTool","HeaderWrapper-hasSort":"Polaris-ResourceList__HeaderWrapper--hasSort",HeaderTitleWrapper:"Polaris-ResourceList__HeaderTitleWrapper",SelectAllActionsWrapper:"Polaris-ResourceList__SelectAllActionsWrapper",SelectAllActionsWrapperSticky:"Polaris-ResourceList__SelectAllActionsWrapperSticky",SelectAllActionsWrapperAtEnd:"Polaris-ResourceList__SelectAllActionsWrapperAtEnd",SelectAllActionsWrapperAtEndAppear:"Polaris-ResourceList__SelectAllActionsWrapperAtEndAppear",BulkActionsWrapperVisible:"Polaris-ResourceList__BulkActionsWrapperVisible",PaginationWrapper:"Polaris-ResourceList__PaginationWrapper",CheckableButtonWrapper:"Polaris-ResourceList__CheckableButtonWrapper",SelectButtonWrapper:"Polaris-ResourceList__SelectButtonWrapper",EmptySearchResultWrapper:"Polaris-ResourceList__EmptySearchResultWrapper",ItemWrapper:"Polaris-ResourceList__ItemWrapper","ItemWrapper-isLoading":"Polaris-ResourceList__ItemWrapper--isLoading",SpinnerContainer:"Polaris-ResourceList__SpinnerContainer",LoadingOverlay:"Polaris-ResourceList__LoadingOverlay",DisabledPointerEvents:"Polaris-ResourceList__DisabledPointerEvents",disableTextSelection:"Polaris-ResourceList--disableTextSelection"},kr={Select:"Polaris-Select",disabled:"Polaris-Select--disabled",error:"Polaris-Select--error",Backdrop:"Polaris-Select__Backdrop",Input:"Polaris-Select__Input",Content:"Polaris-Select__Content",InlineLabel:"Polaris-Select__InlineLabel",Icon:"Polaris-Select__Icon",SelectedOption:"Polaris-Select__SelectedOption",Prefix:"Polaris-Select__Prefix",hover:"Polaris-Select--hover",toneMagic:"Polaris-Select--toneMagic"};const am="";function Fv({options:e,label:t,labelAction:r,labelHidden:n,labelInline:a,disabled:s,helpText:i,placeholder:l,id:c,name:u,value:d=am,error:h,onChange:f,onFocus:p,onBlur:g,requiredIndicator:b,tone:v}){const{value:y,toggle:E}=Wt(!1),S=m.useId(),_=c??S,R=a?!0:n,x=T(kr.Select,h&&kr.error,v&&kr[Be("tone",v)],s&&kr.disabled),C=m.useCallback(I=>{E(),p==null||p(I)},[p,E]),w=m.useCallback(I=>{E(),g==null||g(I)},[g,E]),P=f?I=>f(I.currentTarget.value,_):void 0,N=[];i&&N.push(Bb(_)),h&&N.push(`${_}Error`);let L=(e||[]).map(ux);l&&(L=[{label:l,value:am,disabled:!0},...L]);const k=a&&o.createElement(ne,{paddingInlineEnd:"100"},o.createElement(G,{as:"span",variant:"bodyMd",tone:v&&v==="magic"&&!y?"magic-subdued":"subdued",truncate:!0},t)),A=dx(L,d),O=A.prefix&&o.createElement("div",{className:kr.Prefix},A.prefix),M=o.createElement("div",{className:kr.Content,"aria-hidden":!0,"aria-disabled":s},k,O,o.createElement("span",{className:kr.SelectedOption},A.label),o.createElement("span",{className:kr.Icon},o.createElement(le,{source:Db}))),D=L.map(fx);return o.createElement(Js,{id:_,label:t,error:h,action:r,labelHidden:R,helpText:i,requiredIndicator:b,disabled:s},o.createElement("div",{className:x},o.createElement("select",{id:_,name:u,value:d,className:kr.Input,disabled:s,onFocus:C,onBlur:w,onChange:P,"aria-invalid":!!h,"aria-describedby":N.length?N.join(" "):void 0,"aria-required":b},D),M,o.createElement("div",{className:kr.Backdrop})))}function sm(e){return typeof e=="string"}function hh(e){return typeof e=="object"&&"options"in e&&e.options!=null}function im(e){return{label:e,value:e}}function ux(e){if(sm(e))return im(e);if(hh(e)){const{title:t,options:r}=e;return{title:t,options:r.map(n=>sm(n)?im(n):n)}}return e}function dx(e,t){const r=hx(e);let n=r.find(a=>t===a.value);return n===void 0&&(n=r.find(a=>!a.hidden)),n||{value:"",label:""}}function hx(e){let t=[];return e.forEach(r=>{hh(r)?t=t.concat(r.options):t.push(r)}),t}function om(e){const{value:t,label:r,prefix:n,key:a,...s}=e;return o.createElement("option",Object.assign({key:a??t,value:t},s),r)}function fx(e){if(hh(e)){const{title:t,options:r}=e;return o.createElement("optgroup",{label:t,key:t},r.map(om))}return om(e)}const px=28,mx=45;function lm(e,t){return e.map((r,n)=>t(r,n))}const ys=()=>typeof window>"u"?!1:window.innerWidth<parseFloat(F_(D_.breakpoints["breakpoints-sm"])??"");function gx(e,t){return Object.prototype.hasOwnProperty.call(e,"id")?e.id:t.toString()}function Dv({items:e,filterControl:t,flushFilters:r,emptyState:n,emptySearchState:a,resourceName:s,promotedBulkActions:i,bulkActions:l,selectedItems:c=[],isFiltered:u,selectable:d,hasMoreItems:h,loading:f,headerContent:p,showHeader:g,totalItemsCount:b,sortValue:v,sortOptions:y,alternateTool:E,onSortChange:S,onSelectionChange:_,renderItem:R,idForItem:x=gx,resolveItemId:C,pagination:w}){const P=se(),[N,$]=m.useState(!!(c&&c.length>0)),[L,k]=m.useState(0),[A,O]=m.useState(),[M,D]=m.useState(ys()),I=m.useReducer((ue=0)=>ue+1,0)[1],F=m.useRef(null),B=M_(()=>({singular:P.translate("Polaris.ResourceList.defaultItemSingular"),plural:P.translate("Polaris.ResourceList.defaultItemPlural")})),U=m.useRef(null),V=ue=>{$(ue),!ue&&_&&_([])},W=rr(()=>{const ue=ys();c&&c.length===0&&N&&!ue&&V(!1),M!==ue&&D(ue)},50,{leading:!0,trailing:!0,maxWait:50});mt("resize",W);const H=!!(i&&i.length>0||l&&l.length>0||d)&&!M,Y=m.useMemo(()=>{let ue="indeterminate";return!c||Array.isArray(c)&&c.length===0?ue=!1:(c===fr||Array.isArray(c)&&c.length===e.length)&&(ue=!0),ue},[e.length,c]),j=s||B.current,J=()=>{const ue=e.length,Me=!f&&(!b&&ue===1||b===1)?j.singular:j.plural;return f?P.translate("Polaris.ResourceList.loading",{resource:Me}):b?P.translate("Polaris.ResourceList.showingTotalCount",{itemsCount:ue,totalItemsCount:b,resource:Me}):p||P.translate("Polaris.ResourceList.showing",{itemsCount:ue,resource:Me})},[ge,Oe]=m.useState(c===fr?`${e.length}+`:c.length);m.useEffect(()=>{(c===fr||c.length>0)&&Oe(c===fr?`${e.length}+`:c.length)},[c,e.length]);const Ce=P.translate("Polaris.ResourceList.selected",{selectedItemsCount:ge}),De=m.useMemo(()=>{const ue=c.length,Me=e.length,yt=ue===Me;return Me===1&&yt?P.translate("Polaris.ResourceList.a11yCheckboxDeselectAllSingle",{resourceNameSingular:j.singular}):Me===1?P.translate("Polaris.ResourceList.a11yCheckboxSelectAllSingle",{resourceNameSingular:j.singular}):yt?P.translate("Polaris.ResourceList.a11yCheckboxDeselectAllMultiple",{itemsLength:e.length,resourceNamePlural:j.plural}):P.translate("Polaris.ResourceList.a11yCheckboxSelectAllMultiple",{itemsLength:e.length,resourceNamePlural:j.plural})},[P,e.length,j.singular,j.plural,c.length]),je=m.useMemo(()=>{if(!(!H||!h)&&c===fr)return P.translate(u?"Polaris.ResourceList.allFilteredItemsSelected":"Polaris.ResourceList.allItemsSelected",{itemsLength:e.length,resourceNamePlural:j.plural})},[h,P,u,H,e,j.plural,c]),Le=m.useCallback(()=>{const ue=c===fr?lm(e,x):fr;_&&_(ue)},[x,e,_,c]),z=m.useMemo(()=>!H||!h?void 0:{content:c===fr?P.translate("Polaris.Common.undo"):P.translate(u?"Polaris.ResourceList.selectAllFilteredItems":"Polaris.ResourceList.selectAllItems",{itemsLength:e.length,resourceNamePlural:j.plural}),onAction:Le},[Le,h,P,u,H,e.length,j.plural,c]),ae={title:P.translate("Polaris.ResourceList.emptySearchResultTitle",{resourceNamePlural:j.plural}),description:P.translate("Polaris.ResourceList.emptySearchResultDescription")},we=m.useCallback(()=>{if(U.current!=null){if(typeof window>"u")return;const ue=U.current.getBoundingClientRect(),Me=Math.max(document.documentElement?document.documentElement.clientHeight:0,window.innerHeight||0),yt=Me-ue.height,Br=e.length===1?px:mx,Xt=yt>0?(ue.height-Br)/2:(Me-ue.top-Br)/2;k(Xt)}},[U,e.length]),he=e.length>0;m.useEffect(()=>{f&&we()},[f,we]),m.useEffect(()=>{c&&c.length>0&&!N&&$(!0),(!c||c.length===0)&&!ys()&&$(!1)},[c,N]),m.useEffect(()=>{I()},[I,e]);const be=(ue,Me)=>{const yt=x(ue,Me);return R(ue,yt,Me)},ie=(ue,Me,yt)=>{const Br=Math.min(ue,Me),Xt=Math.max(ue,Me);return e.slice(Br,Xt+1).map(yt)},pe=(ue,Me,yt,Br)=>{if(c==null||_==null)return;let Xt=c===fr?lm(e,x):[...c];yt!==void 0&&O(yt);const Ei=A;let ps=[Me];if(Br&&Ei!=null&&yt!==void 0&&C&&(ps=ie(Ei,yt,C)),Xt=[...new Set([...Xt,...ps])],!ue)for(const gc of ps)Xt.splice(Xt.indexOf(gc),1);Xt.length===0&&!ys()?V(!1):Xt.length>0&&V(!0),_&&_(Xt)},Ae=()=>{let ue;Array.isArray(c)&&c.length===e.length||c===fr?ue=[]:ue=e.map((Me,yt)=>x(Me,yt)),ue.length===0&&!ys()?V(!1):ue.length>0&&V(!0),_&&_(ue),setTimeout(()=>{var Me;(Me=F==null?void 0:F.current)==null||Me.focus()},0)},qe=T($e.BulkActionsWrapper,N&&$e.BulkActionsWrapperVisible),Fe=H?o.createElement("div",{className:qe},o.createElement(Yd,{selectMode:N,onSelectModeToggle:V,label:Ce,paginatedSelectAllAction:z,paginatedSelectAllText:je,promotedActions:i,actions:l,disabled:f,accessibilityLabel:De,selected:Y,onToggleAll:Ae,ref:F,buttonSize:"medium"})):null,me=t?o.createElement("div",{className:T(!r&&$e.FiltersWrapper)},t):null,Ue=y&&y.length>0&&!E?o.createElement("div",{className:$e.SortWrapper},o.createElement(Fv,{label:P.translate("Polaris.ResourceList.sortingLabel"),labelInline:!M,labelHidden:M,options:y,onChange:S,value:v,disabled:N})):null,Je=E&&!Ue?o.createElement("div",{className:$e.AlternateToolWrapper},E):null,ur=o.createElement("div",{className:$e.HeaderTitleWrapper},o.createElement(G,{as:"span",variant:"bodyMd"},J())),Z=H?o.createElement("div",{className:$e.SelectButtonWrapper},o.createElement(ye,{disabled:N,icon:Iy,onClick:()=>V(!0)},P.translate("Polaris.ResourceList.selectButtonText"))):null,te=H?o.createElement("div",{className:$e.CheckableButtonWrapper},o.createElement(Xd,{accessibilityLabel:De,label:J(),onToggleAll:Ae,disabled:f,ref:F,selected:Y})):null,ee=H||y&&y.length>0||E,oe=f?o.createElement("div",{className:$e["HeaderWrapper-overlay"]}):null,Re=n&&!he&&!f,ke=!Re&&t&&!he&&!f,Pt=!Re&&g!==!1&&!ke&&(g||ee)&&U.current&&o.createElement("div",{className:$e.HeaderOuterWrapper},o.createElement(Jo,{boundingElement:U.current},ue=>{const Me=T($e.HeaderWrapper,y&&y.length>0&&!E&&$e["HeaderWrapper-hasSort"],E&&$e["HeaderWrapper-hasAlternateTool"],H&&$e["HeaderWrapper-hasSelect"],f&&$e["HeaderWrapper-disabled"],H&&N&&Fe&&$e["HeaderWrapper-inSelectMode"],ue&&$e["HeaderWrapper-isSticky"]);return o.createElement("div",{className:Me},oe,o.createElement("div",{className:$e.HeaderContentWrapper},ur,te,Je,Ue,Z),Fe)})),Mt=ke?a||o.createElement("div",{className:$e.EmptySearchResultWrapper},o.createElement(Qd,Object.assign({},ae,{withIllustration:!0}))):null,bt=Re?n:null,Wn={paddingTop:`${L>0?L:8}px`},Un=e.length<2?"small":"large",jn=f?o.createElement(o.Fragment,null,o.createElement("li",{className:$e.SpinnerContainer,style:Wn},o.createElement(da,{size:Un,accessibilityLabel:"Items are loading"})),o.createElement("li",{className:$e.LoadingOverlay})):null,hc=T($e.ItemWrapper,f&&$e["ItemWrapper-isLoading"]),fc=f&&!he?o.createElement("div",{className:hc,tabIndex:-1},jn):null,pc=T($e.ResourceList,f&&$e.disabledPointerEvents,N&&$e.disableTextSelection),hs=he?o.createElement("ul",{className:pc,ref:U,"aria-live":"polite","aria-busy":f},jn,m.Children.toArray(e.map(be))):null,mc=w?o.createElement("div",{className:$e.PaginationWrapper},o.createElement(Mo,Object.assign({type:"table"},w))):null,fs={selectable:H,selectedItems:c,selectMode:N,hasBulkActions:!!l,resourceName:j,loading:f,onSelectionChange:pe};return o.createElement(lh.Provider,{value:fs},me,o.createElement("div",{className:$e.ResourceListWrapper},Pt,hs,Mt,bt,fc,mc))}Dv.Item=Mv;var vs={SelectAllActions:"Polaris-SelectAllActions","SelectAllActions-not-sticky":"Polaris-SelectAllActions--selectAllActionsNotSticky","SelectAllActions-entering":"Polaris-SelectAllActions__SelectAllActions--entering","SelectAllActions-exiting":"Polaris-SelectAllActions__SelectAllActions--exiting","SelectAllActions-hasPagination":"Polaris-SelectAllActions__SelectAllActions--hasPagination","SelectAllActions-exited":"Polaris-SelectAllActions__SelectAllActions--exited","SelectAllActions-entered":"Polaris-SelectAllActions__SelectAllActions--entered",AllAction:"Polaris-SelectAllActions__AllAction"};const bx=m.forwardRef(function({label:t,selectMode:r,paginatedSelectAllText:n,paginatedSelectAllAction:a,disabled:s,isSticky:i,hasPagination:l,accessibilityLabel:c,selected:u,onToggleAll:d},h){const f=m.useRef(null),p=a?o.createElement(nr,{className:vs.AllAction,onClick:a.onAction,size:"slim",disabled:s},o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},a.content)):null,g=n&&a,v={accessibilityLabel:c,label:g?n:t,selected:u,onToggleAll:d,disabled:s,ariaLive:g?"polite":void 0,ref:h},y=c&&d?o.createElement(Xd,v):null;return o.createElement(qs,{timeout:0,in:r,key:"markup",nodeRef:f},S=>{const _=T(vs.SelectAllActions,l&&vs["SelectAllActions-hasPagination"],!i&&vs["SelectAllActions-not-sticky"],S&&vs[`SelectAllActions-${S}`]);return o.createElement("div",{className:_,ref:f},o.createElement(ne,{background:"bg-surface-secondary",borderBlockStartWidth:"025",borderColor:"border",width:"100%",paddingBlockStart:"300",paddingBlockEnd:"300",paddingInlineStart:"300",paddingInlineEnd:"400"},o.createElement(de,{gap:"200",align:"start",blockAlign:"center"},y,o.createElement(G,{as:"span",variant:"bodySm",fontWeight:"medium"},g?n:t),p)))})});function yx({enabled:e,action:t,children:r}){const n=m.useId(),a=t?vr(t,{role:"switch",ariaChecked:e?"true":"false",size:"slim"}):null;return o.createElement(Rn,{sectioned:!0},o.createElement(Wy,{action:a},o.createElement("label",{htmlFor:n},r)))}var cm={SkeletonBodyTextContainer:"Polaris-SkeletonBodyText__SkeletonBodyTextContainer",SkeletonBodyText:"Polaris-SkeletonBodyText"};function vx({lines:e=3}){const t=[];for(let r=0;r<e;r++)t.push(o.createElement("div",{className:cm.SkeletonBodyText,key:r}));return o.createElement("div",{className:cm.SkeletonBodyTextContainer},t)}var um={DisplayText:"Polaris-SkeletonDisplayText__DisplayText",sizeSmall:"Polaris-SkeletonDisplayText--sizeSmall",sizeMedium:"Polaris-SkeletonDisplayText--sizeMedium",sizeLarge:"Polaris-SkeletonDisplayText--sizeLarge",sizeExtraLarge:"Polaris-SkeletonDisplayText--sizeExtraLarge"};function Ex({size:e="medium",maxWidth:t}){const r=T(um.DisplayText,e&&um[Be("size",e)]),n={"--pc-skeleton-display-text-max-width":t??void 0};return o.createElement("div",{className:r,style:_d(n)})}var Sx={SkeletonTitle:"Polaris-SkeletonPage__SkeletonTitle"};function _x({children:e,fullWidth:t,narrowWidth:r,primaryAction:n,title:a="",backAction:s}){const i=se(),l=a?o.createElement(G,{as:"h1",variant:"headingLg",fontWeight:"bold"},a):o.createElement("div",{className:Sx.SkeletonTitle},o.createElement(ne,{background:"bg-fill-tertiary",minWidth:"120px",minHeight:"28px",borderRadius:"100"})),c=n?o.createElement(ne,{id:"SkeletonPage-PrimaryAction",borderRadius:"100",background:"bg-fill-tertiary",minHeight:"2.25rem",minWidth:"6.25rem"}):null,u=s?o.createElement(ne,{borderRadius:"100",background:"bg-fill-tertiary",minHeight:"2.25rem",minWidth:"2.25rem",maxWidth:"2.25rem"}):null;return o.createElement(rt,{gap:"400",inlineAlign:"center"},o.createElement(ne,Object.assign({width:"100%",padding:"0",paddingInlineStart:{sm:"600"},paddingInlineEnd:{sm:"600"},maxWidth:"var(--pc-skeleton-page-max-width)","aria-label":i.translate("Polaris.SkeletonPage.loadingLabel"),role:"status"},r&&{maxWidth:"var(--pc-skeleton-page-max-width-narrow)"},t&&{maxWidth:"none"}),o.createElement(rt,null,o.createElement(ne,{paddingBlockStart:{xs:"400",md:"500"},paddingBlockEnd:{xs:"400",md:"500"},paddingInlineStart:{xs:"400",sm:"0"},paddingInlineEnd:{xs:"400",sm:"0"},width:"100%"},o.createElement(de,{gap:"400",align:"space-between",blockAlign:"center"},o.createElement(de,{gap:"400"},u,o.createElement(ne,{paddingBlockStart:"100",paddingBlockEnd:"100"},l)),c)),o.createElement(ne,{paddingBlockEnd:"200",width:"100%"},e))))}var Ii={Tabs:"Polaris-SkeletonTabs__Tabs",Tab:"Polaris-SkeletonTabs__Tab",TabText:"Polaris-SkeletonTabs__TabText",fitted:"Polaris-SkeletonTabs--fitted"};function Cx({count:e=2,fitted:t=!1}){return o.createElement("div",{className:T(Ii.Tabs,t&&Ii.fitted)},[...Array(e).keys()].map(r=>o.createElement("div",{key:r,className:T(Ii.Tab)},o.createElement("div",{className:Ii.TabText}))))}var dm={SkeletonThumbnail:"Polaris-SkeletonThumbnail",sizeExtraSmall:"Polaris-SkeletonThumbnail--sizeExtraSmall",sizeSmall:"Polaris-SkeletonThumbnail--sizeSmall",sizeMedium:"Polaris-SkeletonThumbnail--sizeMedium",sizeLarge:"Polaris-SkeletonThumbnail--sizeLarge"};function wx({size:e="medium"}){const t=T(dm.SkeletonThumbnail,e&&dm[Be("size",e)]);return o.createElement("div",{className:t})}var qc={Thumbnail:"Polaris-Thumbnail",sizeExtraSmall:"Polaris-Thumbnail--sizeExtraSmall",sizeSmall:"Polaris-Thumbnail--sizeSmall",sizeMedium:"Polaris-Thumbnail--sizeMedium",sizeLarge:"Polaris-Thumbnail--sizeLarge",transparent:"Polaris-Thumbnail--transparent"};function Px({source:e,alt:t,size:r="medium",transparent:n}){const a=T(qc.Thumbnail,r&&qc[Be("size",r)],n&&qc.transparent),s=typeof e=="string"?o.createElement(Mr,{alt:t,source:e}):o.createElement(le,{accessibilityLabel:t,source:e});return o.createElement("span",{className:a},s)}const Ax=m.memo(function(t){const r=m.useId(),{showToast:n,hideToast:a}=Ca();return ih(()=>(n({id:r,...t}),()=>{a({id:r})}),[t]),null});var Tt={TopBar:"Polaris-TopBar",Container:"Polaris-TopBar__Container",LogoDisplayControl:"Polaris-TopBar__LogoDisplayControl",LogoDisplayContainer:"Polaris-TopBar__LogoDisplayContainer",LogoContainer:"Polaris-TopBar__LogoContainer",hasLogoSuffix:"Polaris-TopBar--hasLogoSuffix",Logo:"Polaris-TopBar__Logo",LogoLink:"Polaris-TopBar__LogoLink",ContextControl:"Polaris-TopBar__ContextControl",NavigationIcon:"Polaris-TopBar__NavigationIcon",focused:"Polaris-TopBar--focused",IconWrapper:"Polaris-TopBar__IconWrapper",LeftContent:"Polaris-TopBar__LeftContent",Search:"Polaris-TopBar__Search",RightContent:"Polaris-TopBar__RightContent",SecondaryMenu:"Polaris-TopBar__SecondaryMenu"},Ni={Search:"Polaris-TopBar-Search",SearchContent:"Polaris-TopBar-Search__SearchContent",visible:"Polaris-TopBar-Search--visible",Results:"Polaris-TopBar-Search__Results"},hm={SearchDismissOverlay:"Polaris-TopBar-SearchDismissOverlay",visible:"Polaris-TopBar-SearchDismissOverlay--visible"};function Tx({onDismiss:e,visible:t}){const r=m.useRef(null),n=m.useCallback(({target:a})=>{a===r.current&&e!=null&&e()},[e]);return o.createElement(o.Fragment,null,t?o.createElement(Ko,null):null,o.createElement("div",{ref:r,className:T(hm.SearchDismissOverlay,t&&hm.visible),onClick:n}))}function Rx({visible:e,children:t,onDismiss:r,overlayVisible:n=!1}){if(t==null)return null;const a=e?o.createElement(Tx,{onDismiss:r,visible:n}):null;return o.createElement(o.Fragment,null,a,o.createElement("div",{className:T(Ni.Search,e&&Ni.visible)},o.createElement("div",{className:Ni.SearchContent},o.createElement("div",{className:Ni.Results},t))))}var Xn={SearchField:"Polaris-TopBar-SearchField",focused:"Polaris-TopBar-SearchField--focused",Input:"Polaris-TopBar-SearchField__Input",Backdrop:"Polaris-TopBar-SearchField__Backdrop",BackdropShowFocusBorder:"Polaris-TopBar-SearchField__BackdropShowFocusBorder",Icon:"Polaris-TopBar-SearchField__Icon",Clear:"Polaris-TopBar-SearchField__Clear"};function kx({value:e,focused:t,active:r,placeholder:n,onChange:a,onFocus:s,onBlur:i,onCancel:l,showFocusBorder:c}){const u=se(),[d,h]=m.useState(!1),f=m.useRef(null),p=m.useId(),g=m.useCallback(({currentTarget:_})=>{a(_.value)},[a]),b=m.useCallback(()=>s&&s(),[s]),v=m.useCallback(()=>i&&i(),[i]),y=m.useCallback(()=>{l&&l(),f.current&&(f.current.value="",a(""),f.current.focus())},[l,a]);m.useEffect(()=>{f.current&&(t?f.current.focus():f.current.blur())},[t]);const E=e!==""&&o.createElement("button",{type:"button","aria-label":u.translate("Polaris.TopBar.SearchField.clearButtonLabel"),className:Xn.Clear,onClick:y,onBlur:()=>{h(!1),y()},onFocus:()=>{b(),h(!0)}},o.createElement(le,{source:H_})),S=T(Xn.SearchField,(t||r||d)&&Xn.focused);return o.createElement("div",{className:S,onFocus:b,onBlur:v},o.createElement(G,{as:"span",visuallyHidden:!0},o.createElement("label",{htmlFor:p},u.translate("Polaris.TopBar.SearchField.search"))),o.createElement("input",{id:p,className:Xn.Input,placeholder:n,type:"search",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",ref:f,value:e,onChange:g,onKeyDown:xx}),o.createElement("span",{className:Xn.Icon},o.createElement(le,{source:Xs})),E,o.createElement("div",{className:T(Xn.Backdrop,c&&Xn.BackdropShowFocusBorder)}))}function xx(e){e.key==="Enter"&&e.preventDefault()}var fm={Details:"Polaris-TopBar-UserMenu__Details"},pm={MessageIndicatorWrapper:"Polaris-MessageIndicator__MessageIndicatorWrapper",MessageIndicator:"Polaris-MessageIndicator"};function Ix({children:e,active:t}){const r=t&&o.createElement("div",{className:pm.MessageIndicator});return o.createElement("div",{className:pm.MessageIndicatorWrapper},r,e)}var $i={ActivatorWrapper:"Polaris-TopBar-Menu__ActivatorWrapper",Activator:"Polaris-TopBar-Menu__Activator","Activator-userMenu":"Polaris-TopBar-Menu__Activator--userMenu",Section:"Polaris-TopBar-Menu__Section"},Nx={Section:"Polaris-Menu-Message__Section"};function $x({title:e,description:t,action:r,link:n,badge:a}){const s=a&&o.createElement(Tn,{tone:a.tone},a.content),{to:i,content:l}=n,{onClick:c,content:u}=r;return o.createElement("div",{className:Nx.Section},o.createElement(nt.Section,null,o.createElement(Sr,{vertical:!0,spacing:"tight"},o.createElement(Ub,null,o.createElement(G,{variant:"headingMd",as:"h2"},e,s),o.createElement("p",null,t)),o.createElement(jb,{url:i},l),o.createElement(ye,{variant:"plain",onClick:c},u))))}function Hv(e){const{actions:t,onOpen:r,onClose:n,open:a,activatorContent:s,message:i,accessibilityLabel:l,customWidth:c,userMenu:u}=e,d=i&&i.badge&&{content:i.badge.content,tone:i.badge.tone},h=i&&o.createElement($x,{title:i.title,description:i.description,action:{onClick:i.action.onClick,content:i.action.content},link:{to:i.link.to,content:i.link.content},badge:d});return o.createElement(nt,{activator:o.createElement("div",{className:$i.ActivatorWrapper},o.createElement("button",{type:"button",className:T($i.Activator,u&&$i["Activator-userMenu"]),onClick:r,"aria-label":l},s)),active:a,onClose:n,fixed:!0,fullHeight:!0,preferredAlignment:"right"},o.createElement("div",{className:$i.MenuItems},o.createElement(ne,{width:c},o.createElement(nn,{actionRole:"menuitem",onActionAnyItem:n,sections:t}),h)))}function Ox({name:e,detail:t,avatar:r,initials:n,actions:a,message:s,onToggle:i,open:l,accessibilityLabel:c,customActivator:u,customWidth:d}){const h=!!s,f=u||o.createElement(o.Fragment,null,o.createElement("span",{className:fm.Details},o.createElement(G,{as:"p",variant:"bodySm",alignment:"start",fontWeight:"medium",truncate:!0},e),o.createElement("span",{className:fm.Message},o.createElement(G,{as:"p",variant:"bodyXs",alignment:"start",tone:"text-inverse-secondary",truncate:!0},t))),o.createElement(Ix,{active:h},o.createElement(Ud,{size:"md",initials:n&&n.replace(" ",""),source:r,name:e})));return o.createElement(Hv,{activatorContent:f,open:l,onOpen:i,onClose:i,actions:a,message:s,accessibilityLabel:c,customWidth:d,userMenu:!0})}const Zo=function({showNavigationToggle:t,userMenu:r,searchResults:n,searchField:a,secondaryMenu:s,searchResultsVisible:i,searchResultsOverlayVisible:l=!1,onNavigationToggle:c,onSearchResultsDismiss:u,contextControl:d,logoSuffix:h}){const f=se(),{logo:p}=Ca(),{value:g,setTrue:b,setFalse:v}=Wt(!1),y=T(Tt.NavigationIcon,g&&Tt.focused),E=t?o.createElement("button",{type:"button",className:y,onClick:c,onFocus:b,onBlur:v,"aria-label":f.translate("Polaris.TopBar.toggleMenuLabel")},o.createElement("div",{className:Tt.IconWrapper},o.createElement(le,{source:Fy}))):null,S=sh(p,104);let _;if(d)_=o.createElement("div",{className:Tt.ContextControl},d);else if(p){const x=T(Tt.LogoContainer,t||a?Tt.LogoDisplayControl:Tt.LogoDisplayContainer,h&&Tt.hasLogoSuffix);_=o.createElement("div",{className:x},o.createElement(_r,{url:p.url||"",className:Tt.LogoLink,style:{width:S}},o.createElement(Mr,{source:p.topBarSource||"",alt:p.accessibilityLabel||"",className:Tt.Logo,style:{width:S}})),h)}const R=a?o.createElement(o.Fragment,null,a,o.createElement(Rx,{visible:i,onDismiss:u,overlayVisible:l},n)):null;return o.createElement("div",{className:Tt.TopBar},o.createElement("div",{className:Tt.Container},o.createElement("div",{className:Tt.LeftContent},E,_),o.createElement("div",{className:Tt.Search},R),o.createElement("div",{className:Tt.RightContent},o.createElement("div",{className:Tt.SecondaryMenu},s),r)))};Zo.Menu=Hv;Zo.SearchField=kx;Zo.UserMenu=Ox;function Lx({content:e,onAction:t,...r},n,a){return o.createElement(nr,Object.assign({key:a,onClick:t},r,n),e)}const rd=60,nd=rd*60;function mm(e){return e>9?String(e):`0${e}`}function fh(e){return{hours:Math.floor(e/nd),minutes:Math.floor(e%nd/rd),seconds:e%rd}}function Mx(e){const{hours:t,minutes:r,seconds:n}=fh(e),a=e>nd,s=a?`${t}:`:"",i=`${a?mm(r):r}:`,l=`${mm(n)}`;return`${s}${i}${l}`}function Fx(e){const{hours:t,minutes:r,seconds:n}=fh(e);let a="Polaris.VideoThumbnail.playButtonA11yLabel.duration";return t?(a+=`.hours.${t>1?"other":"one"}`,n?r>1?a+=`${n>1?".minutesAndSeconds":".minutesAndSecond"}`:r===1?a+=`${n>1?".minuteAndSeconds":".minuteAndSecond"}`:a+=`${n>1?".andSeconds":".andSecond"}`:r?a+=`${r>1?".andMinutes":".andMinute"}`:a+=".only"):r?(a+=`.minutes.${r>1?"other":"one"}`,n?a+=`${n>1?".andSeconds":".andSecond"}`:a+=".only"):n&&(a+=n>1?".seconds.other":".seconds.one"),a}var Kr={Thumbnail:"Polaris-VideoThumbnail__Thumbnail",ThumbnailContainer:"Polaris-VideoThumbnail__ThumbnailContainer",PlayButton:"Polaris-VideoThumbnail__PlayButton",Timestamp:"Polaris-VideoThumbnail__Timestamp",PlayIcon:"Polaris-VideoThumbnail__PlayIcon",Progress:"Polaris-VideoThumbnail__Progress",Indicator:"Polaris-VideoThumbnail__Indicator",ProgressBar:"Polaris-VideoThumbnail__ProgressBar",Label:"Polaris-VideoThumbnail__Label"};function Dx({thumbnailUrl:e,videoLength:t=0,videoProgress:r=0,showVideoProgress:n=!1,accessibilityLabel:a,onClick:s,onBeforeStartPlaying:i}){const l=se(),{isNavigationCollapsed:c}=rs();let u;if(a)u=a;else if(t){const{hours:f,minutes:p,seconds:g}=fh(t);u=l.translate("Polaris.VideoThumbnail.playButtonA11yLabel.defaultWithDuration",{duration:l.translate(Fx(t),{hourCount:f,minuteCount:p,secondCount:g})})}else u=l.translate("Polaris.VideoThumbnail.playButtonA11yLabel.default");const d=t?o.createElement("div",{className:Kr.Timestamp},o.createElement(Sr,{alignment:"center",spacing:"extraTight"},o.createElement("span",{className:Kr.PlayIcon},o.createElement(le,{source:Hy})),o.createElement(G,{variant:c?"bodyLg":"bodyMd",as:"p",fontWeight:"semibold"},Mx(t)))):null;let h=null;if(n){const f=Hx(t,r),p=Math.round(f*100);h=o.createElement("div",{className:Kr.Progress},o.createElement("progress",{className:Kr.ProgressBar,value:p,max:"100"}),o.createElement("div",{className:Kr.Indicator,style:{transform:`scaleX(${f})`}},o.createElement("span",{className:Kr.Label},p,"%")))}return o.createElement("div",{className:Kr.ThumbnailContainer},o.createElement("div",{className:Kr.Thumbnail,style:{backgroundImage:`url(${e})`}}),o.createElement("button",{type:"button",className:Kr.PlayButton,"aria-label":u,onClick:s,onMouseEnter:i,onFocus:i,onTouchStart:i},d),h)}function Hx(e,t){if(t>e,t>0&&e>0){const r=parseFloat((t/e).toFixed(2));return r>1?1:r}return 0}function Bx(){return m.useContext(Tv)}function Wx(){const{selected:e}=m.useContext(Yo);return e}function Ux(){return m.useContext(kv)}const jx=Object.freeze(Object.defineProperty({__proto__:null,AccountConnection:jA,ActionList:nn,ActionMenu:B_,AlphaPicker:Zk,AppProvider:nC,get AutoSelection(){return Sn},Autocomplete:Yy,Avatar:Ud,Backdrop:zo,Badge:Tn,get BadgeProgressValue(){return W_},get BadgeStatusValue(){return U_},Banner:cT,Bleed:Lb,BlockStack:rt,Box:ne,Breadcrumbs:j_,Button:ye,ButtonGroup:Er,CalloutCard:wT,Card:Nb,Checkbox:Ln,ChoiceList:rv,Collapsible:Go,ColorPicker:jT,Combobox:Vo,Connected:q_,ContextualSaveBar:KT,DATA_ATTRIBUTE:V_,DEFAULT_LOCALE:AA,DEFAULT_TOAST_DURATION:yv,DEFAULT_TOAST_DURATION_WITH_ACTION:Zu,DataTable:i1,DatePicker:v1,DescriptionList:_1,Divider:w1,DropZone:cv,EmptySearchResult:Qd,EmptyState:$1,EventListener:Nt,ExceptionList:L1,Filters:hv,Focus:eh,FooterHelp:V1,Form:ni,FormLayout:Qs,Frame:AR,FrameContext:ri,FullscreenBar:TR,Grid:vv,INDEX_TABLE_SELECT_ALL_ITEMS:Zr,Icon:le,Image:Mr,IndexFilters:JR,get IndexFiltersMode(){return Ke},IndexTable:oh,get IndexTableSelectionType(){return Qe},Indicator:Jd,InlineCode:fk,InlineError:Cd,InlineGrid:po,InlineStack:de,get Key(){return it},KeyboardKey:pk,KeypressListener:yr,Label:Hb,Labelled:Js,Layout:iC,LegacyCard:Rn,LegacyFilters:Sk,LegacyStack:Sr,LegacyTabs:xk,Link:jb,List:oC,Listbox:ot,Loading:Ik,MediaCard:Nk,Modal:ar,Navigation:dh,OptionList:Uk,Page:K_,PageActions:Kk,Pagination:Mo,PolarisTestProvider:ex,Popover:nt,get PopoverCloseSource(){return z_},Portal:Fo,PortalsManager:Wb,PositionedOverlay:G_,ProgressBar:rx,RadioButton:tv,RangeSlider:ix,ResourceItem:Mv,ResourceList:Dv,SUPPORTED_LOCALES:TA,ScrollLock:Ko,Scrollable:Ga,Select:Fv,SelectAllActions:bx,SettingToggle:yx,Sheet:ed,SkeletonBodyText:vx,SkeletonDisplayText:Ex,SkeletonPage:_x,SkeletonTabs:Cx,SkeletonThumbnail:wx,Spinner:da,Sticky:Jo,Tabs:Sv,Tag:xv,Text:G,TextContainer:Ub,TextField:$n,ThemeProvider:J_,Thumbnail:Px,Toast:Ax,Tooltip:Gt,TopBar:Zo,TrapFocus:Xo,Truncate:uv,UnstableBulkActions:Yd,UnstyledButton:nr,UnstyledLink:_r,VideoThumbnail:Dx,_SECRET_INTERNAL_SCROLL_LOCK_MANAGER_CONTEXT:Ad,_SECRET_INTERNAL_WITHIN_CONTENT_CONTEXT:ts,buttonFrom:vr,buttonsFrom:rn,errorTextID:wd,hexToRgb:$A,hsbToHex:kA,hsbToRgb:jo,hslToRgb:xA,isNavigationItemActive:Mk,labelID:Us,rgbString:_y,rgbToHex:Cy,rgbToHsb:IA,rgbToHsl:NA,rgbaString:RA,unstyledButtonFrom:Lx,useBreakpoints:_a,useCopyToClipboard:OA,useEphemeralPresenceManager:X_,useEventListener:mt,useFocus:LA,useFocusIn:MA,useFrame:Ca,useHover:FA,useIndexResourceState:BA,useIndexTableContainerScroll:Ux,useIndexTableRowHovered:Bx,useIndexTableRowSelected:Wx,useMediaQuery:HA,useSetIndexFiltersMode:XR,useTheme:Zs},Symbol.toStringTag,{value:"Module"}));var Bv={},sn={},ad=function(e,t){return ad=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},ad(e,t)};function Wv(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");ad(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var _o=function(){return _o=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},_o.apply(this,arguments)};function Uv(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function jv(e,t,r,n){var a=arguments.length,s=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(i=e[l])&&(s=(a<3?i(s):a>3?i(t,r,s):i(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}function qv(e,t){return function(r,n){t(r,n,e)}}function qx(e,t,r,n,a,s){function i(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,f=!1,p=r.length-1;p>=0;p--){var g={};for(var b in n)g[b]=b==="access"?{}:n[b];for(var b in n.access)g.access[b]=n.access[b];g.addInitializer=function(y){if(f)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(y||null))};var v=(0,r[p])(l==="accessor"?{get:d.get,set:d.set}:d[c],g);if(l==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(h=i(v.get))&&(d.get=h),(h=i(v.set))&&(d.set=h),(h=i(v.init))&&a.unshift(h)}else(h=i(v))&&(l==="field"?a.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),f=!0}function Vx(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function Kx(e){return typeof e=="symbol"?e:"".concat(e)}function zx(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function Vv(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Kv(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function l(d){try{u(n.next(d))}catch(h){i(h)}}function c(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?s(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function zv(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Qo=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function Gv(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Qo(t,e,r)}function Co(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ph(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,s=[],i;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(l){i={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function Jv(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ph(arguments[t]));return e}function Xv(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var s=arguments[t],i=0,l=s.length;i<l;i++,a++)n[a]=s[i];return n}function Yv(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function Ja(e){return this instanceof Ja?(this.v=e,this):new Ja(e)}function Zv(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(f){n[f]&&(a[f]=function(p){return new Promise(function(g,b){s.push([f,p,g,b])>1||l(f,p)})})}function l(f,p){try{c(n[f](p))}catch(g){h(s[0][3],g)}}function c(f){f.value instanceof Ja?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Qv(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,s){t[a]=e[a]?function(i){return(r=!r)?{value:Ja(e[a](i)),done:!1}:s?s(i):i}:s}}function eE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Co=="function"?Co(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(l,c){i=e[s](i),a(l,c,i.done,i.value)})}}function a(s,i,l,c){Promise.resolve(c).then(function(u){s({value:u,done:l})},i)}}function tE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Gx=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function rE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Qo(t,e,r);return Gx(t,e),t}function nE(e){return e&&e.__esModule?e:{default:e}}function aE(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function sE(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function iE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function oE(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if(typeof n!="function")throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Jx=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function lE(e){function t(n){e.error=e.hasError?new Jx(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}function r(){for(;e.stack.length;){var n=e.stack.pop();try{var a=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(a).then(r,function(s){return t(s),r()})}catch(s){t(s)}}if(e.hasError)throw e.error}return r()}const Xx={__extends:Wv,__assign:_o,__rest:Uv,__decorate:jv,__param:qv,__metadata:Vv,__awaiter:Kv,__generator:zv,__createBinding:Qo,__exportStar:Gv,__values:Co,__read:ph,__spread:Jv,__spreadArrays:Xv,__spreadArray:Yv,__await:Ja,__asyncGenerator:Zv,__asyncDelegator:Qv,__asyncValues:eE,__makeTemplateObject:tE,__importStar:rE,__importDefault:nE,__classPrivateFieldGet:aE,__classPrivateFieldSet:sE,__classPrivateFieldIn:iE,__addDisposableResource:oE,__disposeResources:lE},Yx=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:oE,get __assign(){return _o},__asyncDelegator:Qv,__asyncGenerator:Zv,__asyncValues:eE,__await:Ja,__awaiter:Kv,__classPrivateFieldGet:aE,__classPrivateFieldIn:iE,__classPrivateFieldSet:sE,__createBinding:Qo,__decorate:jv,__disposeResources:lE,__esDecorate:qx,__exportStar:Gv,__extends:Wv,__generator:zv,__importDefault:nE,__importStar:rE,__makeTemplateObject:tE,__metadata:Vv,__param:qv,__propKey:Kx,__read:ph,__rest:Uv,__runInitializers:Vx,__setFunctionName:zx,__spread:Jv,__spreadArray:Yv,__spreadArrays:Xv,__values:Co,default:Xx},Symbol.toStringTag,{value:"Module"})),ve=Nn(Yx);var Vc={},Es={},hr={},K={};Object.defineProperty(K,"__esModule",{value:!0});K.FeatureDeprecatedError=K.BillingError=K.InvalidRequestError=K.UnsupportedClientType=K.MissingRequiredArgument=K.SessionStorageError=K.MissingWebhookCallbackError=K.InvalidWebhookError=K.InvalidSession=K.CookieNotFound=K.BotActivityDetected=K.InvalidOAuthError=K.GraphqlQueryError=K.RestResourceError=K.HttpThrottlingError=K.HttpInternalError=K.HttpRetriableError=K.HttpResponseError=K.HttpMaxRetriesError=K.HttpRequestError=K.PrivateAppError=K.SafeCompareError=K.InvalidDeliveryMethodError=K.MissingJwtTokenError=K.InvalidJwtError=K.InvalidHostError=K.InvalidShopError=K.InvalidHmacError=K.ShopifyError=void 0;const Zx=ve;class We extends Error{constructor(...t){super(...t),Object.setPrototypeOf(this,new.target.prototype)}}K.ShopifyError=We;class Qx extends We{}K.InvalidHmacError=Qx;class eI extends We{}K.InvalidShopError=eI;class tI extends We{}K.InvalidHostError=tI;class rI extends We{}K.InvalidJwtError=rI;class nI extends We{}K.MissingJwtTokenError=nI;class aI extends We{}K.InvalidDeliveryMethodError=aI;class sI extends We{}K.SafeCompareError=sI;class iI extends We{}K.PrivateAppError=iI;class oI extends We{}K.HttpRequestError=oI;class lI extends We{}K.HttpMaxRetriesError=lI;class cE extends We{constructor({message:t,code:r,statusText:n,body:a,headers:s}){super(t),this.response={code:r,statusText:n,body:a,headers:s}}}K.HttpResponseError=cE;class mh extends cE{}K.HttpRetriableError=mh;class cI extends mh{}K.HttpInternalError=cI;class uI extends mh{constructor(t){var{retryAfter:r}=t,n=Zx.__rest(t,["retryAfter"]);super(n),this.response.retryAfter=r}}K.HttpThrottlingError=uI;class dI extends We{}K.RestResourceError=dI;class hI extends We{constructor({message:t,response:r,headers:n,body:a}){super(t),this.response=r,this.headers=n,this.body=a}}K.GraphqlQueryError=hI;class fI extends We{}K.InvalidOAuthError=fI;class pI extends We{}K.BotActivityDetected=pI;class mI extends We{}K.CookieNotFound=mI;class gI extends We{}K.InvalidSession=gI;class uE extends We{constructor({message:t,response:r}){super(t),this.response=r}}K.InvalidWebhookError=uE;class bI extends uE{}K.MissingWebhookCallbackError=bI;class yI extends We{}K.SessionStorageError=yI;class vI extends We{}K.MissingRequiredArgument=vI;class EI extends We{}K.UnsupportedClientType=EI;class SI extends We{}K.InvalidRequestError=SI;class _I extends We{constructor({message:t,errorData:r}){super(t),this.message=t,this.errorData=r}}K.BillingError=_I;class CI extends We{}K.FeatureDeprecatedError=CI;var un={},gm;function dE(){if(gm)return un;gm=1,Object.defineProperty(un,"__esModule",{value:!0}),un.crypto=un.setCrypto=void 0;let e;try{un.crypto=e=crypto}catch{}function t(r){un.crypto=e=r}return un.setCrypto=t,un}var Ss={},bm;function el(){if(bm)return Ss;bm=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.HashFormat=void 0;var e;return function(t){t.Base64="base64",t.Hex="hex"}(e||(Ss.HashFormat=e={})),Ss}var ym;function hE(){if(ym)return hr;ym=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.hashString=hr.asBase64=hr.asHex=hr.createSHA256HMAC=void 0;const e=ve,t=K,r=dE(),n=el();function a(u,d,h=n.HashFormat.Base64){return e.__awaiter(this,void 0,void 0,function*(){const f=typeof(r.crypto===null||r.crypto===void 0?void 0:r.crypto.webcrypto)>"u"?r.crypto:r.crypto.webcrypto,p=new TextEncoder,g=yield f.subtle.importKey("raw",p.encode(u),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),b=yield f.subtle.sign("HMAC",g,p.encode(d));return h===n.HashFormat.Base64?l(b):s(b)})}hr.createSHA256HMAC=a;function s(u){return[...new Uint8Array(u)].map(d=>d.toString(16).padStart(2,"0")).join("")}hr.asHex=s;const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function l(u){let d="";const h=new Uint8Array(u);for(let f=0;f<h.length;){const p=h[f++],g=h[f++],b=h[f++],v=p>>2,y=(p&3)<<4|g>>4;let E=(g&15)<<2|b>>6,S=b&63;isNaN(g)&&(E=64),isNaN(b)&&(S=64),d+=i[v]+i[y]+i[E]+i[S]}return d}hr.asBase64=l;function c(u,d){const h=new TextEncoder().encode(u);switch(d){case n.HashFormat.Base64:return l(h);case n.HashFormat.Hex:return s(h);default:throw new t.ShopifyError(`Unrecognized hash format '${d}'`)}}return hr.hashString=c,hr}var _s={},vm;function fE(){if(vm)return _s;vm=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.splitN=void 0;function e(t,r,n){const a=t.split(r),s=Math.min(Math.abs(n),a.length);return[...a.slice(0,s-1),a.slice(s-1).join(r)]}return _s.splitN=e,_s}var st={},Em;function pE(){if(Em)return st;Em=1,Object.defineProperty(st,"__esModule",{value:!0}),st.flatHeaders=st.removeHeader=st.canonicalizeHeaders=st.addHeader=st.setHeader=st.getHeader=st.getHeaders=st.canonicalizeHeaderName=void 0;function e(u){return u.replace(/(^|-)(\w+)/g,(d,h,f)=>h+f.slice(0,1).toUpperCase()+f.slice(1).toLowerCase())}st.canonicalizeHeaderName=e;function t(u,d){const h=[];if(!u)return h;const f=e(d);for(const[p,g]of Object.entries(u))e(p)===f&&(Array.isArray(g)?h.push(...g):h.push(g));return h}st.getHeaders=t;function r(u,d){var h;if(u)return(h=t(u,d))===null||h===void 0?void 0:h[0]}st.getHeader=r;function n(u,d,h){i(u),u[e(d)]=[h]}st.setHeader=n;function a(u,d,h){i(u);const f=e(d);let p=u[f];p?Array.isArray(p)||(p=[p]):p=[],u[f]=p,p.push(h)}st.addHeader=a;function s(u){return typeof u=="number"?u.toString():u}function i(u){for(const[d,h]of Object.entries(u)){const f=e(d);u[f]||(u[f]=[]),Array.isArray(u[f])||(u[f]=[s(u[f])]),d!==f&&(delete u[d],u[f].push(...[h].flat().map(p=>s(p))))}return u}st.canonicalizeHeaders=i;function l(u,d){i(u);const h=e(d);delete u[h]}st.removeHeader=l;function c(u){return Object.entries(u).flatMap(([d,h])=>Array.isArray(h)?h.map(f=>[d,f]):[[d,h]])}return st.flatHeaders=c,st}var Sm;function wI(){if(Sm)return Es;Sm=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.Cookies=void 0;const e=ve,t=hE(),r=fE(),n=pE();class a{static parseCookies(i){const l=i.filter(u=>u.trim().length>0).map(u=>{const[d,...h]=u.split(";"),[f,p]=(0,r.splitN)(d,"=",2).map(g=>g.trim());return[f,Object.assign({name:f,value:p},Object.fromEntries(h.map(g=>(0,r.splitN)(g,"=",2).map(b=>b.trim()))))]}),c=Object.fromEntries(l);for(const u of Object.values(c))typeof u.expires=="string"&&(u.expires=new Date(u.expires));return c}static encodeCookie(i){let l="";return l+=`${i.name}=${i.value};`,l+=Object.entries(i).filter(([c])=>!["name","value","expires"].includes(c)).map(([c,u])=>`${c}=${u}`).join("; "),i.expires&&(l+=";",l+=`expires=${i.expires.toUTCString()}`),l}constructor(i,l,{keys:c=[]}={}){var u,d;this.response=l,this.receivedCookieJar={},this.outgoingCookieJar={},this.keys=[],c&&(this.keys=c);const h=(u=(0,n.getHeader)(i.headers,"Cookie"))!==null&&u!==void 0?u:"";this.receivedCookieJar=a.parseCookies(h.split(";"));const f=(d=(0,n.getHeaders)(l.headers,"Set-Cookie"))!==null&&d!==void 0?d:[];this.outgoingCookieJar=a.parseCookies(f)}toHeaders(){return Object.values(this.outgoingCookieJar).map(i=>a.encodeCookie(i))}updateHeader(){this.response.headers||(this.response.headers={}),(0,n.removeHeader)(this.response.headers,"Set-Cookie"),this.toHeaders().map(i=>(0,n.addHeader)(this.response.headers,"Set-Cookie",i))}get(i){var l;return(l=this.receivedCookieJar[i])===null||l===void 0?void 0:l.value}deleteCookie(i){this.set(i,"",{path:"/",expires:new Date(0)})}getAndVerify(i){return e.__awaiter(this,void 0,void 0,function*(){const l=this.get(i);if(l&&(yield this.isSignedCookieValid(i)))return l})}get canSign(){var i;return((i=this.keys)===null||i===void 0?void 0:i.length)>0}set(i,l,c={}){this.outgoingCookieJar[i]=Object.assign(Object.assign({},c),{name:i,value:l}),this.updateHeader()}setAndSign(i,l,c={}){return e.__awaiter(this,void 0,void 0,function*(){if(!this.canSign)throw Error("No keys provided for signing.");this.set(i,l,c);const u=`${i}.sig`,d=yield(0,t.createSHA256HMAC)(this.keys[0],l);this.set(u,d,c),this.updateHeader()})}isSignedCookieValid(i){return e.__awaiter(this,void 0,void 0,function*(){const l=`${i}.sig`;if(!this.get(i)||!this.get(l))return this.deleteCookie(l),this.deleteCookie(i),!1;const c=this.get(i),u=this.get(l);return(yield Promise.all(this.keys.map(h=>(0,t.createSHA256HMAC)(h,c)))).includes(u)?!0:(this.deleteCookie(l),this.deleteCookie(i),!1)})}}return Es.Cookies=a,Es}var Kc={},_m;function PI(){return _m||(_m=1,Object.defineProperty(Kc,"__esModule",{value:!0})),Kc}var Cm;function wa(){return Cm||(Cm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.setAbstractConvertHeadersFunc=e.abstractConvertHeaders=e.setAbstractConvertResponseFunc=e.abstractConvertResponse=e.setAbstractConvertIncomingResponseFunc=e.abstractConvertIncomingResponse=e.setAbstractConvertRequestFunc=e.abstractConvertRequest=e.setAbstractFetchFunc=e.abstractFetch=e.isOK=void 0;const t=ve;t.__exportStar(wI(),e),t.__exportStar(pE(),e),t.__exportStar(fE(),e),t.__exportStar(PI(),e);function r(p){return p.statusCode>=200&&p.statusCode<=299}e.isOK=r;let n=()=>{throw new Error("Missing adapter implementation for 'abstractFetch' - make sure to import the appropriate adapter for your platform")};e.abstractFetch=n;function a(p){e.abstractFetch=p}e.setAbstractFetchFunc=a;let s=()=>{throw new Error("Missing adapter implementation for 'abstractConvertRequest' - make sure to import the appropriate adapter for your platform")};e.abstractConvertRequest=s;function i(p){e.abstractConvertRequest=p}e.setAbstractConvertRequestFunc=i;let l=()=>Promise.resolve({});e.abstractConvertIncomingResponse=l;function c(p){e.abstractConvertIncomingResponse=p}e.setAbstractConvertIncomingResponseFunc=c;let u=()=>{throw new Error("Missing adapter implementation for 'abstractConvertResponse' - make sure to import the appropriate adapter for your platform")};e.abstractConvertResponse=u;function d(p){e.abstractConvertResponse=p}e.setAbstractConvertResponseFunc=d;let h=()=>{throw new Error("Missing adapter implementation for 'abstractConvertHeaders' - make sure to import the appropriate adapter for your platform")};e.abstractConvertHeaders=h;function f(p){e.abstractConvertHeaders=p}e.setAbstractConvertHeadersFunc=f}(Vc)),Vc}var zc={},wm;function tl(){return wm||(wm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ve;t.__exportStar(el(),e),t.__exportStar(dE(),e),t.__exportStar(hE(),e)}(zc)),zc}var gh={},Gc={},Pm;function AI(){return Pm||(Pm=1,Object.defineProperty(Gc,"__esModule",{value:!0})),Gc}var dn={},Am;function TI(){if(Am)return dn;Am=1,Object.defineProperty(dn,"__esModule",{value:!0}),dn.setAbstractRuntimeString=dn.abstractRuntimeString=void 0;let e=()=>{throw new Error("Missing adapter implementation for 'abstractRuntimeString' - make sure to import the appropriate adapter for your platform")};dn.abstractRuntimeString=e;function t(r){dn.abstractRuntimeString=r}return dn.setAbstractRuntimeString=t,dn}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ve;t.__exportStar(AI(),e),t.__exportStar(TI(),e)})(gh);(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ve;t.__exportStar(wa(),e),t.__exportStar(tl(),e),t.__exportStar(gh,e)})(sn);var Or={};Object.defineProperty(Or,"__esModule",{value:!0});Or.webApiRuntimeString=Or.webApiConvertResponse=Or.webApiConvertHeaders=Or.webApiConvertRequest=void 0;const bh=ve,mE=sn;function RI(e){var t;return bh.__awaiter(this,void 0,void 0,function*(){const r=e.rawRequest,n={};for(const[a,s]of r.headers.entries())(0,mE.addHeader)(n,a,s);return{headers:n,method:(t=r.method)!==null&&t!==void 0?t:"GET",url:new URL(r.url).toString()}})}Or.webApiConvertRequest=RI;function gE(e,t){return bh.__awaiter(this,void 0,void 0,function*(){const r=new Headers;return(0,mE.flatHeaders)(e??{}).forEach(([n,a])=>r.append(n,a)),Promise.resolve(r)})}Or.webApiConvertHeaders=gE;function kI(e,t){var r;return bh.__awaiter(this,void 0,void 0,function*(){return new Response(e.body,{status:e.statusCode,statusText:e.statusText,headers:yield gE((r=e.headers)!==null&&r!==void 0?r:{})})})}Or.webApiConvertResponse=kI;function xI(){return"Web API"}Or.webApiRuntimeString=xI;const ai=sn,rl=Or;(0,ai.setAbstractFetchFunc)(fetch);(0,ai.setAbstractConvertRequestFunc)(rl.webApiConvertRequest);(0,ai.setAbstractConvertResponseFunc)(rl.webApiConvertResponse);(0,ai.setAbstractConvertHeadersFunc)(rl.webApiConvertHeaders);(0,ai.setAbstractRuntimeString)(rl.webApiRuntimeString);var Ut={},nl={},ct={};const bE=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,wo=e=>{if(typeof e!="string")throw new TypeError("Invalid argument expected string");const t=e.match(bE);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},Tm=e=>e==="*"||e==="x"||e==="X",Rm=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},II=(e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t],NI=(e,t)=>{if(Tm(e)||Tm(t))return 0;const[r,n]=II(Rm(e),Rm(t));return r>n?1:r<n?-1:0},Ua=(e,t)=>{for(let r=0;r<Math.max(e.length,t.length);r++){const n=NI(e[r]||"0",t[r]||"0");if(n!==0)return n}return 0},yE=(e,t)=>{const r=wo(e),n=wo(t),a=r.pop(),s=n.pop(),i=Ua(r,n);return i!==0?i:a&&s?Ua(a.split("."),s.split(".")):a||s?a?-1:1:0},vE=(e,t,r)=>{$I(r);const n=yE(e,t);return EE[r].includes(n)},EE={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},km=Object.keys(EE),$I=e=>{if(typeof e!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof e}`);if(km.indexOf(e)===-1)throw new Error(`Invalid operator, expected one of ${km.join("|")}`)},Zi=(e,t)=>{if(t=t.replace(/([><=]+)\s+/g,"$1"),t.includes("||"))return t.split("||").some(v=>Zi(e,v));if(t.includes(" - ")){const[v,y]=t.split(" - ",2);return Zi(e,`>=${v} <=${y}`)}else if(t.includes(" "))return t.trim().replace(/\s{2,}/g," ").split(" ").every(v=>Zi(e,v));const r=t.match(/^([<>=~^]+)/),n=r?r[1]:"=";if(n!=="^"&&n!=="~")return vE(e,t,n);const[a,s,i,,l]=wo(e),[c,u,d,,h]=wo(t),f=[a,s,i],p=[c,u??"x",d??"x"];if(h&&(!l||Ua(f,p)!==0||Ua(l.split("."),h.split("."))===-1))return!1;const g=p.findIndex(v=>v!=="0")+1,b=n==="~"?2:g>1?g:1;return!(Ua(f.slice(0,b),p.slice(0,b))!==0||Ua(f.slice(b),p.slice(b))===-1)},OI=e=>typeof e=="string"&&/^[v\d]/.test(e)&&bE.test(e),LI=e=>typeof e=="string"&&/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/.test(e),MI=Object.freeze(Object.defineProperty({__proto__:null,compare:vE,compareVersions:yE,satisfies:Zi,validate:OI,validateStrict:LI},Symbol.toStringTag,{value:"Module"})),FI=Nn(MI);var xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.BillingReplacementBehavior=xe.BillingInterval=xe.privacyTopics=xe.ClientType=xe.ShopifyHeader=xe.LATEST_API_VERSION=xe.LIBRARY_NAME=xe.ApiVersion=xe.LogSeverity=void 0;var xm;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"})(xm||(xe.LogSeverity=xm={}));var sd;(function(e){e.October22="2022-10",e.January23="2023-01",e.April23="2023-04",e.July23="2023-07",e.October23="2023-10",e.January24="2024-01",e.April24="2024-04",e.Unstable="unstable"})(sd||(xe.ApiVersion=sd={}));xe.LIBRARY_NAME="Shopify API Library";xe.LATEST_API_VERSION=sd.April24;var Im;(function(e){e.AccessToken="X-Shopify-Access-Token",e.ApiVersion="X-Shopify-API-Version",e.Domain="X-Shopify-Shop-Domain",e.Hmac="X-Shopify-Hmac-Sha256",e.Topic="X-Shopify-Topic",e.SubTopic="X-Shopify-Sub-Topic",e.WebhookId="X-Shopify-Webhook-Id",e.StorefrontPrivateToken="Shopify-Storefront-Private-Token",e.StorefrontSDKVariant="X-SDK-Variant",e.StorefrontSDKVersion="X-SDK-Version"})(Im||(xe.ShopifyHeader=Im={}));var Nm;(function(e){e.Rest="rest",e.Graphql="graphql"})(Nm||(xe.ClientType=Nm={}));xe.privacyTopics=["CUSTOMERS_DATA_REQUEST","CUSTOMERS_REDACT","SHOP_REDACT"];var $m;(function(e){e.OneTime="ONE_TIME",e.Every30Days="EVERY_30_DAYS",e.Annual="ANNUAL",e.Usage="USAGE"})($m||(xe.BillingInterval=$m={}));var Om;(function(e){e.ApplyImmediately="APPLY_IMMEDIATELY",e.ApplyOnNextBillingCycle="APPLY_ON_NEXT_BILLING_CYCLE",e.Standard="STANDARD"})(Om||(xe.BillingReplacementBehavior=Om={}));var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.SHOPIFY_API_LIBRARY_VERSION=void 0;ns.SHOPIFY_API_LIBRARY_VERSION="9.7.0";var al={};Object.defineProperty(al,"__esModule",{value:!0});al.log=void 0;const Oi=xe;function DI(e){return function(t,r,n={}){if(t>e.logger.level)return;const a=[];e.logger.timestamps&&a.push(`${new Date().toISOString().slice(0,-5)}Z`);let s=n.package||"shopify-api";switch(delete n.package,t){case Oi.LogSeverity.Debug:s=`${s}/DEBUG`;break;case Oi.LogSeverity.Info:s=`${s}/INFO`;break;case Oi.LogSeverity.Warning:s=`${s}/WARNING`;break;case Oi.LogSeverity.Error:s=`${s}/ERROR`;break}a.push(s);const i=[];Object.entries(n).forEach(([c,u])=>{i.push(`${c}: ${u}`)});let l="";i.length>0&&(l=` | {${i.join(", ")}}`),e.logger.log(t,`[${a.join("] [")}] ${r}${l}`)}}al.log=DI;Object.defineProperty(ct,"__esModule",{value:!0});ct.logger=void 0;const Li=ve,HI=FI,Os=xe,BI=K,WI=ns,UI=al;function jI(e){const t=(0,UI.log)(e);return{log:t,debug:(r,n={})=>Li.__awaiter(this,void 0,void 0,function*(){return t(Os.LogSeverity.Debug,r,n)}),info:(r,n={})=>Li.__awaiter(this,void 0,void 0,function*(){return t(Os.LogSeverity.Info,r,n)}),warning:(r,n={})=>Li.__awaiter(this,void 0,void 0,function*(){return t(Os.LogSeverity.Warning,r,n)}),error:(r,n={})=>Li.__awaiter(this,void 0,void 0,function*(){return t(Os.LogSeverity.Error,r,n)}),deprecated:qI(t)}}ct.logger=jI;function qI(e){return function(t,r){if((0,HI.compare)(WI.SHOPIFY_API_LIBRARY_VERSION,t,">="))throw new BI.FeatureDeprecatedError(`Feature was deprecated in version ${t}`);return e(Os.LogSeverity.Warning,`[Deprecated | ${t}] ${r}`)}}Object.defineProperty(nl,"__esModule",{value:!0});nl.loadRestResources=void 0;const VI=ct;function KI({resources:e,config:t,RestClient:r}){const n=Object.keys(e)[0];return t.apiVersion!==e[n].apiVersion&&(0,VI.logger)(t).warning(`Loading REST resources for API version ${e[n].apiVersion}, which doesn't match the default ${t.apiVersion}`),Object.fromEntries(Object.entries(e).map(([a,s])=>{class i extends s{}return i.setClassProperties({Client:r,config:t}),Object.entries(i.hasOne).map(([l,c])=>{c.setClassProperties({Client:r,config:t})}),Object.entries(i.hasMany).map(([l,c])=>{c.setClassProperties({Client:r,config:t})}),Reflect.defineProperty(i,"name",{value:a}),[a,i]}))}nl.loadRestResources=KI;var sl={};Object.defineProperty(sl,"__esModule",{value:!0});sl.logDisabledFutureFlags=void 0;function zI(e,t){var r;if(!e._logDisabledFutureFlags)return;const n=(a,s)=>t.info(`Future flag ${a} is disabled.

  ${s}
`);!((r=e.future)===null||r===void 0)&&r.v10_lineItemBilling||n("v10_lineItemBilling","Enable this flag to use the new billing API, that supports multiple line items per plan.")}sl.logDisabledFutureFlags=zI;var il={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.AuthScopes=void 0;class Xr{constructor(t){let r=[];typeof t=="string"?r=t.split(new RegExp(`${Xr.SCOPE_DELIMITER}\\s*`)):Array.isArray(t)?r=t:t&&(r=Array.from(t.expandedScopes)),r=r.map(i=>i.trim()).filter(i=>i.length);const n=this.getImpliedScopes(r),a=new Set(r),s=new Set(n);this.compressedScopes=new Set([...a].filter(i=>!s.has(i))),this.expandedScopes=new Set([...a,...s])}has(t){let r;return t instanceof Xr?r=t:r=new Xr(t),r.toArray().filter(n=>!this.expandedScopes.has(n)).length===0}equals(t){let r;return t instanceof Xr?r=t:r=new Xr(t),this.compressedScopes.size===r.compressedScopes.size&&this.toArray().filter(n=>!r.has(n)).length===0}toString(){return this.toArray().join(Xr.SCOPE_DELIMITER)}toArray(){return[...this.compressedScopes]}getImpliedScopes(t){return t.reduce((r,n)=>{const a=n.match(/^(unauthenticated_)?write_(.*)$/);return a&&r.push(`${a[1]?a[1]:""}read_${a[2]}`),r},[])}}si.AuthScopes=Xr;Xr.SCOPE_DELIMITER=",";Object.defineProperty(il,"__esModule",{value:!0});il.validateConfig=void 0;const GI=ve,JI=K,ja=xe,Jc=si,XI=ct;function YI(e){var t;const r={apiKey:"",apiSecretKey:"",scopes:new Jc.AuthScopes([]),hostName:"",hostScheme:"https",apiVersion:ja.LATEST_API_VERSION,isEmbeddedApp:!0,isCustomStoreApp:!1,logger:{log:QI,level:ja.LogSeverity.Info,httpRequests:!1,timestamps:!1},future:{},_logDisabledFutureFlags:!0},n=["apiSecretKey","hostName"];(!("isCustomStoreApp"in e)||!e.isCustomStoreApp)&&(n.push("apiKey"),n.push("scopes")),"isCustomStoreApp"in e&&e.isCustomStoreApp&&(!("adminApiAccessToken"in e)||((t=e.adminApiAccessToken)===null||t===void 0?void 0:t.length)===0)&&n.push("adminApiAccessToken");const a=[];if(n.forEach(g=>{ZI(e[g])||a.push(g)}),a.length)throw new JI.ShopifyError(`Cannot initialize Shopify API Library. Missing values for: ${a.join(", ")}`);const{hostScheme:s,isCustomStoreApp:i,adminApiAccessToken:l,userAgentPrefix:c,logger:u,privateAppStorefrontAccessToken:d,customShopDomains:h,billing:f}=e,p=GI.__rest(e,["hostScheme","isCustomStoreApp","adminApiAccessToken","userAgentPrefix","logger","privateAppStorefrontAccessToken","customShopDomains","billing"]);return Object.assign(r,p,{hostName:e.hostName.replace(/\/$/,""),scopes:e.scopes instanceof Jc.AuthScopes?e.scopes:new Jc.AuthScopes(e.scopes),hostScheme:s??r.hostScheme,isCustomStoreApp:i??r.isCustomStoreApp,adminApiAccessToken:l??r.adminApiAccessToken,userAgentPrefix:c??r.userAgentPrefix,logger:Object.assign(Object.assign({},r.logger),u||{}),privateAppStorefrontAccessToken:d??r.privateAppStorefrontAccessToken,customShopDomains:h??r.customShopDomains,billing:f??r.billing}),r.isCustomStoreApp&&e.adminApiAccessToken===e.apiSecretKey&&(0,XI.logger)(r).warning("adminApiAccessToken is set to the same value as apiSecretKey. adminApiAccessToken should be set to the Admin API access token for custom store apps; apiSecretKey should be set to the custom store app's API secret key."),r}il.validateConfig=YI;function ZI(e){return e==null?!1:typeof e=="string"||Array.isArray(e)?e.length>0:!0}function QI(e,t){switch(e){case ja.LogSeverity.Debug:console.debug(t);break;case ja.LogSeverity.Info:console.log(t);break;case ja.LogSeverity.Warning:console.warn(t);break;case ja.LogSeverity.Error:console.error(t);break}}var ol={},Fn={},pa={};const ll="GraphQL Client",Lm=0,Mm=3,SE="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",_E="Response returned unexpected Content-Type:",CE="An unknown error has occurred. The API did not return a data object or any errors in its response.",id={json:"application/json",multipart:"multipart/mixed"},Fm="X-SDK-Variant",Dm="X-SDK-Version",eN="shopify-graphql-client",tN="0.10.3",wE=1e3,rN=[429,503],PE=/@(defer)\b/i,Hm=`\r
`,nN=/boundary="?([^=";]+)"?/i,Bm=Hm+Hm;function Pn(e,t=ll){return e.startsWith(`${t}`)?e:`${t}: ${e}`}function as(e){return e instanceof Error?e.message:JSON.stringify(e)}function AE(e){return e instanceof Error&&e.cause?e.cause:void 0}function TE(e){return e.flatMap(({errors:t})=>t??[])}function Po({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<Lm||t>Mm))throw new Error(`${e}: The provided "retries" value (${t}) is invalid - it cannot be less than ${Lm} or greater than ${Mm}`)}function Kt(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function RE(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:RE(e,n)}function kE(e,t){return Object.keys(t||{}).reduce((r,n)=>(typeof t[n]=="object"||Array.isArray(t[n]))&&e[n]?(r[n]=kE(e[n],t[n]),r):(r[n]=t[n],r),Array.isArray(e)?[...e]:{...e})}function xE([e,...t]){return t.reduce(kE,{...e})}function IE({clientLogger:e,customFetchApi:t=fetch,client:r=ll,defaultRetryWaitTime:n=wE,retriableCodes:a=rN}){const s=async(i,l,c)=>{const u=l+1,d=c+1;let h;try{if(h=await t(...i),e({type:"HTTP-Response",content:{requestParams:i,response:h}}),!h.ok&&a.includes(h.status)&&u<=d)throw new Error;return h}catch(f){if(u<=d){const p=h==null?void 0:h.headers.get("Retry-After");return await aN(p?parseInt(p,10):n),e({type:"HTTP-Retry",content:{requestParams:i,lastResponse:h,retryAttempt:l,maxRetries:c}}),s(i,u,c)}throw new Error(Pn(`${c>0?`Attempted maximum number of ${c} network retries. Last message - `:""}${as(f)}`,r))}};return s}async function aN(e){return new Promise(t=>setTimeout(t,e))}function sN({headers:e,url:t,customFetchApi:r=fetch,retries:n=0,logger:a}){Po({client:ll,retries:n});const s={headers:e,url:t,retries:n},i=iN(a),l=IE({customFetchApi:r,clientLogger:i,defaultRetryWaitTime:wE}),c=oN(l,s),u=lN(c),d=mN(c);return{config:s,fetch:c,request:u,requestStream:d}}function iN(e){return t=>{e&&e(t)}}async function NE(e){const{errors:t,data:r,extensions:n}=await e.json();return{...Kt("data",r),...Kt("extensions",n),...t||!r?{errors:{networkStatusCode:e.status,message:Pn(t?SE:CE),...Kt("graphQLErrors",t),response:e}}:{}}}function oN(e,{url:t,headers:r,retries:n}){return async(a,s={})=>{const{variables:i,headers:l,url:c,retries:u}=s,d=JSON.stringify({query:a,variables:i});Po({client:ll,retries:u});const h=Object.entries({...r,...l}).reduce((p,[g,b])=>(p[g]=Array.isArray(b)?b.join(", "):b.toString(),p),{});return!h[Fm]&&!h[Dm]&&(h[Fm]=eN,h[Dm]=tN),e([c??t,{method:"POST",headers:h,body:d}],1,u??n)}}function lN(e){return async(...t)=>{if(PE.test(t[0]))throw new Error(Pn("This operation will result in a streamable response - use requestStream() instead."));try{const r=await e(...t),{status:n,statusText:a}=r,s=r.headers.get("content-type")||"";return r.ok?s.includes(id.json)?NE(r):{errors:{networkStatusCode:n,message:Pn(`${_E} ${s}`),response:r}}:{errors:{networkStatusCode:n,message:Pn(a),response:r}}}catch(r){return{errors:{message:as(r)}}}}}async function*cN(e){const t=new TextDecoder;if(e.body[Symbol.asyncIterator])for await(const r of e.body)yield t.decode(r);else{const r=e.body.getReader();let n;try{for(;!(n=await r.read()).done;)yield t.decode(n.value)}finally{r.cancel()}}}function uN(e,t){return{async*[Symbol.asyncIterator](){try{let r="";for await(const n of e)if(r+=n,r.indexOf(t)>-1){const a=r.lastIndexOf(t),i=r.slice(0,a).split(t).filter(l=>l.trim().length>0).map(l=>l.slice(l.indexOf(Bm)+Bm.length).trim());i.length>0&&(yield i),r=r.slice(a+t.length),r.trim()==="--"&&(r="")}}catch(r){throw new Error(`Error occured while processing stream payload - ${as(r)}`)}}}}function dN(e){return{async*[Symbol.asyncIterator](){yield{...await NE(e),hasNext:!1}}}}function hN(e){return e.map(t=>{try{return JSON.parse(t)}catch(r){throw new Error(`Error in parsing multipart response - ${as(r)}`)}}).map(t=>{const{data:r,incremental:n,hasNext:a,extensions:s,errors:i}=t;if(!n)return{data:r||{},...Kt("errors",i),...Kt("extensions",s),hasNext:a};const l=n.map(({data:c,path:u,errors:d})=>({data:c&&u?RE(u,c):{},...Kt("errors",d)}));return{data:l.length===1?l[0].data:xE([...l.map(({data:c})=>c)]),...Kt("errors",TE(l)),hasNext:a}})}function fN(e,t){if(e.length>0)throw new Error(SE,{cause:{graphQLErrors:e}});if(Object.keys(t).length===0)throw new Error(CE)}function pN(e,t){var l;const r=(t??"").match(nN),n=`--${r?r[1]:"-"}`;if(!((l=e.body)!=null&&l.getReader)&&!e.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:e});const a=cN(e);let s={},i;return{async*[Symbol.asyncIterator](){var c;try{let u=!0;for await(const d of uN(a,n)){const h=hN(d);i=((c=h.find(p=>p.extensions))==null?void 0:c.extensions)??i;const f=TE(h);s=xE([s,...h.map(({data:p})=>p)]),u=h.slice(-1)[0].hasNext,fN(f,s),yield{...Kt("data",s),...Kt("extensions",i),hasNext:u}}if(u)throw new Error("Response stream terminated unexpectedly")}catch(u){const d=AE(u);yield{...Kt("data",s),...Kt("extensions",i),errors:{message:Pn(as(u)),networkStatusCode:e.status,...Kt("graphQLErrors",d==null?void 0:d.graphQLErrors),response:e},hasNext:!1}}}}}function mN(e){return async(...t)=>{if(!PE.test(t[0]))throw new Error(Pn("This operation does not result in a streamable response - use request() instead."));try{const r=await e(...t),{statusText:n}=r;if(!r.ok)throw new Error(n,{cause:r});const a=r.headers.get("content-type")||"";switch(!0){case a.includes(id.json):return dN(r);case a.includes(id.multipart):return pN(r,a);default:throw new Error(`${_E} ${a}`,{cause:r})}}catch(r){return{async*[Symbol.asyncIterator](){const n=AE(r);yield{errors:{message:Pn(as(r)),...Kt("networkStatusCode",n==null?void 0:n.status),...Kt("response",n)},hasNext:!1}}}}}}function $E({client:e,storeDomain:t}){try{if(!t||typeof t!="string")throw new Error;const r=t.trim(),n=r.match(/^https?:/)?r:`https://${r}`,a=new URL(n);return a.protocol="https",a.origin}catch{throw new Error(`${e}: a valid store domain ("${t}") must be provided`)}}function cl({client:e,currentSupportedApiVersions:t,apiVersion:r,logger:n}){const a=`${e}: the provided apiVersion ("${r}")`,s=`Currently supported API versions: ${t.join(", ")}`;if(!r||typeof r!="string")throw new Error(`${a} is invalid. ${s}`);const i=r.trim();t.includes(i)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:r,supportedApiVersions:t}}):console.warn(`${a} is likely deprecated or not supported. ${s}`))}function Ao(e){const t=e*3-2;return t===10?t:`0${t}`}function Xc(e,t,r){const n=t-r;return n<=0?`${e-1}-${Ao(n+4)}`:`${e}-${Ao(n)}`}function gN(){const e=new Date,t=e.getUTCMonth(),r=e.getUTCFullYear(),n=Math.floor(t/3+1);return{year:r,quarter:n,version:`${r}-${Ao(n)}`}}function OE(){const{year:e,quarter:t,version:r}=gN(),n=t===4?`${e+1}-01`:`${e}-${Ao(t+1)}`;return[Xc(e,t,3),Xc(e,t,2),Xc(e,t,1),r,n,"unstable"]}function bN(e){return t=>({...t??{},...e.headers})}function yN({getHeaders:e,getApiUrl:t}){return(r,n)=>{const a=[r];if(n&&Object.keys(n).length>0){const{variables:s,apiVersion:i,headers:l,retries:c}=n;a.push({...s?{variables:s}:{},...l?{headers:e(l)}:{},...i?{url:t(i)}:{},...c?{retries:c}:{}})}return a}}const To="application/json",LE="0.2.8",ME="X-Shopify-Access-Token",tr="Admin API Client",vN=[429,500,503],EN=1e3;function FE(e){if(!e)throw new Error(`${tr}: an access token must be provided`)}function DE(){if(typeof window<"u")throw new Error(`${tr}: this client should not be used in the browser`)}function SN({storeDomain:e,apiVersion:t,accessToken:r,userAgentPrefix:n,retries:a=0,customFetchApi:s,logger:i}){const l=OE(),c=$E({client:tr,storeDomain:e}),u={client:tr,currentSupportedApiVersions:l,logger:i};DE(),cl({client:tr,currentSupportedApiVersions:l,apiVersion:t,logger:i}),FE(r);const d=_N(c,t,u),h={storeDomain:c,apiVersion:t,accessToken:r,headers:{"Content-Type":To,Accept:To,[ME]:r,"User-Agent":`${n?`${n} | `:""}${tr} v${LE}`},apiUrl:d(),userAgentPrefix:n},f=sN({headers:h.headers,url:h.apiUrl,retries:a,customFetchApi:s,logger:i}),p=bN(h),g=CN(h,d),b=yN({getHeaders:p,getApiUrl:g});return Object.freeze({config:h,getHeaders:p,getApiUrl:g,fetch:(...y)=>f.fetch(...b(...y)),request:(...y)=>f.request(...b(...y))})}function _N(e,t,r){return n=>{n&&cl({...r,apiVersion:n});const a=(n??t).trim();return`${e}/admin/api/${a}/graphql.json`}}function CN(e,t){return r=>r?t(r):e.apiUrl}var qa;(function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Delete="DELETE"})(qa||(qa={}));function wN({storeDomain:e,apiVersion:t,accessToken:r,userAgentPrefix:n,logger:a,customFetchApi:s=fetch,retries:i=0,scheme:l="https",defaultRetryTime:c=EN,formatPaths:u=!0}){const d=OE(),h=$E({client:tr,storeDomain:e}).replace("https://",`${l}://`),f={client:tr,currentSupportedApiVersions:d,logger:a};DE(),cl({client:tr,currentSupportedApiVersions:d,apiVersion:t,logger:a}),FE(r),Po({client:tr,retries:i});const p=PN(h,t,f,u),g=AN(a),b=IE({customFetchApi:s,clientLogger:g,defaultRetryWaitTime:c,client:tr,retriableCodes:vN}),v=async(y,{method:E,data:S,headers:_,searchParams:R,retries:x=0,apiVersion:C})=>{Po({client:tr,retries:x});const w=p(y,R??{},C),P=Wm(_??{}),N=[...P["user-agent"]?[P["user-agent"]]:[],...n?[n]:[],`${tr} v${LE}`].join(" | "),$=Wm({"Content-Type":To,...P,Accept:To,[ME]:r,"User-Agent":N}),L=S&&typeof S!="string"?JSON.stringify(S):S;return b([w,{method:E,headers:$,...L?{body:L}:void 0}],1,x??i)};return{get:(y,E)=>v(y,{method:qa.Get,...E}),put:(y,E)=>v(y,{method:qa.Put,...E}),post:(y,E)=>v(y,{method:qa.Post,...E}),delete:(y,E)=>v(y,{method:qa.Delete,...E})}}function PN(e,t,r,n=!0){return(a,s,i)=>{i&&cl({...r,apiVersion:i});function l(f,p,g){if(Array.isArray(g)){g.forEach(b=>l(f,`${p}[]`,b));return}else if(typeof g=="object"){Object.entries(g).forEach(([b,v])=>l(f,`${p}[${b}]`,v));return}f.append(p,String(g))}const c=(i??t).trim();let u=a.replace(/^\//,"");n&&(u.startsWith("admin")||(u=`admin/api/${c}/${u}`),u.endsWith(".json")||(u=`${u}.json`));const d=new URLSearchParams;if(s)for(const[f,p]of Object.entries(s))l(d,f,p);const h=d.toString()?`?${d.toString()}`:"";return`${e}/${u}${h}`}}function AN(e){return t=>{e&&e(t)}}function Wm(e){const t={};for(const[r,n]of Object.entries(e))t[r.toLowerCase()]=Array.isArray(n)?n.join(", "):String(n);return t}const TN=Object.freeze(Object.defineProperty({__proto__:null,createAdminApiClient:SN,createAdminRestApiClient:wN},Symbol.toStringTag,{value:"Module"})),HE=Nn(TN);var lr={},BE={},WE={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Method=void 0,function(s){s.Get="GET",s.Post="POST",s.Put="PUT",s.Patch="PATCH",s.Delete="DELETE",s.Head="HEAD",s.Options="OPTIONS",s.Connect="CONNECT"}(e.Method||(e.Method={})),e.StatusCode=void 0,function(s){s[s.Continue=100]="Continue",s[s.SwitchingProtocols=101]="SwitchingProtocols",s[s.Ok=200]="Ok",s[s.Created=201]="Created",s[s.Accepted=202]="Accepted",s[s.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",s[s.NoContent=204]="NoContent",s[s.ResetContent=205]="ResetContent",s[s.PartialContent=206]="PartialContent",s[s.MultipleChoices=300]="MultipleChoices",s[s.MovedPermanently=301]="MovedPermanently",s[s.Found=302]="Found",s[s.SeeOther=303]="SeeOther",s[s.NotModified=304]="NotModified",s[s.UseProxy=305]="UseProxy",s[s.TemporaryRedirect=307]="TemporaryRedirect",s[s.BadRequest=400]="BadRequest",s[s.Unauthorized=401]="Unauthorized",s[s.PaymentRequired=402]="PaymentRequired",s[s.Forbidden=403]="Forbidden",s[s.NotFound=404]="NotFound",s[s.MethodNotAllowed=405]="MethodNotAllowed",s[s.NotAcceptable=406]="NotAcceptable",s[s.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",s[s.RequestTimeout=408]="RequestTimeout",s[s.Conflict=409]="Conflict",s[s.Gone=410]="Gone",s[s.LengthRequired=411]="LengthRequired",s[s.PreconditionFailed=412]="PreconditionFailed",s[s.RequestEntityTooLarge=413]="RequestEntityTooLarge",s[s.RequestUriTooLong=414]="RequestUriTooLong",s[s.UnsupportedMediaType=415]="UnsupportedMediaType",s[s.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable",s[s.ExpectationFailed=417]="ExpectationFailed",s[s.ImATeapot=418]="ImATeapot",s[s.UnprocessableEntity=422]="UnprocessableEntity",s[s.TooManyRequests=429]="TooManyRequests",s[s.InternalServerError=500]="InternalServerError",s[s.NotImplemented=501]="NotImplemented",s[s.BadGateway=502]="BadGateway",s[s.ServiceUnavailable=503]="ServiceUnavailable",s[s.GatewayTimeout=504]="GatewayTimeout",s[s.HttpVersionNotSupported=505]="HttpVersionNotSupported"}(e.StatusCode||(e.StatusCode={})),e.Header=void 0,function(s){s.Accept="Accept",s.AcceptEncoding="Accept-Encoding",s.AcceptLanguage="Accept-Language",s.AccessControlAllowCredentials="Access-Control-Allow-Credentials",s.AccessControlAllowHeaders="Access-Control-Allow-Headers",s.AccessControlAllowMethods="Access-Control-Allow-Methods",s.AccessControlAllowOrigin="Access-Control-Allow-Origin",s.AccessControlExposeHeaders="Access-Control-Expose-Headers",s.AccessControlMaxAge="Access-Control-Max-Age",s.AccessControlRequestHeaders="Access-Control-Request-Headers",s.AccessControlRequestMethod="Access-Control-Request-Method",s.Authorization="Authorization",s.CacheControl="Cache-Control",s.CacheStatus="Cache-Status",s.Connection="Connection",s.ContentDisposition="Content-Disposition",s.ContentEncoding="Content-Encoding",s.ContentLength="Content-Length",s.ContentSecurityPolicy="Content-Security-Policy",s.ContentSecurityPolicyReportOnly="Content-Security-Policy-Report-Only",s.ContentType="Content-Type",s.ContentTypeOptions="X-Content-Type-Options",s.Cookie="Cookie",s.DownloadOptions="X-Download-Options",s.ETag="ETag",s.Forwarded="Forwarded",s.ForwardedFor="X-Forwarded-For",s.ForwardedHost="X-Forwarded-Host",s.ForwardedProtocol="X-Forwarded-Proto",s.FrameOptions="X-Frame-Options",s.Host="Host",s.IfNoneMatch="If-None-Match",s.Location="Location",s.Origin="Origin",s.ReferrerPolicy="Referrer-Policy",s.ServerTiming="Server-Timing",s.StrictTransportSecurity="Strict-Transport-Security",s.TimingAllowOrigin="Timing-Allow-Origin",s.Trailer="Trailer",s.TransferEncoding="Transfer-Encoding",s.UserAgent="User-Agent",s.WwwAuthenticate="WWW-Authenticate",s.XhrRedirectedTo="X-XHR-Redirected-To",s.XhrReferer="X-XHR-Referer",s.XssProtecton="X-XSS-Protection",s.XContentTypeOptions="X-Content-Type-Options",s.XDownloadOptions="X-Download-Options",s.XForwardedFor="X-Forwarded-For",s.XForwardedHost="X-Forwarded-Host",s.XForwardedProto="X-Forwarded-Proto",s.XFrameOptions="X-Frame-Options",s.XXhrRedirectedTo="X-XHR-Redirected-To",s.XXhrReferer="X-XHR-Referer",s.XXssProtecton="X-XSS-Protection",s.XXssProtection="X-XSS-Protection"}(e.Header||(e.Header={})),e.CspDirective=void 0,function(s){s.ChildSrc="child-src",s.ConnectSrc="connect-src",s.DefaultSrc="default-src",s.FontSrc="font-src",s.FrameSrc="frame-src",s.ImgSrc="img-src",s.ManifestSrc="manifest-src",s.MediaSrc="media-src",s.ObjectSrc="object-src",s.PrefetchSrc="prefetch-src",s.ScriptSrc="script-src",s.StyleSrc="style-src",s.WebrtcSrc="webrtc-src",s.WorkerSrc="worker-src",s.BaseUri="base-uri",s.PluginTypes="plugin-types",s.Sandbox="sandbox",s.FormAction="form-action",s.FrameAncestors="frame-ancestors",s.ReportUri="report-uri",s.BlockAllMixedContent="block-all-mixed-content",s.RequireSriFor="require-sri-for",s.UpgradeInsecureRequests="upgrade-insecure-requests"}(e.CspDirective||(e.CspDirective={})),e.CspSandboxAllow=void 0,function(s){s.Forms="allow-forms",s.SameOrigin="allow-same-origin",s.Scripts="allow-scripts",s.Popups="allow-popups",s.Modals="allow-modals",s.OrientationLock="allow-orientation-lock",s.PointerLock="allow-pointer-lock",s.Presentation="allow-presentation",s.PopupsToEscapeSandbox="allow-popups-to-escape-sandbox",s.TopNavigation="allow-top-navigation"}(e.CspSandboxAllow||(e.CspSandboxAllow={})),e.SpecialSource=void 0,function(s){s.Any="*",s.Self="'self'",s.UnsafeInline="'unsafe-inline'",s.UnsafeEval="'unsafe-eval'",s.None="'none'",s.StrictDynamic="'strict-dynamic'",s.ReportSample="'report-sample'",s.Data="data:",s.Blob="blob:",s.FileSystem="filesystem:"}(e.SpecialSource||(e.SpecialSource={})),e.SriAsset=void 0,function(s){s.Script="script",s.Style="style"}(e.SriAsset||(e.SriAsset={})),e.HashAlgorithm=void 0,function(s){s.Sha256="sha256",s.Sha384="sha384",s.Sha512="sha512"}(e.HashAlgorithm||(e.HashAlgorithm={})),e.ResponseType=void 0,function(s){s.Informational="1xx",s.Success="2xx",s.Redirection="3xx",s.ClientError="4xx",s.ServerError="5xx",s.Unknown="Unknown"}(e.ResponseType||(e.ResponseType={}));function t(s){return s>=100&&s<200?e.ResponseType.Informational:s>=200&&s<300?e.ResponseType.Success:s>=300&&s<400?e.ResponseType.Redirection:s>=400&&s<500?e.ResponseType.ClientError:s>=500&&s<600?e.ResponseType.ServerError:e.ResponseType.Unknown}function r(s){return`'nonce-${s}'`}function n(s,i){return`'${s}-${i}'`}e.CacheControl=void 0,function(s){s.NoCache="no-cache",s.NoStore="no-store",s.MustRevalidate="must-revalidate",s.MaxAge="max-age"}(e.CacheControl||(e.CacheControl={}));const a=`${e.CacheControl.NoCache},${e.CacheControl.NoStore},${e.CacheControl.MustRevalidate},${e.CacheControl.MaxAge}=0`;e.getResponseType=t,e.hashSource=n,e.noCache=a,e.nonceSource=r})(WE);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=WE;Object.defineProperty(e,"CacheControl",{enumerable:!0,get:function(){return t.CacheControl}}),Object.defineProperty(e,"CspDirective",{enumerable:!0,get:function(){return t.CspDirective}}),Object.defineProperty(e,"CspSandboxAllow",{enumerable:!0,get:function(){return t.CspSandboxAllow}}),Object.defineProperty(e,"HashAlgorithm",{enumerable:!0,get:function(){return t.HashAlgorithm}}),Object.defineProperty(e,"Header",{enumerable:!0,get:function(){return t.Header}}),Object.defineProperty(e,"Method",{enumerable:!0,get:function(){return t.Method}}),Object.defineProperty(e,"ResponseType",{enumerable:!0,get:function(){return t.ResponseType}}),Object.defineProperty(e,"SpecialSource",{enumerable:!0,get:function(){return t.SpecialSource}}),Object.defineProperty(e,"SriAsset",{enumerable:!0,get:function(){return t.SriAsset}}),Object.defineProperty(e,"StatusCode",{enumerable:!0,get:function(){return t.StatusCode}}),e.getResponseType=t.getResponseType,e.hashSource=t.hashSource,e.noCache=t.noCache,e.nonceSource=t.nonceSource})(BE);var yh=BE;Object.defineProperty(lr,"__esModule",{value:!0});lr.throwFailedRequest=lr.clientLoggerFactory=lr.getUserAgent=void 0;const RN=ve,Yc=yh,Ma=RN.__importStar(K),kN=xe,xN=ns,Qi=sn,Zc=ct;function IN(e){let t=`${kN.LIBRARY_NAME} v${xN.SHOPIFY_API_LIBRARY_VERSION} | ${(0,Qi.abstractRuntimeString)()}`;return e.userAgentPrefix&&(t=`${e.userAgentPrefix} | ${t}`),t}lr.getUserAgent=IN;function NN(e){return t=>{if(e.logger.httpRequests)switch(t.type){case"HTTP-Response":{const r=t.content;(0,Zc.logger)(e).debug("Received response for HTTP request",{requestParams:JSON.stringify(r.requestParams),response:JSON.stringify(r.response)});break}case"HTTP-Retry":{const r=t.content;(0,Zc.logger)(e).debug("Retrying HTTP request",{requestParams:JSON.stringify(r.requestParams),retryAttempt:r.retryAttempt,maxRetries:r.maxRetries,response:JSON.stringify(r.lastResponse)});break}default:{(0,Zc.logger)(e).debug(`HTTP request event: ${t.content}`);break}}}}lr.clientLoggerFactory=NN;function $N(e,t,r){var n,a,s;const i=(0,Qi.canonicalizeHeaders)(Object.fromEntries((n=t.headers.entries())!==null&&n!==void 0?n:[]));if(t.status===Yc.StatusCode.Ok&&e.errors.graphQLErrors)throw new Ma.GraphqlQueryError({message:(s=(a=e.errors.graphQLErrors)===null||a===void 0?void 0:a[0].message)!==null&&s!==void 0?s:"GraphQL operation failed",response:t,headers:i,body:e});const l=[];e.errors&&l.push(JSON.stringify(e.errors,null,2));const c=(0,Qi.getHeader)(i,"x-request-id");c&&l.push(`If you report this error, please include this id: ${c}`);const u=l.length?`:
${l.join(`
`)}`:"",d=t.status,h=t.statusText;switch(!0){case t.status===Yc.StatusCode.TooManyRequests:{if(r)throw new Ma.HttpMaxRetriesError("Attempted the maximum number of retries for HTTP request.");{const f=(0,Qi.getHeader)(i,"Retry-After");throw new Ma.HttpThrottlingError({message:`Shopify is throttling requests ${u}`,code:d,statusText:h,body:e,headers:i,retryAfter:f?parseFloat(f):void 0})}}case t.status>=Yc.StatusCode.InternalServerError:throw r?new Ma.HttpMaxRetriesError("Attempted the maximum number of retries for HTTP request."):new Ma.HttpInternalError({message:`Shopify internal error${u}`,code:d,statusText:h,body:e,headers:i});default:throw new Ma.HttpResponseError({message:`Received an error response (${t.status} ${t.statusText}) from Shopify${u}`,code:d,statusText:h,body:e,headers:i})}}lr.throwFailedRequest=$N;Object.defineProperty(pa,"__esModule",{value:!0});pa.graphqlClientClass=pa.GraphqlClient=void 0;const od=ve,ON=HE,Um=ct,jm=od.__importStar(K),LN=sn,Qc=lr;class UE{constructor(t){var r,n;const a=this.graphqlClass().config;if(!a.isCustomStoreApp&&!t.session.accessToken)throw new jm.MissingRequiredArgument("Missing access token when creating GraphQL client");if(t.apiVersion){const s=t.apiVersion===a.apiVersion?`Admin client has a redundant API version override to the default ${t.apiVersion}`:`Admin client overriding default API version ${a.apiVersion} with ${t.apiVersion}`;(0,Um.logger)(a).debug(s)}this.session=t.session,this.apiVersion=t.apiVersion,this.client=(0,ON.createAdminApiClient)({accessToken:(r=a.adminApiAccessToken)!==null&&r!==void 0?r:this.session.accessToken,apiVersion:(n=this.apiVersion)!==null&&n!==void 0?n:a.apiVersion,storeDomain:this.session.shop,customFetchApi:LN.abstractFetch,logger:(0,Qc.clientLoggerFactory)(a),userAgentPrefix:(0,Qc.getUserAgent)(a)})}query(t){var r;return od.__awaiter(this,void 0,void 0,function*(){if((0,Um.logger)(this.graphqlClass().config).deprecated("10.0.0",`The query method is deprecated, and was replaced with the request method.
See the migration guide: https://github.com/Shopify/shopify-api-js/blob/main/packages/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.`),typeof t.data=="string"&&t.data.length===0||Object.entries(t.data).length===0)throw new jm.MissingRequiredArgument("Query missing.");let n,a;typeof t.data=="string"?n=t.data:(n=t.data.query,a=t.data.variables);const s=Object.fromEntries(Object.entries((r=t==null?void 0:t.extraHeaders)!==null&&r!==void 0?r:{}).map(([l,c])=>[l,Array.isArray(c)?c.join(", "):c.toString()]));return{body:yield this.request(n,{headers:s,retries:t.tries?t.tries-1:void 0,variables:a}),headers:{}}})}request(t,r){var n;return od.__awaiter(this,void 0,void 0,function*(){const a=yield this.client.request(t,Object.assign({apiVersion:this.apiVersion||this.graphqlClass().config.apiVersion},r));if(a.errors){const s=a.errors.response;(0,Qc.throwFailedRequest)(a,s,((n=r==null?void 0:r.retries)!==null&&n!==void 0?n:0)>0)}return a})}graphqlClass(){return this.constructor}}pa.GraphqlClient=UE;function MN({config:e}){class t extends UE{}return t.config=e,Reflect.defineProperty(t,"name",{value:"GraphqlClient"}),t}pa.graphqlClientClass=MN;var ma={};Object.defineProperty(ma,"__esModule",{value:!0});ma.restClientClass=ma.RestClient=void 0;const ra=ve,FN=HE,hn=yh,eu=lr,Cs=sn,qm=ra.__importStar(K),Vm=ct;class Lr{constructor({session:t,apiVersion:r}){var n;this.loggedDeprecations={};const a=this.restClass().config;if(!a.isCustomStoreApp&&!t.accessToken)throw new qm.MissingRequiredArgument("Missing access token when creating REST client");if(r){const i=r===a.apiVersion?`REST client has a redundant API version override to the default ${r}`:`REST client overriding default API version ${a.apiVersion} with ${r}`;(0,Vm.logger)(a).debug(i)}const s=(n=a.adminApiAccessToken)!==null&&n!==void 0?n:a.apiSecretKey;this.session=t,this.apiVersion=r??a.apiVersion,this.client=(0,FN.createAdminRestApiClient)({scheme:a.hostScheme,storeDomain:t.shop,apiVersion:r??a.apiVersion,accessToken:a.isCustomStoreApp?s:t.accessToken,customFetchApi:Cs.abstractFetch,logger:(0,eu.clientLoggerFactory)(a),userAgentPrefix:(0,eu.getUserAgent)(a),defaultRetryTime:this.restClass().RETRY_WAIT_TIME,formatPaths:this.restClass().formatPaths})}get(t){return ra.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:hn.Method.Get},t))})}post(t){return ra.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:hn.Method.Post},t))})}put(t){return ra.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:hn.Method.Put},t))})}delete(t){return ra.__awaiter(this,void 0,void 0,function*(){return this.request(Object.assign({method:hn.Method.Delete},t))})}request(t){var r,n,a;return ra.__awaiter(this,void 0,void 0,function*(){const s={headers:Object.assign(Object.assign({},t.extraHeaders),t.type?{"Content-Type":t.type.toString()}:{}),retries:t.tries?t.tries-1:void 0,searchParams:t.query};let i;switch(t.method){case hn.Method.Get:i=yield this.client.get(t.path,s);break;case hn.Method.Put:i=yield this.client.put(t.path,Object.assign(Object.assign({},s),{data:t.data}));break;case hn.Method.Post:i=yield this.client.post(t.path,Object.assign(Object.assign({},s),{data:t.data}));break;case hn.Method.Delete:i=yield this.client.delete(t.path,s);break;default:throw new qm.InvalidRequestError(`Unsupported request method '${t.method}'`)}const l=yield i.json(),c=(0,Cs.canonicalizeHeaders)(Object.fromEntries(i.headers.entries()));i.ok||(0,eu.throwFailedRequest)(l,i,((r=t.tries)!==null&&r!==void 0?r:1)>1);const u={body:l,headers:c};yield this.logDeprecations({method:t.method,url:t.path,headers:s.headers,body:t.data?JSON.stringify(t.data):void 0},u);const d=i.headers.get("Link");if(d!==void 0){const h={limit:!((n=t.query)===null||n===void 0)&&n.limit?(a=t.query)===null||a===void 0?void 0:a.limit.toString():Lr.DEFAULT_LIMIT};if(d){const f=d.split(", ");for(const p of f){const g=p.match(Lr.LINK_HEADER_REGEXP);if(!g)continue;const b=g[2],v=new URL(g[1]),y=v.searchParams.get("fields"),E=v.searchParams.get("page_info");if(!h.fields&&y&&(h.fields=y.split(",")),E)switch(b){case"previous":h.previousPageUrl=g[1],h.prevPage=this.buildRequestParams(g[1]);break;case"next":h.nextPageUrl=g[1],h.nextPage=this.buildRequestParams(g[1]);break}}}u.pageInfo=h}return u})}restClass(){return this.constructor}buildRequestParams(t){const r="^/admin/api/[^/]+/(.*).json$",n=new URL(t);return{path:n.pathname.replace(new RegExp(r),"$1"),query:Object.fromEntries(n.searchParams.entries())}}logDeprecations(t,r){return ra.__awaiter(this,void 0,void 0,function*(){const n=this.restClass().config,a=(0,Cs.getHeader)(r.headers,"X-Shopify-API-Deprecated-Reason");if(a){const s={message:a,path:t.url};t.body&&(s.body=`${t.body.substring(0,100)}...`);const i=yield(0,Cs.createSHA256HMAC)(n.apiSecretKey,JSON.stringify(s),Cs.HashFormat.Hex);if(!Object.keys(this.loggedDeprecations).includes(i)||Date.now()-this.loggedDeprecations[i]>=Lr.DEPRECATION_ALERT_DELAY){this.loggedDeprecations[i]=Date.now();const l=new Error().stack,c=`API Deprecation Notice ${new Date().toLocaleString()} : ${JSON.stringify(s)}  -  Stack Trace: ${l}`;yield(0,Vm.logger)(n).warning(c)}}})}}ma.RestClient=Lr;Lr.LINK_HEADER_REGEXP=/<([^<]+)>; rel="([^"]+)"/;Lr.DEFAULT_LIMIT="50";Lr.RETRY_WAIT_TIME=1e3;Lr.DEPRECATION_ALERT_DELAY=3e5;function DN(e){const{config:t,formatPaths:r}=e;class n extends Lr{}return n.config=t,n.formatPaths=r===void 0?!0:r,Reflect.defineProperty(n,"name",{value:"RestClient"}),n}ma.restClientClass=DN;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RestClient=e.restClientClass=e.GraphqlClient=e.graphqlClientClass=void 0;var t=pa;Object.defineProperty(e,"graphqlClientClass",{enumerable:!0,get:function(){return t.graphqlClientClass}}),Object.defineProperty(e,"GraphqlClient",{enumerable:!0,get:function(){return t.GraphqlClient}});var r=ma;Object.defineProperty(e,"restClientClass",{enumerable:!0,get:function(){return r.restClientClass}}),Object.defineProperty(e,"RestClient",{enumerable:!0,get:function(){return r.RestClient}})})(Fn);var jE={},Xa={};const ul="GraphQL Client",Km=0,zm=3,qE="An error occurred while fetching from the API. Review 'graphQLErrors' for details.",VE="Response returned unexpected Content-Type:",KE="An unknown error has occurred. The API did not return a data object or any errors in its response.",ld={json:"application/json",multipart:"multipart/mixed"},Gm="X-SDK-Variant",Jm="X-SDK-Version",HN="shopify-graphql-client",BN="0.10.3",zE=1e3,WN=[429,503],GE=/@(defer)\b/i,Xm=`\r
`,UN=/boundary="?([^=";]+)"?/i,Ym=Xm+Xm;function An(e,t=ul){return e.startsWith(`${t}`)?e:`${t}: ${e}`}function ss(e){return e instanceof Error?e.message:JSON.stringify(e)}function JE(e){return e instanceof Error&&e.cause?e.cause:void 0}function XE(e){return e.flatMap(({errors:t})=>t??[])}function YE({client:e,retries:t}){if(t!==void 0&&(typeof t!="number"||t<Km||t>zm))throw new Error(`${e}: The provided "retries" value (${t}) is invalid - it cannot be less than ${Km} or greater than ${zm}`)}function zt(e,t){return t&&(typeof t!="object"||Array.isArray(t)||typeof t=="object"&&Object.keys(t).length>0)?{[e]:t}:{}}function ZE(e,t){if(e.length===0)return t;const n={[e.pop()]:t};return e.length===0?n:ZE(e,n)}function QE(e,t){return Object.keys(t||{}).reduce((r,n)=>(typeof t[n]=="object"||Array.isArray(t[n]))&&e[n]?(r[n]=QE(e[n],t[n]),r):(r[n]=t[n],r),Array.isArray(e)?[...e]:{...e})}function e0([e,...t]){return t.reduce(QE,{...e})}function jN({clientLogger:e,customFetchApi:t=fetch,client:r=ul,defaultRetryWaitTime:n=zE,retriableCodes:a=WN}){const s=async(i,l,c)=>{const u=l+1,d=c+1;let h;try{if(h=await t(...i),e({type:"HTTP-Response",content:{requestParams:i,response:h}}),!h.ok&&a.includes(h.status)&&u<=d)throw new Error;return h}catch(f){if(u<=d){const p=h==null?void 0:h.headers.get("Retry-After");return await qN(p?parseInt(p,10):n),e({type:"HTTP-Retry",content:{requestParams:i,lastResponse:h,retryAttempt:l,maxRetries:c}}),s(i,u,c)}throw new Error(An(`${c>0?`Attempted maximum number of ${c} network retries. Last message - `:""}${ss(f)}`,r))}};return s}async function qN(e){return new Promise(t=>setTimeout(t,e))}function VN({headers:e,url:t,customFetchApi:r=fetch,retries:n=0,logger:a}){YE({client:ul,retries:n});const s={headers:e,url:t,retries:n},i=KN(a),l=jN({customFetchApi:r,clientLogger:i,defaultRetryWaitTime:zE}),c=zN(l,s),u=GN(c),d=t$(c);return{config:s,fetch:c,request:u,requestStream:d}}function KN(e){return t=>{e&&e(t)}}async function t0(e){const{errors:t,data:r,extensions:n}=await e.json();return{...zt("data",r),...zt("extensions",n),...t||!r?{errors:{networkStatusCode:e.status,message:An(t?qE:KE),...zt("graphQLErrors",t),response:e}}:{}}}function zN(e,{url:t,headers:r,retries:n}){return async(a,s={})=>{const{variables:i,headers:l,url:c,retries:u}=s,d=JSON.stringify({query:a,variables:i});YE({client:ul,retries:u});const h=Object.entries({...r,...l}).reduce((p,[g,b])=>(p[g]=Array.isArray(b)?b.join(", "):b.toString(),p),{});return!h[Gm]&&!h[Jm]&&(h[Gm]=HN,h[Jm]=BN),e([c??t,{method:"POST",headers:h,body:d}],1,u??n)}}function GN(e){return async(...t)=>{if(GE.test(t[0]))throw new Error(An("This operation will result in a streamable response - use requestStream() instead."));try{const r=await e(...t),{status:n,statusText:a}=r,s=r.headers.get("content-type")||"";return r.ok?s.includes(ld.json)?t0(r):{errors:{networkStatusCode:n,message:An(`${VE} ${s}`),response:r}}:{errors:{networkStatusCode:n,message:An(a),response:r}}}catch(r){return{errors:{message:ss(r)}}}}}async function*JN(e){const t=new TextDecoder;if(e.body[Symbol.asyncIterator])for await(const r of e.body)yield t.decode(r);else{const r=e.body.getReader();let n;try{for(;!(n=await r.read()).done;)yield t.decode(n.value)}finally{r.cancel()}}}function XN(e,t){return{async*[Symbol.asyncIterator](){try{let r="";for await(const n of e)if(r+=n,r.indexOf(t)>-1){const a=r.lastIndexOf(t),i=r.slice(0,a).split(t).filter(l=>l.trim().length>0).map(l=>l.slice(l.indexOf(Ym)+Ym.length).trim());i.length>0&&(yield i),r=r.slice(a+t.length),r.trim()==="--"&&(r="")}}catch(r){throw new Error(`Error occured while processing stream payload - ${ss(r)}`)}}}}function YN(e){return{async*[Symbol.asyncIterator](){yield{...await t0(e),hasNext:!1}}}}function ZN(e){return e.map(t=>{try{return JSON.parse(t)}catch(r){throw new Error(`Error in parsing multipart response - ${ss(r)}`)}}).map(t=>{const{data:r,incremental:n,hasNext:a,extensions:s,errors:i}=t;if(!n)return{data:r||{},...zt("errors",i),...zt("extensions",s),hasNext:a};const l=n.map(({data:c,path:u,errors:d})=>({data:c&&u?ZE(u,c):{},...zt("errors",d)}));return{data:l.length===1?l[0].data:e0([...l.map(({data:c})=>c)]),...zt("errors",XE(l)),hasNext:a}})}function QN(e,t){if(e.length>0)throw new Error(qE,{cause:{graphQLErrors:e}});if(Object.keys(t).length===0)throw new Error(KE)}function e$(e,t){var l;const r=(t??"").match(UN),n=`--${r?r[1]:"-"}`;if(!((l=e.body)!=null&&l.getReader)&&!e.body[Symbol.asyncIterator])throw new Error("API multipart response did not return an iterable body",{cause:e});const a=JN(e);let s={},i;return{async*[Symbol.asyncIterator](){var c;try{let u=!0;for await(const d of XN(a,n)){const h=ZN(d);i=((c=h.find(p=>p.extensions))==null?void 0:c.extensions)??i;const f=XE(h);s=e0([s,...h.map(({data:p})=>p)]),u=h.slice(-1)[0].hasNext,QN(f,s),yield{...zt("data",s),...zt("extensions",i),hasNext:u}}if(u)throw new Error("Response stream terminated unexpectedly")}catch(u){const d=JE(u);yield{...zt("data",s),...zt("extensions",i),errors:{message:An(ss(u)),networkStatusCode:e.status,...zt("graphQLErrors",d==null?void 0:d.graphQLErrors),response:e},hasNext:!1}}}}}function t$(e){return async(...t)=>{if(!GE.test(t[0]))throw new Error(An("This operation does not result in a streamable response - use request() instead."));try{const r=await e(...t),{statusText:n}=r;if(!r.ok)throw new Error(n,{cause:r});const a=r.headers.get("content-type")||"";switch(!0){case a.includes(ld.json):return YN(r);case a.includes(ld.multipart):return e$(r,a);default:throw new Error(`${VE} ${a}`,{cause:r})}}catch(r){return{async*[Symbol.asyncIterator](){const n=JE(r);yield{errors:{message:An(ss(r)),...zt("networkStatusCode",n==null?void 0:n.status),...zt("response",n)},hasNext:!1}}}}}}function r$({client:e,storeDomain:t}){try{if(!t||typeof t!="string")throw new Error;const r=t.trim(),n=r.match(/^https?:/)?r:`https://${r}`,a=new URL(n);return a.protocol="https",a.origin}catch{throw new Error(`${e}: a valid store domain ("${t}") must be provided`)}}function r0({client:e,currentSupportedApiVersions:t,apiVersion:r,logger:n}){const a=`${e}: the provided apiVersion ("${r}")`,s=`Currently supported API versions: ${t.join(", ")}`;if(!r||typeof r!="string")throw new Error(`${a} is invalid. ${s}`);const i=r.trim();t.includes(i)||(n?n({type:"Unsupported_Api_Version",content:{apiVersion:r,supportedApiVersions:t}}):console.warn(`${a} is likely deprecated or not supported. ${s}`))}function Ro(e){const t=e*3-2;return t===10?t:`0${t}`}function tu(e,t,r){const n=t-r;return n<=0?`${e-1}-${Ro(n+4)}`:`${e}-${Ro(n)}`}function n$(){const e=new Date,t=e.getUTCMonth(),r=e.getUTCFullYear(),n=Math.floor(t/3+1);return{year:r,quarter:n,version:`${r}-${Ro(n)}`}}function a$(){const{year:e,quarter:t,version:r}=n$(),n=t===4?`${e+1}-01`:`${e}-${Ro(t+1)}`;return[tu(e,t,3),tu(e,t,2),tu(e,t,1),r,n,"unstable"]}function s$(e){return t=>({...t??{},...e.headers})}function i$({getHeaders:e,getApiUrl:t}){return(r,n)=>{const a=[r];if(n&&Object.keys(n).length>0){const{variables:s,apiVersion:i,headers:l,retries:c}=n;a.push({...s?{variables:s}:{},...l?{headers:e(l)}:{},...i?{url:t(i)}:{},...c?{retries:c}:{}})}return a}}const Zm="application/json",o$="storefront-api-client",l$="0.3.3",c$="X-Shopify-Storefront-Access-Token",u$="Shopify-Storefront-Private-Token",d$="X-SDK-Variant",h$="X-SDK-Version",f$="X-SDK-Variant-Source",Vs="Storefront API Client";function p$(e){if(e&&typeof window<"u")throw new Error(`${Vs}: private access tokens and headers should only be used in a server-to-server implementation. Use the public API access token in nonserver environments.`)}function m$(e,t){if(!e&&!t)throw new Error(`${Vs}: a public or private access token must be provided`);if(e&&t)throw new Error(`${Vs}: only provide either a public or private access token`)}function g$({storeDomain:e,apiVersion:t,publicAccessToken:r,privateAccessToken:n,clientName:a,retries:s=0,customFetchApi:i,logger:l}){const c=a$(),u=r$({client:Vs,storeDomain:e}),d={client:Vs,currentSupportedApiVersions:c,logger:l};r0({...d,apiVersion:t}),m$(r,n),p$(n);const h=b$(u,t,d),f={storeDomain:u,apiVersion:t,...r?{publicAccessToken:r}:{privateAccessToken:n},headers:{"Content-Type":Zm,Accept:Zm,[d$]:o$,[h$]:l$,...a?{[f$]:a}:{},...r?{[c$]:r}:{[u$]:n}},apiUrl:h(),clientName:a},p=VN({headers:f.headers,url:f.apiUrl,retries:s,customFetchApi:i,logger:l}),g=s$(f),b=y$(f,h),v=i$({getHeaders:g,getApiUrl:b});return Object.freeze({config:f,getHeaders:g,getApiUrl:b,fetch:(...E)=>p.fetch(...v(...E)),request:(...E)=>p.request(...v(...E)),requestStream:(...E)=>p.requestStream(...v(...E))})}function b$(e,t,r){return n=>{n&&r0({...r,apiVersion:n});const a=(n??t).trim();return`${e}/api/${a}/graphql.json`}}function y$(e,t){return r=>r?t(r):e.apiUrl}const v$=Object.freeze(Object.defineProperty({__proto__:null,createStorefrontApiClient:g$},Symbol.toStringTag,{value:"Module"})),E$=Nn(v$);Object.defineProperty(Xa,"__esModule",{value:!0});Xa.storefrontClientClass=Xa.StorefrontClient=void 0;const cd=ve,S$=E$,Qm=ct,eg=cd.__importStar(K),tg=K,_$=sn,ru=lr;class n0{constructor(t){var r;const n=this.storefrontClass().config;if(!n.isCustomStoreApp&&!t.session.accessToken)throw new eg.MissingRequiredArgument("Missing access token when creating GraphQL client");if(t.apiVersion){const s=t.apiVersion===n.apiVersion?`Storefront client has a redundant API version override to the default ${t.apiVersion}`:`Storefront client overriding default API version ${n.apiVersion} with ${t.apiVersion}`;(0,Qm.logger)(n).debug(s)}let a;if(n.isCustomStoreApp){if(a=n.privateAppStorefrontAccessToken,!a)throw new tg.MissingRequiredArgument("Custom store apps must set the privateAppStorefrontAccessToken property to call the Storefront API.")}else if(a=t.session.accessToken,!a)throw new tg.MissingRequiredArgument("Session missing access token.");this.session=t.session,this.apiVersion=t.apiVersion,this.client=(0,S$.createStorefrontApiClient)({privateAccessToken:a,apiVersion:(r=this.apiVersion)!==null&&r!==void 0?r:n.apiVersion,storeDomain:this.session.shop,customFetchApi:_$.abstractFetch,logger:(0,ru.clientLoggerFactory)(n),clientName:(0,ru.getUserAgent)(n)})}query(t){var r;return cd.__awaiter(this,void 0,void 0,function*(){if((0,Qm.logger)(this.storefrontClass().config).deprecated("10.0.0",`The query method is deprecated, and was replaced with the request method.
See the migration guide: https://github.com/Shopify/shopify-api-js/blob/main/packages/shopify-api/docs/migrating-to-v9.md#using-the-new-clients.`),typeof t.data=="string"&&t.data.length===0||Object.entries(t.data).length===0)throw new eg.MissingRequiredArgument("Query missing.");let n,a;typeof t.data=="string"?n=t.data:(n=t.data.query,a=t.data.variables);const s=Object.fromEntries(Object.entries((r=t==null?void 0:t.extraHeaders)!==null&&r!==void 0?r:{}).map(([l,c])=>[l,Array.isArray(c)?c.join(", "):c.toString()]));return{body:yield this.request(n,{headers:s,retries:t.tries?t.tries-1:void 0,variables:a}),headers:{}}})}request(t,r){var n;return cd.__awaiter(this,void 0,void 0,function*(){const a=yield this.client.request(t,Object.assign({apiVersion:this.apiVersion||this.storefrontClass().config.apiVersion},r));if(a.errors){const s=a.errors.response;(0,ru.throwFailedRequest)(a,s,((n=r==null?void 0:r.retries)!==null&&n!==void 0?n:0)>0)}return a})}storefrontClass(){return this.constructor}}Xa.StorefrontClient=n0;function C$(e){const{config:t}=e;class r extends n0{}return r.config=t,Reflect.defineProperty(r,"name",{value:"StorefrontClient"}),r}Xa.storefrontClientClass=C$;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.storefrontClientClass=e.StorefrontClient=void 0;var t=Xa;Object.defineProperty(e,"StorefrontClient",{enumerable:!0,get:function(){return t.StorefrontClient}}),Object.defineProperty(e,"storefrontClientClass",{enumerable:!0,get:function(){return t.storefrontClientClass}})})(jE);var dl={};Object.defineProperty(dl,"__esModule",{value:!0});dl.graphqlProxy=void 0;const a0=ve,rg=a0.__importStar(K),w$=Fn;function P$(e){return({session:t,rawBody:r})=>a0.__awaiter(this,void 0,void 0,function*(){if(!t.accessToken)throw new rg.InvalidSession("Cannot proxy query. Session not authenticated.");const n=(0,w$.graphqlClientClass)({config:e}),a=new n({session:t});let s,i;if(typeof r=="string"?s=r:(s=r.query,i=r.variables),!s)throw new rg.MissingRequiredArgument("Query missing.");return{body:yield a.request(s,{variables:i}),headers:{}}})}dl.graphqlProxy=P$;Object.defineProperty(ol,"__esModule",{value:!0});ol.clientClasses=void 0;const ng=Fn,A$=jE,T$=dl;function R$(e){return{Rest:(0,ng.restClientClass)({config:e}),Graphql:(0,ng.graphqlClientClass)({config:e}),Storefront:(0,A$.storefrontClientClass)({config:e}),graphqlProxy:(0,T$.graphqlProxy)(e)}}ol.clientClasses=R$;var hl={},Ya={},vh=Object.defineProperty,k$=Object.getOwnPropertyDescriptor,x$=Object.getOwnPropertyNames,I$=Object.prototype.hasOwnProperty,N$=(e,t)=>{for(var r in t)vh(e,r,{get:t[r],enumerable:!0})},$$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of x$(t))!I$.call(e,a)&&a!==r&&vh(e,a,{get:()=>t[a],enumerable:!(n=k$(t,a))||n.enumerable});return e},O$=e=>$$(vh({},"__esModule",{value:!0}),e),s0={};N$(s0,{createIsbot:()=>W$,createIsbotFromList:()=>U$,isbot:()=>B$,isbotMatch:()=>j$,isbotMatches:()=>q$,isbotNaive:()=>H$,isbotPattern:()=>V$,isbotPatterns:()=>K$,list:()=>fl,pattern:()=>o0});var L$=O$(s0),M$=" daum[ /]| deusu/| yadirectfetcher|(?:^| )site|(?:^|[^g])news|(?<! (?:channel/|google/))google(?!(app|/google| pixel))|(?<! cu)bot(?:[^\\w]|_|$)|(?<! ya(?:yandex)?)search|(?<!(?:lib))http|(?<![hg]m)score|@[a-z]|\\(at\\)[a-z]|\\[at\\][a-z]|^12345|^<|^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)|^[^ ]{50,}$|^active|^ad muncher|^amaya|^anglesharp/|^avsdevicesdk/|^bidtellect/|^biglotron|^bot|^btwebclient/|^clamav[ /]|^client/|^cobweb/|^coccoc|^custom|^ddg[_-]android|^discourse|^dispatch/\\d|^downcast/|^duckduckgo|^facebook|^fdm[ /]\\d|^getright/|^gozilla/|^hatena|^hobbit|^hotzonu|^hwcdn/|^jeode/|^jetty/|^jigsaw|^linkdex|^metauri|^microsoft bits|^movabletype|^mozilla/\\d\\.\\d \\(compatible;?\\)$|^mozilla/\\d\\.\\d \\w*$|^navermailapp|^netsurf|^nuclei|^offline explorer|^php|^postman|^postrank|^python|^rank|^read|^reed|^rest|^serf|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor/|^tumblr/|^user-agent:|^valid|^venus/fedoraplanet|^w3c|^webbandit/|^webcopier|^wget|^whatsapp|^xenu link sleuth|^yahoo|^yandex|^zdm/\\d|^zoom marketplace/|^{{.*}}$|adbeat\\.com|appinsights|archive|ask jeeves/teoma|bit\\.ly/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check|chrome-lighthouse|chromeframe|classifier|cloud|crawl|cryptoapi|dareboost|datanyze|dataprovider|dejaclick|dmbrowser|download|evc-batch/|feed|firephp|freesafeip|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|inspect|iplabel|ips-agent|java(?!;)|library|mail\\.ru/|manager|monitor|neustar wpm|nutch|offbyone|optimize|pageburst|parser|perl|phantom|pingdom|powermarks|preview|proxy|ptst[ /]\\d|reader|reputation|resolver|retriever|rexx;|rigor|robot|rss|scan|scrape|server|sogou|sparkler/|speedcurve|spider|splash|statuscake|stumbleupon\\.com|supercleaner|synapse|synthetic|torrent|trace|transcoder|twingly recon|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms/|wordpress|zgrab",F$=new RegExp(" daum[ /]| deusu\\/| yadirectfetcher|(?:^| )site|(?:^|[^g])news|(?<! (?:channel\\/|google\\/))google(?!(app|\\/google| pixel))|(?<! cu)bot(?:[^\\w]|_|$)|(?<! ya(?:yandex)?)search|(?<!(?:lib))http|(?<![hg]m)score|@[a-z]|\\(at\\)[a-z]|\\[at\\][a-z]|^12345|^<|^[\\w \\.\\-\\(?:\\):]+(?:\\/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)|^[^ ]{50,}$|^active|^ad muncher|^amaya|^anglesharp\\/|^avsdevicesdk\\/|^bidtellect\\/|^biglotron|^bot|^btwebclient\\/|^clamav[ /]|^client\\/|^cobweb\\/|^coccoc|^custom|^ddg[_-]android|^discourse|^dispatch\\/\\d|^downcast\\/|^duckduckgo|^facebook|^fdm[ /]\\d|^getright\\/|^gozilla\\/|^hatena|^hobbit|^hotzonu|^hwcdn\\/|^jeode\\/|^jetty\\/|^jigsaw|^linkdex|^metauri|^microsoft bits|^movabletype|^mozilla\\/\\d\\.\\d \\(compatible;?\\)$|^mozilla\\/\\d\\.\\d \\w*$|^navermailapp|^netsurf|^nuclei|^offline explorer|^php|^postman|^postrank|^python|^rank|^read|^reed|^rest|^serf|^snapchat|^space bison|^svn|^swcd |^taringa|^thumbor\\/|^tumblr\\/|^user-agent:|^valid|^venus\\/fedoraplanet|^w3c|^webbandit\\/|^webcopier|^wget|^whatsapp|^xenu link sleuth|^yahoo|^yandex|^zdm\\/\\d|^zoom marketplace\\/|^{{.*}}$|adbeat\\.com|appinsights|archive|ask jeeves\\/teoma|bit\\.ly\\/|bluecoat drtr|browsex|burpcollaborator|capture|catch|check|chrome-lighthouse|chromeframe|classifier|cloud|crawl|cryptoapi|dareboost|datanyze|dataprovider|dejaclick|dmbrowser|download|evc-batch\\/|feed|firephp|freesafeip|gomezagent|headless|httrack|hubspot marketing grader|hydra|ibisbrowser|images|inspect|iplabel|ips-agent|java(?!;)|library|mail\\.ru\\/|manager|monitor|neustar wpm|nutch|offbyone|optimize|pageburst|parser|perl|phantom|pingdom|powermarks|preview|proxy|ptst[ /]\\d|reader|reputation|resolver|retriever|rexx;|rigor|robot|rss|scan|scrape|server|sogou|sparkler\\/|speedcurve|spider|splash|statuscake|stumbleupon\\.com|supercleaner|synapse|synthetic|torrent|trace|transcoder|twingly recon|url|virtuoso|wappalyzer|webglance|webkit2png|whatcms\\/|wordpress|zgrab","i"),D$=[" daum[ /]"," deusu/"," yadirectfetcher","(?:^| )site","(?:^|[^g])news","(?<! (?:channel/|google/))google(?!(app|/google| pixel))","(?<! cu)bot(?:[^\\w]|_|$)","(?<! ya(?:yandex)?)search","(?<!(?:lib))http","(?<![hg]m)score","@[a-z]","\\(at\\)[a-z]","\\[at\\][a-z]","^12345","^<","^[\\w \\.\\-\\(?:\\):]+(?:/v?\\d+(\\.\\d+)?(?:\\.\\d{1,10})?)?(?:,|$)","^[^ ]{50,}$","^active","^ad muncher","^amaya","^anglesharp/","^avsdevicesdk/","^bidtellect/","^biglotron","^bot","^btwebclient/","^clamav[ /]","^client/","^cobweb/","^coccoc","^custom","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^facebook","^fdm[ /]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^jeode/","^jetty/","^jigsaw","^linkdex","^metauri","^microsoft bits","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^mozilla/\\d\\.\\d \\w*$","^navermailapp","^netsurf","^nuclei","^offline explorer","^php","^postman","^postrank","^python","^rank","^read","^reed","^rest","^serf","^snapchat","^space bison","^svn","^swcd ","^taringa","^thumbor/","^tumblr/","^user-agent:","^valid","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zoom marketplace/","^{{.*}}$","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","classifier","cloud","crawl","cryptoapi","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","evc-batch/","feed","firephp","freesafeip","gomezagent","headless","httrack","hubspot marketing grader","hydra","ibisbrowser","images","inspect","iplabel","ips-agent","java(?!;)","library","mail\\.ru/","manager","monitor","neustar wpm","nutch","offbyone","optimize","pageburst","parser","perl","phantom","pingdom","powermarks","preview","proxy","ptst[ /]\\d","reader","reputation","resolver","retriever","rexx;","rigor","robot","rss","scan","scrape","server","sogou","sparkler/","speedcurve","spider","splash","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","torrent","trace","transcoder","twingly recon","url","virtuoso","wappalyzer","webglance","webkit2png","whatcms/","wordpress","zgrab"],i0=/bot|spider|crawl|http|lighthouse/i,o0=F$,fl=D$,H$=e=>!!e&&i0.test(e),Mi;function B$(e){if(typeof Mi>"u")try{Mi=new RegExp(M$,"i")}catch{Mi=i0}return!!e&&Mi.test(e)}var W$=e=>t=>!!t&&e.test(t),U$=e=>{const t=new RegExp(e.join("|"),"i");return r=>!!r&&t.test(r)},j$=e=>{var t;return((t=e==null?void 0:e.match(o0))==null?void 0:t[0])??null},q$=e=>fl.map(t=>{var r;return(r=e==null?void 0:e.match(new RegExp(t,"i")))==null?void 0:r[0]}).filter(Boolean),V$=e=>e?fl.find(t=>new RegExp(t,"i").test(e))??null:null,K$=e=>e?fl.filter(t=>new RegExp(t,"i").test(e)):[],Fi={},ag;function l0(){if(ag)return Fi;ag=1,Object.defineProperty(Fi,"__esModule",{value:!0});class e{static stringify(r){return!r||Object.keys(r).length===0?"":new e().putAll(r).stringify()}constructor(){this.processedQuery=new URLSearchParams}putAll(r){return Object.entries(r).forEach(([n,a])=>this.put(n,a)),this}put(r,n){Array.isArray(n)?this.putArray(r,n):(n==null?void 0:n.constructor)===Object?this.putObject(r,n):this.putSimple(r,n)}putArray(r,n){n.forEach(a=>this.processedQuery.append(`${r}[]`,`${a}`))}putObject(r,n){Object.entries(n).forEach(([a,s])=>{this.processedQuery.append(`${r}[${a}]`,`${s}`)})}putSimple(r,n){this.processedQuery.append(r,`${n}`)}stringify(r=!1){const n=this.processedQuery.toString();return r?n:`?${n}`}}return Fi.default=e,Fi}var $t={},is={};Object.defineProperty(is,"__esModule",{value:!0});is.safeCompare=void 0;const z$=ve,G$=z$.__importStar(K),J$=(e,t)=>{if(typeof e==typeof t){const r=new TextEncoder,n=r.encode(JSON.stringify(e)),a=r.encode(JSON.stringify(t));if(n.length===a.length)return X$(n,a)}else throw new G$.SafeCompareError(`Mismatched data types provided: ${typeof e} and ${typeof t}`);return!1};is.safeCompare=J$;function X$(e,t){const r=new Uint8Array(e),n=new Uint8Array(t);let a=0;for(let s=0;s<r.length;s++)a|=r[s]^n[s];return a===0}var Yn={},sg;function os(){if(sg)return Yn;sg=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.ValidationErrorReason=Yn.HmacValidationType=void 0;var e;return function(t){t.Flow="flow",t.Webhook="webhook",t.FulfillmentService="fulfillment_service"}(e||(Yn.HmacValidationType=e={})),Yn.ValidationErrorReason={MissingBody:"missing_body",InvalidHmac:"invalid_hmac",MissingHmac:"missing_hmac"},Yn}Object.defineProperty($t,"__esModule",{value:!0});$t.validateHmacFromRequestFactory=$t.getCurrentTimeInSec=$t.validateHmacString=$t.validateHmac=$t.generateLocalHmac=void 0;const Fr=ve,c0=ct,Y$=xe,ig=wa(),u0=tl(),d0=el(),ud=Fr.__importStar(K),h0=is,Z$=Fr.__importDefault(l0()),nu=os(),Q$=90;function eO(e){const t=new Z$.default;return Object.keys(e).sort((r,n)=>r.localeCompare(n)).forEach(r=>t.put(r,e[r])),t.stringify(!0)}function tO(e){return Object.entries(e).sort(([t],[r])=>t.localeCompare(r)).reduce((t,[r,n])=>`${t}${r}=${Array.isArray(n)?n.join(","):n}`,"")}function f0(e){return(t,r="admin")=>Fr.__awaiter(this,void 0,void 0,function*(){const n=Fr.__rest(t,["hmac","signature"]),a=r==="admin"?eO(n):tO(n);return(0,u0.createSHA256HMAC)(e.apiSecretKey,a,d0.HashFormat.Hex)})}$t.generateLocalHmac=f0;function rO(e){return(t,{signator:r}={signator:"admin"})=>Fr.__awaiter(this,void 0,void 0,function*(){if(r==="admin"&&!t.hmac)throw new ud.InvalidHmacError("Query does not contain an HMAC value.");if(r==="appProxy"&&!t.signature)throw new ud.InvalidHmacError("Query does not contain a signature value.");aO(t);const n=r==="appProxy"?t.signature:t.hmac,a=yield f0(e)(t,r);return(0,h0.safeCompare)(n,a)})}$t.validateHmac=rO;function p0(e,t,r,n){return Fr.__awaiter(this,void 0,void 0,function*(){const a=yield(0,u0.createSHA256HMAC)(e.apiSecretKey,t,n);return(0,h0.safeCompare)(r,a)})}$t.validateHmacString=p0;function m0(){return Math.trunc(Date.now()/1e3)}$t.getCurrentTimeInSec=m0;function nO(e){return function(r){var{type:n,rawBody:a}=r,s=Fr.__rest(r,["type","rawBody"]);return Fr.__awaiter(this,void 0,void 0,function*(){const i=yield(0,ig.abstractConvertRequest)(s);if(!a.length)return au(nu.ValidationErrorReason.MissingBody,n,e);const l=(0,ig.getHeader)(i.headers,Y$.ShopifyHeader.Hmac);return l?(yield p0(e,a,l,d0.HashFormat.Base64))?sO(n,e):au(nu.ValidationErrorReason.InvalidHmac,n,e):au(nu.ValidationErrorReason.MissingHmac,n,e)})}}$t.validateHmacFromRequestFactory=nO;function aO(e){if(Math.abs(m0()-Number(e.timestamp))>Q$)throw new ud.InvalidHmacError("HMAC timestamp is outside of the tolerance range")}function au(e,t,r){return Fr.__awaiter(this,void 0,void 0,function*(){return yield(0,c0.logger)(r).debug(`${t} request is not valid`,{reason:e}),{valid:!1,reason:e}})}function sO(e,t){return Fr.__awaiter(this,void 0,void 0,function*(){return yield(0,c0.logger)(t).debug(`${e} request is valid`),{valid:!0}})}var Dr={},ii={};Object.defineProperty(ii,"__esModule",{value:!0});ii.decodeHost=void 0;function iO(e){return atob(e)}ii.decodeHost=iO;var ga={};Object.defineProperty(ga,"__esModule",{value:!0});ga.legacyUrlToShopAdminUrl=ga.shopAdminUrlToLegacyUrl=void 0;function oO(e){const t=g0(e);if(!(t.split(".")[0]==="admin"))return null;const n=new RegExp("admin\\..+/store/([^/]+)"),a=t.match(n);if(a&&a.length===2){const s=a[1];return t.includes("spin.dev/store/")?cO(t):`${s}.myshopify.com`}else return null}ga.shopAdminUrlToLegacyUrl=oO;function lO(e){const t=g0(e),r=new RegExp("(.+)\\.myshopify\\.com$"),n=t.match(r);return n&&n.length===2?`admin.shopify.com/store/${n[1]}`:t.endsWith("spin.dev")?uO(t):null}ga.legacyUrlToShopAdminUrl=lO;function cO(e){const t=new RegExp("admin\\.web\\.(.+\\.spin\\.dev)/store/(.+)"),r=e.match(t);if(r&&r.length===3){const n=r[1];return`${r[2]}.shopify.${n}`}else return null}function uO(e){const t=new RegExp("(.+)\\.shopify\\.(.+\\.spin\\.dev)"),r=e.match(t);if(r&&r.length===3){const n=r[1];return`admin.web.${r[2]}/store/${n}`}else return null}function g0(e){return e.replace(/^https?:\/\//,"").replace(/\/$/,"")}Object.defineProperty(Dr,"__esModule",{value:!0});Dr.sanitizeHost=Dr.sanitizeShop=void 0;const b0=K,dO=ii,hO=ga;function fO(e){return(t,r=!1)=>{let n=t;const a=["myshopify\\.com","shopify\\.com","myshopify\\.io"];e.customShopDomains&&a.push(...e.customShopDomains.map(u=>typeof u=="string"?u:u.source));const s=new RegExp(`^[a-zA-Z0-9][a-zA-Z0-9-_]*\\.(${a.join("|")})[/]*$`);new RegExp(`^admin\\.(${a.join("|")})/store/([a-zA-Z0-9][a-zA-Z0-9-_]*)$`).test(n)&&(n=(0,hO.shopAdminUrlToLegacyUrl)(n)||"");const c=s.test(n)?n:null;if(!c&&r)throw new b0.InvalidShopError("Received invalid shop argument");return c}}Dr.sanitizeShop=fO;function pO(){return(e,t=!1)=>{let n=/^[0-9a-zA-Z+/]+={0,2}$/.test(e)?e:null;if(n){const{hostname:a}=new URL(`https://${(0,dO.decodeHost)(n)}`),s=["myshopify\\.com","shopify\\.com","myshopify\\.io","spin\\.dev"];new RegExp(`\\.(${s.join("|")})$`).test(a)||(n=null)}if(!n&&t)throw new b0.InvalidHostError("Received invalid host argument");return n}}Dr.sanitizeHost=pO;var su={},iu={},og;function mO(){return og||(og=1,Object.defineProperty(iu,"__esModule",{value:!0})),iu}var ou={},lg;function gO(){return lg||(lg=1,Object.defineProperty(ou,"__esModule",{value:!0})),ou}var cg;function Eh(){return cg||(cg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphqlClient=e.DataType=void 0;const t=ve;t.__exportStar(mO(),e),t.__exportStar(gO(),e);var r;(function(a){a.JSON="application/json",a.GraphQL="application/graphql",a.URLEncoded="application/x-www-form-urlencoded"})(r||(e.DataType=r={}));var n=pa;Object.defineProperty(e,"GraphqlClient",{enumerable:!0,get:function(){return n.GraphqlClient}})}(su)),su}var oi={};Object.defineProperty(oi,"__esModule",{value:!0});oi.fetchRequestFactory=void 0;const bO=ve,yO=ct,vO=xe,EO=sn;function SO(e){return function(r,n){return bO.__awaiter(this,void 0,void 0,function*(){const a=(0,yO.logger)(e),s=e.logger.httpRequests&&e.logger.level===vO.LogSeverity.Debug;s&&a.debug("Making HTTP request",Object.assign({method:(n==null?void 0:n.method)||"GET",url:r},(n==null?void 0:n.body)&&{body:n==null?void 0:n.body}));const i=yield(0,EO.abstractFetch)(r,n);return s&&a.debug("HTTP request completed",{method:(n==null?void 0:n.method)||"GET",url:r,status:i.status}),i})}}oi.fetchRequestFactory=SO;var kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.STATE_COOKIE_NAME=kn.SESSION_COOKIE_NAME=void 0;kn.SESSION_COOKIE_NAME="shopify_app_session";kn.STATE_COOKIE_NAME="shopify_app_state";var li={};Object.defineProperty(li,"__esModule",{value:!0});li.nonce=void 0;const lu=tl();function _O(){return(lu.crypto.getRandomValues?lu.crypto.getRandomValues(new Uint8Array(15)):lu.crypto.randomBytes(15)).map(n=>n%10).join("")}li.nonce=_O;var ci={},y0={},pl={},ml={};Object.defineProperty(ml,"__esModule",{value:!0});ml.default=wO;let Di;const CO=new Uint8Array(16);function wO(){if(!Di&&(Di=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Di))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Di(CO)}var Dn={},Pa={},gl={};Object.defineProperty(gl,"__esModule",{value:!0});gl.default=void 0;var PO=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;gl.default=PO;Object.defineProperty(Pa,"__esModule",{value:!0});Pa.default=void 0;var AO=TO(gl);function TO(e){return e&&e.__esModule?e:{default:e}}function RO(e){return typeof e=="string"&&AO.default.test(e)}var kO=RO;Pa.default=kO;Object.defineProperty(Dn,"__esModule",{value:!0});Dn.default=void 0;Dn.unsafeStringify=v0;var xO=IO(Pa);function IO(e){return e&&e.__esModule?e:{default:e}}const Et=[];for(let e=0;e<256;++e)Et.push((e+256).toString(16).slice(1));function v0(e,t=0){return Et[e[t+0]]+Et[e[t+1]]+Et[e[t+2]]+Et[e[t+3]]+"-"+Et[e[t+4]]+Et[e[t+5]]+"-"+Et[e[t+6]]+Et[e[t+7]]+"-"+Et[e[t+8]]+Et[e[t+9]]+"-"+Et[e[t+10]]+Et[e[t+11]]+Et[e[t+12]]+Et[e[t+13]]+Et[e[t+14]]+Et[e[t+15]]}function NO(e,t=0){const r=v0(e,t);if(!(0,xO.default)(r))throw TypeError("Stringified UUID is invalid");return r}var $O=NO;Dn.default=$O;Object.defineProperty(pl,"__esModule",{value:!0});pl.default=void 0;var OO=MO(ml),LO=Dn;function MO(e){return e&&e.__esModule?e:{default:e}}let ug,cu,uu=0,du=0;function FO(e,t,r){let n=t&&r||0;const a=t||new Array(16);e=e||{};let s=e.node||ug,i=e.clockseq!==void 0?e.clockseq:cu;if(s==null||i==null){const f=e.random||(e.rng||OO.default)();s==null&&(s=ug=[f[0]|1,f[1],f[2],f[3],f[4],f[5]]),i==null&&(i=cu=(f[6]<<8|f[7])&16383)}let l=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:du+1;const u=l-uu+(c-du)/1e4;if(u<0&&e.clockseq===void 0&&(i=i+1&16383),(u<0||l>uu)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");uu=l,du=c,cu=i,l+=122192928e5;const d=((l&268435455)*1e4+c)%4294967296;a[n++]=d>>>24&255,a[n++]=d>>>16&255,a[n++]=d>>>8&255,a[n++]=d&255;const h=l/4294967296*1e4&268435455;a[n++]=h>>>8&255,a[n++]=h&255,a[n++]=h>>>24&15|16,a[n++]=h>>>16&255,a[n++]=i>>>8|128,a[n++]=i&255;for(let f=0;f<6;++f)a[n+f]=s[f];return t||(0,LO.unsafeStringify)(a)}var DO=FO;pl.default=DO;var bl={},xn={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.default=void 0;var HO=BO(Pa);function BO(e){return e&&e.__esModule?e:{default:e}}function WO(e){if(!(0,HO.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var UO=WO;ui.default=UO;Object.defineProperty(xn,"__esModule",{value:!0});xn.URL=xn.DNS=void 0;xn.default=zO;var jO=Dn,qO=VO(ui);function VO(e){return e&&e.__esModule?e:{default:e}}function KO(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}const E0="6ba7b810-9dad-11d1-80b4-00c04fd430c8";xn.DNS=E0;const S0="6ba7b811-9dad-11d1-80b4-00c04fd430c8";xn.URL=S0;function zO(e,t,r){function n(a,s,i,l){var c;if(typeof a=="string"&&(a=KO(a)),typeof s=="string"&&(s=(0,qO.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+a.length);if(u.set(s),u.set(a,s.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,i){l=l||0;for(let d=0;d<16;++d)i[l+d]=u[d];return i}return(0,jO.unsafeStringify)(u)}try{n.name=e}catch{}return n.DNS=E0,n.URL=S0,n}var yl={};Object.defineProperty(yl,"__esModule",{value:!0});yl.default=void 0;function GO(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return JO(XO(YO(e),e.length*8))}function JO(e){const t=[],r=e.length*32,n="0123456789abcdef";for(let a=0;a<r;a+=8){const s=e[a>>5]>>>a%32&255,i=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(i)}return t}function _0(e){return(e+64>>>9<<4)+14+1}function XO(e,t){e[t>>5]|=128<<t%32,e[_0(t)-1]=t;let r=1732584193,n=-271733879,a=-1732584194,s=271733878;for(let i=0;i<e.length;i+=16){const l=r,c=n,u=a,d=s;r=Rt(r,n,a,s,e[i],7,-680876936),s=Rt(s,r,n,a,e[i+1],12,-389564586),a=Rt(a,s,r,n,e[i+2],17,606105819),n=Rt(n,a,s,r,e[i+3],22,-1044525330),r=Rt(r,n,a,s,e[i+4],7,-176418897),s=Rt(s,r,n,a,e[i+5],12,1200080426),a=Rt(a,s,r,n,e[i+6],17,-1473231341),n=Rt(n,a,s,r,e[i+7],22,-45705983),r=Rt(r,n,a,s,e[i+8],7,1770035416),s=Rt(s,r,n,a,e[i+9],12,-1958414417),a=Rt(a,s,r,n,e[i+10],17,-42063),n=Rt(n,a,s,r,e[i+11],22,-1990404162),r=Rt(r,n,a,s,e[i+12],7,1804603682),s=Rt(s,r,n,a,e[i+13],12,-40341101),a=Rt(a,s,r,n,e[i+14],17,-1502002290),n=Rt(n,a,s,r,e[i+15],22,1236535329),r=kt(r,n,a,s,e[i+1],5,-165796510),s=kt(s,r,n,a,e[i+6],9,-1069501632),a=kt(a,s,r,n,e[i+11],14,643717713),n=kt(n,a,s,r,e[i],20,-373897302),r=kt(r,n,a,s,e[i+5],5,-701558691),s=kt(s,r,n,a,e[i+10],9,38016083),a=kt(a,s,r,n,e[i+15],14,-660478335),n=kt(n,a,s,r,e[i+4],20,-405537848),r=kt(r,n,a,s,e[i+9],5,568446438),s=kt(s,r,n,a,e[i+14],9,-1019803690),a=kt(a,s,r,n,e[i+3],14,-187363961),n=kt(n,a,s,r,e[i+8],20,1163531501),r=kt(r,n,a,s,e[i+13],5,-1444681467),s=kt(s,r,n,a,e[i+2],9,-51403784),a=kt(a,s,r,n,e[i+7],14,1735328473),n=kt(n,a,s,r,e[i+12],20,-1926607734),r=xt(r,n,a,s,e[i+5],4,-378558),s=xt(s,r,n,a,e[i+8],11,-2022574463),a=xt(a,s,r,n,e[i+11],16,1839030562),n=xt(n,a,s,r,e[i+14],23,-35309556),r=xt(r,n,a,s,e[i+1],4,-1530992060),s=xt(s,r,n,a,e[i+4],11,1272893353),a=xt(a,s,r,n,e[i+7],16,-155497632),n=xt(n,a,s,r,e[i+10],23,-1094730640),r=xt(r,n,a,s,e[i+13],4,681279174),s=xt(s,r,n,a,e[i],11,-358537222),a=xt(a,s,r,n,e[i+3],16,-722521979),n=xt(n,a,s,r,e[i+6],23,76029189),r=xt(r,n,a,s,e[i+9],4,-640364487),s=xt(s,r,n,a,e[i+12],11,-421815835),a=xt(a,s,r,n,e[i+15],16,530742520),n=xt(n,a,s,r,e[i+2],23,-995338651),r=It(r,n,a,s,e[i],6,-198630844),s=It(s,r,n,a,e[i+7],10,1126891415),a=It(a,s,r,n,e[i+14],15,-1416354905),n=It(n,a,s,r,e[i+5],21,-57434055),r=It(r,n,a,s,e[i+12],6,1700485571),s=It(s,r,n,a,e[i+3],10,-1894986606),a=It(a,s,r,n,e[i+10],15,-1051523),n=It(n,a,s,r,e[i+1],21,-2054922799),r=It(r,n,a,s,e[i+8],6,1873313359),s=It(s,r,n,a,e[i+15],10,-30611744),a=It(a,s,r,n,e[i+6],15,-1560198380),n=It(n,a,s,r,e[i+13],21,1309151649),r=It(r,n,a,s,e[i+4],6,-145523070),s=It(s,r,n,a,e[i+11],10,-1120210379),a=It(a,s,r,n,e[i+2],15,718787259),n=It(n,a,s,r,e[i+9],21,-343485551),r=_n(r,l),n=_n(n,c),a=_n(a,u),s=_n(s,d)}return[r,n,a,s]}function YO(e){if(e.length===0)return[];const t=e.length*8,r=new Uint32Array(_0(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function _n(e,t){const r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function ZO(e,t){return e<<t|e>>>32-t}function vl(e,t,r,n,a,s){return _n(ZO(_n(_n(t,e),_n(n,s)),a),r)}function Rt(e,t,r,n,a,s,i){return vl(t&r|~t&n,e,t,a,s,i)}function kt(e,t,r,n,a,s,i){return vl(t&n|r&~n,e,t,a,s,i)}function xt(e,t,r,n,a,s,i){return vl(t^r^n,e,t,a,s,i)}function It(e,t,r,n,a,s,i){return vl(r^(t|~n),e,t,a,s,i)}var QO=GO;yl.default=QO;Object.defineProperty(bl,"__esModule",{value:!0});bl.default=void 0;var eL=C0(xn),tL=C0(yl);function C0(e){return e&&e.__esModule?e:{default:e}}const rL=(0,eL.default)("v3",48,tL.default);var nL=rL;bl.default=nL;var El={},Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.default=void 0;const aL=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var sL={randomUUID:aL};Sl.default=sL;Object.defineProperty(El,"__esModule",{value:!0});El.default=void 0;var dg=w0(Sl),iL=w0(ml),oL=Dn;function w0(e){return e&&e.__esModule?e:{default:e}}function lL(e,t,r){if(dg.default.randomUUID&&!t&&!e)return dg.default.randomUUID();e=e||{};const n=e.random||(e.rng||iL.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let a=0;a<16;++a)t[r+a]=n[a];return t}return(0,oL.unsafeStringify)(n)}var cL=lL;El.default=cL;var _l={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0});Cl.default=void 0;function uL(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function hu(e,t){return e<<t|e>>>32-t}function dL(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const i=unescape(encodeURIComponent(e));e=[];for(let l=0;l<i.length;++l)e.push(i.charCodeAt(l))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,a=Math.ceil(n/16),s=new Array(a);for(let i=0;i<a;++i){const l=new Uint32Array(16);for(let c=0;c<16;++c)l[c]=e[i*64+c*4]<<24|e[i*64+c*4+1]<<16|e[i*64+c*4+2]<<8|e[i*64+c*4+3];s[i]=l}s[a-1][14]=(e.length-1)*8/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=(e.length-1)*8&4294967295;for(let i=0;i<a;++i){const l=new Uint32Array(80);for(let p=0;p<16;++p)l[p]=s[i][p];for(let p=16;p<80;++p)l[p]=hu(l[p-3]^l[p-8]^l[p-14]^l[p-16],1);let c=r[0],u=r[1],d=r[2],h=r[3],f=r[4];for(let p=0;p<80;++p){const g=Math.floor(p/20),b=hu(c,5)+uL(g,u,d,h)+f+t[g]+l[p]>>>0;f=h,h=d,d=hu(u,30)>>>0,u=c,c=b}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+d>>>0,r[3]=r[3]+h>>>0,r[4]=r[4]+f>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var hL=dL;Cl.default=hL;Object.defineProperty(_l,"__esModule",{value:!0});_l.default=void 0;var fL=P0(xn),pL=P0(Cl);function P0(e){return e&&e.__esModule?e:{default:e}}const mL=(0,fL.default)("v5",80,pL.default);var gL=mL;_l.default=gL;var wl={};Object.defineProperty(wl,"__esModule",{value:!0});wl.default=void 0;var bL="00000000-0000-0000-0000-000000000000";wl.default=bL;var Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});Pl.default=void 0;var yL=vL(Pa);function vL(e){return e&&e.__esModule?e:{default:e}}function EL(e){if(!(0,yL.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var SL=EL;Pl.default=SL;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.default}});var t=d(pl),r=d(bl),n=d(El),a=d(_l),s=d(wl),i=d(Pl),l=d(Pa),c=d(Dn),u=d(ui);function d(h){return h&&h.__esModule?h:{default:h}}})(y0);var ws={},hg;function Sh(){if(hg)return ws;hg=1,Object.defineProperty(ws,"__esModule",{value:!0}),ws.Session=void 0;const e=K,t=si,r=["id","shop","state","isOnline","scope","accessToken","expires","onlineAccessInfo"];class n{static fromPropertyArray(s,i=!1){if(!Array.isArray(s))throw new e.InvalidSession("The parameter is not an array: a Session cannot be created from this object.");const l=Object.fromEntries(s.filter(([h,f])=>f!=null).map(([h,f])=>{switch(h.toLowerCase()){case"isonline":return["isOnline",f];case"accesstoken":return["accessToken",f];case"onlineaccessinfo":return["onlineAccessInfo",f];case"userid":return["userId",f];case"firstname":return["firstName",f];case"lastname":return["lastName",f];case"accountowner":return["accountOwner",f];case"emailverified":return["emailVerified",f];default:return[h.toLowerCase(),f]}})),c={},u={associated_user:{}};return Object.entries(l).forEach(([h,f])=>{switch(h){case"isOnline":typeof f=="string"?c[h]=f.toString().toLowerCase()==="true":typeof f=="number"?c[h]=!!f:c[h]=f;break;case"scope":c[h]=f.toString();break;case"expires":c[h]=f?new Date(Number(f)):void 0;break;case"onlineAccessInfo":u.associated_user.id=Number(f);break;case"userId":if(i){u.associated_user.id=Number(f);break}case"firstName":if(i){u.associated_user.first_name=String(f);break}case"lastName":if(i){u.associated_user.last_name=String(f);break}case"email":if(i){u.associated_user.email=String(f);break}case"accountOwner":if(i){u.associated_user.account_owner=!!f;break}case"locale":if(i){u.associated_user.locale=String(f);break}case"collaborator":if(i){u.associated_user.collaborator=!!f;break}case"emailVerified":if(i){u.associated_user.email_verified=!!f;break}default:c[h]=f}}),c.isOnline&&(c.onlineAccessInfo=u),new n(c)}constructor(s){Object.assign(this,s)}isActive(s){return!this.isScopeChanged(s)&&!!this.accessToken&&!this.isExpired()}isScopeChanged(s){return!(s instanceof t.AuthScopes?s:new t.AuthScopes(s)).equals(this.scope)}isExpired(s=0){return!!(this.expires&&this.expires.getTime()-s<Date.now())}toObject(){const s={id:this.id,shop:this.shop,state:this.state,isOnline:this.isOnline};return this.scope&&(s.scope=this.scope),this.expires&&(s.expires=this.expires),this.accessToken&&(s.accessToken=this.accessToken),this.onlineAccessInfo&&(s.onlineAccessInfo=this.onlineAccessInfo),s}equals(s){if(!s||!(this.id===s.id&&this.shop===s.shop&&this.state===s.state&&this.isOnline===s.isOnline))return!1;const l=this.toPropertyArray(!0);l.sort(([u],[d])=>u<d?-1:1);const c=s.toPropertyArray(!0);return c.sort(([u],[d])=>u<d?-1:1),JSON.stringify(l)===JSON.stringify(c)}toPropertyArray(s=!1){return Object.entries(this).filter(([i,l])=>r.includes(i)&&l!==void 0&&l!==null).flatMap(([i,l])=>{var c,u,d,h,f,p,g,b;switch(i){case"expires":return[[i,l?l.getTime():void 0]];case"onlineAccessInfo":return s?[["userId",(c=l==null?void 0:l.associated_user)===null||c===void 0?void 0:c.id],["firstName",(u=l==null?void 0:l.associated_user)===null||u===void 0?void 0:u.first_name],["lastName",(d=l==null?void 0:l.associated_user)===null||d===void 0?void 0:d.last_name],["email",(h=l==null?void 0:l.associated_user)===null||h===void 0?void 0:h.email],["locale",(f=l==null?void 0:l.associated_user)===null||f===void 0?void 0:f.locale],["emailVerified",(p=l==null?void 0:l.associated_user)===null||p===void 0?void 0:p.email_verified],["accountOwner",(g=l==null?void 0:l.associated_user)===null||g===void 0?void 0:g.account_owner],["collaborator",(b=l==null?void 0:l.associated_user)===null||b===void 0?void 0:b.collaborator]]:[[i,l.associated_user.id]];default:return[[i,l]]}}).filter(([i,l])=>l!==void 0)}}return ws.Session=n,ws}var br={},ls={};const fe=crypto,Jt=e=>e instanceof CryptoKey,A0=async(e,t)=>{const r=`SHA-${e.slice(-3)}`;return new Uint8Array(await fe.subtle.digest(r,t))},Xe=new TextEncoder,cr=new TextDecoder,ko=2**32;function Hr(...e){const t=e.reduce((a,{length:s})=>a+s,0),r=new Uint8Array(t);let n=0;for(const a of e)r.set(a,n),n+=a.length;return r}function _L(e,t){return Hr(Xe.encode(e),new Uint8Array([0]),t)}function dd(e,t,r){if(t<0||t>=ko)throw new RangeError(`value must be >= 0 and <= ${ko-1}. Received ${t}`);e.set([t>>>24,t>>>16,t>>>8,t&255],r)}function T0(e){const t=Math.floor(e/ko),r=e%ko,n=new Uint8Array(8);return dd(n,t,0),dd(n,r,4),n}function _h(e){const t=new Uint8Array(4);return dd(t,e),t}function fu(e){return Hr(_h(e.length),e)}async function CL(e,t,r){const n=Math.ceil((t>>3)/32),a=new Uint8Array(n*32);for(let s=0;s<n;s++){const i=new Uint8Array(4+e.length+r.length);i.set(_h(s+1)),i.set(e,4),i.set(r,4+e.length),a.set(await A0("sha256",i),s*32)}return a.slice(0,t>>3)}const Ch=e=>{let t=e;typeof t=="string"&&(t=Xe.encode(t));const r=32768,n=[];for(let a=0;a<t.length;a+=r)n.push(String.fromCharCode.apply(null,t.subarray(a,a+r)));return btoa(n.join(""))},tt=e=>Ch(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),R0=e=>{const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r},pt=e=>{let t=e;t instanceof Uint8Array&&(t=cr.decode(t)),t=t.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return R0(t)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};class wt extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(t){var r;super(t),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)==null||r.call(Error,this,this.constructor)}}class qt extends wt{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}}class hd extends wt{static get code(){return"ERR_JWT_EXPIRED"}constructor(t,r="unspecified",n="unspecified"){super(t),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}}class xo extends wt{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}class Te extends wt{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}class Ks extends wt{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}class Q extends wt{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}class Ne extends wt{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}class Vt extends wt{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}class k0 extends wt{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}class Al extends wt{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}class wh extends wt{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}class x0 extends wt{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}class I0 extends wt{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}class Ph extends wt{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}const wL=Object.freeze(Object.defineProperty({__proto__:null,JOSEAlgNotAllowed:xo,JOSEError:wt,JOSENotSupported:Te,JWEDecryptionFailed:Ks,JWEInvalid:Q,JWKInvalid:k0,JWKSInvalid:Al,JWKSMultipleMatchingKeys:x0,JWKSNoMatchingKey:wh,JWKSTimeout:I0,JWSInvalid:Ne,JWSSignatureVerificationFailed:Ph,JWTClaimValidationFailed:qt,JWTExpired:hd,JWTInvalid:Vt},Symbol.toStringTag,{value:"Module"})),Tl=fe.getRandomValues.bind(fe);function N0(e){switch(e){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Te(`Unsupported JWE Algorithm: ${e}`)}}const PL=e=>Tl(new Uint8Array(N0(e)>>3)),$0=(e,t)=>{if(t.length<<3!==N0(e))throw new Q("Invalid Initialization Vector length")},Io=(e,t)=>{const r=e.byteLength<<3;if(r!==t)throw new Q(`Invalid Content Encryption Key length. Expected ${t} bits, got ${r} bits`)},AL=(e,t)=>{if(!(e instanceof Uint8Array))throw new TypeError("First argument must be a buffer");if(!(t instanceof Uint8Array))throw new TypeError("Second argument must be a buffer");if(e.length!==t.length)throw new TypeError("Input buffers must have the same length");const r=e.length;let n=0,a=-1;for(;++a<r;)n|=e[a]^t[a];return n===0};function Ct(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function Cn(e,t){return e.name===t}function eo(e){return parseInt(e.name.slice(4),10)}function TL(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function O0(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){const n=t.pop();r+=`one of ${t.join(", ")}, or ${n}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function RL(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!Cn(e.algorithm,"HMAC"))throw Ct("HMAC");const n=parseInt(t.slice(2),10);if(eo(e.algorithm.hash)!==n)throw Ct(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!Cn(e.algorithm,"RSASSA-PKCS1-v1_5"))throw Ct("RSASSA-PKCS1-v1_5");const n=parseInt(t.slice(2),10);if(eo(e.algorithm.hash)!==n)throw Ct(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!Cn(e.algorithm,"RSA-PSS"))throw Ct("RSA-PSS");const n=parseInt(t.slice(2),10);if(eo(e.algorithm.hash)!==n)throw Ct(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw Ct("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!Cn(e.algorithm,"ECDSA"))throw Ct("ECDSA");const n=TL(t);if(e.algorithm.namedCurve!==n)throw Ct(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}O0(e,r)}function In(e,t,...r){switch(t){case"A128GCM":case"A192GCM":case"A256GCM":{if(!Cn(e.algorithm,"AES-GCM"))throw Ct("AES-GCM");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Ct(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!Cn(e.algorithm,"AES-KW"))throw Ct("AES-KW");const n=parseInt(t.slice(1,4),10);if(e.algorithm.length!==n)throw Ct(n,"algorithm.length");break}case"ECDH":{switch(e.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Ct("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!Cn(e.algorithm,"PBKDF2"))throw Ct("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!Cn(e.algorithm,"RSA-OAEP"))throw Ct("RSA-OAEP");const n=parseInt(t.slice(9),10)||1;if(eo(e.algorithm.hash)!==n)throw Ct(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}O0(e,r)}function L0(e,t,...r){var n;if(r.length>2){const a=r.pop();e+=`one of type ${r.join(", ")}, or ${a}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&(n=t.constructor)!=null&&n.name&&(e+=` Received an instance of ${t.constructor.name}`),e}const Lt=(e,...t)=>L0("Key must be ",e,...t);function M0(e,t,...r){return L0(`Key for the ${e} algorithm must be `,t,...r)}const F0=e=>Jt(e),Ge=["CryptoKey"];async function kL(e,t,r,n,a,s){if(!(t instanceof Uint8Array))throw new TypeError(Lt(t,"Uint8Array"));const i=parseInt(e.slice(1,4),10),l=await fe.subtle.importKey("raw",t.subarray(i>>3),"AES-CBC",!1,["decrypt"]),c=await fe.subtle.importKey("raw",t.subarray(0,i>>3),{hash:`SHA-${i<<1}`,name:"HMAC"},!1,["sign"]),u=Hr(s,n,r,T0(s.length<<3)),d=new Uint8Array((await fe.subtle.sign("HMAC",c,u)).slice(0,i>>3));let h;try{h=AL(a,d)}catch{}if(!h)throw new Ks;let f;try{f=new Uint8Array(await fe.subtle.decrypt({iv:n,name:"AES-CBC"},l,r))}catch{}if(!f)throw new Ks;return f}async function xL(e,t,r,n,a,s){let i;t instanceof Uint8Array?i=await fe.subtle.importKey("raw",t,"AES-GCM",!1,["decrypt"]):(In(t,e,"decrypt"),i=t);try{return new Uint8Array(await fe.subtle.decrypt({additionalData:s,iv:n,name:"AES-GCM",tagLength:128},i,Hr(r,a)))}catch{throw new Ks}}const D0=async(e,t,r,n,a,s)=>{if(!Jt(t)&&!(t instanceof Uint8Array))throw new TypeError(Lt(t,...Ge,"Uint8Array"));if(!n)throw new Q("JWE Initialization Vector missing");if(!a)throw new Q("JWE Authentication Tag missing");switch($0(e,n),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return t instanceof Uint8Array&&Io(t,parseInt(e.slice(-3),10)),kL(e,t,r,n,a,s);case"A128GCM":case"A192GCM":case"A256GCM":return t instanceof Uint8Array&&Io(t,parseInt(e.slice(1,4),10)),xL(e,t,r,n,a,s);default:throw new Te("Unsupported JWE Content Encryption Algorithm")}},di=(...e)=>{const t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(const n of t){const a=Object.keys(n);if(!r||r.size===0){r=new Set(a);continue}for(const s of a){if(r.has(s))return!1;r.add(s)}}return!0};function IL(e){return typeof e=="object"&&e!==null}function gt(e){if(!IL(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}const Rl=[{hash:"SHA-256",name:"HMAC"},!0,["sign"]];function H0(e,t){if(e.algorithm.length!==parseInt(t.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${t}`)}function B0(e,t,r){if(Jt(e))return In(e,t,r),e;if(e instanceof Uint8Array)return fe.subtle.importKey("raw",e,"AES-KW",!0,[r]);throw new TypeError(Lt(e,...Ge,"Uint8Array"))}const fd=async(e,t,r)=>{const n=await B0(t,e,"wrapKey");H0(n,e);const a=await fe.subtle.importKey("raw",r,...Rl);return new Uint8Array(await fe.subtle.wrapKey("raw",a,n,"AES-KW"))},pd=async(e,t,r)=>{const n=await B0(t,e,"unwrapKey");H0(n,e);const a=await fe.subtle.unwrapKey("raw",r,n,"AES-KW",...Rl);return new Uint8Array(await fe.subtle.exportKey("raw",a))};async function W0(e,t,r,n,a=new Uint8Array(0),s=new Uint8Array(0)){if(!Jt(e))throw new TypeError(Lt(e,...Ge));if(In(e,"ECDH"),!Jt(t))throw new TypeError(Lt(t,...Ge));In(t,"ECDH","deriveBits");const i=Hr(fu(Xe.encode(r)),fu(a),fu(s),_h(n));let l;e.algorithm.name==="X25519"?l=256:e.algorithm.name==="X448"?l=448:l=Math.ceil(parseInt(e.algorithm.namedCurve.substr(-3),10)/8)<<3;const c=new Uint8Array(await fe.subtle.deriveBits({name:e.algorithm.name,public:e},t,l));return CL(c,n,i)}async function NL(e){if(!Jt(e))throw new TypeError(Lt(e,...Ge));return fe.subtle.generateKey(e.algorithm,!0,["deriveBits"])}function U0(e){if(!Jt(e))throw new TypeError(Lt(e,...Ge));return["P-256","P-384","P-521"].includes(e.algorithm.namedCurve)||e.algorithm.name==="X25519"||e.algorithm.name==="X448"}function $L(e){if(!(e instanceof Uint8Array)||e.length<8)throw new Q("PBES2 Salt Input must be 8 or more octets")}function OL(e,t){if(e instanceof Uint8Array)return fe.subtle.importKey("raw",e,"PBKDF2",!1,["deriveBits"]);if(Jt(e))return In(e,t,"deriveBits","deriveKey"),e;throw new TypeError(Lt(e,...Ge,"Uint8Array"))}async function j0(e,t,r,n){$L(e);const a=_L(t,e),s=parseInt(t.slice(13,16),10),i={hash:`SHA-${t.slice(8,11)}`,iterations:r,name:"PBKDF2",salt:a},l={length:s,name:"AES-KW"},c=await OL(n,t);if(c.usages.includes("deriveBits"))return new Uint8Array(await fe.subtle.deriveBits(i,c,s));if(c.usages.includes("deriveKey"))return fe.subtle.deriveKey(i,c,l,!1,["wrapKey","unwrapKey"]);throw new TypeError('PBKDF2 key "usages" must include "deriveBits" or "deriveKey"')}const LL=async(e,t,r,n=2048,a=Tl(new Uint8Array(16)))=>{const s=await j0(a,e,n,t);return{encryptedKey:await fd(e.slice(-6),s,r),p2c:n,p2s:tt(a)}},ML=async(e,t,r,n,a)=>{const s=await j0(a,e,n,t);return pd(e.slice(-6),s,r)};function No(e){switch(e){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return"RSA-OAEP";default:throw new Te(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}const kl=(e,t)=>{if(e.startsWith("RS")||e.startsWith("PS")){const{modulusLength:r}=t.algorithm;if(typeof r!="number"||r<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}},FL=async(e,t,r)=>{if(!Jt(t))throw new TypeError(Lt(t,...Ge));if(In(t,e,"encrypt","wrapKey"),kl(e,t),t.usages.includes("encrypt"))return new Uint8Array(await fe.subtle.encrypt(No(e),t,r));if(t.usages.includes("wrapKey")){const n=await fe.subtle.importKey("raw",r,...Rl);return new Uint8Array(await fe.subtle.wrapKey("raw",n,t,No(e)))}throw new TypeError('RSA-OAEP key "usages" must include "encrypt" or "wrapKey" for this operation')},DL=async(e,t,r)=>{if(!Jt(t))throw new TypeError(Lt(t,...Ge));if(In(t,e,"decrypt","unwrapKey"),kl(e,t),t.usages.includes("decrypt"))return new Uint8Array(await fe.subtle.decrypt(No(e),t,r));if(t.usages.includes("unwrapKey")){const n=await fe.subtle.unwrapKey("raw",r,t,No(e),...Rl);return new Uint8Array(await fe.subtle.exportKey("raw",n))}throw new TypeError('RSA-OAEP key "usages" must include "decrypt" or "unwrapKey" for this operation')};function Ah(e){switch(e){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Te(`Unsupported JWE Algorithm: ${e}`)}}const aa=e=>Tl(new Uint8Array(Ah(e)>>3)),q0=(e,t)=>{const r=(e.match(/.{1,64}/g)||[]).join(`
`);return`-----BEGIN ${t}-----
${r}
-----END ${t}-----`},V0=async(e,t,r)=>{if(!Jt(r))throw new TypeError(Lt(r,...Ge));if(!r.extractable)throw new TypeError("CryptoKey is not extractable");if(r.type!==e)throw new TypeError(`key is not a ${e} key`);return q0(Ch(new Uint8Array(await fe.subtle.exportKey(t,r))),`${e.toUpperCase()} KEY`)},HL=e=>V0("public","spki",e),BL=e=>V0("private","pkcs8",e),pn=(e,t,r=0)=>{r===0&&(t.unshift(t.length),t.unshift(6));const n=e.indexOf(t[0],r);if(n===-1)return!1;const a=e.subarray(n,n+t.length);return a.length!==t.length?!1:a.every((s,i)=>s===t[i])||pn(e,t,n+1)},fg=e=>{switch(!0){case pn(e,[42,134,72,206,61,3,1,7]):return"P-256";case pn(e,[43,129,4,0,34]):return"P-384";case pn(e,[43,129,4,0,35]):return"P-521";case pn(e,[43,101,110]):return"X25519";case pn(e,[43,101,111]):return"X448";case pn(e,[43,101,112]):return"Ed25519";case pn(e,[43,101,113]):return"Ed448";default:throw new Te("Invalid or unsupported EC Key Curve or OKP Key Sub Type")}},K0=async(e,t,r,n,a)=>{let s,i;const l=new Uint8Array(atob(r.replace(e,"")).split("").map(u=>u.charCodeAt(0))),c=t==="spki";switch(n){case"PS256":case"PS384":case"PS512":s={name:"RSA-PSS",hash:`SHA-${n.slice(-3)}`},i=c?["verify"]:["sign"];break;case"RS256":case"RS384":case"RS512":s={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${n.slice(-3)}`},i=c?["verify"]:["sign"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":s={name:"RSA-OAEP",hash:`SHA-${parseInt(n.slice(-3),10)||1}`},i=c?["encrypt","wrapKey"]:["decrypt","unwrapKey"];break;case"ES256":s={name:"ECDSA",namedCurve:"P-256"},i=c?["verify"]:["sign"];break;case"ES384":s={name:"ECDSA",namedCurve:"P-384"},i=c?["verify"]:["sign"];break;case"ES512":s={name:"ECDSA",namedCurve:"P-521"},i=c?["verify"]:["sign"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{const u=fg(l);s=u.startsWith("P-")?{name:"ECDH",namedCurve:u}:{name:u},i=c?[]:["deriveBits"];break}case"EdDSA":s={name:fg(l)},i=c?["verify"]:["sign"];break;default:throw new Te('Invalid or unsupported "alg" (Algorithm) value')}return fe.subtle.importKey(t,l,s,(a==null?void 0:a.extractable)??!1,i)},WL=(e,t,r)=>K0(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,"pkcs8",e,t,r),z0=(e,t,r)=>K0(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,"spki",e,t,r);function pg(e){const t=[];let r=0;for(;r<e.length;){const n=G0(e.subarray(r));t.push(n),r+=n.byteLength}return t}function G0(e){let t=0,r=e[0]&31;if(t++,r===31){for(r=0;e[t]>=128;)r=r*128+e[t]-128,t++;r=r*128+e[t]-128,t++}let n=0;if(e[t]<128)n=e[t],t++;else if(n===128){for(n=0;e[t+n]!==0||e[t+n+1]!==0;){if(n>e.byteLength)throw new TypeError("invalid indefinite form length");n++}const s=t+n+2;return{byteLength:s,contents:e.subarray(t,t+n),raw:e.subarray(0,s)}}else{const s=e[t]&127;t++,n=0;for(let i=0;i<s;i++)n=n*256+e[t],t++}const a=t+n;return{byteLength:a,contents:e.subarray(t,a),raw:e.subarray(0,a)}}function UL(e){const t=pg(pg(G0(e).contents)[0].contents);return Ch(t[t[0].raw[0]===160?6:5].raw)}function jL(e){const t=e.replace(/(?:-----(?:BEGIN|END) CERTIFICATE-----|\s)/g,""),r=R0(t);return q0(UL(r),"PUBLIC KEY")}const qL=(e,t,r)=>{let n;try{n=jL(e)}catch(a){throw new TypeError("Failed to parse the X.509 certificate",{cause:a})}return z0(n,t,r)};function VL(e){let t,r;switch(e.kty){case"RSA":{switch(e.alg){case"PS256":case"PS384":case"PS512":t={name:"RSA-PSS",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RS256":case"RS384":case"RS512":t={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.alg.slice(-3)}`},r=e.d?["sign"]:["verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":t={name:"RSA-OAEP",hash:`SHA-${parseInt(e.alg.slice(-3),10)||1}`},r=e.d?["decrypt","unwrapKey"]:["encrypt","wrapKey"];break;default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"EC":{switch(e.alg){case"ES256":t={name:"ECDSA",namedCurve:"P-256"},r=e.d?["sign"]:["verify"];break;case"ES384":t={name:"ECDSA",namedCurve:"P-384"},r=e.d?["sign"]:["verify"];break;case"ES512":t={name:"ECDSA",namedCurve:"P-521"},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:"ECDH",namedCurve:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}case"OKP":{switch(e.alg){case"EdDSA":t={name:e.crv},r=e.d?["sign"]:["verify"];break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":t={name:e.crv},r=e.d?["deriveBits"]:[];break;default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}break}default:throw new Te('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}return{algorithm:t,keyUsages:r}}const KL=async e=>{if(!e.alg)throw new TypeError('"alg" argument is required when "jwk.alg" is not present');const{algorithm:t,keyUsages:r}=VL(e),n=[t,e.ext??!1,e.key_ops??r],a={...e};return delete a.alg,delete a.use,fe.subtle.importKey("jwk",a,...n)},zL=KL;async function GL(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return z0(e,t,r)}async function JL(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return qL(e,t,r)}async function XL(e,t,r){if(typeof e!="string"||e.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return WL(e,t,r)}async function xl(e,t){if(!gt(e))throw new TypeError("JWK must be an object");switch(t||(t=e.alg),e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return pt(e.k);case"RSA":if(e.oth!==void 0)throw new Te('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return zL({...e,alg:t});default:throw new Te('Unsupported "kty" (Key Type) Parameter value')}}const YL=(e,t)=>{if(!(t instanceof Uint8Array)){if(!F0(t))throw new TypeError(M0(e,t,...Ge,"Uint8Array"));if(t.type!=="secret")throw new TypeError(`${Ge.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},ZL=(e,t,r)=>{if(!F0(t))throw new TypeError(M0(e,t,...Ge));if(t.type==="secret")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${Ge.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},Il=(e,t,r)=>{e.startsWith("HS")||e==="dir"||e.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(e)?YL(e,t):ZL(e,t,r)};async function QL(e,t,r,n,a){if(!(r instanceof Uint8Array))throw new TypeError(Lt(r,"Uint8Array"));const s=parseInt(e.slice(1,4),10),i=await fe.subtle.importKey("raw",r.subarray(s>>3),"AES-CBC",!1,["encrypt"]),l=await fe.subtle.importKey("raw",r.subarray(0,s>>3),{hash:`SHA-${s<<1}`,name:"HMAC"},!1,["sign"]),c=new Uint8Array(await fe.subtle.encrypt({iv:n,name:"AES-CBC"},i,t)),u=Hr(a,n,c,T0(a.length<<3)),d=new Uint8Array((await fe.subtle.sign("HMAC",l,u)).slice(0,s>>3));return{ciphertext:c,tag:d,iv:n}}async function eM(e,t,r,n,a){let s;r instanceof Uint8Array?s=await fe.subtle.importKey("raw",r,"AES-GCM",!1,["encrypt"]):(In(r,e,"encrypt"),s=r);const i=new Uint8Array(await fe.subtle.encrypt({additionalData:a,iv:n,name:"AES-GCM",tagLength:128},s,t)),l=i.slice(-16);return{ciphertext:i.slice(0,-16),tag:l,iv:n}}const J0=async(e,t,r,n,a)=>{if(!Jt(r)&&!(r instanceof Uint8Array))throw new TypeError(Lt(r,...Ge,"Uint8Array"));switch(n?$0(e,n):n=PL(e),e){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r instanceof Uint8Array&&Io(r,parseInt(e.slice(-3),10)),QL(e,t,r,n,a);case"A128GCM":case"A192GCM":case"A256GCM":return r instanceof Uint8Array&&Io(r,parseInt(e.slice(1,4),10)),eM(e,t,r,n,a);default:throw new Te("Unsupported JWE Content Encryption Algorithm")}};async function tM(e,t,r,n){const a=e.slice(0,7),s=await J0(a,r,t,n,new Uint8Array(0));return{encryptedKey:s.ciphertext,iv:tt(s.iv),tag:tt(s.tag)}}async function rM(e,t,r,n,a){const s=e.slice(0,7);return D0(s,t,r,n,a,new Uint8Array(0))}async function nM(e,t,r,n,a){switch(Il(e,t,"decrypt"),e){case"dir":{if(r!==void 0)throw new Q("Encountered unexpected JWE Encrypted Key");return t}case"ECDH-ES":if(r!==void 0)throw new Q("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!gt(n.epk))throw new Q('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!U0(t))throw new Te("ECDH with the provided key is not allowed or not supported by your javascript runtime");const s=await xl(n.epk,e);let i,l;if(n.apu!==void 0){if(typeof n.apu!="string")throw new Q('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{i=pt(n.apu)}catch{throw new Q("Failed to base64url decode the apu")}}if(n.apv!==void 0){if(typeof n.apv!="string")throw new Q('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{l=pt(n.apv)}catch{throw new Q("Failed to base64url decode the apv")}}const c=await W0(s,t,e==="ECDH-ES"?n.enc:e,e==="ECDH-ES"?Ah(n.enc):parseInt(e.slice(-5,-2),10),i,l);if(e==="ECDH-ES")return c;if(r===void 0)throw new Q("JWE Encrypted Key missing");return pd(e.slice(-6),c,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new Q("JWE Encrypted Key missing");return DL(e,t,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new Q("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new Q('JOSE Header "p2c" (PBES2 Count) missing or invalid');const s=(a==null?void 0:a.maxPBES2Count)||1e4;if(n.p2c>s)throw new Q('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new Q('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let i;try{i=pt(n.p2s)}catch{throw new Q("Failed to base64url decode the p2s")}return ML(e,t,r,n.p2c,i)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new Q("JWE Encrypted Key missing");return pd(e,t,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new Q("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new Q('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new Q('JOSE Header "tag" (Authentication Tag) missing or invalid');let s;try{s=pt(n.iv)}catch{throw new Q("Failed to base64url decode the iv")}let i;try{i=pt(n.tag)}catch{throw new Q("Failed to base64url decode the tag")}return rM(e,t,r,s,i)}default:throw new Te('Invalid or unsupported "alg" (JWE Algorithm) header value')}}function hi(e,t,r,n,a){if(a.crit!==void 0&&(n==null?void 0:n.crit)===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(i=>typeof i!="string"||i.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let s;r!==void 0?s=new Map([...Object.entries(r),...t.entries()]):s=t;for(const i of n.crit){if(!s.has(i))throw new Te(`Extension Header Parameter "${i}" is not recognized`);if(a[i]===void 0)throw new e(`Extension Header Parameter "${i}" is missing`);if(s.get(i)&&n[i]===void 0)throw new e(`Extension Header Parameter "${i}" MUST be integrity protected`)}return new Set(n.crit)}const md=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)};async function Th(e,t,r){if(!gt(e))throw new Q("Flattened JWE must be an object");if(e.protected===void 0&&e.header===void 0&&e.unprotected===void 0)throw new Q("JOSE Header missing");if(e.iv!==void 0&&typeof e.iv!="string")throw new Q("JWE Initialization Vector incorrect type");if(typeof e.ciphertext!="string")throw new Q("JWE Ciphertext missing or incorrect type");if(e.tag!==void 0&&typeof e.tag!="string")throw new Q("JWE Authentication Tag incorrect type");if(e.protected!==void 0&&typeof e.protected!="string")throw new Q("JWE Protected Header incorrect type");if(e.encrypted_key!==void 0&&typeof e.encrypted_key!="string")throw new Q("JWE Encrypted Key incorrect type");if(e.aad!==void 0&&typeof e.aad!="string")throw new Q("JWE AAD incorrect type");if(e.header!==void 0&&!gt(e.header))throw new Q("JWE Shared Unprotected Header incorrect type");if(e.unprotected!==void 0&&!gt(e.unprotected))throw new Q("JWE Per-Recipient Unprotected Header incorrect type");let n;if(e.protected)try{const S=pt(e.protected);n=JSON.parse(cr.decode(S))}catch{throw new Q("JWE Protected Header is invalid")}if(!di(n,e.header,e.unprotected))throw new Q("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");const a={...n,...e.header,...e.unprotected};if(hi(Q,new Map,r==null?void 0:r.crit,n,a),a.zip!==void 0)throw new Te('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:s,enc:i}=a;if(typeof s!="string"||!s)throw new Q("missing JWE Algorithm (alg) in JWE Header");if(typeof i!="string"||!i)throw new Q("missing JWE Encryption Algorithm (enc) in JWE Header");const l=r&&md("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&md("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(l&&!l.has(s)||!l&&s.startsWith("PBES2"))throw new xo('"alg" (Algorithm) Header Parameter value not allowed');if(c&&!c.has(i))throw new xo('"enc" (Encryption Algorithm) Header Parameter value not allowed');let u;if(e.encrypted_key!==void 0)try{u=pt(e.encrypted_key)}catch{throw new Q("Failed to base64url decode the encrypted_key")}let d=!1;typeof t=="function"&&(t=await t(n,e),d=!0);let h;try{h=await nM(s,t,u,a,r)}catch(S){if(S instanceof TypeError||S instanceof Q||S instanceof Te)throw S;h=aa(i)}let f,p;if(e.iv!==void 0)try{f=pt(e.iv)}catch{throw new Q("Failed to base64url decode the iv")}if(e.tag!==void 0)try{p=pt(e.tag)}catch{throw new Q("Failed to base64url decode the tag")}const g=Xe.encode(e.protected??"");let b;e.aad!==void 0?b=Hr(g,Xe.encode("."),Xe.encode(e.aad)):b=g;let v;try{v=pt(e.ciphertext)}catch{throw new Q("Failed to base64url decode the ciphertext")}const E={plaintext:await D0(i,h,v,f,p,b)};if(e.protected!==void 0&&(E.protectedHeader=n),e.aad!==void 0)try{E.additionalAuthenticatedData=pt(e.aad)}catch{throw new Q("Failed to base64url decode the aad")}return e.unprotected!==void 0&&(E.sharedUnprotectedHeader=e.unprotected),e.header!==void 0&&(E.unprotectedHeader=e.header),d?{...E,key:t}:E}async function X0(e,t,r){if(e instanceof Uint8Array&&(e=cr.decode(e)),typeof e!="string")throw new Q("Compact JWE must be a string or Uint8Array");const{0:n,1:a,2:s,3:i,4:l,length:c}=e.split(".");if(c!==5)throw new Q("Invalid Compact JWE");const u=await Th({ciphertext:i,iv:s||void 0,protected:n,tag:l||void 0,encrypted_key:a||void 0},t,r),d={plaintext:u.plaintext,protectedHeader:u.protectedHeader};return typeof t=="function"?{...d,key:u.key}:d}async function aM(e,t,r){if(!gt(e))throw new Q("General JWE must be an object");if(!Array.isArray(e.recipients)||!e.recipients.every(gt))throw new Q("JWE Recipients missing or incorrect type");if(!e.recipients.length)throw new Q("JWE Recipients has no members");for(const n of e.recipients)try{return await Th({aad:e.aad,ciphertext:e.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:e.iv,protected:e.protected,tag:e.tag,unprotected:e.unprotected},t,r)}catch{}throw new Ks}const sM=async e=>{if(e instanceof Uint8Array)return{kty:"oct",k:tt(e)};if(!Jt(e))throw new TypeError(Lt(e,...Ge,"Uint8Array"));if(!e.extractable)throw new TypeError("non-extractable CryptoKey cannot be exported as a JWK");const{ext:t,key_ops:r,alg:n,use:a,...s}=await fe.subtle.exportKey("jwk",e);return s},iM=sM;async function oM(e){return HL(e)}async function lM(e){return BL(e)}async function Y0(e){return iM(e)}async function Z0(e,t,r,n,a={}){let s,i,l;switch(Il(e,r,"encrypt"),e){case"dir":{l=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!U0(r))throw new Te("ECDH with the provided key is not allowed or not supported by your javascript runtime");const{apu:c,apv:u}=a;let{epk:d}=a;d||(d=(await NL(r)).privateKey);const{x:h,y:f,crv:p,kty:g}=await Y0(d),b=await W0(r,d,e==="ECDH-ES"?t:e,e==="ECDH-ES"?Ah(t):parseInt(e.slice(-5,-2),10),c,u);if(i={epk:{x:h,crv:p,kty:g}},g==="EC"&&(i.epk.y=f),c&&(i.apu=tt(c)),u&&(i.apv=tt(u)),e==="ECDH-ES"){l=b;break}l=n||aa(t);const v=e.slice(-6);s=await fd(v,b,l);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{l=n||aa(t),s=await FL(e,r,l);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{l=n||aa(t);const{p2c:c,p2s:u}=a;({encryptedKey:s,...i}=await LL(e,r,l,c,u));break}case"A128KW":case"A192KW":case"A256KW":{l=n||aa(t),s=await fd(e,r,l);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{l=n||aa(t);const{iv:c}=a;({encryptedKey:s,...i}=await tM(e,r,l,c));break}default:throw new Te('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:l,encryptedKey:s,parameters:i}}const Q0=Symbol();class $o{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}async encrypt(t,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new Q("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!di(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new Q("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if(hi(Q,new Map,r==null?void 0:r.crit,this._protectedHeader,n),n.zip!==void 0)throw new Te('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:a,enc:s}=n;if(typeof a!="string"||!a)throw new Q('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof s!="string"||!s)throw new Q('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let i;if(this._cek&&(a==="dir"||a==="ECDH-ES"))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${a}`);let l;{let b;({cek:l,encryptedKey:i,parameters:b}=await Z0(a,s,t,this._cek,this._keyManagementParameters)),b&&(r&&Q0 in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...b}:this.setUnprotectedHeader(b):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...b}:this.setProtectedHeader(b))}let c,u,d;this._protectedHeader?u=Xe.encode(tt(JSON.stringify(this._protectedHeader))):u=Xe.encode(""),this._aad?(d=tt(this._aad),c=Hr(u,Xe.encode("."),Xe.encode(d))):c=u;const{ciphertext:h,tag:f,iv:p}=await J0(s,this._plaintext,l,this._iv,c),g={ciphertext:tt(h)};return p&&(g.iv=tt(p)),f&&(g.tag=tt(f)),i&&(g.encrypted_key=tt(i)),d&&(g.aad=d),this._protectedHeader&&(g.protected=cr.decode(u)),this._sharedUnprotectedHeader&&(g.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(g.header=this._unprotectedHeader),g}}class cM{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}}class uM{constructor(t){this._recipients=[],this._plaintext=t}addRecipient(t,r){const n=new cM(this,t,{crit:r==null?void 0:r.crit});return this._recipients.push(n),n}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(){var a,s,i;if(!this._recipients.length)throw new Q("at least one recipient must be added");if(this._recipients.length===1){const[l]=this._recipients,c=await new $o(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(l.unprotectedHeader).encrypt(l.key,{...l.options}),u={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(u.aad=c.aad),c.protected&&(u.protected=c.protected),c.unprotected&&(u.unprotected=c.unprotected),c.encrypted_key&&(u.recipients[0].encrypted_key=c.encrypted_key),c.header&&(u.recipients[0].header=c.header),u}let t;for(let l=0;l<this._recipients.length;l++){const c=this._recipients[l];if(!di(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new Q("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");const u={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:d}=u;if(typeof d!="string"||!d)throw new Q('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(d==="dir"||d==="ECDH-ES")throw new Q('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof u.enc!="string"||!u.enc)throw new Q('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!t)t=u.enc;else if(t!==u.enc)throw new Q('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if(hi(Q,new Map,c.options.crit,this._protectedHeader,u),u.zip!==void 0)throw new Te('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}const r=aa(t),n={ciphertext:"",iv:"",recipients:[],tag:""};for(let l=0;l<this._recipients.length;l++){const c=this._recipients[l],u={};n.recipients.push(u);const h={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader}.alg.startsWith("PBES2")?2048+l:void 0;if(l===0){const g=await new $o(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(r).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).setKeyManagementParameters({p2c:h}).encrypt(c.key,{...c.options,[Q0]:!0});n.ciphertext=g.ciphertext,n.iv=g.iv,n.tag=g.tag,g.aad&&(n.aad=g.aad),g.protected&&(n.protected=g.protected),g.unprotected&&(n.unprotected=g.unprotected),u.encrypted_key=g.encrypted_key,g.header&&(u.header=g.header);continue}const{encryptedKey:f,parameters:p}=await Z0(((a=c.unprotectedHeader)==null?void 0:a.alg)||((s=this._protectedHeader)==null?void 0:s.alg)||((i=this._unprotectedHeader)==null?void 0:i.alg),t,c.key,r,{p2c:h});u.encrypted_key=tt(f),(c.unprotectedHeader||p)&&(u.header={...c.unprotectedHeader,...p})}return n}}function eS(e,t){const r=`SHA-${e.slice(-3)}`;switch(e){case"HS256":case"HS384":case"HS512":return{hash:r,name:"HMAC"};case"PS256":case"PS384":case"PS512":return{hash:r,name:"RSA-PSS",saltLength:e.slice(-3)>>3};case"RS256":case"RS384":case"RS512":return{hash:r,name:"RSASSA-PKCS1-v1_5"};case"ES256":case"ES384":case"ES512":return{hash:r,name:"ECDSA",namedCurve:t.namedCurve};case"EdDSA":return{name:t.name};default:throw new Te(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}function tS(e,t,r){if(Jt(t))return RL(t,e,r),t;if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(Lt(t,...Ge));return fe.subtle.importKey("raw",t,{hash:`SHA-${e.slice(-3)}`,name:"HMAC"},!1,[r])}throw new TypeError(Lt(t,...Ge,"Uint8Array"))}const dM=async(e,t,r,n)=>{const a=await tS(e,t,"verify");kl(e,a);const s=eS(e,a.algorithm);try{return await fe.subtle.verify(s,a,r,n)}catch{return!1}};async function Rh(e,t,r){if(!gt(e))throw new Ne("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new Ne('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new Ne("JWS Protected Header incorrect type");if(e.payload===void 0)throw new Ne("JWS Payload missing");if(typeof e.signature!="string")throw new Ne("JWS Signature missing or incorrect type");if(e.header!==void 0&&!gt(e.header))throw new Ne("JWS Unprotected Header incorrect type");let n={};if(e.protected)try{const b=pt(e.protected);n=JSON.parse(cr.decode(b))}catch{throw new Ne("JWS Protected Header is invalid")}if(!di(n,e.header))throw new Ne("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const a={...n,...e.header},s=hi(Ne,new Map([["b64",!0]]),r==null?void 0:r.crit,n,a);let i=!0;if(s.has("b64")&&(i=n.b64,typeof i!="boolean"))throw new Ne('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:l}=a;if(typeof l!="string"||!l)throw new Ne('JWS "alg" (Algorithm) Header Parameter missing or invalid');const c=r&&md("algorithms",r.algorithms);if(c&&!c.has(l))throw new xo('"alg" (Algorithm) Header Parameter value not allowed');if(i){if(typeof e.payload!="string")throw new Ne("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new Ne("JWS Payload must be a string or an Uint8Array instance");let u=!1;typeof t=="function"&&(t=await t(n,e),u=!0),Il(l,t,"verify");const d=Hr(Xe.encode(e.protected??""),Xe.encode("."),typeof e.payload=="string"?Xe.encode(e.payload):e.payload);let h;try{h=pt(e.signature)}catch{throw new Ne("Failed to base64url decode the signature")}if(!await dM(l,t,h,d))throw new Ph;let p;if(i)try{p=pt(e.payload)}catch{throw new Ne("Failed to base64url decode the payload")}else typeof e.payload=="string"?p=Xe.encode(e.payload):p=e.payload;const g={payload:p};return e.protected!==void 0&&(g.protectedHeader=n),e.header!==void 0&&(g.unprotectedHeader=e.header),u?{...g,key:t}:g}async function rS(e,t,r){if(e instanceof Uint8Array&&(e=cr.decode(e)),typeof e!="string")throw new Ne("Compact JWS must be a string or Uint8Array");const{0:n,1:a,2:s,length:i}=e.split(".");if(i!==3)throw new Ne("Invalid Compact JWS");const l=await Rh({payload:a,protected:n,signature:s},t,r),c={payload:l.payload,protectedHeader:l.protectedHeader};return typeof t=="function"?{...c,key:l.key}:c}async function hM(e,t,r){if(!gt(e))throw new Ne("General JWS must be an object");if(!Array.isArray(e.signatures)||!e.signatures.every(gt))throw new Ne("JWS Signatures missing or incorrect type");for(const n of e.signatures)try{return await Rh({header:n.header,payload:e.payload,protected:n.protected,signature:n.signature},t,r)}catch{}throw new Ph}const mn=e=>Math.floor(e.getTime()/1e3),nS=60,aS=nS*60,kh=aS*24,fM=kh*7,pM=kh*365.25,mM=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,Hs=e=>{const t=mM.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");const r=parseFloat(t[2]),n=t[3].toLowerCase();let a;switch(n){case"sec":case"secs":case"second":case"seconds":case"s":a=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":a=Math.round(r*nS);break;case"hour":case"hours":case"hr":case"hrs":case"h":a=Math.round(r*aS);break;case"day":case"days":case"d":a=Math.round(r*kh);break;case"week":case"weeks":case"w":a=Math.round(r*fM);break;default:a=Math.round(r*pM);break}return t[1]==="-"||t[4]==="ago"?-a:a},mg=e=>e.toLowerCase().replace(/^application\//,""),gM=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,xh=(e,t,r={})=>{const{typ:n}=r;if(n&&(typeof e.typ!="string"||mg(e.typ)!==mg(n)))throw new qt('unexpected "typ" JWT header value',"typ","check_failed");let a;try{a=JSON.parse(cr.decode(t))}catch{}if(!gt(a))throw new Vt("JWT Claims Set must be a top-level JSON object");const{requiredClaims:s=[],issuer:i,subject:l,audience:c,maxTokenAge:u}=r,d=[...s];u!==void 0&&d.push("iat"),c!==void 0&&d.push("aud"),l!==void 0&&d.push("sub"),i!==void 0&&d.push("iss");for(const g of new Set(d.reverse()))if(!(g in a))throw new qt(`missing required "${g}" claim`,g,"missing");if(i&&!(Array.isArray(i)?i:[i]).includes(a.iss))throw new qt('unexpected "iss" claim value',"iss","check_failed");if(l&&a.sub!==l)throw new qt('unexpected "sub" claim value',"sub","check_failed");if(c&&!gM(a.aud,typeof c=="string"?[c]:c))throw new qt('unexpected "aud" claim value',"aud","check_failed");let h;switch(typeof r.clockTolerance){case"string":h=Hs(r.clockTolerance);break;case"number":h=r.clockTolerance;break;case"undefined":h=0;break;default:throw new TypeError("Invalid clockTolerance option type")}const{currentDate:f}=r,p=mn(f||new Date);if((a.iat!==void 0||u)&&typeof a.iat!="number")throw new qt('"iat" claim must be a number',"iat","invalid");if(a.nbf!==void 0){if(typeof a.nbf!="number")throw new qt('"nbf" claim must be a number',"nbf","invalid");if(a.nbf>p+h)throw new qt('"nbf" claim timestamp check failed',"nbf","check_failed")}if(a.exp!==void 0){if(typeof a.exp!="number")throw new qt('"exp" claim must be a number',"exp","invalid");if(a.exp<=p-h)throw new hd('"exp" claim timestamp check failed',"exp","check_failed")}if(u){const g=p-a.iat,b=typeof u=="number"?u:Hs(u);if(g-h>b)throw new hd('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(g<0-h)throw new qt('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return a};async function bM(e,t,r){var i;const n=await rS(e,t,r);if((i=n.protectedHeader.crit)!=null&&i.includes("b64")&&n.protectedHeader.b64===!1)throw new Vt("JWTs MUST NOT use unencoded payload");const s={payload:xh(n.protectedHeader,n.payload,r),protectedHeader:n.protectedHeader};return typeof t=="function"?{...s,key:n.key}:s}async function yM(e,t,r){const n=await X0(e,t,r),a=xh(n.protectedHeader,n.plaintext,r),{protectedHeader:s}=n;if(s.iss!==void 0&&s.iss!==a.iss)throw new qt('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(s.sub!==void 0&&s.sub!==a.sub)throw new qt('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(s.aud!==void 0&&JSON.stringify(s.aud)!==JSON.stringify(a.aud))throw new qt('replicated "aud" claim header parameter mismatch',"aud","mismatch");const i={payload:a,protectedHeader:s};return typeof t=="function"?{...i,key:n.key}:i}class sS{constructor(t){this._flattened=new $o(t)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,r){const n=await this._flattened.encrypt(t,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}}const vM=async(e,t,r)=>{const n=await tS(e,t,"sign");kl(e,n);const a=await fe.subtle.sign(eS(e,n.algorithm),n,r);return new Uint8Array(a)};class Ih{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Ne("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!di(this._protectedHeader,this._unprotectedHeader))throw new Ne("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");const n={...this._protectedHeader,...this._unprotectedHeader},a=hi(Ne,new Map([["b64",!0]]),r==null?void 0:r.crit,this._protectedHeader,n);let s=!0;if(a.has("b64")&&(s=this._protectedHeader.b64,typeof s!="boolean"))throw new Ne('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:i}=n;if(typeof i!="string"||!i)throw new Ne('JWS "alg" (Algorithm) Header Parameter missing or invalid');Il(i,t,"sign");let l=this._payload;s&&(l=Xe.encode(tt(l)));let c;this._protectedHeader?c=Xe.encode(tt(JSON.stringify(this._protectedHeader))):c=Xe.encode("");const u=Hr(c,Xe.encode("."),l),d=await vM(i,t,u),h={signature:tt(d),payload:""};return s&&(h.payload=cr.decode(l)),this._unprotectedHeader&&(h.header=this._unprotectedHeader),this._protectedHeader&&(h.protected=cr.decode(c)),h}}class iS{constructor(t){this._flattened=new Ih(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){const n=await this._flattened.sign(t,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}}class EM{constructor(t,r,n){this.parent=t,this.key=r,this.options=n}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}class SM{constructor(t){this._signatures=[],this._payload=t}addSignature(t,r){const n=new EM(this,t,r);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new Ne("at least one signature must be added");const t={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){const n=this._signatures[r],a=new Ih(this._payload);a.setProtectedHeader(n.protectedHeader),a.setUnprotectedHeader(n.unprotectedHeader);const{payload:s,...i}=await a.sign(n.key,n.options);if(r===0)t.payload=s;else if(t.payload!==s)throw new Ne("inconsistent use of JWS Unencoded Payload (RFC7797)");t.signatures.push(i)}return t}}function Zn(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}class Nh{constructor(t={}){if(!gt(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:Zn("setNotBefore",t)}:t instanceof Date?this._payload={...this._payload,nbf:Zn("setNotBefore",mn(t))}:this._payload={...this._payload,nbf:mn(new Date)+Hs(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:Zn("setExpirationTime",t)}:t instanceof Date?this._payload={...this._payload,exp:Zn("setExpirationTime",mn(t))}:this._payload={...this._payload,exp:mn(new Date)+Hs(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:mn(new Date)}:t instanceof Date?this._payload={...this._payload,iat:Zn("setIssuedAt",mn(t))}:typeof t=="string"?this._payload={...this._payload,iat:Zn("setIssuedAt",mn(new Date)+Hs(t))}:this._payload={...this._payload,iat:Zn("setIssuedAt",t)},this}}class _M extends Nh{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){var a;const n=new iS(Xe.encode(JSON.stringify(this._payload)));if(n.setProtectedHeader(this._protectedHeader),Array.isArray((a=this._protectedHeader)==null?void 0:a.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Vt("JWTs MUST NOT use unencoded payload");return n.sign(t,r)}}class CM extends Nh{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(t,r){const n=new sS(Xe.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(t,r)}}const fn=(e,t)=>{if(typeof e!="string"||!e)throw new k0(`${t} missing or invalid`)};async function oS(e,t){if(!gt(e))throw new TypeError("JWK must be an object");if(t??(t="sha256"),t!=="sha256"&&t!=="sha384"&&t!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(e.kty){case"EC":fn(e.crv,'"crv" (Curve) Parameter'),fn(e.x,'"x" (X Coordinate) Parameter'),fn(e.y,'"y" (Y Coordinate) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x,y:e.y};break;case"OKP":fn(e.crv,'"crv" (Subtype of Key Pair) Parameter'),fn(e.x,'"x" (Public Key) Parameter'),r={crv:e.crv,kty:e.kty,x:e.x};break;case"RSA":fn(e.e,'"e" (Exponent) Parameter'),fn(e.n,'"n" (Modulus) Parameter'),r={e:e.e,kty:e.kty,n:e.n};break;case"oct":fn(e.k,'"k" (Key Value) Parameter'),r={k:e.k,kty:e.kty};break;default:throw new Te('"kty" (Key Type) Parameter missing or unsupported')}const n=Xe.encode(JSON.stringify(r));return tt(await A0(t,n))}async function wM(e,t){t??(t="sha256");const r=await oS(e,t);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${t.slice(-3)}:${r}`}async function PM(e,t){const r={...e,...t==null?void 0:t.header};if(!gt(r.jwk))throw new Ne('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const n=await xl({...r.jwk,ext:!0},r.alg);if(n instanceof Uint8Array||n.type!=="public")throw new Ne('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}function AM(e){switch(typeof e=="string"&&e.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new Te('Unsupported "alg" value for a JSON Web Key Set')}}function lS(e){return e&&typeof e=="object"&&Array.isArray(e.keys)&&e.keys.every(TM)}function TM(e){return gt(e)}function RM(e){return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}class cS{constructor(t){if(this._cached=new WeakMap,!lS(t))throw new Al("JSON Web Key Set malformed");this._jwks=RM(t)}async getKey(t,r){const{alg:n,kid:a}={...t,...r==null?void 0:r.header},s=AM(n),i=this._jwks.keys.filter(u=>{let d=s===u.kty;if(d&&typeof a=="string"&&(d=a===u.kid),d&&typeof u.alg=="string"&&(d=n===u.alg),d&&typeof u.use=="string"&&(d=u.use==="sig"),d&&Array.isArray(u.key_ops)&&(d=u.key_ops.includes("verify")),d&&n==="EdDSA"&&(d=u.crv==="Ed25519"||u.crv==="Ed448"),d)switch(n){case"ES256":d=u.crv==="P-256";break;case"ES256K":d=u.crv==="secp256k1";break;case"ES384":d=u.crv==="P-384";break;case"ES512":d=u.crv==="P-521";break}return d}),{0:l,length:c}=i;if(c===0)throw new wh;if(c!==1){const u=new x0,{_cached:d}=this;throw u[Symbol.asyncIterator]=async function*(){for(const h of i)try{yield await gg(d,h,n)}catch{}},u}return gg(this._cached,l,n)}}async function gg(e,t,r){const n=e.get(t)||e.set(t,{}).get(t);if(n[r]===void 0){const a=await xl({...t,ext:!0},r);if(a instanceof Uint8Array||a.type!=="public")throw new Al("JSON Web Key Set members must be public keys");n[r]=a}return n[r]}function kM(e){const t=new cS(e);return async(r,n)=>t.getKey(r,n)}const xM=async(e,t,r)=>{let n,a,s=!1;typeof AbortController=="function"&&(n=new AbortController,a=setTimeout(()=>{s=!0,n.abort()},t));const i=await fetch(e.href,{signal:n?n.signal:void 0,redirect:"manual",headers:r.headers}).catch(l=>{throw s?new I0:l});if(a!==void 0&&clearTimeout(a),i.status!==200)throw new wt("Expected 200 OK from the JSON Web Key Set HTTP response");try{return await i.json()}catch{throw new wt("Failed to parse the JSON Web Key Set HTTP response as JSON")}};function IM(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}let gd;var Gi,kb;(typeof navigator>"u"||!((kb=(Gi=navigator.userAgent)==null?void 0:Gi.startsWith)!=null&&kb.call(Gi,"Mozilla/5.0 ")))&&(gd="jose/v5.2.3");class NM extends cS{constructor(t,r){if(super({keys:[]}),this._jwks=void 0,!(t instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(t.href),this._options={agent:r==null?void 0:r.agent,headers:r==null?void 0:r.headers},this._timeoutDuration=typeof(r==null?void 0:r.timeoutDuration)=="number"?r==null?void 0:r.timeoutDuration:5e3,this._cooldownDuration=typeof(r==null?void 0:r.cooldownDuration)=="number"?r==null?void 0:r.cooldownDuration:3e4,this._cacheMaxAge=typeof(r==null?void 0:r.cacheMaxAge)=="number"?r==null?void 0:r.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(t,r){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(t,r)}catch(n){if(n instanceof wh&&this.coolingDown()===!1)return await this.reload(),super.getKey(t,r);throw n}}async reload(){this._pendingFetch&&IM()&&(this._pendingFetch=void 0);const t=new Headers(this._options.headers);gd&&!t.has("User-Agent")&&(t.set("User-Agent",gd),this._options.headers=Object.fromEntries(t.entries())),this._pendingFetch||(this._pendingFetch=xM(this._url,this._timeoutDuration,this._options).then(r=>{if(!lS(r))throw new Al("JSON Web Key Set malformed");this._jwks={keys:r.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(r=>{throw this._pendingFetch=void 0,r})),await this._pendingFetch}}function $M(e,t){const r=new NM(e,t);return async(n,a)=>r.getKey(n,a)}class OM extends Nh{encode(){const t=tt(JSON.stringify({alg:"none"})),r=tt(JSON.stringify(this._payload));return`${t}.${r}.`}static decode(t,r){if(typeof t!="string")throw new Vt("Unsecured JWT must be a string");const{0:n,1:a,2:s,length:i}=t.split(".");if(i!==3||s!=="")throw new Vt("Invalid Unsecured JWT");let l;try{if(l=JSON.parse(cr.decode(pt(n))),l.alg!=="none")throw new Error}catch{throw new Vt("Invalid Unsecured JWT")}return{payload:xh(l,pt(a),r),header:l}}}const LM=tt,$h=pt,MM=Object.freeze(Object.defineProperty({__proto__:null,decode:$h,encode:LM},Symbol.toStringTag,{value:"Module"}));function FM(e){let t;if(typeof e=="string"){const r=e.split(".");(r.length===3||r.length===5)&&([t]=r)}else if(typeof e=="object"&&e)if("protected"in e)t=e.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof t!="string"||!t)throw new Error;const r=JSON.parse(cr.decode($h(t)));if(!gt(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}function DM(e){if(typeof e!="string")throw new Vt("JWTs must use Compact JWS serialization, JWT must be a string");const{1:t,length:r}=e.split(".");if(r===5)throw new Vt("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Vt("Invalid JWT");if(!t)throw new Vt("JWTs must contain a payload");let n;try{n=$h(t)}catch{throw new Vt("Failed to base64url decode the payload")}let a;try{a=JSON.parse(cr.decode(n))}catch{throw new Vt("Failed to parse the decoded payload as JSON")}if(!gt(a))throw new Vt("Invalid JWT Claims Set");return a}async function HM(e,t){let r,n,a;switch(e){case"HS256":case"HS384":case"HS512":r=parseInt(e.slice(-3),10),n={name:"HMAC",hash:`SHA-${r}`,length:r},a=["sign","verify"];break;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return r=parseInt(e.slice(-3),10),Tl(new Uint8Array(r>>3));case"A128KW":case"A192KW":case"A256KW":r=parseInt(e.slice(1,4),10),n={name:"AES-KW",length:r},a=["wrapKey","unwrapKey"];break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(e.slice(1,4),10),n={name:"AES-GCM",length:r},a=["encrypt","decrypt"];break;default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return fe.subtle.generateKey(n,(t==null?void 0:t.extractable)??!1,a)}function pu(e){const t=(e==null?void 0:e.modulusLength)??2048;if(typeof t!="number"||t<2048)throw new Te("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");return t}async function BM(e,t){let r,n;switch(e){case"PS256":case"PS384":case"PS512":r={name:"RSA-PSS",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:pu(t)},n=["sign","verify"];break;case"RS256":case"RS384":case"RS512":r={name:"RSASSA-PKCS1-v1_5",hash:`SHA-${e.slice(-3)}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:pu(t)},n=["sign","verify"];break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r={name:"RSA-OAEP",hash:`SHA-${parseInt(e.slice(-3),10)||1}`,publicExponent:new Uint8Array([1,0,1]),modulusLength:pu(t)},n=["decrypt","unwrapKey","encrypt","wrapKey"];break;case"ES256":r={name:"ECDSA",namedCurve:"P-256"},n=["sign","verify"];break;case"ES384":r={name:"ECDSA",namedCurve:"P-384"},n=["sign","verify"];break;case"ES512":r={name:"ECDSA",namedCurve:"P-521"},n=["sign","verify"];break;case"EdDSA":{n=["sign","verify"];const a=(t==null?void 0:t.crv)??"Ed25519";switch(a){case"Ed25519":case"Ed448":r={name:a};break;default:throw new Te("Invalid or unsupported crv option provided")}break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{n=["deriveKey","deriveBits"];const a=(t==null?void 0:t.crv)??"P-256";switch(a){case"P-256":case"P-384":case"P-521":{r={name:"ECDH",namedCurve:a};break}case"X25519":case"X448":r={name:a};break;default:throw new Te("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}break}default:throw new Te('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return fe.subtle.generateKey(r,(t==null?void 0:t.extractable)??!1,n)}async function WM(e,t){return BM(e,t)}async function UM(e,t){return HM(e,t)}const jM="WebCryptoAPI",qM=Object.freeze(Object.defineProperty({__proto__:null,CompactEncrypt:sS,CompactSign:iS,EmbeddedJWK:PM,EncryptJWT:CM,FlattenedEncrypt:$o,FlattenedSign:Ih,GeneralEncrypt:uM,GeneralSign:SM,SignJWT:_M,UnsecuredJWT:OM,base64url:MM,calculateJwkThumbprint:oS,calculateJwkThumbprintUri:wM,compactDecrypt:X0,compactVerify:rS,createLocalJWKSet:kM,createRemoteJWKSet:$M,cryptoRuntime:jM,decodeJwt:DM,decodeProtectedHeader:FM,errors:wL,exportJWK:Y0,exportPKCS8:lM,exportSPKI:oM,flattenedDecrypt:Th,flattenedVerify:Rh,generalDecrypt:aM,generalVerify:hM,generateKeyPair:WM,generateSecret:UM,importJWK:xl,importPKCS8:XL,importSPKI:GL,importX509:JL,jwtDecrypt:yM,jwtVerify:bM},Symbol.toStringTag,{value:"Module"})),VM=Nn(qM);var Ps={},bg;function KM(){if(bg)return Ps;bg=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.getHMACKey=void 0;function e(t){const r=new Uint8Array(t.length);for(let n=0,a=t.length;n<a;n++)r[n]=t.charCodeAt(n);return r}return Ps.getHMACKey=e,Ps}Object.defineProperty(ls,"__esModule",{value:!0});ls.decodeSessionToken=void 0;const Oh=ve,zM=Oh.__importStar(VM),yg=Oh.__importStar(K),GM=KM(),JM=10;function XM(e){return(t,{checkAudience:r=!0}={})=>Oh.__awaiter(this,void 0,void 0,function*(){let n;try{n=(yield zM.jwtVerify(t,(0,GM.getHMACKey)(e.apiSecretKey),{algorithms:["HS256"],clockTolerance:JM})).payload}catch(a){throw new yg.InvalidJwtError(`Failed to parse session token '${t}': ${a.message}`)}if(r&&n.aud!==e.apiKey)throw new yg.InvalidJwtError("Session token had invalid API key");return n})}ls.decodeSessionToken=XM;Object.defineProperty(br,"__esModule",{value:!0});br.customAppSession=br.getCurrentSessionId=br.getOfflineId=br.getJwtSessionId=void 0;const bd=ve,YM=kn,vg=wa(),Lh=Dr,ZM=ct,QM=bd.__importStar(K),eF=ls,tF=Sh();function uS(e){return(t,r)=>`${(0,Lh.sanitizeShop)(e)(t,!0)}_${r}`}br.getJwtSessionId=uS;function dS(e){return t=>`offline_${(0,Lh.sanitizeShop)(e)(t,!0)}`}br.getOfflineId=dS;function rF(e){return function(r){var{isOnline:n}=r,a=bd.__rest(r,["isOnline"]);return bd.__awaiter(this,void 0,void 0,function*(){const s=yield(0,vg.abstractConvertRequest)(a),i=(0,ZM.logger)(e);if(e.isEmbeddedApp){i.debug("App is embedded, looking for session id in JWT payload",{isOnline:n});const l=s.headers.Authorization;if(l){const c=(typeof l=="string"?l:l[0]).match(/^Bearer (.+)$/);if(!c)throw i.error("Missing Bearer token in authorization header",{isOnline:n}),new QM.MissingJwtTokenError("Missing Bearer token in authorization header");const u=yield(0,eF.decodeSessionToken)(e)(c[1]),d=u.dest.replace(/^https:\/\//,"");return i.debug("Found valid JWT payload",{shop:d,isOnline:n}),n?uS(e)(d,u.sub):dS(e)(d)}else i.error("Missing Authorization header, was the request made with authenticatedFetch?",{isOnline:n})}else return i.debug("App is not embedded, looking for session id in cookies",{isOnline:n}),new vg.Cookies(s,{},{keys:[e.apiSecretKey]}).getAndVerify(YM.SESSION_COOKIE_NAME)})}}br.getCurrentSessionId=rF;function nF(e){return t=>new tF.Session({id:"",shop:`${(0,Lh.sanitizeShop)(e)(t,!0)}`,state:"",isOnline:!1})}br.customAppSession=nF;Object.defineProperty(ci,"__esModule",{value:!0});ci.createSession=void 0;const aF=ve,sF=y0,Eg=Sh(),iF=ct,Sg=br;function oF({config:e,accessTokenResponse:t,shop:r,state:n}){const s=!!t.associated_user;if((0,iF.logger)(e).info("Creating new session",{shop:r,isOnline:s}),s){let i;const l=t,{access_token:c,scope:u}=l,d=aF.__rest(l,["access_token","scope"]),h=new Date(Date.now()+l.expires_in*1e3);return e.isEmbeddedApp?i=(0,Sg.getJwtSessionId)(e)(r,`${d.associated_user.id}`):i=(0,sF.v4)(),new Eg.Session({id:i,shop:r,state:n,isOnline:s,accessToken:c,scope:u,expires:h,onlineAccessInfo:d})}else return new Eg.Session({id:(0,Sg.getOfflineId)(e)(r),shop:r,state:n,isOnline:s,accessToken:t.access_token,scope:t.scope})}ci.createSession=oF;Object.defineProperty(Ya,"__esModule",{value:!0});Ya.callback=Ya.begin=void 0;const ba=ve,hS=L$,lF=lr,cF=ba.__importDefault(l0()),to=ba.__importStar(K),uF=$t,fS=Dr,En=wa(),pS=ct,_g=Eh(),dF=oi,ro=kn,hF=li,fF=is,pF=ci,mS=({request:e,log:t,func:r})=>{t.debug(`Possible bot request to auth ${r}: `,{userAgent:e.headers["User-Agent"]})};function mF(e){return t=>ba.__awaiter(this,void 0,void 0,function*(){var{shop:r,callbackPath:n,isOnline:a}=t,s=ba.__rest(t,["shop","callbackPath","isOnline"]);gS(e.isCustomStoreApp,"Cannot perform OAuth for private apps");const i=(0,pS.logger)(e);i.info("Beginning OAuth",{shop:r,isOnline:a,callbackPath:n});const l=yield(0,En.abstractConvertRequest)(s),c=yield(0,En.abstractConvertIncomingResponse)(s);let u=l.headers["User-Agent"];if(Array.isArray(u)&&(u=u[0]),(0,hS.isbot)(u))return mS({request:l,log:i,func:"begin"}),c.statusCode=410,(0,En.abstractConvertResponse)(c,s);const d=new En.Cookies(l,c,{keys:[e.apiSecretKey],secure:!0}),h=(0,hF.nonce)();yield d.setAndSign(ro.STATE_COOKIE_NAME,h,{expires:new Date(Date.now()+6e4),sameSite:"lax",secure:!0,path:n});const f={client_id:e.apiKey,scope:e.scopes.toString(),redirect_uri:`${e.hostScheme}://${e.hostName}${n}`,state:h,"grant_options[]":a?"per-user":""},p=new cF.default;p.putAll(f);const b=`https://${(0,fS.sanitizeShop)(e)(r,!0)}/admin/oauth/authorize${p.stringify()}`;return c.statusCode=302,c.statusText="Found",c.headers=Object.assign(Object.assign(Object.assign({},c.headers),d.response.headers),{Location:b}),i.debug(`OAuth started, redirecting to ${b}`,{shop:r,isOnline:a}),(0,En.abstractConvertResponse)(c,s)})}Ya.begin=mF;function gF(e){return function(r){var n=ba.__rest(r,[]);return ba.__awaiter(this,void 0,void 0,function*(){gS(e.isCustomStoreApp,"Cannot perform OAuth for private apps");const a=(0,pS.logger)(e),s=yield(0,En.abstractConvertRequest)(n),i=new URL(s.url,`${e.hostScheme}://${e.hostName}`).searchParams,l=i.get("shop"),c={};let u=s.headers["User-Agent"];if(Array.isArray(u)&&(u=u[0]),(0,hS.isbot)(u))throw mS({request:s,log:a,func:"callback"}),new to.BotActivityDetected("Invalid OAuth callback initiated by bot");a.info("Completing OAuth",{shop:l});const d=new En.Cookies(s,c,{keys:[e.apiSecretKey],secure:!0}),h=yield d.getAndVerify(ro.STATE_COOKIE_NAME);if(d.deleteCookie(ro.STATE_COOKIE_NAME),!h)throw a.error("Could not find OAuth cookie",{shop:l}),new to.CookieNotFound(`Cannot complete OAuth process. Could not find an OAuth cookie for shop url: ${l}`);const f=Object.fromEntries(i.entries());if(!(yield bF({config:e,query:f,stateFromCookie:h})))throw a.error("Invalid OAuth callback",{shop:l,stateFromCookie:h}),new to.InvalidOAuthError("Invalid OAuth callback.");a.debug("OAuth request is valid, requesting access token",{shop:l});const p={client_id:e.apiKey,client_secret:e.apiSecretKey,code:i.get("code")},g=(0,fS.sanitizeShop)(e)(i.get("shop"),!0),b=yield(0,dF.fetchRequestFactory)(e)(`https://${g}/admin/oauth/access_token`,{method:"POST",body:JSON.stringify(p),headers:{"Content-Type":_g.DataType.JSON,Accept:_g.DataType.JSON}});b.ok||(0,lF.throwFailedRequest)(yield b.json(),b,!1);const v=(0,pF.createSession)({accessTokenResponse:yield b.json(),shop:g,state:h,config:e});return e.isEmbeddedApp||(yield d.setAndSign(ro.SESSION_COOKIE_NAME,v.id,{expires:v.expires,sameSite:"lax",secure:!0,path:"/"})),{headers:yield(0,En.abstractConvertHeaders)(d.response.headers,n),session:v}})}}Ya.callback=gF;function bF({config:e,query:t,stateFromCookie:r}){return ba.__awaiter(this,void 0,void 0,function*(){return(yield(0,uF.validateHmac)(e)(t))&&(0,fF.safeCompare)(t.state,r)})}function gS(e,t){if(e)throw new to.PrivateAppError(t)}var ya={};Object.defineProperty(ya,"__esModule",{value:!0});ya.buildEmbeddedAppUrl=ya.getEmbeddedAppUrl=void 0;const yd=ve,mu=yd.__importStar(K),yF=wa(),vF=Dr,EF=ii;function SF(e){return t=>yd.__awaiter(this,void 0,void 0,function*(){var r=yd.__rest(t,[]);const n=yield(0,yF.abstractConvertRequest)(r);if(!n)throw new mu.MissingRequiredArgument("getEmbeddedAppUrl requires a request object argument");if(!n.url)throw new mu.InvalidRequestError("Request does not contain a URL");const s=new URL(n.url,`https://${n.headers.host}`).searchParams.get("host");if(typeof s!="string")throw new mu.InvalidRequestError("Request does not contain a host query parameter");return bS(e)(s)})}ya.getEmbeddedAppUrl=SF;function bS(e){return t=>((0,vF.sanitizeHost)()(t,!0),`https://${(0,EF.decodeHost)(t)}/apps/${e.apiKey}`)}ya.buildEmbeddedAppUrl=bS;var va={};Object.defineProperty(va,"__esModule",{value:!0});va.tokenExchange=va.RequestedTokenType=void 0;const _F=ve,CF=lr,wF=ls,PF=Dr,Cg=Eh(),AF=oi,TF=ci;var wg;(function(e){e.OnlineAccessToken="urn:shopify:params:oauth:token-type:online-access-token",e.OfflineAccessToken="urn:shopify:params:oauth:token-type:offline-access-token"})(wg||(va.RequestedTokenType=wg={}));const RF="urn:ietf:params:oauth:grant-type:token-exchange",kF="urn:ietf:params:oauth:token-type:id_token";function xF(e){return({shop:t,sessionToken:r,requestedTokenType:n})=>_F.__awaiter(this,void 0,void 0,function*(){yield(0,wF.decodeSessionToken)(e)(r);const a={client_id:e.apiKey,client_secret:e.apiSecretKey,grant_type:RF,subject_token:r,subject_token_type:kF,requested_token_type:n},s=(0,PF.sanitizeShop)(e)(t,!0),i=yield(0,AF.fetchRequestFactory)(e)(`https://${s}/admin/oauth/access_token`,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":Cg.DataType.JSON,Accept:Cg.DataType.JSON}});return i.ok||(0,CF.throwFailedRequest)(yield i.json(),i,!1),{session:(0,TF.createSession)({accessTokenResponse:yield i.json(),shop:s,state:"",config:e})}})}va.tokenExchange=xF;Object.defineProperty(hl,"__esModule",{value:!0});hl.shopifyAuth=void 0;const Pg=Ya,IF=li,NF=is,Ag=ya,$F=va;function OF(e){return{begin:(0,Pg.begin)(e),callback:(0,Pg.callback)(e),nonce:IF.nonce,safeCompare:NF.safeCompare,getEmbeddedAppUrl:(0,Ag.getEmbeddedAppUrl)(e),buildEmbeddedAppUrl:(0,Ag.buildEmbeddedAppUrl)(e),tokenExchange:(0,$F.tokenExchange)(e)}}hl.shopifyAuth=OF;var Nl={};Object.defineProperty(Nl,"__esModule",{value:!0});Nl.shopifySession=void 0;const LF=ls,Hi=br;function MF(e){return{customAppSession:(0,Hi.customAppSession)(e),getCurrentId:(0,Hi.getCurrentSessionId)(e),getOfflineId:(0,Hi.getOfflineId)(e),getJwtSessionId:(0,Hi.getJwtSessionId)(e),decodeSessionToken:(0,LF.decodeSessionToken)(e)}}Nl.shopifySession=MF;var $l={},Za={};Object.defineProperty(Za,"__esModule",{value:!0});Za.versionPriorTo=Za.versionCompatible=void 0;const FF=xe;function yS(e){return(t,r=e.apiVersion)=>{if(r===FF.ApiVersion.Unstable)return!0;const n=i=>parseInt(i.replace("-",""),10),a=n(r),s=n(t);return a>=s}}Za.versionCompatible=yS;function DF(e){return(t,r=e.apiVersion)=>!yS(e)(t,r)}Za.versionPriorTo=DF;Object.defineProperty($l,"__esModule",{value:!0});$l.shopifyUtils=void 0;const Tg=Dr,HF=$t,Rg=Za,kg=ga;function BF(e){return{sanitizeShop:(0,Tg.sanitizeShop)(e),sanitizeHost:(0,Tg.sanitizeHost)(),validateHmac:(0,HF.validateHmac)(e),versionCompatible:(0,Rg.versionCompatible)(e),versionPriorTo:(0,Rg.versionPriorTo)(e),shopAdminUrlToLegacyUrl:kg.shopAdminUrlToLegacyUrl,legacyUrlToShopAdminUrl:kg.legacyUrlToShopAdminUrl}}$l.shopifyUtils=BF;var Ol={},ft={},zr={},xg;function fi(){if(xg)return zr;xg=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.WebhookValidationErrorReason=zr.WebhookOperation=zr.DeliveryMethod=void 0;const e=os();var t;(function(n){n.Http="http",n.EventBridge="eventbridge",n.PubSub="pubsub"})(t||(zr.DeliveryMethod=t={}));var r;return function(n){n.Create="create",n.Update="update",n.Delete="delete"}(r||(zr.WebhookOperation=r={})),zr.WebhookValidationErrorReason=Object.assign(Object.assign({},e.ValidationErrorReason),{MissingHeaders:"missing_headers"}),zr}Object.defineProperty(ft,"__esModule",{value:!0});ft.addHostToCallbackUrl=ft.handlerIdentifier=ft.getHandlers=ft.getTopicsAdded=ft.addHandlers=ft.topicForStorage=ft.registry=void 0;const vS=K,WF=ct,no=fi();function UF(){return{}}ft.registry=UF;function Mh(e){return e.toUpperCase().replace(/\/|\./g,"_")}ft.topicForStorage=Mh;function jF(e,t){return function(n){for(const[a,s]of Object.entries(n)){const i=Mh(a);if(Array.isArray(s))for(const l of s)Ig(e,t,i,l);else Ig(e,t,i,s)}}}ft.addHandlers=jF;function qF(e){return function(){return Object.keys(e)}}ft.getTopicsAdded=qF;function VF(e){return function(r){return e[Mh(r)]||[]}}ft.getHandlers=VF;function vd(e,t){const r=t.deliveryMethod;switch(t.deliveryMethod){case no.DeliveryMethod.Http:return`${r}_${ES(e,t.callbackUrl)}`;case no.DeliveryMethod.EventBridge:return`${r}_${t.arn}`;case no.DeliveryMethod.PubSub:return`${r}_${t.pubSubProject}:${t.pubSubTopic}`;default:throw new vS.InvalidDeliveryMethodError(`Unrecognized delivery method '${t.deliveryMethod}'`)}}ft.handlerIdentifier=vd;function ES(e,t){return t.startsWith("/")?`${e.hostScheme}://${e.hostName}${t}`:t}ft.addHostToCallbackUrl=ES;function Ig(e,t,r,n){var a,s;const i=(0,WF.logger)(e);if((a=n.includeFields)===null||a===void 0||a.sort(),(s=n.metafieldNamespaces)===null||s===void 0||s.sort(),!(r in t)){t[r]=[n];return}const l=vd(e,n);for(const c in t[r]){if(!Object.prototype.hasOwnProperty.call(t[r],c))continue;const u=t[r][c],d=vd(e,u);if(l===d)if(n.deliveryMethod===no.DeliveryMethod.Http){i.info(`Detected multiple handlers for '${r}', webhooks.process will call them sequentially`);break}else throw new vS.InvalidDeliveryMethodError(`Can only add multiple handlers for a topic when deliveryMethod is Http. Please be sure that you used addHandler method once after creating ShopifyApi instance in your app.  Invalid handler: ${JSON.stringify(n)}`)}t[r].push(n)}var SS={},Ll={};Object.defineProperty(Ll,"__esModule",{value:!0});Ll.queryTemplate=void 0;function KF(e,t){let r=e;return Object.entries(t).forEach(([n,a])=>{r=r.replace(`{{${n}}}`,a)}),r}Ll.queryTemplate=KF;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TEMPLATE_MUTATION=e.TEMPLATE_GET_HANDLERS=e.register=void 0;const t=ve,r=Fn,n=K,a=ct,s=xe,i=ft,l=Ll,c=fi();function u(C,w){return function({session:N}){return t.__awaiter(this,void 0,void 0,function*(){const $=(0,a.logger)(C);$.info("Registering webhooks",{shop:N.shop});const L=Object.keys(w).reduce((A,O)=>(A[O]=[],A),{}),k=yield d(C,N);$.debug(`Existing topics: [${Object.keys(k).join(", ")}]`,{shop:N.shop});for(const A in w)Object.prototype.hasOwnProperty.call(w,A)&&(s.privacyTopics.includes(A)||(L[A]=yield p({config:C,session:N,topic:A,existingHandlers:k[A]||[],handlers:(0,i.getHandlers)(w)(A)}),delete k[A]));for(const A in k){if(!Object.prototype.hasOwnProperty.call(k,A))continue;const O=(0,r.graphqlClientClass)({config:C}),M=new O({session:N});L[A]=yield y({config:C,client:M,topic:A,handlers:k[A],operation:c.WebhookOperation.Delete})}return L})}}e.register=u;function d(C,w){var P,N,$,L,k,A;return t.__awaiter(this,void 0,void 0,function*(){const O=(0,r.graphqlClientClass)({config:C}),M=new O({session:w}),D={};let I,F=null;do{const B=h(F),U=yield M.request(B);(N=(P=U.data)===null||P===void 0?void 0:P.webhookSubscriptions)===null||N===void 0||N.edges.forEach(V=>{const W=f(V);D[V.node.topic]||(D[V.node.topic]=[]),D[V.node.topic].push(W)}),F=(L=($=U.data)===null||$===void 0?void 0:$.webhookSubscriptions)===null||L===void 0?void 0:L.pageInfo.endCursor,I=(A=(k=U.data)===null||k===void 0?void 0:k.webhookSubscriptions)===null||A===void 0?void 0:A.pageInfo.hasNextPage}while(I);return D})}function h(C){return(0,l.queryTemplate)(e.TEMPLATE_GET_HANDLERS,{END_CURSOR:JSON.stringify(C)})}function f(C){var w,P;const N=C.node.endpoint;let $;switch(N.__typename){case"WebhookHttpEndpoint":$={deliveryMethod:c.DeliveryMethod.Http,callbackUrl:N.callbackUrl,callback:()=>t.__awaiter(this,void 0,void 0,function*(){})};break;case"WebhookEventBridgeEndpoint":$={deliveryMethod:c.DeliveryMethod.EventBridge,arn:N.arn};break;case"WebhookPubSubEndpoint":$={deliveryMethod:c.DeliveryMethod.PubSub,pubSubProject:N.pubSubProject,pubSubTopic:N.pubSubTopic};break}return $.id=C.node.id,$.includeFields=C.node.includeFields,$.metafieldNamespaces=C.node.metafieldNamespaces,(w=$.includeFields)===null||w===void 0||w.sort(),(P=$.metafieldNamespaces)===null||P===void 0||P.sort(),$}function p({config:C,session:w,topic:P,existingHandlers:N,handlers:$}){return t.__awaiter(this,void 0,void 0,function*(){let L=[];const{toCreate:k,toUpdate:A,toDelete:O}=g(C,N,$),M=(0,r.graphqlClientClass)({config:C}),D=new M({session:w});let I=c.WebhookOperation.Create;return L=L.concat(yield y({config:C,client:D,topic:P,operation:I,handlers:k})),I=c.WebhookOperation.Update,L=L.concat(yield y({config:C,client:D,topic:P,operation:I,handlers:A})),I=c.WebhookOperation.Delete,L=L.concat(yield y({config:C,client:D,topic:P,operation:I,handlers:O})),L})}function g(C,w,P){const N=P.reduce((O,M)=>(O[(0,i.handlerIdentifier)(C,M)]=M,O),{}),$=w.reduce((O,M)=>(O[(0,i.handlerIdentifier)(C,M)]=M,O),{}),L=Object.assign({},N),k={},A={};for(const O in $){if(!Object.prototype.hasOwnProperty.call($,O))continue;const M=$[O],D=N[O];O in N?(delete L[O],b(M,D)||(k[O]=D,k[O].id=M.id)):A[O]=M}return{toCreate:Object.values(L),toUpdate:Object.values(k),toDelete:Object.values(A)}}function b(C,w){const P=v(C.includeFields||[],w.includeFields||[]),N=v(C.metafieldNamespaces||[],w.metafieldNamespaces||[]);return P&&N}function v(C,w){if(C.length!==w.length)return!1;for(let P=0;P<C.length;P++)if(C[P]!==w[P])return!1;return!0}function y({config:C,client:w,topic:P,handlers:N,operation:$}){return t.__awaiter(this,void 0,void 0,function*(){const L=[];for(const k of N)L.push(yield E({config:C,client:w,topic:P,handler:k,operation:$}));return L})}function E({config:C,client:w,topic:P,handler:N,operation:$}){return t.__awaiter(this,void 0,void 0,function*(){let L;(0,a.logger)(C).debug("Running webhook mutation",{topic:P,operation:$});try{const k=S(C,P,N,$),A=yield w.request(k);L={deliveryMethod:N.deliveryMethod,success:x(A,N,$),result:A,operation:$}}catch(k){if(k instanceof n.InvalidDeliveryMethodError)L={deliveryMethod:N.deliveryMethod,success:!1,result:{message:k.message},operation:$};else throw k}return L})}function S(C,w,P,N){const $={};let L;P.id?L=`id: "${P.id}"`:L=`topic: ${w}`;const k={MUTATION_NAME:_(P,N),IDENTIFIER:L,MUTATION_PARAMS:""};if(N!==c.WebhookOperation.Delete){switch(P.deliveryMethod){case c.DeliveryMethod.Http:$.callbackUrl=`"${(0,i.addHostToCallbackUrl)(C,P.callbackUrl)}"`;break;case c.DeliveryMethod.EventBridge:$.arn=`"${P.arn}"`;break;case c.DeliveryMethod.PubSub:$.pubSubProject=`"${P.pubSubProject}"`,$.pubSubTopic=`"${P.pubSubTopic}"`;break;default:throw new n.InvalidDeliveryMethodError(`Unrecognized delivery method '${P.deliveryMethod}'`)}if(P.includeFields&&($.includeFields=JSON.stringify(P.includeFields)),P.metafieldNamespaces&&($.metafieldNamespaces=JSON.stringify(P.metafieldNamespaces)),P.subTopic){const O=`subTopic: "${P.subTopic}",`;k.MUTATION_PARAMS=O}const A=Object.entries($).map(([O,M])=>`${O}: ${M}`).join(", ");k.MUTATION_PARAMS+=`webhookSubscription: {${A}}`}return(0,l.queryTemplate)(e.TEMPLATE_MUTATION,k)}function _(C,w){switch(w){case c.WebhookOperation.Create:return`${R(C)}Create`;case c.WebhookOperation.Update:return`${R(C)}Update`;case c.WebhookOperation.Delete:return"webhookSubscriptionDelete";default:throw new n.ShopifyError(`Unrecognized operation '${w}'`)}}function R(C){switch(C.deliveryMethod){case c.DeliveryMethod.Http:return"webhookSubscription";case c.DeliveryMethod.EventBridge:return"eventBridgeWebhookSubscription";case c.DeliveryMethod.PubSub:return"pubSubWebhookSubscription";default:throw new n.ShopifyError(`Unrecognized delivery method '${C.deliveryMethod}'`)}}function x(C,w,P){const N=_(w,P);return!!(C.data&&C.data[N]&&C.data[N].userErrors.length===0)}e.TEMPLATE_GET_HANDLERS=`query shopifyApiReadWebhookSubscriptions {
  webhookSubscriptions(
    first: 250,
    after: {{END_CURSOR}},
  ) {
    edges {
      node {
        id
        topic
        includeFields
        metafieldNamespaces
        endpoint {
          __typename
          ... on WebhookHttpEndpoint {
            callbackUrl
          }
          ... on WebhookEventBridgeEndpoint {
            arn
          }
          ... on WebhookPubSubEndpoint {
            pubSubProject
            pubSubTopic
          }
        }
      }
    }
    pageInfo {
      endCursor
      hasNextPage
    }
  }
}`,e.TEMPLATE_MUTATION=`
  mutation shopifyApiCreateWebhookSubscription {
    {{MUTATION_NAME}}(
      {{IDENTIFIER}},
      {{MUTATION_PARAMS}}
    ) {
      userErrors {
        field
        message
      }
    }
  }
`})(SS);var Ml={},pi={};Object.defineProperty(pi,"__esModule",{value:!0});pi.validateFactory=void 0;const Ng=ve,zF=ct,GF=$t,gu=os(),_S=wa(),sa=xe,CS=fi(),JF=ft,wS={subTopic:sa.ShopifyHeader.SubTopic},XF=Object.assign({apiVersion:sa.ShopifyHeader.ApiVersion,domain:sa.ShopifyHeader.Domain,hmac:sa.ShopifyHeader.Hmac,topic:sa.ShopifyHeader.Topic,webhookId:sa.ShopifyHeader.WebhookId},wS);function YF(e){return function(r){var{rawBody:n}=r,a=Ng.__rest(r,["rawBody"]);return Ng.__awaiter(this,void 0,void 0,function*(){const s=yield(0,_S.abstractConvertRequest)(a),i=yield(0,GF.validateHmacFromRequestFactory)(e)(Object.assign({type:gu.HmacValidationType.Webhook,rawBody:n},a));return i.valid?ZF(s.headers):i.reason===gu.ValidationErrorReason.MissingHmac?{valid:!1,reason:CS.WebhookValidationErrorReason.MissingHeaders,missingHeaders:[sa.ShopifyHeader.Hmac]}:(i.reason===gu.ValidationErrorReason.InvalidHmac&&(yield(0,zF.logger)(e).debug("Webhook HMAC validation failed. Please note that events manually triggered from a store's Notifications settings will fail this validation. To test this, please use the CLI or trigger the actual event in a development store.")),i)})}}pi.validateFactory=YF;function ZF(e){const t=[],n=Object.entries(XF).reduce((a,[s,i])=>{const l=(0,_S.getHeader)(e,i);return l?a[s]=l:s in wS||t.push(i),a},{});return t.length?{valid:!1,reason:CS.WebhookValidationErrorReason.MissingHeaders,missingHeaders:t}:Object.assign(Object.assign(Object.assign({valid:!0},n),n.subTopic?{subTopic:n.subTopic}:{}),{topic:(0,JF.topicForStorage)(n.topic)})}Object.defineProperty(Ml,"__esModule",{value:!0});Ml.process=void 0;const Qa=ve,Dt=yh,bu=wa(),PS=Qa.__importStar(K),Fh=ct,ao=fi(),QF=pi,$g={[Dt.StatusCode.Ok]:"OK",[Dt.StatusCode.BadRequest]:"Bad Request",[Dt.StatusCode.Unauthorized]:"Unauthorized",[Dt.StatusCode.NotFound]:"Not Found",[Dt.StatusCode.InternalServerError]:"Internal Server Error"};function e2(e,t){return function(n){var{context:a,rawBody:s}=n,i=Qa.__rest(n,["context","rawBody"]);return Qa.__awaiter(this,void 0,void 0,function*(){const l={statusCode:Dt.StatusCode.Ok,statusText:$g[Dt.StatusCode.Ok],headers:{}};yield(0,Fh.logger)(e).info("Receiving webhook request");const c=yield(0,QF.validateFactory)(e)(Object.assign({rawBody:s},i));let u="Unknown error while handling webhook";if(c.valid){const h=yield t2(e,t,c,s,a);l.statusCode=h.statusCode,(0,bu.isOK)(l)||(u=h.errorMessage||u)}else{const h=yield r2(e,c);l.statusCode=h.statusCode,l.statusText=$g[l.statusCode],u=h.errorMessage}const d=yield(0,bu.abstractConvertResponse)(l,i);if(!(0,bu.isOK)(l))throw new PS.InvalidWebhookError({message:u,response:d});return Promise.resolve(d)})}}Ml.process=e2;function t2(e,t,r,n,a){return Qa.__awaiter(this,void 0,void 0,function*(){const s=(0,Fh.logger)(e),i=Qa.__rest(r,["hmac","valid"]);yield s.debug("Webhook request is valid, looking for HTTP handlers to call",i);const l=t[r.topic]||[],c={statusCode:Dt.StatusCode.Ok};let u=!1;for(const d of l)if(d.deliveryMethod===ao.DeliveryMethod.Http){if(!d.callback)throw c.statusCode=Dt.StatusCode.InternalServerError,c.errorMessage="Cannot call webhooks.process with a webhook handler that doesn't have a callback",new PS.MissingWebhookCallbackError({message:c.errorMessage,response:c});u=!0,yield s.debug("Found HTTP handler, triggering it",i);try{yield d.callback(r.topic,r.domain,n,r.webhookId,r.apiVersion,...r!=null&&r.subTopic?r.subTopic:"",a)}catch(h){c.statusCode=Dt.StatusCode.InternalServerError,c.errorMessage=h.message}}return u||(yield s.debug("No HTTP handlers found",i),c.statusCode=Dt.StatusCode.NotFound,c.errorMessage=`No HTTP webhooks registered for topic ${r.topic}`),c})}function r2(e,t){return Qa.__awaiter(this,void 0,void 0,function*(){const r={statusCode:Dt.StatusCode.InternalServerError,errorMessage:"Unknown error while handling webhook"};switch(t.reason){case ao.WebhookValidationErrorReason.MissingHeaders:r.statusCode=Dt.StatusCode.BadRequest,r.errorMessage=`Missing one or more of the required HTTP headers to process webhooks: [${t.missingHeaders.join(", ")}]`;break;case ao.WebhookValidationErrorReason.MissingBody:r.statusCode=Dt.StatusCode.BadRequest,r.errorMessage="No body was received when processing webhook";break;case ao.WebhookValidationErrorReason.InvalidHmac:r.statusCode=Dt.StatusCode.Unauthorized,r.errorMessage="Could not validate request HMAC";break}return yield(0,Fh.logger)(e).debug(`Webhook request is invalid, returning ${r.statusCode}: ${r.errorMessage}`),r})}Object.defineProperty(Ol,"__esModule",{value:!0});Ol.shopifyWebhooks=void 0;const Bi=ft,n2=SS,a2=Ml,s2=pi;function i2(e){const t=(0,Bi.registry)();return{addHandlers:(0,Bi.addHandlers)(e,t),getTopicsAdded:(0,Bi.getTopicsAdded)(t),getHandlers:(0,Bi.getHandlers)(t),register:(0,n2.register)(e,t),process:(0,a2.process)(e,t),validate:(0,s2.validateFactory)(e)}}Ol.shopifyWebhooks=i2;var Fl={},Dl={};Object.defineProperty(Dl,"__esModule",{value:!0});Dl.check=void 0;const AS=ve,o2=Fn,l2=K;function c2(e){return function({session:r,plans:n,isTest:a=!0,returnObject:s=!1}){return AS.__awaiter(this,void 0,void 0,function*(){if(!e.billing)throw new l2.BillingError({message:"Attempted to look for purchases without billing configs",errorData:[]});const i=(0,o2.graphqlClientClass)({config:e}),l=new i({session:r}),c=Array.isArray(n)?n:[n];return u2({plans:c,client:l,isTest:a,returnObject:s})})}}Dl.check=c2;function u2({plans:e,client:t,isTest:r,returnObject:n}){var a;return AS.__awaiter(this,void 0,void 0,function*(){const s=n?{hasActivePayment:!1,oneTimePurchases:[],appSubscriptions:[]}:!1;let i,l=null;do{if(i=(a=(yield t.request(f2,{variables:{endCursor:l}})).data)===null||a===void 0?void 0:a.currentAppInstallation,n)i.activeSubscriptions.map(u=>{TS({plans:e,isTest:r,subscription:u})&&(s.hasActivePayment=!0,s.appSubscriptions.push(u))}),i.oneTimePurchases.edges.map(u=>{RS({plans:e,isTest:r,purchase:u.node})&&(s.hasActivePayment=!0,s.oneTimePurchases.push(u.node))});else{const u={plans:e,isTest:r,installation:i};if(d2(u)||h2(u))return!0}l=i.oneTimePurchases.pageInfo.endCursor}while(i!=null&&i.oneTimePurchases.pageInfo.hasNextPage);return s})}function TS({plans:e,isTest:t,subscription:r}){return e.includes(r.name)&&(t||!r.test)}function RS({plans:e,isTest:t,purchase:r}){return e.includes(r.name)&&(t||!r.test)&&r.status==="ACTIVE"}function d2({plans:e,isTest:t,installation:r}){return r.activeSubscriptions.some(n=>TS({plans:e,isTest:t,subscription:n}))}function h2({plans:e,isTest:t,installation:r}){return r.oneTimePurchases.edges.some(n=>RS({plans:e,isTest:t,purchase:n.node}))}const f2=`
  query appSubscription($endCursor: String) {
    currentAppInstallation {
      activeSubscriptions {
        id
        name
        test
        lineItems {
          id
          plan {
            pricingDetails {
              ... on AppRecurringPricing {
                price {
                  amount
                  currencyCode
                }
                interval
                discount {
                  durationLimitInIntervals
                  remainingDurationInIntervals
                  priceAfterDiscount {
                    amount
                  }
                  value {
                    ... on AppSubscriptionDiscountAmount {
                      amount {
                        amount
                        currencyCode
                      }
                    }
                    ... on AppSubscriptionDiscountPercentage {
                      percentage
                    }
                  }
                }
              }
              ... on AppUsagePricing {
                balanceUsed {
                  amount
                  currencyCode
                }
                cappedAmount {
                  amount
                  currencyCode
                }
                terms
              }
            }
          }
        }
      }
      oneTimePurchases(first: 250, sortKey: CREATED_AT, after: $endCursor) {
        edges {
          node {
            id
            name
            test
            status
          }
        }
        pageInfo {
          hasNextPage
          endCursor
        }
      }
    }
  }
`;var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.request=void 0;const es=ve,Bs=xe,Ea=K,p2=ya,m2=Fn,g2=tl(),b2=el();function y2(e){return function(t){var r,{session:n,plan:a,isTest:s=!0,returnUrl:i,returnObject:l=!1}=t,c=es.__rest(t,["session","plan","isTest","returnUrl","returnObject"]);return es.__awaiter(this,void 0,void 0,function*(){if(!e.billing||!e.billing[a])throw new Ea.BillingError({message:`Could not find plan ${a} in billing settings`,errorData:[]});const u=Object.assign({},e.billing[a]),d=Object.fromEntries(Object.entries(c).filter(([_,R])=>R!==void 0)),h=n.shop.replace(".myshopify.com",""),f=(0,p2.buildEmbeddedAppUrl)(e)((0,g2.hashString)(`admin.shopify.com/store/${h}`,b2.HashFormat.Base64)),p=`${e.hostScheme}://${e.hostName}?shop=${n.shop}`,g=i||(e.isEmbeddedApp?f:p),b=(0,m2.graphqlClientClass)({config:e}),v=new b({session:n});function y(_){return"lineItems"in _}function E(_){return _.interval===Bs.BillingInterval.OneTime}let S;if(y(u)){const _=C2(u,d);S=(yield v2({billingConfig:_,plan:a,client:v,returnUrl:g,isTest:s})).appSubscriptionCreate}else if(E(u))S=(yield _2({billingConfig:Object.assign(Object.assign({},u),d),plan:a,client:v,returnUrl:g,isTest:s})).appPurchaseOneTimeCreate;else switch(u.interval){case Bs.BillingInterval.Usage:{S=(yield S2({billingConfig:Object.assign(Object.assign({},u),d),plan:a,client:v,returnUrl:g,isTest:s})).appSubscriptionCreate;break}default:S=(yield E2({billingConfig:Object.assign(Object.assign({},u),d),plan:a,client:v,returnUrl:g,isTest:s})).appSubscriptionCreate}if(!((r=S.userErrors)===null||r===void 0)&&r.length)throw new Ea.BillingError({message:"Error while billing the store",errorData:S.userErrors});return l?S:S.confirmationUrl})}}Hl.request=y2;function v2({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){return es.__awaiter(this,void 0,void 0,function*(){const s=e.lineItems.map(l=>{if(l.interval===Bs.BillingInterval.Every30Days||l.interval===Bs.BillingInterval.Annual){const c={interval:l.interval,price:{amount:l.amount,currencyCode:l.currencyCode}};return l.discount&&(c.discount={durationLimitInIntervals:l.discount.durationLimitInIntervals,value:{amount:l.discount.value.amount,percentage:l.discount.value.percentage}}),{plan:{appRecurringPricingDetails:c}}}else{if(l.interval===Bs.BillingInterval.Usage)return{plan:{appUsagePricingDetails:{terms:l.terms,cappedAmount:{amount:l.amount,currencyCode:l.currencyCode}}}};throw new Ea.BillingError({message:"Invalid interval provided",errorData:[l]})}}),i=yield r.request(Dh,{variables:{name:t,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,returnUrl:n,test:a,lineItems:s}});if(i.errors)throw new Ea.BillingError({message:"Error while billing the store",errorData:i.errors});return i.data})}function E2({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){var s,i,l,c,u;return es.__awaiter(this,void 0,void 0,function*(){const d=yield r.request(Dh,{variables:{name:t,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,returnUrl:n,test:a,lineItems:[{plan:{appRecurringPricingDetails:{interval:e.interval,price:{amount:e.amount,currencyCode:e.currencyCode},discount:{durationLimitInIntervals:(s=e.discount)===null||s===void 0?void 0:s.durationLimitInIntervals,value:{amount:(l=(i=e.discount)===null||i===void 0?void 0:i.value)===null||l===void 0?void 0:l.amount,percentage:(u=(c=e.discount)===null||c===void 0?void 0:c.value)===null||u===void 0?void 0:u.percentage}}}}}]}});if(d.errors)throw new Ea.BillingError({message:"Error while billing the store",errorData:d.errors});return d.data})}function S2({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){return es.__awaiter(this,void 0,void 0,function*(){const s=yield r.request(Dh,{variables:{name:t,returnUrl:n,test:a,trialDays:e.trialDays,replacementBehavior:e.replacementBehavior,lineItems:[{plan:{appUsagePricingDetails:{terms:e.usageTerms,cappedAmount:{amount:e.amount,currencyCode:e.currencyCode}}}}]}});if(s.errors)throw new Ea.BillingError({message:`Error while billing the store:: ${s.errors}`,errorData:s.errors});return s.data})}function _2({billingConfig:e,plan:t,client:r,returnUrl:n,isTest:a}){return es.__awaiter(this,void 0,void 0,function*(){const s=yield r.request(w2,{variables:{name:t,returnUrl:n,test:a,price:{amount:e.amount,currencyCode:e.currencyCode}}});if(s.errors)throw new Ea.BillingError({message:"Error while billing the store",errorData:s.errors});return s.data})}function C2(e,t){const r=Object.assign(Object.assign({},e),t),n=[];if(e.lineItems&&t.lineItems){for(const a of e.lineItems){let s=!1;for(const i of t.lineItems)if(a.interval===i.interval){n.push(Object.assign(Object.assign({},a),i)),s=!0;break}s||n.push(a)}r.lineItems=n}return r}const Dh=`
  mutation test(
    $name: String!
    $lineItems: [AppSubscriptionLineItemInput!]!
    $returnUrl: URL!
    $test: Boolean
    $trialDays: Int
    $replacementBehavior: AppSubscriptionReplacementBehavior
  ) {
    appSubscriptionCreate(
      name: $name
      lineItems: $lineItems
      returnUrl: $returnUrl
      test: $test
      trialDays: $trialDays
      replacementBehavior: $replacementBehavior
    ) {
      appSubscription {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`,w2=`
  mutation test(
    $name: String!
    $price: MoneyInput!
    $returnUrl: URL!
    $test: Boolean
  ) {
    appPurchaseOneTimeCreate(
      name: $name
      price: $price
      returnUrl: $returnUrl
      test: $test
    ) {
      appPurchaseOneTime {
        id
        name
        test
      }
      confirmationUrl
      userErrors {
        field
        message
      }
    }
  }
`;var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});Bl.cancel=void 0;const P2=ve,A2=Fn,yu=K,T2=`
  mutation appSubscriptionCancel($id: ID!, $prorate: Boolean) {
    appSubscriptionCancel(id: $id, prorate: $prorate) {
      appSubscription {
        id
        name
        test
      }
      userErrors {
        field
        message
      }
    }
  }
`;function R2(e){return function(t){var r,n,a,s,i,l,c;return P2.__awaiter(this,void 0,void 0,function*(){const{session:u,subscriptionId:d,prorate:h=!0}=t,f=(0,A2.graphqlClientClass)({config:e}),p=new f({session:u});try{const g=yield p.request(T2,{variables:{id:d,prorate:h}});if(!((n=(r=g.data)===null||r===void 0?void 0:r.appSubscriptionCancel)===null||n===void 0)&&n.userErrors.length)throw new yu.BillingError({message:"Error while canceling a subscription",errorData:(s=(a=g.data)===null||a===void 0?void 0:a.appSubscriptionCancel)===null||s===void 0?void 0:s.userErrors});return(l=(i=g.data)===null||i===void 0?void 0:i.appSubscriptionCancel)===null||l===void 0?void 0:l.appSubscription}catch(g){throw g instanceof yu.GraphqlQueryError?new yu.BillingError({message:g.message,errorData:(c=g.response)===null||c===void 0?void 0:c.errors}):g}})}}Bl.cancel=R2;var Wl={};Object.defineProperty(Wl,"__esModule",{value:!0});Wl.subscriptions=void 0;const k2=ve,x2=K,I2=Fn,N2=`
query appSubscription {
  currentAppInstallation {
    activeSubscriptions {
      id
      name
      test
      lineItems {
        id
        plan {
          pricingDetails {
            ... on AppRecurringPricing {
              price {
                amount
                currencyCode
              }
              interval
              discount {
                durationLimitInIntervals
                remainingDurationInIntervals
                priceAfterDiscount {
                  amount
                }
                value {
                  ... on AppSubscriptionDiscountAmount {
                    amount {
                      amount
                      currencyCode
                    }
                  }
                  ... on AppSubscriptionDiscountPercentage {
                    percentage
                  }
                }
              }
            }
            ... on AppUsagePricing {
              balanceUsed {
                amount
                currencyCode
              }
              cappedAmount {
                amount
                currencyCode
              }
              terms
            }
          }
        }
      }
    }
  }
}
`;function $2(e){return function({session:t}){var r;return k2.__awaiter(this,void 0,void 0,function*(){if(!e.billing)throw new x2.BillingError({message:"Attempted to look for purchases without billing configs",errorData:[]});const n=(0,I2.graphqlClientClass)({config:e});return(r=(yield new n({session:t}).request(N2)).data)===null||r===void 0?void 0:r.currentAppInstallation})}}Wl.subscriptions=$2;Object.defineProperty(Fl,"__esModule",{value:!0});Fl.shopifyBilling=void 0;const O2=Dl,L2=Hl,M2=Bl,F2=Wl;function D2(e){return{check:(0,O2.check)(e),request:(0,L2.request)(e),cancel:(0,M2.cancel)(e),subscriptions:(0,F2.subscriptions)(e)}}Fl.shopifyBilling=D2;var Ul={},jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.validateFactory=void 0;const Og=ve,H2=os(),B2=$t;function W2(e){return function(r){var{rawBody:n}=r,a=Og.__rest(r,["rawBody"]);return Og.__awaiter(this,void 0,void 0,function*(){return(0,B2.validateHmacFromRequestFactory)(e)(Object.assign({type:H2.HmacValidationType.Flow,rawBody:n},a))})}}jl.validateFactory=W2;Object.defineProperty(Ul,"__esModule",{value:!0});Ul.shopifyFlow=void 0;const U2=jl;function j2(e){return{validate:(0,U2.validateFactory)(e)}}Ul.shopifyFlow=j2;var ql={},Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.validateFactory=void 0;const Lg=ve,q2=$t,V2=os();function K2(e){return function(r){var{rawBody:n}=r,a=Lg.__rest(r,["rawBody"]);return Lg.__awaiter(this,void 0,void 0,function*(){return(0,q2.validateHmacFromRequestFactory)(e)(Object.assign({type:V2.HmacValidationType.FulfillmentService,rawBody:n},a))})}}Vl.validateFactory=K2;Object.defineProperty(ql,"__esModule",{value:!0});ql.fulfillmentService=void 0;const z2=Vl;function G2(e){return{validate:(0,z2.validateFactory)(e)}}ql.fulfillmentService=G2;var vu={},Mg;function J2(){return Mg||(Mg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;var t=Sh();Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return t.Session}})}(vu)),vu}var Eu={},Fg;function X2(){return Fg||(Fg=1,Object.defineProperty(Eu,"__esModule",{value:!0})),Eu}var Su={},Dg;function Y2(){return Dg||(Dg=1,Object.defineProperty(Su,"__esModule",{value:!0})),Su}var _u={},Hg;function Z2(){return Hg||(Hg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RequestedTokenType=void 0,ve.__exportStar(kn,e);var r=va;Object.defineProperty(e,"RequestedTokenType",{enumerable:!0,get:function(){return r.RequestedTokenType}})}(_u)),_u}var Cu={},Bg;function Q2(){return Bg||(Bg=1,Object.defineProperty(Cu,"__esModule",{value:!0})),Cu}var wu={},Wg;function eD(){return Wg||(Wg=1,Object.defineProperty(wu,"__esModule",{value:!0})),wu}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.shopifyApi=void 0;const t=ve,r=nl,n=gh,a=sl,s=il,i=ol,l=hl,c=Nl,u=$l,d=Ol,h=Fl,f=ct,p=ns,g=ma,b=Ul,v=ql;t.__exportStar(K,e),t.__exportStar(J2(),e),t.__exportStar(X2(),e),t.__exportStar(xe,e),t.__exportStar(Y2(),e),t.__exportStar(Z2(),e),t.__exportStar(Q2(),e),t.__exportStar(Eh(),e),t.__exportStar(eD(),e),t.__exportStar(fi(),e),t.__exportStar(os(),e);function y(E){var{future:S,restResources:_}=E,R=t.__rest(E,["future","restResources"]);const x=Object.assign(Object.assign({},R),{future:S,restResources:_}),C=(0,s.validateConfig)(x),w={config:C,clients:(0,i.clientClasses)(C),auth:(0,l.shopifyAuth)(C),session:(0,c.shopifySession)(C),utils:(0,u.shopifyUtils)(C),webhooks:(0,d.shopifyWebhooks)(C),billing:(0,h.shopifyBilling)(C),flow:(0,b.shopifyFlow)(C),fulfillmentService:(0,v.fulfillmentService)(C),logger:(0,f.logger)(C),rest:{}};return _&&(w.rest=(0,r.loadRestResources)({resources:_,config:C,RestClient:(0,g.restClientClass)({config:C})})),w.logger.info(`version ${p.SHOPIFY_API_LIBRARY_VERSION}, environment ${(0,n.abstractRuntimeString)()}`).catch(P=>console.log(P)),(0,a.logDisabledFutureFlags)(C,w.logger),w}e.shopifyApi=y})(Ut);var cs={};Object.defineProperty(cs,"__esModule",{value:!0});let tD=function(e){return e.AppStore="app_store",e.SingleMerchant="single_merchant",e.ShopifyAdmin="shopify_admin",e}({}),rD=function(e){return e.MissingShop="MISSING_SHOP",e.InvalidShop="INVALID_SHOP",e}({});cs.AppDistribution=tD;cs.LoginErrorType=rD;var Hh={},Bh={};Object.defineProperty(Bh,"__esModule",{value:!0});function nD(e){const{parentHeaders:t,loaderHeaders:r,actionHeaders:n,errorHeaders:a}=e;return a&&Array.from(a.entries()).length>0?a:new Headers([...t?Array.from(t.entries()):[],...r?Array.from(r.entries()):[],...n?Array.from(n.entries()):[]])}Bh.headersBoundary=nD;var Wh={};Object.defineProperty(Wh,"__esModule",{value:!0});var aD=vn;function sD(e){if(e.constructor.name==="ErrorResponse"||e.constructor.name==="ErrorResponseImpl")return aD.jsx("div",{dangerouslySetInnerHTML:{__html:e.data||"Handling response"}});throw e}Wh.errorBoundary=sD;Object.defineProperty(Hh,"__esModule",{value:!0});var iD=Bh,oD=Wh;const lD={error:oD.errorBoundary,headers:iD.headersBoundary};Hh.boundary=lD;var Uh={},Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});const cD="2.7.0";Kl.SHOPIFY_REMIX_LIBRARY_VERSION=cD;var jh={};Object.defineProperty(jh,"__esModule",{value:!0});function uD({api:e,logger:t}){return async function({session:n}){return e.webhooks.register({session:n}).then(a=>(Object.entries(a).forEach(([s,i])=>{i.forEach(({success:l,...c})=>{l?t.debug("Registered webhook",{topic:s,shop:n.shop,operation:c.operation}):t.error("Failed to register webhook",{topic:s,shop:n.shop,result:JSON.stringify(c.result)})})}),a)).catch(a=>{var s,i;if((((s=a.body)===null||s===void 0||(i=s.errors)===null||i===void 0?void 0:i.graphQLErrors)||[]).find(({extensions:{code:u}})=>u==="THROTTLED"))t.error("Failed to register webhooks",{shop:n.shop,error:JSON.stringify(a)});else throw a})}}jh.registerWebhooksFactory=uD;var qh={},mi={},Hn={};Object.defineProperty(Hn,"__esModule",{value:!0});const dD="https://cdn.shopify.com/shopifycloud/app-bridge.js",hD="X-Shopify-API-Request-Failure-Reauthorize-Url",fD={"X-Shopify-Retry-Invalid-Session-Request":"1"};Hn.APP_BRIDGE_URL=dD;Hn.REAUTH_URL_HEADER=hD;Hn.RETRY_INVALID_SESSION_HEADER=fD;Object.defineProperty(mi,"__esModule",{value:!0});var pD=Hn;function mD(e,t,r=[]){const{logger:n,config:a}=e;return function(i){const l=t.headers.get("Origin");if(l&&l!==a.appUrl){n.debug("Request comes from a different origin, adding CORS headers");const c=new Set(["Authorization","Content-Type",...r]);i.headers.set("Access-Control-Allow-Origin","*"),i.headers.set("Access-Control-Allow-Headers",[...c].join(", ")),i.headers.set("Access-Control-Expose-Headers",pD.REAUTH_URL_HEADER)}return i}}mi.ensureCORSHeadersFactory=mD;var zl={};Object.defineProperty(zl,"__esModule",{value:!0});async function gD({api:e,logger:t},r,{checkAudience:n=!0}={}){t.debug("Validating session token");try{const a=await e.session.decodeSessionToken(r,{checkAudience:n});return t.debug("Session token is valid",{payload:JSON.stringify(a)}),a}catch(a){throw t.debug(`Failed to validate session token: ${a.message}`),new Response(void 0,{status:401,statusText:"Unauthorized"})}}zl.validateSessionToken=gD;var Aa={};Object.defineProperty(Aa,"__esModule",{value:!0});const bD="id_token";function yD(e){var t;return(t=e.headers.get("authorization"))===null||t===void 0?void 0:t.replace("Bearer ","")}function vD(e){return new URL(e.url).searchParams.get(bD)}Aa.getSessionTokenFromUrlParam=vD;Aa.getSessionTokenHeader=yD;var Gl={};function ED(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,i,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return l}}function SD(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kS(e){var t=SD(e,"string");return typeof t=="symbol"?t:String(t)}function _D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ug(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kS(n.key),n)}}function CD(e,t,r){return t&&Ug(e.prototype,t),r&&Ug(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jg(e,t,r){return t=kS(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xS(e,t){return wD(e)||ED(e,t)||PD(e,t)||AD()}function wD(e){if(Array.isArray(e))return e}function PD(e,t){if(e){if(typeof e=="string")return qg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qg(e,t)}}function qg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $r(e,t){var r=NS(e,t,"get");return TD(e,r)}function IS(e,t,r){var n=NS(e,t,"set");return RD(e,n,r),r}function NS(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function TD(e,t){return t.get?t.get.call(e):t.value}function RD(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}function As(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function $S(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vg(e,t,r){$S(e,t),t.set(e,r)}function Kg(e,t){$S(e,t),t.add(e)}var OS=[" daum[ /]"," deusu/"," yadirectfetcher","(?:^| )site","(?:^|[^g])news","@[a-z]","\\(at\\)[a-z]","\\(github\\.com/","\\[at\\][a-z]","^12345","^<","^[\\w \\.\\-\\(\\)]+(/v?\\d+(\\.\\d+)?(\\.\\d{1,10})?)?$","^[^ ]{50,}$","^active","^ad muncher","^amaya","^anglesharp/","^anonymous","^avsdevicesdk/","^axios/","^bidtellect/","^biglotron","^btwebclient/","^castro","^clamav[ /]","^client/","^cobweb/","^coccoc","^custom","^ddg[_-]android","^discourse","^dispatch/\\d","^downcast/","^duckduckgo","^facebook","^fdm[ /]\\d","^getright/","^gozilla/","^hatena","^hobbit","^hotzonu","^hwcdn/","^jeode/","^jetty/","^jigsaw","^linkdex","^lwp[-: ]","^metauri","^microsoft bits","^movabletype","^mozilla/\\d\\.\\d \\(compatible;?\\)$","^mozilla/\\d\\.\\d \\w*$","^navermailapp","^netsurf","^offline explorer","^php","^postman","^postrank","^python","^read","^reed","^restsharp/","^snapchat","^space bison","^svn","^swcd ","^taringa","^test certificate info","^thumbor/","^tumblr/","^user-agent:mozilla","^valid","^venus/fedoraplanet","^w3c","^webbandit/","^webcopier","^wget","^whatsapp","^xenu link sleuth","^yahoo","^yandex","^zdm/\\d","^zoom marketplace/","^{{.*}}$","adbeat\\.com","appinsights","archive","ask jeeves/teoma","bit\\.ly/","bluecoat drtr","bot","browsex","burpcollaborator","capture","catch","check","chrome-lighthouse","chromeframe","cloud","crawl","cryptoapi","dareboost","datanyze","dataprovider","dejaclick","dmbrowser","download","evc-batch/","feed","firephp","freesafeip","gomezagent","google","headlesschrome/","http","httrack","hubspot marketing grader","hydra","ibisbrowser","images","inspect","iplabel","ips-agent","java","library","mail\\.ru/","manager","monitor","morningscore/","neustar wpm","nutch","offbyone","optimize","pageburst","pagespeed","perl","phantom","pingdom","powermarks","preview","proxy","ptst[ /]\\d","reader","rexx;","rigor","rss","scan","scrape","search","serp ?reputation ?management","server","sogou","sparkler/","speedcurve","spider","splash","statuscake","stumbleupon\\.com","supercleaner","synapse","synthetic","torrent","tracemyfile","transcoder","trendsmapresolver","twingly recon","url","virtuoso","wappalyzer","webglance","webkit2png","websitemetadataretriever","whatcms/","wordpress","zgrab"];function kD(e){try{new RegExp("(?<! cu)bot").test("dangerbot")}catch{return e}return[["bot","(?<! cu)bot"],["google","(?<! (?:channel/|google/))google(?!(app|/google| pixel))"],["http","(?<!(?:lib))http"],["java","java(?!;)"],["search","(?<! ya(?:yandex)?)search"]].forEach(function(t){var r=xS(t,2),n=r[0],a=r[1],s=e.lastIndexOf(n);~s&&e.splice(s,1,a)}),e}kD(OS);var LS="i",yn=new WeakMap,Ba=new WeakMap,Wi=new WeakSet,Pu=new WeakSet,xD=function(){function e(t){var r=this;_D(this,e),Kg(this,Pu),Kg(this,Wi),Vg(this,yn,{writable:!0,value:void 0}),Vg(this,Ba,{writable:!0,value:void 0}),IS(this,yn,t||OS.slice()),As(this,Wi,Au).call(this);var n=function(s){return r.test(s)};return Object.defineProperties(n,Object.entries(Object.getOwnPropertyDescriptors(e.prototype)).reduce(function(a,s){var i=xS(s,2),l=i[0],c=i[1];return typeof c.value=="function"&&Object.assign(a,jg({},l,{value:r[l].bind(r)})),typeof c.get=="function"&&Object.assign(a,jg({},l,{get:function(){return r[l]}})),a},{}))}return CD(e,[{key:"pattern",get:function(){return new RegExp($r(this,Ba))}},{key:"test",value:function(r){return!!r&&$r(this,Ba).test(r)}},{key:"isbot",value:function(r){return!!r&&$r(this,Ba).test(r)}},{key:"find",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=r.match($r(this,Ba));return n&&n[0]}},{key:"matches",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return $r(this,yn).filter(function(n){return new RegExp(n,LS).test(r)})}},{key:"clear",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";this.exclude(this.matches(r))}},{key:"extend",value:function(){var r=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];[].push.apply($r(this,yn),n.filter(function(a){return As(r,Pu,zg).call(r,a)===-1}).map(function(a){return a.toLowerCase()})),As(this,Wi,Au).call(this)}},{key:"exclude",value:function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=r.length;n--;){var a=As(this,Pu,zg).call(this,r[n]);a>-1&&$r(this,yn).splice(a,1)}As(this,Wi,Au).call(this)}},{key:"spawn",value:function(r){return new e(r||$r(this,yn))}}]),e}();function Au(){IS(this,Ba,new RegExp($r(this,yn).join("|"),LS))}function zg(e){return $r(this,yn).indexOf(e.toLowerCase())}var ID=new xD,ND=ID;Object.defineProperty(Gl,"__esModule",{value:!0});var $D=ND;function OD(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var LD=OD($D);function MD({logger:e},t){if(LD.default(t.headers.get("User-Agent")))throw e.debug("Request is from a bot, skipping auth"),new Response(void 0,{status:410,statusText:"Gone"})}Gl.respondToBotRequest=MD;var Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});var FD=mi;function DD(e,t,r){if(t.method==="OPTIONS")throw FD.ensureCORSHeadersFactory(e,t,r)(new Response(null,{status:204,headers:{"Access-Control-Max-Age":"7200"}}))}Jl.respondToOptionsRequest=DD;const Ta=Nn(pA);var Vh={},Ra={},Xl={};Object.defineProperty(Xl,"__esModule",{value:!0});async function HD(e,t,r,n){const{api:a,config:s}=e;throw await a.auth.begin({shop:n,callbackPath:s.auth.callbackPath,isOnline:r,rawRequest:t})}Xl.beginAuth=HD;var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});var BD=Ta;function WD(e,t,r){const{api:n,config:a}=e,i=new URL(t.url).searchParams,l=n.utils.sanitizeHost(i.get("host"));i.set("shop",r);let c=`${a.auth.path}?shop=${r}`;throw l&&(i.set("host",l),c=`${c}&host=${l}`),i.set("exitIframe",c),BD.redirect(`${a.auth.exitIframePath}?${i.toString()}`)}Yl.redirectWithExitIframe=WD;var us={};Object.defineProperty(us,"__esModule",{value:!0});var UD=Hn;function jD(e){throw new Response(void 0,{status:401,statusText:"Unauthorized",headers:MS(e)})}function MS(e){return new Headers({[UD.REAUTH_URL_HEADER]:e})}us.getAppBridgeHeaders=MS;us.redirectWithAppBridgeHeaders=jD;Object.defineProperty(Ra,"__esModule",{value:!0});var qD=Xl,VD=Yl,KD=us;async function zD(e,t,r,n=!1){const{config:a}=e,i=new URL(t.url).searchParams.get("embedded")==="1";if(t.headers.get("authorization")){const c=new URL(a.auth.path,a.appUrl);c.searchParams.set("shop",r),KD.redirectWithAppBridgeHeaders(c.toString())}else if(i)VD.redirectWithExitIframe(e,t,r);else throw await qD.beginAuth(e,t,n,r)}Ra.redirectToAuthPage=zD;Object.defineProperty(Vh,"__esModule",{value:!0});var GD=Ut,JD=Ra;function XD(e,t,r){return async function(a){const{api:s,logger:i,config:l}=e;i.debug("Cancelling billing",{shop:r.shop,...a});try{return await s.billing.cancel({session:r,subscriptionId:a.subscriptionId,isTest:a.isTest,prorate:a.prorate})}catch(c){throw c instanceof GD.HttpResponseError&&c.response.code===401?(i.debug("API token was invalid, redirecting to OAuth",{shop:r.shop}),await l.sessionStorage.deleteSession(r.id),await JD.redirectToAuthPage(e,t,r.shop)):c}}}Vh.cancelBillingFactory=XD;var Kh={};Object.defineProperty(Kh,"__esModule",{value:!0});var YD=Ut,ZD=Ra;function QD(e,t,r){const{api:n,logger:a,config:s}=e;return async function(l){const c={shop:r.shop,plans:l.plans,isTest:l.isTest};a.debug("Checking billing for the shop",c);let u;try{u=await n.billing.check({session:r,plans:l.plans,isTest:l.isTest,returnObject:!0})}catch(d){throw d instanceof YD.HttpResponseError&&d.response.code===401?(a.debug("API token was invalid, redirecting to OAuth",c),await s.sessionStorage.deleteSession(r.id),await ZD.redirectToAuthPage(e,t,r.shop)):d}if(!u.hasActivePayment)throw a.debug("Billing check failed",c),await l.onFailure(new Error("Billing check failed"));return a.debug("Billing check succeeded",c),u}}Kh.requireBillingFactory=QD;var zh={};Object.defineProperty(zh,"__esModule",{value:!0});var eH=Ut,Gg=Ta,tH=Ra,rH=us;function nH(e,t,r){return async function({plan:a,isTest:s,returnUrl:i,...l}){const{api:c,logger:u,config:d}=e;u.info("Requesting billing",{shop:r.shop,plan:a,isTest:s,returnUrl:i});let h;try{h=await c.billing.request({plan:a,session:r,isTest:s,returnUrl:i,returnObject:!0,...l})}catch(f){throw f instanceof eH.HttpResponseError&&f.response.code===401?(u.debug("API token was invalid, redirecting to OAuth",{shop:r.shop}),await d.sessionStorage.deleteSession(r.id),await tH.redirectToAuthPage(e,t,r.shop)):f}throw aH(e,t,h.confirmationUrl,r.shop)}}function aH(e,t,r,n){const{config:a,logger:s}=e;s.debug("Redirecting out of app",{url:r});const i=new URL(t.url),l=i.searchParams.get("embedded")==="1";if(t.headers.get("authorization"))throw new Response(void 0,{status:401,statusText:"Unauthorized",headers:rH.getAppBridgeHeaders(r)});if(l){const u=new URLSearchParams({shop:n,host:i.searchParams.get("host"),exitIframe:r});throw Gg.redirect(`${a.auth.exitIframePath}?${u.toString()}`)}else throw Gg.redirect(r)}zh.requestBillingFactory=nH;var Gh={};Object.defineProperty(Gh,"__esModule",{value:!0});var sH=Ut,iH=Ra;function oH(e,t,r){return async function(a){const{api:s,logger:i,config:l}=e;i.debug("Checking billing plans",{shop:r.shop,...a});try{return await s.billing.check({session:r,plans:a.plans,isTest:a.isTest,returnObject:!0})}catch(c){throw c instanceof sH.HttpResponseError&&c.response.code===401?(i.debug("API token was invalid, redirecting to OAuth",{shop:r.shop}),await l.sessionStorage.deleteSession(r.id),await iH.redirectToAuthPage(e,t,r.shop)):c}}}Gh.checkBillingFactory=oH;var Zl={},Bn={},Jh={};Object.defineProperty(Jh,"__esModule",{value:!0});function lH({params:e,handleClientError:t,session:r}){return async function(a,s){const i=new e.api.clients.Graphql({session:r,apiVersion:s==null?void 0:s.apiVersion});try{const l=await i.request(a,{variables:s==null?void 0:s.variables,retries:s!=null&&s.tries?s.tries-1:0,headers:s==null?void 0:s.headers});return new Response(JSON.stringify(l))}catch(l){throw t?await t({error:l,params:e,session:r}):l}}}Jh.graphqlClientFactory=lH;var Xh={};Object.defineProperty(Xh,"__esModule",{value:!0});function cH({params:e,handleClientError:t,session:r}){const{api:n}=e,a=new uH({params:e,handleClientError:t,session:r});if(n.rest){a.resources={};const s=dH({params:e,handleClientError:t,session:r});Object.entries(n.rest).forEach(([i,l])=>{class c extends l{}c.Client=s,Reflect.defineProperty(c,"name",{value:i}),Reflect.set(a.resources,i,c)})}return a}class uH{constructor({params:t,session:r,handleClientError:n}){this.session=void 0,this.params=void 0,this.handleClientError=void 0,this.params=t,this.handleClientError=n,this.session=r}async get(t){return this.makeRequest({method:"GET",...t})}async post(t){return this.makeRequest({method:"POST",...t})}async put(t){return this.makeRequest({method:"PUT",...t})}async delete(t){return this.makeRequest({method:"DELETE",...t})}async makeRequest(t){const r=new this.params.api.clients.Rest({session:this.session}),n=Reflect.get(r,"request");try{const a=await n.call(r,t);return new Response(JSON.stringify(a.body),{headers:a.headers})}catch(a){throw this.handleClientError?await this.handleClientError({error:a,session:this.session,params:this.params}):new Error(a)}}}function dH({params:e,handleClientError:t,session:r}){const{api:n}=e,a=n.clients.Rest;return class extends a{async request(i){const l=new n.clients.Rest({session:r}),c=Reflect.get(l,"request");try{return await c.call(l,i)}catch(u){throw t?await t({error:u,params:e,session:r}):new Error(u)}}}}Xh.restClientFactory=cH;Object.defineProperty(Bn,"__esModule",{value:!0});var hH=Jh,fH=Xh;function pH({params:e,handleClientError:t,session:r}){return{rest:fH.restClientFactory({params:e,session:r,handleClientError:t}),graphql:hH.graphqlClientFactory({params:e,session:r,handleClientError:t})}}Bn.adminClientFactory=pH;Object.defineProperty(Zl,"__esModule",{value:!0});var mH=Bn;function gH(e,t,r){return mH.adminClientFactory({session:e,params:t,handleClientError:r})}Zl.createAdminApiContext=gH;var Yh={},Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});var bH=Ta;async function yH(e,t,r){const{api:n}=t,a=new URL(e.url),s=n.utils.sanitizeHost(a.searchParams.get("host")),i=n.utils.sanitizeShop(a.searchParams.get("shop")),l=n.config.isEmbeddedApp?await n.auth.getEmbeddedAppUrl({rawRequest:e}):`/?shop=${i}&host=${encodeURIComponent(s)}`;throw bH.redirect(l,{headers:r})}Ql.redirectToShopifyOrAppRoot=yH;Object.defineProperty(Yh,"__esModule",{value:!0});var vH=Ql;const EH=async(e,t)=>{const{api:r,logger:n,config:a}=e,s=new URL(t.url),i=s.searchParams.get("shop");r.config.isEmbeddedApp&&s.searchParams.get("embedded")!=="1"&&(n.debug("App is not embedded, redirecting to Shopify",{shop:i}),await vH.redirectToShopifyOrAppRoot(t,{api:r,logger:n,config:a}))};Yh.ensureAppIsEmbeddedIfRequired=EH;var Zh={},ec={};Object.defineProperty(ec,"__esModule",{value:!0});var SH=Ta;const _H=(e,t)=>{const{config:r}=e,n=t.searchParams;throw n.delete("id_token"),n.set("shopify-reload",`${r.appUrl}${t.pathname}?${n.toString()}`),SH.redirect(`${r.auth.patchSessionTokenPath}?${n.toString()}`)};ec.redirectToBouncePage=_H;Object.defineProperty(Zh,"__esModule",{value:!0});var CH=ec;const wH="id_token",PH=async(e,t)=>{const{api:r,logger:n}=e,a=new URL(t.url),s=a.searchParams.get("shop"),i=a.searchParams.get(wH),l=a.searchParams.get("embedded")==="1";r.config.isEmbeddedApp&&l&&!i&&(n.debug("Missing session token in search params, going to bounce page",{shop:s}),CH.redirectToBouncePage(e,a))};Zh.ensureSessionTokenSearchParamIfRequired=PH;var Qh={},tc={},rc={};Object.defineProperty(rc,"__esModule",{value:!0});var AH=Hn;let FS;function TH(e){FS=e}function RH(){return FS||AH.APP_BRIDGE_URL}rc.appBridgeUrl=RH;rc.setAppBridgeUrlOverride=TH;var gi={};Object.defineProperty(gi,"__esModule",{value:!0});function kH(e){const{api:t,config:r}=e;return function(n,a){const{searchParams:s}=new URL(n.url),i=t.utils.sanitizeShop(s.get("shop"));DS(a,r.isEmbeddedApp,i)}}function DS(e,t,r){r&&e.set("Link",'<https://cdn.shopify.com/shopifycloud/app-bridge.js>; rel="preload"; as="script";'),t?r&&e.set("Content-Security-Policy",`frame-ancestors https://${r} https://admin.shopify.com https://*.spin.dev;`):e.set("Content-Security-Policy","frame-ancestors 'none';")}gi.addDocumentResponseHeaders=DS;gi.addDocumentResponseHeadersFactory=kH;var ef={};Object.defineProperty(ef,"__esModule",{value:!0});var xH=Ut;const IH=/\/\/\//,NH=/[/\\][/\\]/,$H=/\s/,OH=["https:","http:"];function LH(e,t,r=!0){if(typeof t!="string"||IH.test(t)||$H.test(t))return!1;let n;try{n=new URL(t,e)}catch{return!1}return!(NH.test(n.pathname)||!OH.includes(n.protocol)||r&&n.protocol!=="https:")}function MH(e,t,r={}){if(LH(e,t,r.requireSSL))return new URL(t,e);if(r.throwOnInvalid===!1)return;throw new xH.ShopifyError("Invalid URL. Refusing to redirect")}ef.sanitizeRedirectUrl=MH;Object.defineProperty(tc,"__esModule",{value:!0});var FH=rc,DH=gi,HH=ef;function BH({config:e},t,r){let n="";if(r){var a;const i=HH.sanitizeRedirectUrl(e.appUrl,r.url),l=(a=r.target)!==null&&a!==void 0?a:"_top";n=`<script>window.open(${JSON.stringify(i.toString())}, ${JSON.stringify(l)})<\/script>`}const s=new Headers({"content-type":"text/html;charset=utf-8"});throw DH.addDocumentResponseHeaders(s,e.isEmbeddedApp,new URL(t.url).searchParams.get("shop")),new Response(`
      <script data-api-key="${e.apiKey}" src="${FH.appBridgeUrl()}"><\/script>
      ${n}
    `,{headers:s})}tc.renderAppBridge=BH;Object.defineProperty(Qh,"__esModule",{value:!0});var Jg=Ta,HS=Aa,Xg=tc,WH=us;function UH(e,t){const{config:r}=e;return function(a,s){const{searchParams:i}=new URL(t.url),l=new URL(a,r.appUrl);(l.origin===r.appUrl||a.startsWith("/"))&&i.forEach((d,h)=>{l.searchParams.has(h)||l.searchParams.set(h,d)});const u=typeof s!="number"&&(s==null?void 0:s.target)||"_self";if(u==="_self"){if(BS(t))throw Xg.renderAppBridge(e,t,{url:l.toString(),target:u});return Jg.redirect(l.toString(),s)}else{if(jH(t))throw WH.redirectWithAppBridgeHeaders(l.toString());if(WS(t))throw Xg.renderAppBridge(e,t,{url:l.toString(),target:u})}return Jg.redirect(a,s)}}function BS(e){return!!HS.getSessionTokenHeader(e)&&e.headers.has("X-Shopify-Bounce")}function jH(e){const t=e.method==="GET";return!!HS.getSessionTokenHeader(e)&&!BS(e)&&(!WS(e)||!t)}function WS(e){const{searchParams:t}=new URL(e.url);return t.get("embedded")==="1"}Qh.redirectFactory=UH;var nc={};Object.defineProperty(nc,"__esModule",{value:!0});var Yg=Ta;function qH(e,t){const{api:r,config:n,logger:a}=e;if(n.isEmbeddedApp){const s=new URL(t.url),i=r.utils.sanitizeShop(s.searchParams.get("shop"));if(!i)throw a.debug("Missing or invalid shop, redirecting to login path",{shop:i}),Yg.redirect(n.auth.loginPath);if(!r.utils.sanitizeHost(s.searchParams.get("host")))throw a.debug("Invalid host, redirecting to login path",{host:s.searchParams.get("host")}),Yg.redirect(n.auth.loginPath)}}nc.validateShopAndHostParams=qH;Object.defineProperty(qh,"__esModule",{value:!0});var Zg=mi,VH=zl,Ed=Aa,KH=Gl,zH=Jl,GH=Vh,JH=Kh,XH=zh,YH=Gh,ZH=Zl,QH=Yh,e5=Zh,t5=Qh,Qg=tc,r5=nc;function n5({strategy:e,...t}){const{api:r,logger:n,config:a}=t;async function s(c){if(new URL(c.url).pathname===a.auth.patchSessionTokenPath)throw n.debug("Rendering bounce page"),Qg.renderAppBridge({config:a,logger:n,api:r},c)}async function i(c){const u=new URL(c.url);if(u.pathname===a.auth.exitIframePath){const d=u.searchParams.get("exitIframe");throw n.debug("Rendering exit iframe page",{destination:d}),Qg.renderAppBridge({config:a,logger:n,api:r},c,{url:d})}}function l(c,u,d,h){const f={admin:ZH.createAdminApiContext(u,t,d.handleClientError(c)),billing:{require:JH.requireBillingFactory(t,c,u),check:YH.checkBillingFactory(t,c,u),request:XH.requestBillingFactory(t,c,u),cancel:GH.cancelBillingFactory(t,c,u)},session:u,cors:Zg.ensureCORSHeadersFactory(t,c)};return a.isEmbeddedApp?{...f,sessionToken:h,redirect:t5.redirectFactory(t,c)}:f}return async function(u){try{KH.respondToBotRequest(t,u),zH.respondToOptionsRequest(t,u),await s(u),await i(u),await e.respondToOAuthRequests(u),Ed.getSessionTokenHeader(u)||(r5.validateShopAndHostParams(t,u),await QH.ensureAppIsEmbeddedIfRequired(t,u),await e5.ensureSessionTokenSearchParamIfRequired(t,u)),n.info("Authenticating admin request");const{payload:d,shop:h,sessionId:f,sessionToken:p}=await a5(t,u);n.debug("Loading session from storage",{sessionId:f});const g=f?await a.sessionStorage.loadSession(f):void 0,b=await e.authenticate(u,{session:g,sessionToken:p,shop:h});return n.debug("Request is valid, loaded session from session token",{shop:b.shop,isOnline:b.isOnline}),l(u,b,e,d)}catch(d){throw d instanceof Response&&Zg.ensureCORSHeadersFactory(t,u)(d),d}}}async function a5(e,t){const{api:r,config:n,logger:a}=e,s=Ed.getSessionTokenHeader(t),i=Ed.getSessionTokenFromUrlParam(t),l=s||i;if(a.debug("Attempting to authenticate session token",{sessionToken:JSON.stringify({header:s,search:i})}),n.isEmbeddedApp){const h=await VH.validateSessionToken({config:n,logger:a,api:r},l),p=new URL(h.dest).hostname;a.debug("Session token is valid",{shop:p,payload:h});const g=n.useOnlineTokens?r.session.getJwtSessionId(p,h.sub):r.session.getOfflineId(p);return{shop:p,payload:h,sessionId:g,sessionToken:l}}const u=new URL(t.url).searchParams.get("shop"),d=await r.session.getCurrentId({isOnline:n.useOnlineTokens,rawRequest:t});return{shop:u,sessionId:d,payload:void 0,sessionToken:l}}qh.authStrategyFactory=n5;var tf={},bi={};Object.defineProperty(bi,"__esModule",{value:!0});var s5=Ut;function i5({request:e,onError:t}){return async function({error:n,params:a,session:s}){throw n instanceof s5.HttpResponseError?(a.logger.debug(`Got an HTTP response error from the API: ${n.message}`,{code:n.response.code,statusText:n.response.statusText,body:JSON.stringify(n.response.body)}),t&&await t({request:e,session:s,error:n}),new Response(JSON.stringify(n.response.body),{status:n.response.code,headers:{"Content-Type":n.response.headers["Content-Type"]}})):(a.logger.debug(`Got a response error from the API: ${n.message}`),n)}}bi.handleClientErrorFactory=i5;Object.defineProperty(tf,"__esModule",{value:!0});var o5=Ut,l5=Bn,c5=bi;function u5(e){const{api:t,config:r,logger:n}=e;return async function(s){if(s.method!=="POST")throw n.debug("Received a non-POST request for a webhook. Only POST requests are allowed.",{url:s.url,method:s.method}),new Response(void 0,{status:405,statusText:"Method not allowed"});const i=await s.text(),l=await t.webhooks.validate({rawBody:i,rawRequest:s});if(!l.valid)throw l.reason===o5.WebhookValidationErrorReason.InvalidHmac?(n.debug("Webhook HMAC validation failed",l),new Response(void 0,{status:401,statusText:"Unauthorized"})):(n.debug("Webhook validation failed",l),new Response(void 0,{status:400,statusText:"Bad Request"}));const c=t.session.getOfflineId(l.domain),u=await r.sessionStorage.loadSession(c),d={apiVersion:l.apiVersion,shop:l.domain,topic:l.topic,webhookId:l.webhookId,payload:JSON.parse(i),subTopic:l.subTopic||void 0,session:void 0,admin:void 0};if(!u)return d;let h;if(r.future.v3_webhookAdminContext)h=l5.adminClientFactory({params:e,session:u,handleClientError:c5.handleClientErrorFactory({request:s})});else{const f=new t.clients.Rest({session:u,apiVersion:l.apiVersion}),p=new t.clients.Graphql({session:u,apiVersion:l.apiVersion});Object.entries(t.rest).forEach(([g,b])=>{Reflect.set(f,g,b)}),h={rest:f,graphql:p}}return{...d,session:u,admin:h}}}tf.authenticateWebhookFactory=u5;var rf={},Sd={exports:{}};const d5="2.0.0",US=256,h5=Number.MAX_SAFE_INTEGER||9007199254740991,f5=16,p5=US-6,m5=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var ac={MAX_LENGTH:US,MAX_SAFE_COMPONENT_LENGTH:f5,MAX_SAFE_BUILD_LENGTH:p5,MAX_SAFE_INTEGER:h5,RELEASE_TYPES:m5,SEMVER_SPEC_VERSION:d5,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Tu={};const g5=typeof process=="object"&&Tu&&Tu.NODE_DEBUG&&/\bsemver\b/i.test(Tu.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var sc=g5;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=ac,s=sc;t=e.exports={};const i=t.re=[],l=t.safeRe=[],c=t.src=[],u=t.t={};let d=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",a],[h,n]],p=b=>{for(const[v,y]of f)b=b.split(`${v}*`).join(`${v}{0,${y}}`).split(`${v}+`).join(`${v}{1,${y}}`);return b},g=(b,v,y)=>{const E=p(v),S=d++;s(b,S,v),u[b]=S,c[S]=v,i[S]=new RegExp(v,y?"g":void 0),l[S]=new RegExp(E,y?"g":void 0)};g("NUMERICIDENTIFIER","0|[1-9]\\d*"),g("NUMERICIDENTIFIERLOOSE","\\d+"),g("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),g("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),g("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),g("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),g("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),g("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),g("BUILDIDENTIFIER",`${h}+`),g("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),g("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),g("FULL",`^${c[u.FULLPLAIN]}$`),g("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),g("LOOSE",`^${c[u.LOOSEPLAIN]}$`),g("GTLT","((?:<|>)?=?)"),g("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),g("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),g("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),g("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),g("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),g("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),g("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),g("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),g("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),g("COERCERTL",c[u.COERCE],!0),g("COERCERTLFULL",c[u.COERCEFULL],!0),g("LONETILDE","(?:~>?)"),g("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",g("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),g("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),g("LONECARET","(?:\\^)"),g("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",g("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),g("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),g("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),g("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),g("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",g("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),g("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),g("STAR","(<|>)?=?\\s*\\*"),g("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),g("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Sd,Sd.exports);var yi=Sd.exports;const b5=Object.freeze({loose:!0}),y5=Object.freeze({}),v5=e=>e?typeof e!="object"?b5:e:y5;var nf=v5;const eb=/^[0-9]+$/,jS=(e,t)=>{const r=eb.test(e),n=eb.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},E5=(e,t)=>jS(t,e);var qS={compareIdentifiers:jS,rcompareIdentifiers:E5};const Ui=sc,{MAX_LENGTH:tb,MAX_SAFE_INTEGER:ji}=ac,{safeRe:rb,t:nb}=yi,S5=nf,{compareIdentifiers:Fa}=qS;let _5=class xr{constructor(t,r){if(r=S5(r),t instanceof xr){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>tb)throw new TypeError(`version is longer than ${tb} characters`);Ui("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?rb[nb.LOOSE]:rb[nb.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ji||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ji||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ji||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(a=>{if(/^[0-9]+$/.test(a)){const s=+a;if(s>=0&&s<ji)return s}return a}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ui("SemVer.compare",this.version,this.options,t),!(t instanceof xr)){if(typeof t=="string"&&t===this.version)return 0;t=new xr(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof xr||(t=new xr(t,this.options)),Fa(this.major,t.major)||Fa(this.minor,t.minor)||Fa(this.patch,t.patch)}comparePre(t){if(t instanceof xr||(t=new xr(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],a=t.prerelease[r];if(Ui("prerelease compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return Fa(n,a)}while(++r)}compareBuild(t){t instanceof xr||(t=new xr(t,this.options));let r=0;do{const n=this.build[r],a=t.build[r];if(Ui("prerelease compare",r,n,a),n===void 0&&a===void 0)return 0;if(a===void 0)return 1;if(n===void 0)return-1;if(n===a)continue;return Fa(n,a)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const a=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[a];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(r){let s=[r,a];n===!1&&(s=[r]),Fa(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var jt=_5;const ab=jt,C5=(e,t,r=!1)=>{if(e instanceof ab)return e;try{return new ab(e,t)}catch(n){if(!r)return null;throw n}};var ds=C5;const w5=ds,P5=(e,t)=>{const r=w5(e,t);return r?r.version:null};var A5=P5;const T5=ds,R5=(e,t)=>{const r=T5(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var k5=R5;const sb=jt,x5=(e,t,r,n,a)=>{typeof r=="string"&&(a=n,n=r,r=void 0);try{return new sb(e instanceof sb?e.version:e,r).inc(t,n,a).version}catch{return null}};var I5=x5;const ib=ds,N5=(e,t)=>{const r=ib(e,null,!0),n=ib(t,null,!0),a=r.compare(n);if(a===0)return null;const s=a>0,i=s?r:n,l=s?n:r,c=!!i.prerelease.length;if(!!l.prerelease.length&&!c)return!l.patch&&!l.minor?"major":i.patch?"patch":i.minor?"minor":"major";const d=c?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"};var $5=N5;const O5=jt,L5=(e,t)=>new O5(e,t).major;var M5=L5;const F5=jt,D5=(e,t)=>new F5(e,t).minor;var H5=D5;const B5=jt,W5=(e,t)=>new B5(e,t).patch;var U5=W5;const j5=ds,q5=(e,t)=>{const r=j5(e,t);return r&&r.prerelease.length?r.prerelease:null};var V5=q5;const ob=jt,K5=(e,t,r)=>new ob(e,r).compare(new ob(t,r));var Cr=K5;const z5=Cr,G5=(e,t,r)=>z5(t,e,r);var J5=G5;const X5=Cr,Y5=(e,t)=>X5(e,t,!0);var Z5=Y5;const lb=jt,Q5=(e,t,r)=>{const n=new lb(e,r),a=new lb(t,r);return n.compare(a)||n.compareBuild(a)};var af=Q5;const eB=af,tB=(e,t)=>e.sort((r,n)=>eB(r,n,t));var rB=tB;const nB=af,aB=(e,t)=>e.sort((r,n)=>nB(n,r,t));var sB=aB;const iB=Cr,oB=(e,t,r)=>iB(e,t,r)>0;var ic=oB;const lB=Cr,cB=(e,t,r)=>lB(e,t,r)<0;var sf=cB;const uB=Cr,dB=(e,t,r)=>uB(e,t,r)===0;var VS=dB;const hB=Cr,fB=(e,t,r)=>hB(e,t,r)!==0;var KS=fB;const pB=Cr,mB=(e,t,r)=>pB(e,t,r)>=0;var of=mB;const gB=Cr,bB=(e,t,r)=>gB(e,t,r)<=0;var lf=bB;const yB=VS,vB=KS,EB=ic,SB=of,_B=sf,CB=lf,wB=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return yB(e,r,n);case"!=":return vB(e,r,n);case">":return EB(e,r,n);case">=":return SB(e,r,n);case"<":return _B(e,r,n);case"<=":return CB(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var zS=wB;const PB=jt,AB=ds,{safeRe:qi,t:Vi}=yi,TB=(e,t)=>{if(e instanceof PB)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?qi[Vi.COERCEFULL]:qi[Vi.COERCE]);else{const c=t.includePrerelease?qi[Vi.COERCERTLFULL]:qi[Vi.COERCERTL];let u;for(;(u=c.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;const n=r[2],a=r[3]||"0",s=r[4]||"0",i=t.includePrerelease&&r[5]?`-${r[5]}`:"",l=t.includePrerelease&&r[6]?`+${r[6]}`:"";return AB(`${n}.${a}.${s}${i}${l}`,t)};var RB=TB,Ru,cb;function kB(){return cb||(cb=1,Ru=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),Ru}var xB=Pe;Pe.Node=Sa;Pe.create=Pe;function Pe(e){var t=this;if(t instanceof Pe||(t=new Pe),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(a){t.push(a)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}Pe.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Pe.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Pe.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Pe.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)NB(this,arguments[e]);return this.length};Pe.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)$B(this,arguments[e]);return this.length};Pe.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Pe.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Pe.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;r!==null;n++)e.call(t,r.value,n,this),r=r.next};Pe.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;r!==null;n--)e.call(t,r.value,n,this),r=r.prev};Pe.prototype.get=function(e){for(var t=0,r=this.head;r!==null&&t<e;t++)r=r.next;if(t===e&&r!==null)return r.value};Pe.prototype.getReverse=function(e){for(var t=0,r=this.tail;r!==null&&t<e;t++)r=r.prev;if(t===e&&r!==null)return r.value};Pe.prototype.map=function(e,t){t=t||this;for(var r=new Pe,n=this.head;n!==null;)r.push(e.call(t,n.value,this)),n=n.next;return r};Pe.prototype.mapReverse=function(e,t){t=t||this;for(var r=new Pe,n=this.tail;n!==null;)r.push(e.call(t,n.value,this)),n=n.prev;return r};Pe.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=0;n!==null;a++)r=e(r,n.value,a),n=n.next;return r};Pe.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var a=this.length-1;n!==null;a--)r=e(r,n.value,a),n=n.prev;return r};Pe.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;r!==null;t++)e[t]=r.value,r=r.next;return e};Pe.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;r!==null;t++)e[t]=r.value,r=r.prev;return e};Pe.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Pe;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,a=this.head;a!==null&&n<e;n++)a=a.next;for(;a!==null&&n<t;n++,a=a.next)r.push(a.value);return r};Pe.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var r=new Pe;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,a=this.tail;a!==null&&n>t;n--)a=a.prev;for(;a!==null&&n>e;n--,a=a.prev)r.push(a.value);return r};Pe.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,a=this.head;a!==null&&n<e;n++)a=a.next;for(var s=[],n=0;a&&n<t;n++)s.push(a.value),a=this.removeNode(a);a===null&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(var n=0;n<r.length;n++)a=IB(this,a,r[n]);return s};Pe.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};function IB(e,t,r){var n=t===e.head?new Sa(r,null,t,e):new Sa(r,t,t.next,e);return n.next===null&&(e.tail=n),n.prev===null&&(e.head=n),e.length++,n}function NB(e,t){e.tail=new Sa(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function $B(e,t){e.head=new Sa(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Sa(e,t,r,n){if(!(this instanceof Sa))return new Sa(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{kB()(Pe)}catch{}const OB=xB,ia=Symbol("max"),Yr=Symbol("length"),Da=Symbol("lengthCalculator"),Ws=Symbol("allowStale"),ca=Symbol("maxAge"),Jr=Symbol("dispose"),ub=Symbol("noDisposeOnSet"),ut=Symbol("lruList"),mr=Symbol("cache"),GS=Symbol("updateAgeOnGet"),ku=()=>1;class LB{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[ia]=t.max||1/0;const r=t.length||ku;if(this[Da]=typeof r!="function"?ku:r,this[Ws]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[ca]=t.maxAge||0,this[Jr]=t.dispose,this[ub]=t.noDisposeOnSet||!1,this[GS]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ia]=t||1/0,Ts(this)}get max(){return this[ia]}set allowStale(t){this[Ws]=!!t}get allowStale(){return this[Ws]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[ca]=t,Ts(this)}get maxAge(){return this[ca]}set lengthCalculator(t){typeof t!="function"&&(t=ku),t!==this[Da]&&(this[Da]=t,this[Yr]=0,this[ut].forEach(r=>{r.length=this[Da](r.value,r.key),this[Yr]+=r.length})),Ts(this)}get lengthCalculator(){return this[Da]}get length(){return this[Yr]}get itemCount(){return this[ut].length}rforEach(t,r){r=r||this;for(let n=this[ut].tail;n!==null;){const a=n.prev;db(this,t,n,r),n=a}}forEach(t,r){r=r||this;for(let n=this[ut].head;n!==null;){const a=n.next;db(this,t,n,r),n=a}}keys(){return this[ut].toArray().map(t=>t.key)}values(){return this[ut].toArray().map(t=>t.value)}reset(){this[Jr]&&this[ut]&&this[ut].length&&this[ut].forEach(t=>this[Jr](t.key,t.value)),this[mr]=new Map,this[ut]=new OB,this[Yr]=0}dump(){return this[ut].map(t=>Oo(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[ut]}set(t,r,n){if(n=n||this[ca],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const a=n?Date.now():0,s=this[Da](r,t);if(this[mr].has(t)){if(s>this[ia])return za(this,this[mr].get(t)),!1;const c=this[mr].get(t).value;return this[Jr]&&(this[ub]||this[Jr](t,c.value)),c.now=a,c.maxAge=n,c.value=r,this[Yr]+=s-c.length,c.length=s,this.get(t),Ts(this),!0}const i=new MB(t,r,s,a,n);return i.length>this[ia]?(this[Jr]&&this[Jr](t,r),!1):(this[Yr]+=i.length,this[ut].unshift(i),this[mr].set(t,this[ut].head),Ts(this),!0)}has(t){if(!this[mr].has(t))return!1;const r=this[mr].get(t).value;return!Oo(this,r)}get(t){return xu(this,t,!0)}peek(t){return xu(this,t,!1)}pop(){const t=this[ut].tail;return t?(za(this,t),t.value):null}del(t){za(this,this[mr].get(t))}load(t){this.reset();const r=Date.now();for(let n=t.length-1;n>=0;n--){const a=t[n],s=a.e||0;if(s===0)this.set(a.k,a.v);else{const i=s-r;i>0&&this.set(a.k,a.v,i)}}}prune(){this[mr].forEach((t,r)=>xu(this,r,!1))}}const xu=(e,t,r)=>{const n=e[mr].get(t);if(n){const a=n.value;if(Oo(e,a)){if(za(e,n),!e[Ws])return}else r&&(e[GS]&&(n.value.now=Date.now()),e[ut].unshiftNode(n));return a.value}},Oo=(e,t)=>{if(!t||!t.maxAge&&!e[ca])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[ca]&&r>e[ca]},Ts=e=>{if(e[Yr]>e[ia])for(let t=e[ut].tail;e[Yr]>e[ia]&&t!==null;){const r=t.prev;za(e,t),t=r}},za=(e,t)=>{if(t){const r=t.value;e[Jr]&&e[Jr](r.key,r.value),e[Yr]-=r.length,e[mr].delete(r.key),e[ut].removeNode(t)}};class MB{constructor(t,r,n,a,s){this.key=t,this.value=r,this.length=n,this.now=a,this.maxAge=s||0}}const db=(e,t,r,n)=>{let a=r.value;Oo(e,a)&&(za(e,r),e[Ws]||(a=void 0)),a&&t.call(n,a.value,a.key,e)};var FB=LB,Iu,hb;function wr(){if(hb)return Iu;hb=1;class e{constructor(A,O){if(O=n(O),A instanceof e)return A.loose===!!O.loose&&A.includePrerelease===!!O.includePrerelease?A:new e(A.raw,O);if(A instanceof a)return this.raw=A.value,this.set=[[A]],this.format(),this;if(this.options=O,this.loose=!!O.loose,this.includePrerelease=!!O.includePrerelease,this.raw=A.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(D=>!g(D[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const D of this.set)if(D.length===1&&b(D[0])){this.set=[D];break}}}this.format()}format(){return this.range=this.set.map(A=>A.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(A){const M=((this.options.includePrerelease&&f)|(this.options.loose&&p))+":"+A,D=r.get(M);if(D)return D;const I=this.options.loose,F=I?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];A=A.replace(F,$(this.options.includePrerelease)),s("hyphen replace",A),A=A.replace(l[c.COMPARATORTRIM],u),s("comparator trim",A),A=A.replace(l[c.TILDETRIM],d),s("tilde trim",A),A=A.replace(l[c.CARETTRIM],h),s("caret trim",A);let B=A.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>N(H,this.options));I&&(B=B.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(l[c.COMPARATORLOOSE])))),s("range list",B);const U=new Map,V=B.map(H=>new a(H,this.options));for(const H of V){if(g(H))return[H];U.set(H.value,H)}U.size>1&&U.has("")&&U.delete("");const W=[...U.values()];return r.set(M,W),W}intersects(A,O){if(!(A instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>v(M,O)&&A.set.some(D=>v(D,O)&&M.every(I=>D.every(F=>I.intersects(F,O)))))}test(A){if(!A)return!1;if(typeof A=="string")try{A=new i(A,this.options)}catch{return!1}for(let O=0;O<this.set.length;O++)if(L(this.set[O],A,this.options))return!0;return!1}}Iu=e;const t=FB,r=new t({max:1e3}),n=nf,a=oc(),s=sc,i=jt,{safeRe:l,t:c,comparatorTrimReplace:u,tildeTrimReplace:d,caretTrimReplace:h}=yi,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:p}=ac,g=k=>k.value==="<0.0.0-0",b=k=>k.value==="",v=(k,A)=>{let O=!0;const M=k.slice();let D=M.pop();for(;O&&M.length;)O=M.every(I=>D.intersects(I,A)),D=M.pop();return O},y=(k,A)=>(s("comp",k,A),k=R(k,A),s("caret",k),k=S(k,A),s("tildes",k),k=C(k,A),s("xrange",k),k=P(k,A),s("stars",k),k),E=k=>!k||k.toLowerCase()==="x"||k==="*",S=(k,A)=>k.trim().split(/\s+/).map(O=>_(O,A)).join(" "),_=(k,A)=>{const O=A.loose?l[c.TILDELOOSE]:l[c.TILDE];return k.replace(O,(M,D,I,F,B)=>{s("tilde",k,M,D,I,F,B);let U;return E(D)?U="":E(I)?U=`>=${D}.0.0 <${+D+1}.0.0-0`:E(F)?U=`>=${D}.${I}.0 <${D}.${+I+1}.0-0`:B?(s("replaceTilde pr",B),U=`>=${D}.${I}.${F}-${B} <${D}.${+I+1}.0-0`):U=`>=${D}.${I}.${F} <${D}.${+I+1}.0-0`,s("tilde return",U),U})},R=(k,A)=>k.trim().split(/\s+/).map(O=>x(O,A)).join(" "),x=(k,A)=>{s("caret",k,A);const O=A.loose?l[c.CARETLOOSE]:l[c.CARET],M=A.includePrerelease?"-0":"";return k.replace(O,(D,I,F,B,U)=>{s("caret",k,D,I,F,B,U);let V;return E(I)?V="":E(F)?V=`>=${I}.0.0${M} <${+I+1}.0.0-0`:E(B)?I==="0"?V=`>=${I}.${F}.0${M} <${I}.${+F+1}.0-0`:V=`>=${I}.${F}.0${M} <${+I+1}.0.0-0`:U?(s("replaceCaret pr",U),I==="0"?F==="0"?V=`>=${I}.${F}.${B}-${U} <${I}.${F}.${+B+1}-0`:V=`>=${I}.${F}.${B}-${U} <${I}.${+F+1}.0-0`:V=`>=${I}.${F}.${B}-${U} <${+I+1}.0.0-0`):(s("no pr"),I==="0"?F==="0"?V=`>=${I}.${F}.${B}${M} <${I}.${F}.${+B+1}-0`:V=`>=${I}.${F}.${B}${M} <${I}.${+F+1}.0-0`:V=`>=${I}.${F}.${B} <${+I+1}.0.0-0`),s("caret return",V),V})},C=(k,A)=>(s("replaceXRanges",k,A),k.split(/\s+/).map(O=>w(O,A)).join(" ")),w=(k,A)=>{k=k.trim();const O=A.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return k.replace(O,(M,D,I,F,B,U)=>{s("xRange",k,M,D,I,F,B,U);const V=E(I),W=V||E(F),H=W||E(B),Y=H;return D==="="&&Y&&(D=""),U=A.includePrerelease?"-0":"",V?D===">"||D==="<"?M="<0.0.0-0":M="*":D&&Y?(W&&(F=0),B=0,D===">"?(D=">=",W?(I=+I+1,F=0,B=0):(F=+F+1,B=0)):D==="<="&&(D="<",W?I=+I+1:F=+F+1),D==="<"&&(U="-0"),M=`${D+I}.${F}.${B}${U}`):W?M=`>=${I}.0.0${U} <${+I+1}.0.0-0`:H&&(M=`>=${I}.${F}.0${U} <${I}.${+F+1}.0-0`),s("xRange return",M),M})},P=(k,A)=>(s("replaceStars",k,A),k.trim().replace(l[c.STAR],"")),N=(k,A)=>(s("replaceGTE0",k,A),k.trim().replace(l[A.includePrerelease?c.GTE0PRE:c.GTE0],"")),$=k=>(A,O,M,D,I,F,B,U,V,W,H,Y,j)=>(E(M)?O="":E(D)?O=`>=${M}.0.0${k?"-0":""}`:E(I)?O=`>=${M}.${D}.0${k?"-0":""}`:F?O=`>=${O}`:O=`>=${O}${k?"-0":""}`,E(V)?U="":E(W)?U=`<${+V+1}.0.0-0`:E(H)?U=`<${V}.${+W+1}.0-0`:Y?U=`<=${V}.${W}.${H}-${Y}`:k?U=`<${V}.${W}.${+H+1}-0`:U=`<=${U}`,`${O} ${U}`.trim()),L=(k,A,O)=>{for(let M=0;M<k.length;M++)if(!k[M].test(A))return!1;if(A.prerelease.length&&!O.includePrerelease){for(let M=0;M<k.length;M++)if(s(k[M].semver),k[M].semver!==a.ANY&&k[M].semver.prerelease.length>0){const D=k[M].semver;if(D.major===A.major&&D.minor===A.minor&&D.patch===A.patch)return!0}return!1}return!0};return Iu}var Nu,fb;function oc(){if(fb)return Nu;fb=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=r(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),i("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(d){const h=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],f=d.match(h);if(!f)throw new TypeError(`Invalid comparator: ${d}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new l(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(i("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new l(d,this.options)}catch{return!1}return s(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,h).test(d.semver):(h=r(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||s(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||s(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}Nu=t;const r=nf,{safeRe:n,t:a}=yi,s=zS,i=sc,l=jt,c=wr();return Nu}const DB=wr(),HB=(e,t,r)=>{try{t=new DB(t,r)}catch{return!1}return t.test(e)};var lc=HB;const BB=wr(),WB=(e,t)=>new BB(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var UB=WB;const jB=jt,qB=wr(),VB=(e,t,r)=>{let n=null,a=null,s=null;try{s=new qB(t,r)}catch{return null}return e.forEach(i=>{s.test(i)&&(!n||a.compare(i)===-1)&&(n=i,a=new jB(n,r))}),n};var KB=VB;const zB=jt,GB=wr(),JB=(e,t,r)=>{let n=null,a=null,s=null;try{s=new GB(t,r)}catch{return null}return e.forEach(i=>{s.test(i)&&(!n||a.compare(i)===1)&&(n=i,a=new zB(n,r))}),n};var XB=JB;const $u=jt,YB=wr(),pb=ic,ZB=(e,t)=>{e=new YB(e,t);let r=new $u("0.0.0");if(e.test(r)||(r=new $u("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const a=e.set[n];let s=null;a.forEach(i=>{const l=new $u(i.semver.version);switch(i.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!s||pb(l,s))&&(s=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${i.operator}`)}}),s&&(!r||pb(r,s))&&(r=s)}return r&&e.test(r)?r:null};var QB=ZB;const eW=wr(),tW=(e,t)=>{try{return new eW(e,t).range||"*"}catch{return null}};var rW=tW;const nW=jt,JS=oc(),{ANY:aW}=JS,sW=wr(),iW=lc,mb=ic,gb=sf,oW=lf,lW=of,cW=(e,t,r,n)=>{e=new nW(e,n),t=new sW(t,n);let a,s,i,l,c;switch(r){case">":a=mb,s=oW,i=gb,l=">",c=">=";break;case"<":a=gb,s=lW,i=mb,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(iW(e,t,n))return!1;for(let u=0;u<t.set.length;++u){const d=t.set[u];let h=null,f=null;if(d.forEach(p=>{p.semver===aW&&(p=new JS(">=0.0.0")),h=h||p,f=f||p,a(p.semver,h.semver,n)?h=p:i(p.semver,f.semver,n)&&(f=p)}),h.operator===l||h.operator===c||(!f.operator||f.operator===l)&&s(e,f.semver))return!1;if(f.operator===c&&i(e,f.semver))return!1}return!0};var cf=cW;const uW=cf,dW=(e,t,r)=>uW(e,t,">",r);var hW=dW;const fW=cf,pW=(e,t,r)=>fW(e,t,"<",r);var mW=pW;const bb=wr(),gW=(e,t,r)=>(e=new bb(e,r),t=new bb(t,r),e.intersects(t,r));var bW=gW;const yW=lc,vW=Cr;var EW=(e,t,r)=>{const n=[];let a=null,s=null;const i=e.sort((d,h)=>vW(d,h,r));for(const d of i)yW(d,t,r)?(s=d,a||(a=d)):(s&&n.push([a,s]),s=null,a=null);a&&n.push([a,null]);const l=[];for(const[d,h]of n)d===h?l.push(d):!h&&d===i[0]?l.push("*"):h?d===i[0]?l.push(`<=${h}`):l.push(`${d} - ${h}`):l.push(`>=${d}`);const c=l.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t};const yb=wr(),uf=oc(),{ANY:Ou}=uf,Rs=lc,df=Cr,SW=(e,t,r={})=>{if(e===t)return!0;e=new yb(e,r),t=new yb(t,r);let n=!1;e:for(const a of e.set){for(const s of t.set){const i=CW(a,s,r);if(n=n||i!==null,i)continue e}if(n)return!1}return!0},_W=[new uf(">=0.0.0-0")],vb=[new uf(">=0.0.0")],CW=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Ou){if(t.length===1&&t[0].semver===Ou)return!0;r.includePrerelease?e=_W:e=vb}if(t.length===1&&t[0].semver===Ou){if(r.includePrerelease)return!0;t=vb}const n=new Set;let a,s;for(const p of e)p.operator===">"||p.operator===">="?a=Eb(a,p,r):p.operator==="<"||p.operator==="<="?s=Sb(s,p,r):n.add(p.semver);if(n.size>1)return null;let i;if(a&&s){if(i=df(a.semver,s.semver,r),i>0)return null;if(i===0&&(a.operator!==">="||s.operator!=="<="))return null}for(const p of n){if(a&&!Rs(p,String(a),r)||s&&!Rs(p,String(s),r))return null;for(const g of t)if(!Rs(p,String(g),r))return!1;return!0}let l,c,u,d,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,f=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1;h&&h.prerelease.length===1&&s.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(const p of t){if(d=d||p.operator===">"||p.operator===">=",u=u||p.operator==="<"||p.operator==="<=",a){if(f&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===f.major&&p.semver.minor===f.minor&&p.semver.patch===f.patch&&(f=!1),p.operator===">"||p.operator===">="){if(l=Eb(a,p,r),l===p&&l!==a)return!1}else if(a.operator===">="&&!Rs(a.semver,String(p),r))return!1}if(s){if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),p.operator==="<"||p.operator==="<="){if(c=Sb(s,p,r),c===p&&c!==s)return!1}else if(s.operator==="<="&&!Rs(s.semver,String(p),r))return!1}if(!p.operator&&(s||a)&&i!==0)return!1}return!(a&&u&&!s&&i!==0||s&&d&&!a&&i!==0||f||h)},Eb=(e,t,r)=>{if(!e)return t;const n=df(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},Sb=(e,t,r)=>{if(!e)return t;const n=df(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var wW=SW;const Lu=yi,_b=ac,PW=jt,Cb=qS,AW=ds,TW=A5,RW=k5,kW=I5,xW=$5,IW=M5,NW=H5,$W=U5,OW=V5,LW=Cr,MW=J5,FW=Z5,DW=af,HW=rB,BW=sB,WW=ic,UW=sf,jW=VS,qW=KS,VW=of,KW=lf,zW=zS,GW=RB,JW=oc(),XW=wr(),YW=lc,ZW=UB,QW=KB,eU=XB,tU=QB,rU=rW,nU=cf,aU=hW,sU=mW,iU=bW,oU=EW,lU=wW;var cU={parse:AW,valid:TW,clean:RW,inc:kW,diff:xW,major:IW,minor:NW,patch:$W,prerelease:OW,compare:LW,rcompare:MW,compareLoose:FW,compareBuild:DW,sort:HW,rsort:BW,gt:WW,lt:UW,eq:jW,neq:qW,gte:VW,lte:KW,cmp:zW,coerce:GW,Comparator:JW,Range:XW,satisfies:YW,toComparators:ZW,maxSatisfying:QW,minSatisfying:eU,minVersion:tU,validRange:rU,outside:nU,gtr:aU,ltr:sU,intersects:iU,simplifyRange:oU,subset:lU,SemVer:PW,re:Lu.re,src:Lu.src,tokens:Lu.t,SEMVER_SPEC_VERSION:_b.SEMVER_SPEC_VERSION,RELEASE_TYPES:_b.RELEASE_TYPES,compareIdentifiers:Cb.compareIdentifiers,rcompareIdentifiers:Cb.rcompareIdentifiers};Object.defineProperty(rf,"__esModule",{value:!0});var uU=cU,dU=Ut,hU=Kl;function fU(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var pU=fU(uU);function mU(e){const t={package:"shopify-app"},r=(a,s={})=>e.warning(a,{...t,...s});function n(a){return function(s,i){if(pU.default.gte(hU.SHOPIFY_REMIX_LIBRARY_VERSION,s))throw new dU.FeatureDeprecatedError(`Feature was deprecated in version ${s}`);return a(`[Deprecated | ${s}] ${i}`)}}return{...e,log:(a,s,i={})=>e.log(a,s,{...t,...i}),debug:(a,s={})=>e.debug(a,{...t,...s}),info:(a,s={})=>e.info(a,{...t,...s}),warning:r,error:(a,s={})=>e.error(a,{...t,...s}),deprecated:n(r)}}rf.overrideLogger=mU;var hf={};Object.defineProperty(hf,"__esModule",{value:!0});var gU=Ta,wb=cs;function bU(e){const{api:t,config:r,logger:n}=e;return async function(s){const l=new URL(s.url).searchParams.get("shop");if(s.method==="GET"&&!l)return{};const c=l||(await s.formData()).get("shop");if(!c)return n.debug("Missing shop parameter",{shop:c}),{shop:wb.LoginErrorType.MissingShop};const u=c.replace(/^https?:\/\//,"").replace(/\/$/,""),d=(c==null?void 0:c.indexOf("."))===-1?`${u}.myshopify.com`:u,h=t.utils.sanitizeShop(d);if(!h)return n.debug("Invalid shop parameter",{shop:c}),{shop:wb.LoginErrorType.InvalidShop};const f=`${r.appUrl}${r.auth.path}?shop=${h}`,g=`https://${t.utils.legacyUrlToShopAdminUrl(h)}/oauth/install?client_id=${r.apiKey}`,v=r.isEmbeddedApp&&r.future.unstable_newEmbeddedAuthStrategy?g:f;throw n.info(`Redirecting login request to ${v}`,{shop:h}),gU.redirect(v)}}hf.loginFactory=bU;var ff={},vi={};Object.defineProperty(vi,"__esModule",{value:!0});var yU=Ut;class vU extends yU.ShopifyError{}vi.SessionNotFoundError=vU;var cc={};Object.defineProperty(cc,"__esModule",{value:!0});async function EU(e,{api:t,config:r}){const n=t.session.getOfflineId(e);return await r.sessionStorage.loadSession(n)}cc.getOfflineSession=EU;Object.defineProperty(ff,"__esModule",{value:!0});var SU=vi,_U=Bn,CU=cc;function wU(e){return async t=>{const r=await CU.getOfflineSession(t,e);if(!r)throw new SU.SessionNotFoundError(`Could not find a session for shop ${t} when creating unauthenticated admin context`);return{session:r,admin:_U.adminClientFactory({params:e,session:r})}}}ff.unauthenticatedAdminContextFactory=wU;var pf={},mf={};Object.defineProperty(mf,"__esModule",{value:!0});var PU=mi,AU=zl,TU=Aa,RU=Gl,kU=Jl;function xU(e){return async function(r,n={}){var a;const{logger:s}=e,i=(a=n.corsHeaders)!==null&&a!==void 0?a:[];RU.respondToBotRequest(e,r),kU.respondToOptionsRequest(e,r,i);const l=TU.getSessionTokenHeader(r);if(s.info("Authenticating checkout request"),!l)throw s.debug("Request did not contain a session token"),new Response(void 0,{status:401,statusText:"Unauthorized"});return{sessionToken:await AU.validateSessionToken(e,l,{checkAudience:!1}),cors:PU.ensureCORSHeadersFactory(e,r,i)}}}mf.authenticateCheckoutFactory=xU;var gf={},uc={};Object.defineProperty(uc,"__esModule",{value:!0});function IU({params:e,session:t}){const{api:r}=e;return{graphql:async(n,a={})=>{const i=await new r.clients.Storefront({session:t,apiVersion:a.apiVersion}).request(n,{variables:a==null?void 0:a.variables,retries:a!=null&&a.tries?a.tries-1:0,headers:a==null?void 0:a.headers});return new Response(JSON.stringify(i))}}}uc.storefrontClientFactory=IU;Object.defineProperty(gf,"__esModule",{value:!0});var NU=Bn,$U=uc;function OU(e){const{api:t,config:r,logger:n}=e;return async function(s){n.info("Authenticating app proxy request");const{searchParams:i}=new URL(s.url),l=Object.fromEntries(i.entries());let c=!1;try{c=await t.utils.validateHmac(l,{signator:"appProxy"})}catch(p){throw n.info(p.message),new Response(void 0,{status:400,statusText:"Bad Request"})}if(!c)throw n.info("App proxy request has invalid signature"),new Response(void 0,{status:400,statusText:"Bad Request"});const u=i.get("shop"),d=t.session.getOfflineId(u),h=await r.sessionStorage.loadSession(d);return h?{liquid:Pb,session:h,admin:NU.adminClientFactory({params:e,session:h}),storefront:$U.storefrontClientFactory({params:e,session:h})}:{liquid:Pb,session:void 0,admin:void 0,storefront:void 0}}}const Pb=(e,t)=>{if(typeof t!="object")return new Response(e,{status:t||200,headers:{"Content-Type":"application/liquid"}});const{layout:r,...n}=t||{},a=r===!1?`{% layout none %} ${e}`:e,s=new Headers(n.headers);return s.set("Content-Type","application/liquid"),new Response(a,{...n,headers:s})};gf.authenticateAppProxyFactory=OU;Object.defineProperty(pf,"__esModule",{value:!0});var LU=mf,MU=gf;function FU(e){const{logger:t,config:r}=e,n=LU.authenticateCheckoutFactory(e),a=MU.authenticateAppProxyFactory(e);if(r.future.v3_authenticatePublic)return{checkout:n,appProxy:a};const s=(i,l)=>(t.deprecated("3.0.0","authenticate.public() will be deprecated in v3. Use authenticate.public.checkout() instead."),n(i,l));return s.checkout=n,s.appProxy=a,s}pf.authenticatePublicFactory=FU;var bf={};Object.defineProperty(bf,"__esModule",{value:!0});var DU=vi,HU=uc,BU=cc;function WU(e){return async t=>{const r=await BU.getOfflineSession(t,e);if(!r)throw new DU.SessionNotFoundError(`Could not find a session for shop ${t} when creating unauthenticated storefront context`);return{session:r,storefront:HU.storefrontClientFactory({params:e,session:r})}}}bf.unauthenticatedStorefrontContextFactory=WU;var yf={},dc={};Object.defineProperty(dc,"__esModule",{value:!0});var UU=Zl;async function jU(e,t,r,n){const{config:a,logger:s}=e;a.hooks.afterAuth&&(s.info("Running afterAuth hook"),await a.hooks.afterAuth({session:t,admin:UU.createAdminApiContext(t,e,n.handleClientError(r))}))}dc.triggerAfterAuthHook=jU;Object.defineProperty(yf,"__esModule",{value:!0});var ks=Ut,Ki=Xl,qU=Ql,VU=bi,Mu=Ra,Ab=Yl,KU=Aa,zU=dc,GU=nc;class JU{constructor({api:t,config:r,logger:n}){this.api=void 0,this.config=void 0,this.logger=void 0,this.api=t,this.config=r,this.logger=n}async respondToOAuthRequests(t){const{api:r,config:n}=this,a=new URL(t.url),s=a.pathname===n.auth.path,i=a.pathname===n.auth.callbackPath;if(s||i){const l=r.utils.sanitizeShop(a.searchParams.get("shop"));throw l?s?await this.handleAuthBeginRequest(t,l):await this.handleAuthCallbackRequest(t,l):new Response("Shop param is invalid",{status:400})}KU.getSessionTokenHeader(t)||await this.ensureInstalledOnShop(t)}async authenticate(t,r){const{api:n,config:a,logger:s}=this,{shop:i,session:l}=r;return l?l.isActive(a.scopes)||(s.debug("Found a session, but it has expired, redirecting to OAuth",{shop:i}),await Mu.redirectToAuthPage({config:a,logger:s,api:n},t,i)):(s.debug("No session found, redirecting to OAuth",{shop:i}),await Mu.redirectToAuthPage({config:a,logger:s,api:n},t,i)),s.debug("Found a valid session",{shop:i}),l}handleClientError(t){const{api:r,config:n,logger:a}=this;return VU.handleClientErrorFactory({request:t,onError:async({session:s,error:i})=>{if(i.response.code===401)throw await Mu.redirectToAuthPage({api:r,config:n,logger:a},t,s.shop)}})}async ensureInstalledOnShop(t){const{api:r,config:n,logger:a}=this;GU.validateShopAndHostParams({api:r,config:n,logger:a},t);const s=new URL(t.url);let i=s.searchParams.get("shop");if(a.debug("Ensuring app is installed on shop",{shop:i}),!await this.hasValidOfflineId(t))throw a.info("Could not find a shop, can't authenticate request"),new Response(void 0,{status:400,statusText:"Bad Request"});const l=await this.getOfflineSession(t),c=s.searchParams.get("embedded")==="1";if(!l)if(a.info("Shop hasn't installed app yet, redirecting to OAuth",{shop:i}),c)Ab.redirectWithExitIframe({api:r,config:n,logger:a},t,i);else throw await Ki.beginAuth({api:r,config:n,logger:a},t,!1,i);if(i=i||l.shop,n.isEmbeddedApp&&!c)try{a.debug("Ensuring offline session is valid before embedding",{shop:i}),await this.testSession(l),a.debug("Offline session is still valid, embedding app",{shop:i})}catch(u){await this.handleInvalidOfflineSession(u,t,i)}}async handleAuthBeginRequest(t,r){const{api:n,config:a,logger:s}=this;throw s.info("Handling OAuth begin request",{shop:r}),a.isEmbeddedApp&&t.headers.get("Sec-Fetch-Dest")==="iframe"?(s.debug("Auth request in iframe detected, exiting iframe",{shop:r}),Ab.redirectWithExitIframe({api:n,config:a,logger:s},t,r)):await Ki.beginAuth({api:n,config:a,logger:s},t,!1,r)}async handleAuthCallbackRequest(t,r){const{api:n,config:a,logger:s}=this;s.info("Handling OAuth callback request");try{const{session:i,headers:l}=await n.auth.callback({rawRequest:t});throw await a.sessionStorage.storeSession(i),a.useOnlineTokens&&!i.isOnline&&(s.info("Requesting online access token for offline session"),await Ki.beginAuth({api:n,config:a,logger:s},t,!0,r)),await zU.triggerAfterAuthHook({api:n,config:a,logger:s},i,t,this),await qU.redirectToShopifyOrAppRoot(t,{api:n,config:a,logger:s},l)}catch(i){throw i instanceof Response?i:await this.oauthCallbackError(i,t,r)}}async getOfflineSession(t){const r=await this.getOfflineSessionId(t);return this.config.sessionStorage.loadSession(r)}async hasValidOfflineId(t){return!!await this.getOfflineSessionId(t)}async getOfflineSessionId(t){const{api:r}=this,a=new URL(t.url).searchParams.get("shop");return a?r.session.getOfflineId(a):r.session.getCurrentId({isOnline:!1,rawRequest:t})}async testSession(t){const{api:r}=this;await new r.clients.Graphql({session:t}).request(`#graphql
      query shopifyAppShopName {
        shop {
          name
        }
      }
    `)}async oauthCallbackError(t,r,n){const{logger:a}=this;return a.error("Error during OAuth callback",{error:t.message}),t instanceof ks.CookieNotFound?this.handleAuthBeginRequest(r,n):t instanceof ks.InvalidHmacError||t instanceof ks.InvalidOAuthError?new Response(void 0,{status:400,statusText:"Invalid OAuth Request"}):new Response(void 0,{status:500,statusText:"Internal Server Error"})}async handleInvalidOfflineSession(t,r,n){const{api:a,logger:s,config:i}=this;if(t instanceof ks.HttpResponseError){if(t.response.code===401)throw s.info("Shop session is no longer valid, redirecting to OAuth",{shop:n}),await Ki.beginAuth({api:a,config:i,logger:s},r,!1,n);{const l=JSON.stringify(t.response.body,null,2);throw s.error(`Unexpected error during session validation: ${l}`,{shop:n}),new Response(void 0,{status:t.response.code,statusText:t.response.statusText})}}else if(t instanceof ks.GraphqlQueryError){const l={shop:n};throw t.response&&(l.response=JSON.stringify(t.body)),s.error(`Unexpected error during session validation: ${t.message}`,l),new Response(void 0,{status:500,statusText:"Internal Server Error"})}}}yf.AuthCodeFlowStrategy=JU;var vf={},Ef={};Object.defineProperty(Ef,"__esModule",{value:!0});var XU=ec,YU=Hn;function ZU({params:e,request:t,retryRequest:r=!1}){const{api:n,logger:a,config:s}=e;if(!t.headers.get("authorization"))return XU.redirectToBouncePage({api:n,logger:a,config:s},new URL(t.url));throw new Response(void 0,{status:401,statusText:"Unauthorized",headers:r?YU.RETRY_INVALID_SESSION_HEADER:{}})}Ef.respondToInvalidSessionToken=ZU;Object.defineProperty(vf,"__esModule",{value:!0});var xs=Ut,Tb=Ef,QU=bi,e3=dc;class t3{constructor({api:t,config:r,logger:n}){this.api=void 0,this.config=void 0,this.logger=void 0,this.api=t,this.config=r,this.logger=n}async respondToOAuthRequests(t){}async authenticate(t,r){const{api:n,config:a,logger:s}=this,{shop:i,session:l,sessionToken:c}=r;if(!c)throw new xs.InvalidJwtError;if(!l||l.isExpired()){s.info("No valid session found"),s.info("Requesting offline access token");const{session:u}=await this.exchangeToken({request:t,sessionToken:c,shop:i,requestedTokenType:xs.RequestedTokenType.OfflineAccessToken});await a.sessionStorage.storeSession(u);let d=u;if(a.useOnlineTokens){s.info("Requesting online access token");const{session:h}=await this.exchangeToken({request:t,sessionToken:c,shop:i,requestedTokenType:xs.RequestedTokenType.OnlineAccessToken});await a.sessionStorage.storeSession(h),d=h}try{await this.handleAfterAuthHook({api:n,config:a,logger:s},d,t,c)}catch{throw new Response(void 0,{status:500,statusText:"Internal Server Error"})}return d}return l}handleClientError(t){const{api:r,config:n,logger:a}=this;return QU.handleClientErrorFactory({request:t,onError:async({session:s,error:i})=>{i.response.code===401&&(n.sessionStorage.deleteSession(s.id),Tb.respondToInvalidSessionToken({params:{config:n,api:r,logger:a},request:t}))}})}async exchangeToken({request:t,shop:r,sessionToken:n,requestedTokenType:a}){const{api:s,config:i,logger:l}=this;try{return await s.auth.tokenExchange({sessionToken:n,shop:r,requestedTokenType:a})}catch(u){var c;throw u instanceof xs.InvalidJwtError||u instanceof xs.HttpResponseError&&u.response.code===400&&((c=u.response.body)===null||c===void 0?void 0:c.error)==="invalid_subject_token"?Tb.respondToInvalidSessionToken({params:{api:s,config:i,logger:l},request:t,retryRequest:!0}):new Response(void 0,{status:500,statusText:"Internal Server Error"})}}async handleAfterAuthHook(t,r,n,a){const{config:s}=t;await s.idempotentPromiseHandler.handlePromise({promiseFunction:()=>e3.triggerAfterAuthHook(t,r,n,this),identifier:a})}}vf.TokenExchangeStrategy=t3;var Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});const r3=6e4;class n3{constructor(){this.identifiers=void 0,this.identifiers=new Map}async handlePromise({promiseFunction:t,identifier:r}){try{this.isPromiseRunnable(r)&&await t()}finally{this.clearStaleIdentifiers()}return Promise.resolve()}isPromiseRunnable(t){return this.identifiers.has(t)?!1:(this.identifiers.set(t,Date.now()),!0)}async clearStaleIdentifiers(){this.identifiers.forEach((t,r,n)=>{Date.now()-t>r3&&n.delete(r)})}}Sf.IdempotentPromiseHandler=n3;var _f={};Object.defineProperty(_f,"__esModule",{value:!0});var a3=Bn;function s3(e){const{api:t,config:r,logger:n}=e;return async function(s){if(n.info("Authenticating flow request"),s.method!=="POST")throw n.debug("Received a non-POST request for flow. Only POST requests are allowed.",{url:s.url,method:s.method}),new Response(void 0,{status:405,statusText:"Method not allowed"});const i=await s.text(),l=await t.flow.validate({rawBody:i,rawRequest:s});if(!l.valid)throw n.error("Received an invalid flow request",{reason:l.reason}),new Response(void 0,{status:400,statusText:"Bad Request"});const c=JSON.parse(i);n.debug("Flow request is valid, looking for an offline session",{shop:c.shopify_domain});const u=t.session.getOfflineId(c.shopify_domain),d=await r.sessionStorage.loadSession(u);if(!d)throw n.info("Flow request could not find session",{shop:c.shopify_domain}),new Response(void 0,{status:400,statusText:"Bad Request"});return n.debug("Found a session for the flow request",{shop:d.shop}),{session:d,payload:c,admin:a3.adminClientFactory({params:e,session:d})}}}_f.authenticateFlowFactory=s3;var Cf={};Object.defineProperty(Cf,"__esModule",{value:!0});var i3=Ut,o3=Bn;function l3(e){const{api:t,config:r,logger:n}=e;return async function(s){if(n.info("Authenticating fulfillment service request"),s.method!=="POST")throw n.debug("Received a non-POST request for fulfillment service. Only POST requests are allowed.",{url:s.url,method:s.method}),new Response(void 0,{status:405,statusText:"Method not allowed"});const i=await s.text(),l=await t.fulfillmentService.validate({rawBody:i,rawRequest:s});if(!l.valid)throw n.error("Received an invalid fulfillment service request",{reason:l.reason}),new Response(void 0,{status:400,statusText:"Bad Request"});const c=JSON.parse(i),u=s.headers.get(i3.ShopifyHeader.Domain)||"";n.debug("Fulfillment service request is valid, looking for an offline session",{shop:u});const d=t.session.getOfflineId(u),h=await r.sessionStorage.loadSession(d);if(!h)throw n.info("Fulfillment service request could not find session",{shop:u}),new Response(void 0,{status:400,statusText:"Bad Request"});return n.debug("Found a session for the fulfillment service request",{shop:u}),{session:h,payload:c,admin:o3.adminClientFactory({params:e,session:h})}}}Cf.authenticateFulfillmentServiceFactory=l3;var wf={};Object.defineProperty(wf,"__esModule",{value:!0});function c3(e,t){const r=(n,a)=>t.info(`Future flag ${n} is disabled.

  ${a}
`);e.future.v3_authenticatePublic||r("v3_authenticatePublic","Enable this flag to allow appProxy and checkout in `shopify.authenticate.public`."),e.future.v3_lineItemBilling||r("v3_lineItemBilling","Enable this flag to allow billing plans with multiple line items."),e.future.v3_webhookAdminContext||r("v3_webhookAdminContext","Enable this flag to use the standard Admin context when calling `shopify.authenticate.webhook`."),e.future.unstable_newEmbeddedAuthStrategy||r("unstable_newEmbeddedAuthStrategy",`Enable this to use OAuth token exchange instead of auth code to generate API access tokens.
  Your app must be using Shopify managed install: https://shopify.dev/docs/apps/auth/installation`)}wf.logDisabledFutureFlags=c3;var Rb={};Object.defineProperty(Uh,"__esModule",{value:!0});var so=Ut,zs=cs,u3=Kl,d3=jh,h3=qh,f3=tf,p3=rf,m3=gi,g3=hf,b3=ff,y3=pf,v3=bf,E3=yf,S3=vf,_3=Sf,C3=_f,w3=Cf,P3=wf;function A3(e){const t=k3(e),r=x3(e,t.config),n=p3.overrideLogger(t.logger);e.webhooks&&t.webhooks.addHandlers(e.webhooks);const a={api:t,config:r,logger:n},s=h3.authStrategyFactory({...a,strategy:r.future.unstable_newEmbeddedAuthStrategy&&r.isEmbeddedApp?new S3.TokenExchangeStrategy(a):new E3.AuthCodeFlowStrategy(a)}),i={sessionStorage:r.sessionStorage,addDocumentResponseHeaders:m3.addDocumentResponseHeadersFactory(a),registerWebhooks:d3.registerWebhooksFactory(a),authenticate:{admin:s,flow:C3.authenticateFlowFactory(a),public:y3.authenticatePublicFactory(a),fulfillmentService:w3.authenticateFulfillmentServiceFactory(a),webhook:f3.authenticateWebhookFactory(a)},unauthenticated:{admin:b3.unauthenticatedAdminContextFactory(a),storefront:v3.unauthenticatedStorefrontContextFactory(a)}};return(T3(i,e)||R3(i,e))&&(i.login=g3.loginFactory(a)),P3.logDisabledFutureFlags(r,n),i}function T3(e,t){return t.distribution===zs.AppDistribution.AppStore}function R3(e,t){return t.distribution===zs.AppDistribution.SingleMerchant}function k3(e){var t,r,n;let a;try{a=new URL(e.appUrl)}catch{throw new so.ShopifyError("Invalid appUrl provided. Please provide a valid URL.")}a.hostname==="localhost"&&!a.port&&Rb.PORT&&(a.port=Rb.PORT),e.appUrl=a.origin;let s=`Shopify Remix Library v${u3.SHOPIFY_REMIX_LIBRARY_VERSION}`;return e.userAgentPrefix&&(s=`${e.userAgentPrefix} | ${s}`),so.shopifyApi({...e,hostName:a.host,hostScheme:a.protocol.replace(":",""),userAgentPrefix:s,isEmbeddedApp:(t=e.isEmbeddedApp)!==null&&t!==void 0?t:!0,apiVersion:(r=e.apiVersion)!==null&&r!==void 0?r:so.LATEST_API_VERSION,isCustomStoreApp:e.distribution===zs.AppDistribution.ShopifyAdmin,future:{v10_lineItemBilling:(n=e.future)===null||n===void 0?void 0:n.v3_lineItemBilling},_logDisabledFutureFlags:!1})}function x3(e,t){var r,n,a,s;if(!e.sessionStorage)throw new so.ShopifyError("Please provide a valid session storage. Refer to https://github.com/Shopify/shopify-app-js/blob/main/README.md#session-storage-options for options.");const i=e.authPathPrefix||"/auth";return e.distribution=(r=e.distribution)!==null&&r!==void 0?r:zs.AppDistribution.AppStore,{...e,...t,idempotentPromiseHandler:new _3.IdempotentPromiseHandler,canUseLoginForm:e.distribution!==zs.AppDistribution.ShopifyAdmin,useOnlineTokens:(n=e.useOnlineTokens)!==null&&n!==void 0?n:!1,hooks:(a=e.hooks)!==null&&a!==void 0?a:{},sessionStorage:e.sessionStorage,future:(s=e.future)!==null&&s!==void 0?s:{},auth:{path:i,callbackPath:`${i}/callback`,patchSessionTokenPath:`${i}/session-token`,exitIframePath:`${i}/exit-iframe`,loginPath:`${i}/login`}}}Uh.shopifyApp=A3;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=sn,r=Ut,n=cs,a=Hh,s=Uh,i=vi;t.setAbstractRuntimeString(()=>"Remix"),Object.defineProperty(e,"ApiVersion",{enumerable:!0,get:function(){return r.ApiVersion}}),Object.defineProperty(e,"BillingInterval",{enumerable:!0,get:function(){return r.BillingInterval}}),Object.defineProperty(e,"DeliveryMethod",{enumerable:!0,get:function(){return r.DeliveryMethod}}),Object.defineProperty(e,"LATEST_API_VERSION",{enumerable:!0,get:function(){return r.LATEST_API_VERSION}}),Object.defineProperty(e,"LogSeverity",{enumerable:!0,get:function(){return r.LogSeverity}}),e.AppDistribution=n.AppDistribution,e.LoginErrorType=n.LoginErrorType,e.boundary=a.boundary,e.shopifyApp=s.shopifyApp,e.SessionNotFoundError=i.SessionNotFoundError})(Bv);var XS={},Pf={};const I3=Nn(jx),N3={ActionMenu:{Actions:{moreActions:"More actions"},RollupActions:{rollupButton:"View actions"}},ActionList:{SearchField:{clearButtonLabel:"Clear",search:"Search",placeholder:"Search actions"}},Avatar:{label:"Avatar",labelWithInitials:"Avatar with initials {initials}"},Autocomplete:{spinnerAccessibilityLabel:"Loading",ellipsis:"{content}"},Badge:{PROGRESS_LABELS:{incomplete:"Incomplete",partiallyComplete:"Partially complete",complete:"Complete"},TONE_LABELS:{info:"Info",success:"Success",warning:"Warning",critical:"Critical",attention:"Attention",new:"New",readOnly:"Read-only",enabled:"Enabled"},progressAndTone:"{toneLabel} {progressLabel}"},Banner:{dismissButton:"Dismiss notification"},Button:{spinnerAccessibilityLabel:"Loading"},Common:{checkbox:"checkbox",undo:"Undo",cancel:"Cancel",clear:"Clear",close:"Close",submit:"Submit",more:"More"},ContextualSaveBar:{save:"Save",discard:"Discard"},DataTable:{sortAccessibilityLabel:"sort {direction} by",navAccessibilityLabel:"Scroll table {direction} one column",totalsRowHeading:"Totals",totalRowHeading:"Total"},DatePicker:{previousMonth:"Show previous month, {previousMonthName} {showPreviousYear}",nextMonth:"Show next month, {nextMonth} {nextYear}",today:"Today ",start:"Start of range",end:"End of range",months:{january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},days:{monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},daysAbbreviated:{monday:"Mo",tuesday:"Tu",wednesday:"We",thursday:"Th",friday:"Fr",saturday:"Sa",sunday:"Su"}},DiscardConfirmationModal:{title:"Discard all unsaved changes",message:"If you discard changes, youll delete any edits you made since you last saved.",primaryAction:"Discard changes",secondaryAction:"Continue editing"},DropZone:{single:{overlayTextFile:"Drop file to upload",overlayTextImage:"Drop image to upload",overlayTextVideo:"Drop video to upload",actionTitleFile:"Add file",actionTitleImage:"Add image",actionTitleVideo:"Add video",actionHintFile:"or drop file to upload",actionHintImage:"or drop image to upload",actionHintVideo:"or drop video to upload",labelFile:"Upload file",labelImage:"Upload image",labelVideo:"Upload video"},allowMultiple:{overlayTextFile:"Drop files to upload",overlayTextImage:"Drop images to upload",overlayTextVideo:"Drop videos to upload",actionTitleFile:"Add files",actionTitleImage:"Add images",actionTitleVideo:"Add videos",actionHintFile:"or drop files to upload",actionHintImage:"or drop images to upload",actionHintVideo:"or drop videos to upload",labelFile:"Upload files",labelImage:"Upload images",labelVideo:"Upload videos"},errorOverlayTextFile:"File type is not valid",errorOverlayTextImage:"Image type is not valid",errorOverlayTextVideo:"Video type is not valid"},EmptySearchResult:{altText:"Empty search results"},Frame:{skipToContent:"Skip to content",navigationLabel:"Navigation",Navigation:{closeMobileNavigationLabel:"Close navigation"}},FullscreenBar:{back:"Back",accessibilityLabel:"Exit fullscreen mode"},Filters:{moreFilters:"More filters",moreFiltersWithCount:"More filters ({count})",filter:"Filter {resourceName}",noFiltersApplied:"No filters applied",cancel:"Cancel",done:"Done",clearAllFilters:"Clear all filters",clear:"Clear",clearLabel:"Clear {filterName}",addFilter:"Add filter",clearFilters:"Clear all",searchInView:"in:{viewName}"},FilterPill:{clear:"Clear"},IndexFilters:{searchFilterTooltip:"Search and filter",searchFilterTooltipWithShortcut:"Search and filter (F)",searchFilterAccessibilityLabel:"Search and filter results",sort:"Sort your results",addView:"Add a new view",newView:"Custom search",SortButton:{ariaLabel:"Sort the results",tooltip:"Sort",title:"Sort by",sorting:{asc:"Ascending",desc:"Descending",az:"A-Z",za:"Z-A"}},EditColumnsButton:{tooltip:"Edit columns",accessibilityLabel:"Customize table column order and visibility"},UpdateButtons:{cancel:"Cancel",update:"Update",save:"Save",saveAs:"Save as",modal:{title:"Save view as",label:"Name",sameName:"A view with this name already exists. Please choose a different name.",save:"Save",cancel:"Cancel"}}},IndexProvider:{defaultItemSingular:"Item",defaultItemPlural:"Items",allItemsSelected:"All {itemsLength}+ {resourceNamePlural} are selected",selected:"{selectedItemsCount} selected",a11yCheckboxDeselectAllSingle:"Deselect {resourceNameSingular}",a11yCheckboxSelectAllSingle:"Select {resourceNameSingular}",a11yCheckboxDeselectAllMultiple:"Deselect all {itemsLength} {resourceNamePlural}",a11yCheckboxSelectAllMultiple:"Select all {itemsLength} {resourceNamePlural}"},IndexTable:{emptySearchTitle:"No {resourceNamePlural} found",emptySearchDescription:"Try changing the filters or search term",onboardingBadgeText:"New",resourceLoadingAccessibilityLabel:"Loading {resourceNamePlural}",selectAllLabel:"Select all {resourceNamePlural}",selected:"{selectedItemsCount} selected",undo:"Undo",selectAllItems:"Select all {itemsLength}+ {resourceNamePlural}",selectItem:"Select {resourceName}",selectButtonText:"Select",sortAccessibilityLabel:"sort {direction} by"},Loading:{label:"Page loading bar"},Modal:{iFrameTitle:"body markup",modalWarning:"These required properties are missing from Modal: {missingProps}"},Page:{Header:{rollupActionsLabel:"View actions for {title}",pageReadyAccessibilityLabel:"{title}. This page is ready"}},Pagination:{previous:"Previous",next:"Next",pagination:"Pagination"},ProgressBar:{negativeWarningMessage:"Values passed to the progress prop shouldnt be negative. Resetting {progress} to 0.",exceedWarningMessage:"Values passed to the progress prop shouldnt exceed 100. Setting {progress} to 100."},ResourceList:{sortingLabel:"Sort by",defaultItemSingular:"item",defaultItemPlural:"items",showing:"Showing {itemsCount} {resource}",showingTotalCount:"Showing {itemsCount} of {totalItemsCount} {resource}",loading:"Loading {resource}",selected:"{selectedItemsCount} selected",allItemsSelected:"All {itemsLength}+ {resourceNamePlural} in your store are selected",allFilteredItemsSelected:"All {itemsLength}+ {resourceNamePlural} in this filter are selected",selectAllItems:"Select all {itemsLength}+ {resourceNamePlural} in your store",selectAllFilteredItems:"Select all {itemsLength}+ {resourceNamePlural} in this filter",emptySearchResultTitle:"No {resourceNamePlural} found",emptySearchResultDescription:"Try changing the filters or search term",selectButtonText:"Select",a11yCheckboxDeselectAllSingle:"Deselect {resourceNameSingular}",a11yCheckboxSelectAllSingle:"Select {resourceNameSingular}",a11yCheckboxDeselectAllMultiple:"Deselect all {itemsLength} {resourceNamePlural}",a11yCheckboxSelectAllMultiple:"Select all {itemsLength} {resourceNamePlural}",Item:{actionsDropdownLabel:"Actions for {accessibilityLabel}",actionsDropdown:"Actions dropdown",viewItem:"View details for {itemName}"},BulkActions:{actionsActivatorLabel:"Actions",moreActionsActivatorLabel:"More actions"}},SkeletonPage:{loadingLabel:"Page loading"},Tabs:{newViewAccessibilityLabel:"Create new view",newViewTooltip:"Create view",toggleTabsLabel:"More views",Tab:{rename:"Rename view",duplicate:"Duplicate view",edit:"Edit view",editColumns:"Edit columns",delete:"Delete view",copy:"Copy of {name}",deleteModal:{title:"Delete view?",description:"This cant be undone. {viewName} view will no longer be available in your admin.",cancel:"Cancel",delete:"Delete view"}},RenameModal:{title:"Rename view",label:"Name",cancel:"Cancel",create:"Save",errors:{sameName:"A view with this name already exists. Please choose a different name."}},DuplicateModal:{title:"Duplicate view",label:"Name",cancel:"Cancel",create:"Create view",errors:{sameName:"A view with this name already exists. Please choose a different name."}},CreateViewModal:{title:"Create new view",label:"Name",cancel:"Cancel",create:"Create view",errors:{sameName:"A view with this name already exists. Please choose a different name."}}},Tag:{ariaLabel:"Remove {children}"},TextField:{characterCount:"{count} characters",characterCountWithMaxLength:"{count} of {limit} characters used"},TooltipOverlay:{accessibilityLabel:"Tooltip: {label}"},TopBar:{toggleMenuLabel:"Toggle menu",SearchField:{clearButtonLabel:"Clear",search:"Search"}},MediaCard:{dismissButton:"Dismiss",popoverButton:"Actions"},VideoThumbnail:{playButtonA11yLabel:{default:"Play video",defaultWithDuration:"Play video of length {duration}",duration:{hours:{other:{only:"{hourCount} hours",andMinutes:"{hourCount} hours and {minuteCount} minutes",andMinute:"{hourCount} hours and {minuteCount} minute",minutesAndSeconds:"{hourCount} hours, {minuteCount} minutes, and {secondCount} seconds",minutesAndSecond:"{hourCount} hours, {minuteCount} minutes, and {secondCount} second",minuteAndSeconds:"{hourCount} hours, {minuteCount} minute, and {secondCount} seconds",minuteAndSecond:"{hourCount} hours, {minuteCount} minute, and {secondCount} second",andSeconds:"{hourCount} hours and {secondCount} seconds",andSecond:"{hourCount} hours and {secondCount} second"},one:{only:"{hourCount} hour",andMinutes:"{hourCount} hour and {minuteCount} minutes",andMinute:"{hourCount} hour and {minuteCount} minute",minutesAndSeconds:"{hourCount} hour, {minuteCount} minutes, and {secondCount} seconds",minutesAndSecond:"{hourCount} hour, {minuteCount} minutes, and {secondCount} second",minuteAndSeconds:"{hourCount} hour, {minuteCount} minute, and {secondCount} seconds",minuteAndSecond:"{hourCount} hour, {minuteCount} minute, and {secondCount} second",andSeconds:"{hourCount} hour and {secondCount} seconds",andSecond:"{hourCount} hour and {secondCount} second"}},minutes:{other:{only:"{minuteCount} minutes",andSeconds:"{minuteCount} minutes and {secondCount} seconds",andSecond:"{minuteCount} minutes and {secondCount} second"},one:{only:"{minuteCount} minute",andSeconds:"{minuteCount} minute and {secondCount} seconds",andSecond:"{minuteCount} minute and {secondCount} second"}},seconds:{other:"{secondCount} seconds",one:"{secondCount} second"}}}}},$3={Polaris:N3};var Af={};Object.defineProperty(Af,"__esModule",{value:!0});const O3="https://cdn.shopify.com/shopifycloud/app-bridge.js";Af.APP_BRIDGE_URL=O3;var Tf={};const L3=Nn(PA);Object.defineProperty(Tf,"__esModule",{value:!0});var M3=m,F3=L3,D3=vn;function H3(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var B3=H3(M3);const W3=B3.default.forwardRef((e,t)=>{var r;return D3.jsx(F3.Link,{...e,to:(r=e.url)!==null&&r!==void 0?r:e.to,ref:t})});Tf.RemixPolarisLink=W3;Object.defineProperty(Pf,"__esModule",{value:!0});var U3=I3,j3=$3,q3=Af,V3=Tf,zi=vn;function K3(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var z3=K3(j3);function G3(e){const{children:t,apiKey:r,i18n:n,isEmbeddedApp:a=!0,__APP_BRIDGE_URL:s=q3.APP_BRIDGE_URL,...i}=e;return zi.jsxs(zi.Fragment,{children:[a&&zi.jsx("script",{src:s,"data-api-key":r}),zi.jsx(U3.AppProvider,{...i,linkComponent:V3.RemixPolarisLink,i18n:n||z3.default,children:t})]})}Pf.AppProvider=G3;Object.defineProperty(XS,"__esModule",{value:!0});var J3=Pf,X3=XS.AppProvider=J3.AppProvider;const o7=()=>[{rel:"stylesheet",href:aC}];function l7(){const{apiKey:e}=Kb();return vn.jsxs(X3,{isEmbeddedApp:!0,apiKey:e,children:[vn.jsxs("ui-nav-menu",{children:[vn.jsx(Hu,{to:"/app",rel:"home",children:"Home"}),vn.jsx(Hu,{to:"/app/additional",children:"Additional page"})]}),vn.jsx(Vb,{})]})}function c7(){return Bv.boundary.error(zb())}export{c7 as ErrorBoundary,l7 as default,o7 as links};
